{"version":3,"sources":["webpack:///src/app/+hub/table/column-edit/column-edit-base.component.ts","webpack:///src/app/+hub/table/column-edit/column-edit-base.component.html","webpack:///src/app/+hub/table/table-edit/table-edit-rest/table-edit-input-column.component.ts","webpack:///src/app/+hub/table/table-edit/table-edit-rest/table-edit-input-column.component.html","webpack:///src/app/+hub/table/table-edit/table-edit-rest/table-edit-rest.component.html","webpack:///src/app/+hub/table/table-edit/table-edit-rest/table-edit-rest.component.ts","webpack:///src/app/+hub/table/table-edit/table-edit-file/table-edit-file.component.html","webpack:///src/app/+hub/table/table-edit/table-edit-file/table-edit-file.component.ts","webpack:///src/app/+hub/table/table-edit/table-edit-properties/table-edit-properties.component.html","webpack:///src/app/+hub/table/table-edit/table-edit-properties/table-edit-properties.component.ts","webpack:///src/app/+hub/table/column-edit/column-edit.component.ts","webpack:///src/app/+hub/table/column-edit/column-edit.component.html","webpack:///src/app/+hub/table/table-edit/table-edit-columns/table-edit-columns.component.ts","webpack:///src/app/+hub/table/table-edit/table-edit-columns/table-edit-columns.component.html","webpack:///src/app/+hub/table/table.shared.module.ts","webpack:///src/app/+hub/table/table-edit/column-edit-bulk/column-edit-bulk.component.ts","webpack:///src/app/+hub/table/table-edit/column-edit-bulk/column-edit-bulk.component.html"],"names":["ColumnEditBaseComponent","hubService","detailedView","typeCodes","deltaTypes","securityFlags","s","this","_hubCacheSubscription","getHubCacheObservable","subscribe","cache","hubCache","unsubscribe","TableEditInputColumnComponent","columnForm","$event","TableEditRestComponent","route","router","location","cancelToken","inputTable","formatTypes","eTypeCode","status","Loaded","tables","getConnectionTables","_currentFormSubscription","formService","getCurrentFormObservable","currentForm","inputColumns","controls","dexihTableColumns","filter","c","value","isInput","isValid","_restfulUrlSubscription","restfulUri","valueChanges","pipe","debounceTime","newValue","updateInputColumns","cancel","importTable","forEach","column","importCol","find","name","inputValue","push","importTables","then","result","columns","length","removeAt","tableColumn","catch","regExp","match","item","setValue","position","exec","col","logicalName","dataType","String","deltaType","NaturalKey","maxLength","description","allowDbNull","isUnique","sort","a","b","TableEditFileComponent","authService","isFile","hasBaseDropZoneOver","updatingTable","_subscription","e","addHubClientErrorMessage","files","doImport","event","srcElement","file","fileFormat","fileFormatKey","size","type","addHubErrorMessage","File","slice","form","FormData","append","hub","hubKey","toString","JsonNoNulls","connection","key","remoteAgent","getRemoteAgentCurrent","postFormRemoteGetKey","getRemoteData","importedTables","importedTable","entityStatus","lastStatus","message","updateColumns","reason","addHubMessage","tableColumnsForm","count","i","TableEditPropertiesComponent","isExpanded","entityType","canEdit","eTableType","eTableTypeItems","eConnectionCategory","eConnectionPurpose","runningSql","_columnData","BehaviorSubject","columnData","asObservable","combineLatest","data","params","formsService","getRemoteLibrariesObservable","mainForm","action","pageTitle","isLoaded","connections","dexihConnections","connectionKey","connectionReference","GetConnectionReference","_connectionSubscription","table","map","addHubSuccessMessage","join","sqlMessage","columnFormService","ColumnEditComponent","fb","isUpdated","changeColumn","tableForm","initializeForm","columnKey","originalColumn","navigateUp","newColumn","informationDialog","startForm","emit","columnsArray","markAsDirty","childColumns","apply","hasChanged","TableEditColumnsComponent","showBulkEdit","title","format","class","tooltip","footer","updateColumnData","_tableFormSubscription","tableData","parentColumnForm","columnGroup","nameClass","valid","dataTypeToString","logicalNameClass","defaultValue","columnValidation","getColumnValidation","columnValidationKey","isIncrementalUpdate","securityFlag","updateDate","next","deleteSelected","index","findIndex","navigate","relativeTo","parent","items","control","columnSortChange","editColumn","TableSharedModule","ngModule","ColumnEditBulkComponent","updated","properties","property","bulkColumn","subscription","columnsFormArray","getColumnForm","rank","precision","scale","isUnicode"],"mappings":"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","file":"x","sourcesContent":["import { Component, Input, Output, EventEmitter, OnInit, OnDestroy } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { HubCache, deltaTypes, securityFlags} from '../../hub.models';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubService } from '../../hub.service';\nimport { TypeCodes } from '../../hub.remote.models';\n\n@Component({\n    selector: 'column-edit-base',\n    templateUrl: './column-edit-base.component.html',\n})\nexport class ColumnEditBaseComponent implements OnInit, OnDestroy {\n    @Input() columnFormService: HubFormsService;\n    @Input() detailedView = true;\n\n    private _hubCacheSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    typeCodes = TypeCodes;\n    deltaTypes = deltaTypes;\n    securityFlags = securityFlags;\n\n    constructor(private hubService: HubService) { }\n\n    ngOnInit() {\n        this._hubCacheSubscription = this.hubService.getHubCacheObservable().subscribe(cache => {\n            this.hubCache = cache;\n        });\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheSubscription) { this._hubCacheSubscription.unsubscribe(); }\n    }\n}\n","<form *ngIf=\"columnFormService.currentForm\" [formGroup]=\"columnFormService.currentForm\">\n    <fieldset>\n        <div class=\"form-row\">\n            <section class=\"form-group col-md-6\">\n                <form-input label=\"Group\" formControlName=\"columnGroup\" placeholder=\"Enter a column group name\" iconClass=\"fa fa-list\"\n                    [errors]=\"columnFormService.formErrors.columnGroup\" note=\"The group column grouping, used to distinguish duplicate column names when applying to structured data (such as json).\">\n                </form-input>\n            </section>\n            <section class=\"form-group col-md-6\">\n                    <form-input label=\"Column Name\" formControlName=\"name\" placeholder=\"Enter the column name.\" iconClass=\"fa fa-list\"\n                        [errors]=\"columnFormService.formErrors.name\" note=\"The physical column name in the underlying table\">\n                    </form-input>\n                </section>\n            </div>\n\n        <section>\n            <form-checkbox label=\"Specify a different logical name\" formControlName=\"useLogical\">\n            </form-checkbox>\n        </section>\n        <section *ngIf=\"columnFormService.currentForm.value.useLogical\">\n            <form-input label=\"Logical Name\" formControlName=\"logicalName\" placeholder=\"Enter the logical name.\" iconClass=\"fa fa-list\"\n                [errors]=\"columnFormService.formErrors.logicalName\" note=\"The logical name is a short term to represent the column\">\n            </form-input>\n        </section>\n\n        <section *ngIf=\"detailedView\">\n            <form-textarea label=\"Description\" formControlName=\"description\" [showMarkdown]=\"true\" placeholder=\"Enter the description.\"\n                [errors]=\"columnFormService.formErrors.description\">\n            </form-textarea>\n        </section>\n\n        <div class=\"form-row\">\n            <section class=\"form-group col-md-4\">\n                <form-select label=\"Data Type\" formControlName=\"dataType\" [errors]=\"columnFormService.formErrors.dataType\" [items]=\"typeCodes\"\n                    itemKey=\"key\" itemName=\"name\">\n                </form-select>\n            </section>\n            <section class=\"form-group col-md-2\">\n                <form-input type=\"number\" label=\"Array Dimensions\" formControlName=\"rank\" [errors]=\"columnFormService.formErrors.rank\">\n                </form-input>\n            </section>\n            <section *ngIf=\"columnFormService.currentForm.value.isString\" class=\"form-group col-md-6\">\n                <form-input label=\"Max Length\" formControlName=\"maxLength\" placeholder=\"Max Length\" type=\"number\" [errors]=\"columnFormService.formErrors.maxLength\"\n                    note=\"Maximum string length (blank for unlimited)\">\n                </form-input>\n            </section>\n            <section *ngIf=\"columnFormService.currentForm.value.isNumber\" class=\"form-group col-md-3\">\n                <form-input label=\"Precision\" formControlName=\"precision\" placeholder=\"Precision\" type=\"number\" [errors]=\"columnFormService.formErrors.precision\">\n                </form-input>\n            </section>\n            <section *ngIf=\"columnFormService.currentForm.value.isNumber\" class=\"form-group col-md-3\">\n                <form-input label=\"Scale\" formControlName=\"scale\" placeholder=\"Scale\" type=\"number\" [errors]=\"columnFormService.formErrors.scale\">\n                </form-input>\n            </section>\n        </div>\n\n        <div *ngIf=\"detailedView\">\n\n            <section>\n                <form-checkbox label=\"Allow Nulls\" formControlName=\"allowDbNull\"></form-checkbox>\n            </section>\n\n            <section>\n                <form-checkbox label=\"Is Unicode\" formControlName=\"isUnicode\"></form-checkbox>\n            </section>\n\n            <section>\n                <form-checkbox label=\"Is an Input Column\" formControlName=\"isInput\"></form-checkbox>\n            </section>\n            <section>\n                <form-checkbox label=\"Is always incrementing column that can be used for change detection\" formControlName=\"isIncrementalUpdate\"></form-checkbox>\n            </section>\n\n            <div class=\"form-row\">\n                <section class=\"form-group col-md-6\">\n                    <form-select label=\"Delta Type\" formControlName=\"deltaType\" [errors]=\"columnFormService.formErrors.deltaType\" [items]=\"deltaTypes\"\n                        itemKey=\"key\" itemName=\"name\" note=\"How to treat the column when used to update target table.\">\n                    </form-select>\n                </section>\n                <section class=\"form-group col-md-6\">\n                    <form-select label=\"Security Flag\" formControlName=\"securityFlag\" [errors]=\"columnFormService.formErrors.securityFlag\" [items]=\"securityFlags\"\n                        itemKey=\"key\" itemName=\"name\" note=\"How to secure this column when reading data.\">\n                    </form-select>\n                </section>\n            </div>\n\n            <div class=\"form-row\">\n                <section class=\"form-group col-md-6\">\n                    <form-input label=\"Default Value\" formControlName=\"defaultValue\" placeholder=\"Default Value\" [errors]=\"columnFormService.formErrors.defaultValue\"\n                        note=\"Default value if unmapped or null.\">\n                    </form-input>\n                </section>\n                <section class=\"form-group col-md-6\" *ngIf=\"columnFormService.currentForm.controls.columnValidationKey\">\n                    <form-select label=\"Validation Rule\" formControlName=\"columnValidationKey\" [allowNullSelect]=\"true\" [items]=\"hubCache?.hub.dexihColumnValidations\"\n                        itemKey=\"key\" itemName=\"name\" note=\"Validation rule to apply.\">\n                        <columnValidation-edit-button [key]=\"columnFormService.currentForm.controls.columnValidationKey.value\"></columnValidation-edit-button>\n                    </form-select>\n                </section>\n            </div>\n        </div>\n    </fieldset>\n</form>\n","import { Component, Input, OnInit, OnChanges } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\n@Component({\n    selector: 'table-edit-input-column',\n    templateUrl: './table-edit-input-column.component.html'\n})\nexport class TableEditInputColumnComponent implements OnInit, OnChanges {\n    @Input() public columnForm: FormGroup = null;\n\n    constructor() {\n    }\n\n    ngOnInit() {\n    }\n\n    ngOnChanges() {\n    }\n\n    toggleInput($event) {\n    }\n}\n","<form [formGroup]=\"columnForm\" class=\"\">\n    <section>\n        <form-input \n        [label]=\"columnForm.value.name\" \n        formControlName=\"defaultValue\" \n        placeholder=\"Enter default value for the input column\" \n        iconClass=\"fa fa-dollar\">\n        </form-input>\n    </section>\n</form>","<div class=\"list-group-item list-group-item-info  rounded-0\">\n    <div class=\"d-flex flex-row\">\n        <h5>Web Service Properties</h5>\n    </div>\n</div>\n<div class=\"container mt-3 mb-3\">\n    <form *ngIf=\"formService?.currentForm\" [formGroup]=\"formService.currentForm\">\n\n        <section>\n            <form-input label=\"Web Service Uri String\" formControlName=\"restfulUri\" placeholder=\"Enter the uri.\" iconClass=\"fa fa-feed\"\n                [errors]=\"formService.formErrors.restfulUri\" [note]=\"'Specify the uri following the base path ' + connection.server +'.  To include input columns use {} in the uri definition (eg. GetWeather?City={CityName})'\">\n            </form-input>\n        </section>\n        <section>\n        </section>\n\n        <section>\n            <div *ngFor=\"let columnForm of inputColumns | isValidFilter\">\n                <table-edit-input-column [columnForm]=\"columnForm\"></table-edit-input-column>\n            </div>\n        </section>\n\n        <section>\n            <form-select label=\"Format Type\" formControlName=\"formatType\" [items]=\"formatTypes\" itemKey=\"key\" itemName=\"name\" iconClass=\"fa fa-database\"\n                note='The format of data.'>\n            </form-select>\n        </section>\n\n\n        <section *ngIf=\"formService.currentForm.value.formatType == eTypeCode.Text\">\n            <form-select label=\"File Format\" formControlName=\"fileFormatKey\" placeholder=\"File Format\" [errors]=\"formService.formErrors.fileFormatKey\"\n                [items]=\"hubCache.hub.dexihFileFormats\" itemKey=\"key\" itemName=\"name\" [enableFilter]=\"false\" note=\"Specify the file format to use, if not specified, defaults will be used.\">\n            </form-select>\n        </section>\n\n        <section *ngIf=\"formService.currentForm.value.formatType == eTypeCode.Json || formService.currentForm.value.formatType == eTypeCode.Xml\">\n            <form-input label=\"Optional: Web Service Row Path\" formControlName=\"rowPath\" placeholder=\"Enter the row path.\" iconClass=\"fa fa-feed\"\n                [errors]=\"formService.formErrors.rowPath\" note=\"Optional Json Path indicating where a row should be read from.\">\n            </form-input>\n        </section>\n\n        <section class=\"btn-toolbar\">\n            <dexih-button [busy]=\"formService.formSaving\" (click)=\"!formService.formSaving && importTable()\">Import </dexih-button>\n\n            <div *ngIf=\"formService.currentForm.value.formatType == eTypeCode.Json || formService.currentForm.value.formatType == eTypeCode.Xml\" class=\"input-group pl-1\">\n                <div  class=\"input-group-prepend\">\n                    <div class=\"input-group-text\">Max Import Levels</div>\n                </div>\n                <input class=\"form-control\" placeholder=\"Maximum levels...\" title=\"Maximum import levels\" formControlName=\"maxImportLevels\"\n                    style=\"width: 100%; max-width: 100px\">\n            </div>\n        </section>\n\n    </form>\n</div>","import { Component, OnInit, OnDestroy, Input, Output, EventEmitter } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HubService } from '../../../hub.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { Location } from '@angular/common';\nimport { FormControl, FormGroup, FormArray } from '@angular/forms';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { DexihConnection, DexihTable, eTypeCode, DexihTableColumn, eDeltaType } from '../../../../shared/shared.models';\nimport { HubCache, ConnectionTables, formatTypes, eCacheStatus } from '../../../hub.models';\nimport { CancelToken } from '../../../../+auth/auth.models';\n\n@Component({\n    selector: 'dexih-table-edit-rest',\n    templateUrl: './table-edit-rest.component.html'\n})\nexport class TableEditRestComponent implements OnInit, OnDestroy {\n    @Input() public formService: HubFormsService;\n    @Input() public connection: DexihConnection;\n\n    private _hubCacheSubscription: Subscription;\n    private _currentFormSubscription: Subscription;\n    private _restfulUrlSubscription: Subscription;\n    private cancelToken: CancelToken = new CancelToken();\n\n    private hubCache: HubCache;\n\n    tables: ConnectionTables[];\n    inputColumns: Array<FormGroup>;\n    inputTable: DexihTable = null;\n\n    formatTypes = formatTypes;\n    eTypeCode = eTypeCode;\n\n    constructor(private hubService: HubService, private route: ActivatedRoute, private router: Router, private location: Location) {\n    }\n\n    ngOnInit() {\n        // load the initial connection from the cache\n        this._hubCacheSubscription = this.hubService.getHubCacheObservable().subscribe(cache => {\n            if (cache && cache.status === eCacheStatus.Loaded) {\n\n                this.hubCache = cache;\n\n                this.tables = this.hubCache.getConnectionTables();\n\n            }\n        });\n\n        this._currentFormSubscription = this.formService.getCurrentFormObservable().subscribe( currentForm => {\n            // load the inputColumns\n            const columns = <FormArray>this.formService.currentForm.controls.dexihTableColumns;\n            this.inputColumns = <Array<FormGroup>>columns.controls.filter(c => c.value.isInput && c.value.isValid);\n\n            if (this._restfulUrlSubscription) { this._restfulUrlSubscription.unsubscribe(); }\n            this._restfulUrlSubscription = currentForm.controls.restfulUri.valueChanges\n                .pipe(debounceTime(500))\n                .subscribe(newValue => {\n                    this.updateInputColumns();\n                });\n        });\n\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheSubscription) { this._hubCacheSubscription.unsubscribe(); }\n        if (this._restfulUrlSubscription) { this._restfulUrlSubscription.unsubscribe(); }\n        if (this._currentFormSubscription) { this._currentFormSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    hasChanged($event) {\n        // this.tableChanged = true;\n    }\n\n    importTable() {\n        let importTable = this.formService.currentForm.value;\n        let inputColumns = this.formService.currentForm.value.dexihTableColumns.filter(c => c.isInput && c.isValid);\n\n        // merge any input columns with columns already in the table\n        if (inputColumns) {\n            inputColumns.forEach(column => {\n                let importCol = importTable.dexihTableColumns.find(c => c.name === column.name);\n                if (importCol) {\n                    importCol.inputValue = column.inputValue;\n                } else {\n                    importCol = column;\n                    importTable.dexihTableColumns.push(importCol);\n                }\n            });\n        }\n\n        this.hubService.importTables([importTable], false, this.cancelToken)\n            .then(result => {\n                const columns = <FormArray>this.formService.currentForm.controls.dexihTableColumns;\n                while (columns.controls.length > 0) {\n                    columns.removeAt(0);\n                }\n\n                result[0].dexihTableColumns.forEach(column => {\n                    columns.push(this.formService.tableColumn(result[0].dexihTableColumns, column));\n                });\n            }).catch();\n    }\n\n    updateInputColumns() {\n        // use the regex to extract items in uri between { }.  These will be input columns\n        const regExp = /\\{([^}]+)\\}/g;\n\n        const columns = <FormArray>this.formService.currentForm.controls.dexihTableColumns;\n        const inputColumns = <Array<FormGroup>>columns.controls.filter(c => c.value.isInput && c.value.isValid);\n\n        inputColumns.forEach(item => {\n            const columnForm = <FormGroup>item;\n            columnForm.controls.isValid.setValue(false);\n        });\n        let match;\n        let position = -1000;\n\n        while ((match = regExp.exec(this.formService.currentForm.value.restfulUri))) {\n            let columnForm = <FormGroup>columns.controls.find(c => c.value.name === match[1] && c.value.isInput);\n\n            if (!columnForm) {\n                let col = new DexihTableColumn();\n\n                // add the basic properties\n                col.name = match[1];\n                col.isInput = true;\n                col.logicalName = match[1];\n                col.dataType = eTypeCode.String;\n                col.deltaType = eDeltaType.NaturalKey;\n                col.maxLength = 1024;\n                col.position = position++;\n                col.description = 'Url Parameter ' + match[1];\n\n                col.allowDbNull = true;\n                col.isUnique = false;\n                col.isValid = true;\n\n                columnForm = this.formService.tableColumn(columns.value, col);\n                columns.push(columnForm);\n            } else {\n                columnForm.controls.isValid.setValue(true);\n            }\n        }\n\n        position = 1;\n        columns.controls.filter(column => column.value.isValid) .sort((a, b) => a.value.position - b.value.position).forEach(column => {\n            (<FormGroup>column).controls.position.setValue(position++);\n        });\n\n        this.inputColumns = <Array<FormGroup>>columns.controls.filter(c => c.value.isInput && c.value.isValid);\n    }\n}\n","<dexih-widget-section title='File Properties' [showExpandButton]=\"true\" [padding]=\"true\">\n\n    <form *ngIf=\"formService?.currentForm\" [formGroup]=\"formService.currentForm\">\n        <ng-template [ngIf]=\"isFile\">\n            <section>\n                <form-input label=\"Files Subdirectory\" formControlName=\"fileRootPath\" placeholder=\"Enter the file path name.\" iconClass=\"fa fa-file\"\n                    [errors]=\"formService.formErrors.fileRootPath\" [note]=\"'Specify the subdirectory.  This will be the connection directory (' + connection.server + ') plus the path specified.'\">\n                </form-input>\n            </section>\n\n            <section>\n                <form-input label=\"File Match Pattern\" formControlName=\"fileMatchPattern\" placeholder=\"Enter the file path.\" iconClass=\"fa fa-file\"\n                    [errors]=\"formService.formErrors.fileMatchPattern\" note=\"Specify the file pattern to use to match files when bulk uploading.  Patterns can include wildcards */?, leave blank for all files.\">\n                </form-input>\n            </section>\n\n            <section>\n                <form-checkbox label=\"Auto manage files\" formControlName=\"autoManageFiles\" note=\"Files loaded from the incoming directory, and moved to the processed or rejected directories when they are loaded by a datalink.  If not checked source files will be left untouched after a load.\">\n                </form-checkbox>\n            </section>\n\n            <div *ngIf=\"formService.currentForm.value.autoManageFiles \">\n\n                <section>\n                    <form-checkbox label=\"Specify custom file paths for auto-managed files\" formControlName=\"useCustomFilePaths\" [note]=\"'If custom paths are not specified files will be read/written to the directory: ' + connection.server + '/' + formService.currentForm.value.name + '/'\">\n                    </form-checkbox>\n                </section>\n\n                <div *ngIf=\"formService.currentForm.value.useCustomFilePaths\">\n\n                    <section>\n                        <form-input label=\"Incoming subdirectory\" formControlName=\"fileIncomingPath\" placeholder=\"Enter the file path.\" iconClass=\"fa fa-file\"\n                            [errors]=\"formService.formErrors.fileIncomingPath\" note=\"Specify the sub-directory for incoming files\">\n                        </form-input>\n                    </section>\n\n                    <section>\n                        <form-input label=\"Outgoing subdirectory\" formControlName=\"fileOutgoingPath\" placeholder=\"Enter the file path.\" iconClass=\"fa fa-file\"\n                            [errors]=\"formService.formErrors.fileOutgoingPath\" note=\"Specify the sub-directory for outgoing (written) files\">\n                        </form-input>\n                    </section>\n\n                    <section>\n                        <form-input label=\"Processed subdirectory\" formControlName=\"fileProcessedPath\" placeholder=\"Enter the file path.\" iconClass=\"fa fa-file\"\n                            [errors]=\"formService.formErrors.fileProcessedPath\" note=\"Specify the sub-directory for processed files\">\n                        </form-input>\n                    </section>\n                    <section>\n                        <form-input label=\"Rejected subdirectory\" formControlName=\"fileRejectedPath\" placeholder=\"Enter the file path.\" iconClass=\"fa fa-file\"\n                            [errors]=\"formService.formErrors.fileRejectedPath\" note=\"Specify the sub-directory for rejected files\">\n                        </form-input>\n                    </section>\n\n                </div>\n            </div>\n        </ng-template>\n        <section>\n            <form-select label=\"Format Type\" formControlName=\"formatType\" [items]=\"formatTypes\" itemKey=\"key\" itemName=\"name\" iconClass=\"fa fa-database\"\n                note='The format of data.'>\n            </form-select>\n        </section>\n\n        <section *ngIf=\"formService.currentForm.value.formatType == eTypeCode.Text\">    \n            <form-select label=\"File Format\" formControlName=\"fileFormatKey\" placeholder=\"File Format\" [errors]=\"formService.formErrors.fileFormatKey\"\n                [items]=\"hubCache.hub.dexihFileFormats\" itemKey=\"key\" itemName=\"name\" [enableFilter]=\"false\" note=\"Specify the file format to use, if not specified, a csv (command separated) format will be used.\"\n                [allowNullSelect]=\"true\" selectNullMessage=\"Use default (csv) format\">\n                <a routerLink=\"../fileFormat-new\">(<i class=\"fa fa-sticky-note-o\"></i> New Format )</a>\n            </form-select>\n        </section>\n\n        <section *ngIf=\"formService.currentForm.value.formatType == eTypeCode.Json || formService.currentForm.value.formatType == eTypeCode.Xml\">\n            <form-input label=\"Optional: Web Service Row Path\" formControlName=\"rowPath\" placeholder=\"Enter the row path.\" iconClass=\"fa fa-feed\"\n                [errors]=\"formService.formErrors.rowPath\" note=\"Optional Json Path indicating where a row should be read from.\">\n            </form-input>\n        </section>\n\n        <section>\n            <label class=\"label\">Add a sample file which will be used to determine column names.\n                <a  href=\"javascript:void(0)\" (click)=\"import()\">(<i class=\"fa fa-download\"></i> Import directly from source )</a>\n            </label>\n\n            <div class=\"well my-drop-zone\" dropZone [requireFiles]=\"true\" (dropFiles)=\"filesDrop($event)\" dropAllowedClass=\"nv-file-over\">\n                Drop Sample File Here\n                <div class=\"custom-file w-25 float-right\">\n                    <input type=\"file\" class=\"custom-file-input\" (change)=\"uploadFile($event)\" onclick=\"this.value=null\">\n                    <label class=\"custom-file-label\" for=\"inputGroupFile01\">Choose file</label>\n                </div>\n            </div>\n\n            <br/>\n            <dexih-button-refresh *ngIf=\"uploader?.queue?.length == 1\" (click)=\"importTable()\" text='Import Table Columns' [busy]=\"updatingTable\"></dexih-button-refresh>\n            <section>\n                <form-input label=\"Max Import Levels\" formControlName=\"maxImportLevels\" placeholder=\"Enter the maximum node levels to query the json structure.\" iconClass=\"fa fa-file\"\n                    [errors]=\"formService.formErrors.maxImportLevels\" note=\"Enter the maximum levels to query the json file.\">\n                </form-input>\n            </section>\n        </section>\n    </form>\n</dexih-widget-section>","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { AuthService } from '../../../../+auth/auth.service';\nimport { HubService } from '../../../hub.service';\nimport { Subscription} from 'rxjs';\nimport { Location } from '@angular/common';\nimport { FormArray } from '@angular/forms';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { DexihConnection, DexihFileFormat, eTypeCode, DexihTable, DexihTableColumn, ConnectionReference } from '../../../../shared/shared.models';\nimport { HubCache, formatTypes } from '../../../hub.models';\nimport { CancelToken } from '../../../../+auth/auth.models';\n\n@Component({\n\n    selector: 'dexih-table-edit-file',\n    templateUrl: './table-edit-file.component.html'\n})\nexport class TableEditFileComponent implements OnInit, OnDestroy {\n    @Input() public connection: DexihConnection;\n    @Input() public isFile = false;\n    @Input() public formService: HubFormsService;\n\n    public hasBaseDropZoneOver = false;\n\n    public updatingTable = false;\n\n    private _subscription: Subscription;\n    public hubCache: HubCache;\n    public fileFormats: DexihFileFormat[];\n\n    filesSubdirectory: string;\n\n    formatTypes = formatTypes;\n    eTypeCode = eTypeCode;\n\n    public cancelToken: CancelToken = new CancelToken();\n\n    constructor(private authService: AuthService,\n        private hubService: HubService) {\n\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = this.hubService.getHubCacheObservable().subscribe(result => {\n                this.hubCache = result;\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Table Edit File');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    public filesDrop(files: any) {\n        this.doImport(files[0]);\n    }\n\n    public uploadFile(event) {\n        let files = event.srcElement.files;\n        this.doImport(files[0]);\n    }\n\n    public doImport(file: File) {\n\n        if (this.formService.currentForm.value.fileFormat) {\n            this.formService.currentForm.value.fileFormatKey = this.formService.currentForm.value.fileFormat.fileFormatKey;\n        }\n\n        if (file.size > 100000) {\n            if (file.type === 'text/csv' || file.type === 'text/plain') {\n                file = new File([file.slice(0, 100000) ], file.name);\n            } else {\n                // tslint:disable-next-line:max-line-length\n                this.hubService.addHubErrorMessage(`The file size ${file.size}b exceeded the maximum of 100,000b.  Submit a smaller sample file, or a plain text file (which will be trimmed automatically) to proceed.`);\n                return;\n            }\n        }\n\n        const form: FormData = new FormData();\n        form.append('file', file, file.name);\n        form.append('hubKey', this.hubCache.hub.hubKey.toString());\n        form.append('table', this.authService.JsonNoNulls(this.formService.currentForm.value));\n        form.append('connectionKey', this.connection.key.toString());\n        form.append('save', 'false');\n\n        let remoteAgent = this.hubService.getRemoteAgentCurrent();\n\n        this.authService.postFormRemoteGetKey('/api/Hub/ImportFileFormat', form, remoteAgent, this.cancelToken)\n            .then(key => {\n                this.authService.getRemoteData<DexihTable[]>(remoteAgent, key, this.cancelToken, 'download').then(importedTables => {\n                    let importedTable = importedTables[0];\n                    if (importedTable.entityStatus.lastStatus.toString() === 'Error') {\n                        this.hubService.addHubErrorMessage(importedTable.entityStatus.message);\n                    }\n\n                    this.updateColumns(importedTable.dexihTableColumns);\n                });\n\n        }).catch(reason => {\n            if (reason) {\n                this.hubService.addHubMessage(reason);\n            } else {\n                // tslint:disable-next-line:max-line-length\n                this.hubService.addHubErrorMessage('The file upload failed.  This may be due to the file being too large, try making the sample file smaller (headings only) and upload again.')\n            }\n        });\n    }\n\n    import() {\n        this.hubService.importTables([this.formService.currentForm.value], false, this.cancelToken).then(tables => {\n            if (tables && tables.length > 0) {\n                this.updateColumns(tables[0].dexihTableColumns);\n            }\n        }).catch(reason => {\n            if (reason) {\n                this.hubService.addHubMessage(reason);\n            } else {\n                // tslint:disable-next-line:max-line-length\n                this.hubService.addHubErrorMessage('The file upload failed.  This may be due to the file being too large, try making the sample file smaller (headings only) and upload again.')\n            }\n        });\n    }\n\n    updateColumns(columns: DexihTableColumn[]) {\n        let tableColumnsForm = <FormArray>this.formService.currentForm.controls.dexihTableColumns;\n\n        // remove existing columns.\n        const count = tableColumnsForm.controls.length;\n        for (let i = 0; i <= count; i++) {\n            tableColumnsForm.removeAt(0);\n        }\n        columns.filter(c => c.isValid).forEach(column => {\n            tableColumnsForm.push(this.formService.tableColumn(tableColumnsForm.value, column));\n        });\n    }\n}\n","<dexih-widget-section title='Properties' [showExpandButton]=\"true\" [isExpanded]=\"isExpanded\" >\n        <form *ngIf=\"mainForm\" [formGroup]=\"mainForm\">\n            <fieldset>\n                <div class=\"form-row\">\n                    <section class=\"form-group col-md-4\">\n                        <form-select label=\"Connection\" formControlName=\"connectionKey\" [items]=\"connections\" itemKey=\"key\" itemName=\"name\"\n                            [errors]=\"formsService.formErrors.connectionKey\" iconClass=\"fa fa-database\" note='The connection for this table.'>\n                            <connection-edit-button [key]=\"mainForm.controls.connectionKey.value\"></connection-edit-button>\n                        </form-select>\n                    </section>\n\n                    <section class=\"form-group col-md-4\">\n                        <form-input [label]=\"entityType + ' Name'\" formControlName=\"name\" placeholder=\"Enter the physical name.\" iconClass=\"fa fa-list\"\n                            [errors]=\"formsService.formErrors.name\" note=\"The physical name of the underlying entity\">\n                        </form-input>\n                    </section>\n\n                    <section class=\"form-group col-md-4\" *ngIf=\"connectionReference?.connectionCategory == eConnectionCategory.SqlDatabase\">\n                        <form-input [label]=\"entityType + ' Schema'\" formControlName=\"schema\" placeholder=\"Enter the (database) schema name\" iconClass=\"fa fa-list\"\n                            [errors]=\"formsService.formErrors.schema\" note=\"The physical name of the database schema (if applicable).\">\n                        </form-input>\n                    </section>\n                </div>\n                \n                <section>\n                    <form-checkbox label=\"Specify a different logical name\" formControlName=\"useLogical\">\n                    </form-checkbox>\n                </section>\n\n                <section *ngIf=\"formsService.currentForm.value.useLogical\">\n                    <form-input label=\"Logical Name\" formControlName=\"logicalName\" placeholder=\"Enter the logical name.\" iconClass=\"fa fa-list\"\n                        [errors]=\"formsService.formErrors.logicalName\" note=\"The logical name is a short term to represent the table\">\n                    </form-input>\n                </section>\n\n                <section>\n                    <form-textarea label=\"Description\" formControlName=\"description\" [showMarkdown]=\"true\" placeholder=\"Enter the description.\"\n                        [errors]=\"formsService.formErrors.description\">\n                    </form-textarea>\n                </section>\n\n                <div *ngIf=\"connection?.purpose == eConnectionPurpose.Managed\" class=\"form-row\">\n                    <section class=\"form-group col-md-6\">\n                        <form-input label=\"Reject Table Name\" formControlName=\"rejectedTableName\" placeholder=\"Enter the rejected table name.\" iconClass=\"fa fa-list\"\n                            [errors]=\"formsService.formErrors.rejectedTableName\" note=\"The name of the table to send any records that could not be written to the primary table.\">\n                        </form-input>\n                    </section>\n                </div>\n\n                <section *ngIf=\"connectionReference?.connectionCategory == eConnectionCategory.SqlDatabase\">\n                    <form-select label=\"Table Type\" formControlName=\"tableType\" [errors]=\"formsService.formErrors.tableType\" [items]=\"eTableTypeItems\" itemKey=\"key\" itemName=\"name\">\n                    </form-select>\n                </section>\n\n                <section *ngIf=\"formsService.currentForm.controls.tableType.value === eTableType.Query\">\n                    <form-textarea label=\"Specify the sql query\" rows=\"15\" formControlName=\"queryString\" [hideToggle]=\"true\" placeholder=\"Sql Query\"\n                        [showPreview]=\"false\">\n                        <a *ngIf=\"runningSql == false\" href=\"javascript:void(0)\" (click)=\"test()\"> (\n                            <i class=\"fa fa-check-circle-o\"></i> Test) </a>\n                        <a *ngIf=\"runningSql == false\" href=\"javascript:void(0)\" (click)=\"reloadColumns()\"> (\n                            <i class=\"fa fa-refresh\"></i> Reload Columns) </a>\n                        <span *ngIf=\"runningSql == true\">\n                            <i class=\"fa fa-spin fa-refresh\"></i> (Busy... please wait) </span>\n                        <dexih-message [message]=\"sqlMessage\"></dexih-message>\n                    </form-textarea>\n                </section>\n\n                <section *ngIf=\"connectionReference?.connectionCategory == eConnectionCategory.Hub\">\n                    <form-input label=\"Source Connection Name\" formControlName=\"sourceConnectionName\" placeholder=\"Name of the source connection.\"\n                        iconClass=\"fa fa-list\" note=\"The name of the connection for this table in the source hub.\">\n                    </form-input>\n                </section>\n\n                <section>\n                    <form-checkbox label=\"Table is shared in the catalog to users with read access.\" formControlName=\"isShared\">\n                    </form-checkbox>\n                </section>\n\n            </fieldset>\n        </form>\n</dexih-widget-section>\n\n<div *ngIf=\"connectionReference?.connectionCategory == eConnectionCategory.WebService\">\n    <dexih-table-edit-rest [formService]='formsService' [connection]='connection' (onTableChanged)=\"onTableChanged($event)\"></dexih-table-edit-rest>\n</div>\n\n<div *ngIf=\"connection && ( connectionReference?.connectionCategory == eConnectionCategory.File || connection?.purpose !== eConnectionPurpose.Source )\">\n    <dexih-table-edit-file [formService]='formsService' [connection]='connection' [isFile]='connectionReference?.connectionCategory == eConnectionCategory.File' (onTableChanged)=\"onTableChanged($event)\"></dexih-table-edit-file>\n</div>\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { HubService } from '../../../hub.service';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { FormGroup, FormArray } from '@angular/forms';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { HubCache, deltaTypes, securityFlags } from '../../../hub.models';\nimport { eTableType, DexihConnection, ConnectionReference,\n    eConnectionCategory, DexihTableColumn, eConnectionPurpose, DexihTable, eTableTypeItems } from '../../../../shared/shared.models';\nimport { TypeCodes } from '../../../hub.remote.models';\nimport { CancelToken, Message } from '../../../../+auth/auth.models';\n\n@Component({\n\n    selector: 'dexih-table-edit-properties',\n    templateUrl: './table-edit-properties.component.html',\n})\nexport class TableEditPropertiesComponent implements OnInit, OnDestroy {\n    @Input() public formsService: HubFormsService;\n    @Input() public isExpanded = true;\n\n    // private connection: DexihConnection;\n\n    private _subscription: Subscription;\n    private _connectionSubscription: Subscription;\n    private cancelToken: CancelToken = new CancelToken();\n\n    public entityType = 'Table';\n\n    public canEdit = false;\n    public tableKey: number;\n\n    private hubCache: HubCache;\n    public action: string; // new or edit\n    public pageTitle: string;\n\n    public mainForm: FormGroup;\n\n    typeCodes = TypeCodes;\n    deltaTypes = deltaTypes;\n    securityFlags = securityFlags;\n    eTableType = eTableType;\n    eTableTypeItems = eTableTypeItems;\n\n    public sqlMessage: Message;\n\n    public connections: DexihConnection[];\n    public connection: DexihConnection;\n    public connectionReference: ConnectionReference;\n    eConnectionCategory = eConnectionCategory;\n\n    inputColumns: Array<DexihTableColumn>;\n\n    eConnectionPurpose = eConnectionPurpose;\n\n    public runningSql = false;\n\n    private _columnData = new BehaviorSubject<Array<DexihTableColumn>>(null);\n    columnData: Observable<Array<DexihTableColumn>> = this._columnData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private route: ActivatedRoute    ) {\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n                this.formsService.getCurrentFormObservable(),\n                this.hubService.getRemoteLibrariesObservable(), // included to ensure correct connection reference when refreshing page.\n            ).subscribe(async result => {\n                let data = result[0];\n                this.hubCache = result[2];\n                this.mainForm = result[3];\n\n                this.action = data['action'];\n                this.pageTitle = data['pageTitle'];\n\n                if (this.hubCache && this.hubCache.isLoaded() && this.mainForm ) {\n                    this.connections = this.hubCache.hub.dexihConnections;\n                    this.connection = this.connections.find(c => c.key === this.mainForm.controls.connectionKey.value);\n                    this.connectionReference = await this.hubService.GetConnectionReference(this.connection);\n\n                    if (this._connectionSubscription) { this._connectionSubscription.unsubscribe(); }\n                    this._connectionSubscription = this.mainForm.controls.connectionKey.valueChanges.subscribe(async (connectionKey) => {\n                        this.connection = this.connections.find(c => c.key === connectionKey);\n                        this.connectionReference = await this.hubService.GetConnectionReference(this.connection);\n                    });\n                }\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Table edit properties');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._connectionSubscription) { this._connectionSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    reloadColumns() {\n        this.runningSql = true;\n        this.hubService.importTables([this.mainForm.value], false, this.cancelToken).then(tables => {\n            if (!tables || tables.length === 0) { return; }\n\n            const table: DexihTable = tables[0];\n            const tableColumnsForm = <FormArray>this.formsService.currentForm.controls.dexihTableColumns;\n            while (tableColumnsForm.controls.length > 0) {\n                tableColumnsForm.removeAt(0);\n            }\n            table.dexihTableColumns.filter(c => c.isValid).forEach(column => {\n                tableColumnsForm.push(this.formsService.tableColumn(table.dexihTableColumns, column));\n            });\n            this.runningSql = false;\n        }).catch(() => this.runningSql = false);\n    }\n\n    test() {\n        this.runningSql = true;\n        this.hubService.doImport([this.mainForm.value], false, this.cancelToken).then(tables => {\n            let columns = tables[0].dexihTableColumns.map(c => c.name);\n            this.hubService.addHubSuccessMessage('The query was successful, and returned the following columns.  ' + columns.join(', '));\n            this.runningSql = false;\n        }).catch((reason) => {\n            this.runningSql = false;\n            this.sqlMessage = reason;\n            this.hubService.addHubMessage(reason);\n        });\n    }\n}\n","import { Component, OnInit, OnChanges, OnDestroy, Input, Output, EventEmitter } from '@angular/core';\nimport { HubCache, eCacheStatus,\n     } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../../hub.service';\nimport { FormBuilder, FormGroup, FormArray } from '@angular/forms';\nimport { Subscription} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { eDeltaType, DexihTableColumn, eTypeCode } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'column-edit',\n    templateUrl: './column-edit.component.html',\n})\nexport class ColumnEditComponent implements OnInit, OnChanges, OnDestroy {\n    @Input() tableForm: FormGroup;\n    @Input() columnKey: number;\n    @Input() deltaType: eDeltaType;\n    @Input() detailedView = true;\n    @Output() isUpdated = new EventEmitter<boolean>();\n    @Output() changeColumn = new EventEmitter<number>();\n\n    private _hubCacheSubscription: Subscription;\n\n    private hubCache: HubCache;\n    public pageTitle: string;\n    public action: string;\n\n    public errorMessage: string;\n    public successMessage: string;\n    public savingTable: boolean;\n\n    public newColumnForm: FormGroup;\n    private originalColumn: DexihTableColumn;\n\n    public columns: any[];\n\n    public eTypeCode = eTypeCode;\n\n\n    public columnFormService: HubFormsService;\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        fb: FormBuilder) {\n\n        // create a separate formService instance to manage the copied form\n        this.columnFormService = new HubFormsService(fb, hubService, authService);\n    }\n\n    ngOnInit() {\n        this._hubCacheSubscription = this.hubService.getHubCacheObservable().subscribe(hubCache => {\n            if (hubCache.status === eCacheStatus.Loaded) {\n                this.hubCache = hubCache;\n\n                if (!this.hubCache.isLoaded() || !this.tableForm) { return; }\n\n                this.initializeForm();\n\n                this.updateColumns();\n            }\n        });\n    }\n\n    ngOnChanges() {\n        if (this.tableForm && this.hubCache) {\n            this.initializeForm();\n            this.updateColumns();\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheSubscription) { this._hubCacheSubscription.unsubscribe(); }\n    }\n\n    initializeForm() {\n        let columnForm: FormGroup;\n        let columns = this.tableForm.value.dexihTableColumns;\n\n        if (this.columnKey) {\n            if (this.tableForm) {\n                this.originalColumn = columns.find(c => c.key === this.columnKey);\n                if (!this.originalColumn) {\n                    this.authService.navigateUp();\n                    return;\n                }\n                columnForm = this.columnFormService.tableColumn(columns, this.originalColumn);\n            }\n        } else {\n            let column = this.hubCache.newColumn(this.tableForm.value, this.deltaType);\n            if (column) {\n                columnForm = this.columnFormService.tableColumn(columns, column);\n            } else {\n                this.authService.informationDialog('Column not added.',\n                `The column with delta type ${this.deltaType} could not be inserted into the current table.`);\n            }\n        }\n        this.columnFormService.startForm(columnForm);\n    }\n\n    cancel() {\n        this.isUpdated.emit(false);\n    }\n\n    apply() {\n        const columnForm = this.columnFormService.currentForm;\n        const columnsArray = <FormArray>this.tableForm.controls.dexihTableColumns;\n\n        if (!this.originalColumn) {\n        columnsArray.push(columnForm);\n        } else {\n        const originalColumn = columnsArray.controls.find(c => c.value.key === columnForm.value.key);\n        originalColumn.setValue(columnForm.value);\n        }\n\n        this.tableForm.markAsDirty();\n    }\n\n    updateColumns() {\n        if (this.tableForm && this.originalColumn) {\n            this.columns = (<DexihTableColumn[]> this.originalColumn.childColumns)\n            .sort((a, b) => a.position - b.position)\n        }\n    }\n\n    navigateToColumn(col: DexihTableColumn) {\n        this.apply();\n        this.changeColumn.emit(col.key);\n    }\n\n    applyExit() {\n        if (this.columnFormService.hasChanged) {\n            this.apply();\n            this.isUpdated.emit(true);\n        }\n    }\n}\n","<dexih-widget-section title='Edit Column' [showExpandButton]=\"true\">\n<ng-template #header>\n        <dexih-invalid-form-details class=\"mr-1\" (click)=\"columnFormService.showErrors()\" [control]=\"columnFormService.currentForm\"></dexih-invalid-form-details>\n        <dexih-button-dropdown class=\"mr-1\" buttonClass=\"btn-primary\" text=\"Column\">\n            <li *ngFor=\"let col of columns\">\n                <a class=\"dropdown-item\" (click)=\"navigateToColumn(col)\">{{col.columnGroup ? col.columnGroup + \".\" : \"\"}}{{col.name}}</a>\n            </li>\n        </dexih-button-dropdown>\n        <dexih-button-apply class=\"mr-1\" [disabled]=\"!columnFormService?.hasChanged\" (click)=\"applyExit()\"></dexih-button-apply>\n        <dexih-button-cancel (click)=\"cancel()\"></dexih-button-cancel>\n</ng-template>\n\n<column-edit-base [columnFormService]=\"columnFormService\" [detailedView]=\"detailedView\"></column-edit-base>\n</dexih-widget-section>\n\n<table-edit-columns *ngIf=\"columnFormService?.currentForm?.controls.dataType.value === eTypeCode.Node\" [tableForm]='tableForm' [parentColumnForm]=\"columnFormService.currentForm\"></table-edit-columns>\n","import { Component, OnInit, OnChanges, OnDestroy, Input } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HubService } from '../../../hub.service';\nimport { Subscription, Observable, BehaviorSubject} from 'rxjs';\nimport { FormGroup, FormArray } from '@angular/forms';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { HubCache, deltaTypes, securityFlags, eCacheStatus } from '../../../hub.models';\nimport { DexihTableColumn, eConnectionPurpose } from '../../../../shared/shared.models';\n\n@Component({\n\n    selector: 'table-edit-columns',\n    templateUrl: './table-edit-columns.component.html',\n})\nexport class TableEditColumnsComponent implements OnInit, OnChanges, OnDestroy {\n    @Input() tableForm: FormGroup;\n    @Input() parentColumnForm: FormGroup;\n\n    private _hubCacheSubscription: Subscription;\n    private _tableFormSubscription: Subscription;\n\n    public entityType = 'Table';\n\n    public canEdit = false;\n    public tableKey: number;\n\n    private hubCache: HubCache;\n    public action: string; // new or edit\n    public pageTitle: string;\n\n    public mainForm: FormGroup;\n\n    private deltaTypes = deltaTypes;\n    private securityFlags = securityFlags;\n    public showBulkEdit = false;\n\n    inputColumns: Array<DexihTableColumn>;\n\n    eConnectionPurpose = eConnectionPurpose;\n\n    columns = [\n        { name: 'position', title: '#', format: ''},\n        { name: 'name', title: 'Column Name', format: '', class: 'nameClass', tooltip: 'description'},\n        { name: 'logicalName', title: 'Logical Name', format: 'Md', footer: 'description', class: 'logicalNameClass'},\n        { name: 'isInput', title: 'Input?', format: 'Boolean'},\n        { name: 'dataType', title: 'Data Type', format: ''},\n        { name: 'allowDbNull', title: 'Null?', format: 'Boolean'},\n        { name: 'deltaType', title: 'Delta Type', format: ''},\n        { name: 'defaultValue', title: 'Default Value', format: ''},\n        { name: 'columnValidation', title: 'Column Validation', format: ''},\n        { name: 'isIncrementalUpdate', title: 'Is Incremental', format: 'Boolean'},\n        { name: 'securityFlag', title: 'Security Flag', format: ''},\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar'},\n    ];\n\n    private _columnData = new BehaviorSubject<Array<DexihTableColumn>>(null);\n    columnData: Observable<Array<DexihTableColumn>> = this._columnData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        public formsService: HubFormsService,\n        private route: ActivatedRoute,\n        private router: Router) {\n    }\n\n    ngOnInit() {\n        // load the initial connection from the cache\n        this._hubCacheSubscription = this.hubService.getHubCacheObservable().subscribe(cache => {\n            if (cache && cache.status === eCacheStatus.Loaded) {\n                this.hubCache = cache;\n                this.updateColumnData();\n            }\n        });\n    }\n\n    ngOnChanges() {\n        if (this._tableFormSubscription) { this._tableFormSubscription.unsubscribe(); }\n        if (this.formsService.currentForm) {\n            this._tableFormSubscription = this.formsService.currentForm.valueChanges.subscribe(() => this.updateColumnData());\n        }\n        this.updateColumnData();\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheSubscription) { this._hubCacheSubscription.unsubscribe(); }\n        if (this._tableFormSubscription) { this._tableFormSubscription.unsubscribe(); }\n    }\n\n    updateColumnData() {\n        if (this.hubCache && this.formsService.currentForm) {\n            let tableData = [];\n\n            let columns: FormArray;\n\n            if (this.parentColumnForm) {\n                columns = <FormArray>this.parentColumnForm.controls.childColumns;\n            } else {\n                columns = <FormArray>this.formsService.currentForm.controls.dexihTableColumns;\n            }\n\n            columns.controls\n                .filter(c => c.value.isValid)\n                .sort((a, b) => a.value.position - b.value.position)\n                .forEach(column => {\n                    let columnForm = <FormGroup>column;\n                    tableData.push({\n                        key: column.value.key,\n                        position: column.value.position,\n                        name: (column.value.columnGroup ? column.value.columnGroup + '.' : '') + column.value.name,\n                        nameClass: (columnForm.controls.name.valid ? '' : 'dexih-state-error'),\n                        description: column.value.description,\n                        isInput: column.value.isInput,\n                        dataType: this.hubCache.dataTypeToString(column.value),\n                        allowDbNull: column.value.allowDbNull,\n                        logicalName: column.value.logicalName,\n                        logicalNameClass: (columnForm.controls.logicalName.valid ? '' : 'dexih-error-icon'),\n                        deltaType: this.deltaTypes.find(c => c.key === column.value.deltaType).name,\n                        defaultValue: column.value.defaultValue,\n                        columnValidation: this.hubCache.getColumnValidation(column.value.columnValidationKey).name,\n                        isIncrementalUpdate: column.value.isIncrementalUpdate,\n                        securityFlag: this.securityFlags.find(c => c.key === column.value.securityFlag).name,\n                        updateDate: column.value.updateDate,\n                    });\n                });\n            this._columnData.next(tableData);\n        } else {\n            this._columnData.next(null);\n        }\n    }\n\n  deleteColumn(column: DexihTableColumn) {\n      this.deleteSelected([column]);\n  }\n\n  deleteSelected(columns: Array<DexihTableColumn>) {\n      let columnsArray = <FormArray>this.formsService.currentForm.controls.dexihTableColumns;\n\n    columns.forEach(column => {\n        let index = columnsArray.controls.findIndex(c => c.value.key === column.key);\n        columnsArray.removeAt(index);\n    });\n    // this._columnData.next(this.table.dexihTableColumns.filter(c => c.isValid));\n  }\n\n  newColumn() {\n    this.router.navigate(['column'], { relativeTo: this.route.parent });\n  }\n\n  editColumn(column: DexihTableColumn) {\n    this.router.navigate(['column', column.key], { relativeTo: this.route.parent });\n  }\n\n  columnSortChange(items: Array<any>) {\n        let columnsArray = <FormArray>this.formsService.currentForm.controls.dexihTableColumns;\n      let position = 1;\n      items.forEach(c => {\n        let column = <FormGroup>columnsArray.controls.find(control => control.value.key === c.key);\n        column.controls.position.setValue(position++);\n      });\n\n      this.updateColumnData();\n  }\n}\n","<dexih-widget-section title='Columns' [showExpandButton]=\"true\" [padding]=\"false\">\n    <dexih-table [enableMultiSelect]=\"true\" [enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\" [enableManualSort]=\"true\" (onSortChanged)=\"columnSortChange($event)\"\n        sortColumn=\"position\" [columns]=\"columns\" [dataObservable]=\"columnData\" (rowClick)=\"editColumn($event)\">\n        <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n            <dexih-button-delete (click)=\"deleteSelected(items)\" title=\"Delete selected columns\" class=\"mr-1\"></dexih-button-delete>\n            <dexih-button iconClass=\"fa fa-th-list\" class=\"mr-1\" (click)=\"showBulkEdit=!showBulkEdit\">\n                {{showBulkEdit ? 'Hide Bulk Edit' : 'Show Bulk Edit'}} </dexih-button>\n        </ng-template>\n\n        <ng-template #tableHeader let-items=\"items\">\n            <column-edit-bulk *ngIf=\"formsService.currentForm && showBulkEdit && items.length > 0\" [columns]=\"items\"\n                [columnsFormArray]=\"formsService.currentForm.controls.dexihTableColumns\" (updated)=\"showBulkEdit = false\" class=\"mr-1\"></column-edit-bulk>\n        </ng-template>\n\n        <ng-template #actions select=\"actionsTemplate\" let-items=\"items\">\n            <dexih-button-new (click)=\"newColumn()\" title=\"Create a new column\" class=\"mr-1\"></dexih-button-new>\n        </ng-template>\n\n        <ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\" class=\"mr-1\">\n            <dexih-button-edit (click)=\"editColumn(item)\" title=\"Edit selected column\" class=\"mr-1\"></dexih-button-edit>\n        </ng-template>\n\n    </dexih-table>\n\n</dexih-widget-section>","\nimport { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SharedModule } from '../../shared/shared.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { TableEditPropertiesComponent } from './table-edit/table-edit-properties/table-edit-properties.component';\nimport { TableEditColumnsComponent } from './table-edit//table-edit-columns/table-edit-columns.component';\nimport { TableEditFileComponent } from './table-edit/table-edit-file/table-edit-file.component';\nimport { TableEditRestComponent } from './table-edit/table-edit-rest/table-edit-rest.component';\nimport { TableEditInputColumnComponent } from './table-edit//table-edit-rest/table-edit-input-column.component';\nimport { HubSharedModule } from '../hub.shared.module';\nimport { TableEditPreviewDataComponent } from './table-edit//table-edit-preview-data';\nimport { ColumnEditComponent, ColumnEditBaseComponent } from './column-edit';\nimport { ColumnEditBulkComponent } from './table-edit/column-edit-bulk/column-edit-bulk.component';\n@NgModule({\n    imports: [\n        SharedModule,\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        HubSharedModule\n    ],\n    declarations: [\n      TableEditPropertiesComponent,\n      TableEditColumnsComponent,\n      TableEditFileComponent,\n      TableEditRestComponent,\n      TableEditInputColumnComponent,\n      TableEditPreviewDataComponent,\n      ColumnEditComponent, ColumnEditBaseComponent,\n      ColumnEditBulkComponent\n    ],\n    exports: [\n      TableEditPropertiesComponent,\n      TableEditColumnsComponent,\n      TableEditFileComponent,\n      TableEditRestComponent,\n      TableEditInputColumnComponent,\n      TableEditPreviewDataComponent,\n      ColumnEditComponent, ColumnEditBaseComponent,\n      ColumnEditBulkComponent\n    ]\n})\nexport class TableSharedModule {\n    static forRoot(): ModuleWithProviders<TableSharedModule> {\n        return {\n            ngModule: TableSharedModule,\n        };\n    }\n}\n","import { Component, OnInit, Input, Output, EventEmitter, OnDestroy } from '@angular/core';\nimport { FormGroup, FormArray } from '@angular/forms';\nimport {  deltaTypes, securityFlags, HubCache } from '../../../hub.models';\nimport { FormsService } from '../../../../shared/forms/forms.service';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { TypeCodes } from '../../../hub.remote.models';\nimport { DexihTableColumn } from '../../../../shared/shared.models';\nimport { HubService } from '../../../hub.service';\nimport { Subscription } from 'rxjs';\n\n@Component({\n    selector: 'column-edit-bulk',\n    templateUrl: 'column-edit-bulk.component.html'\n})\n\nexport class ColumnEditBulkComponent implements OnInit, OnDestroy {\n    @Input() columns: DexihTableColumn[];\n    @Input() columnsFormArray: FormArray;\n\n    @Output() updated = new EventEmitter();\n\n    subscription: Subscription;\n\n    public properties = [\n        {name: 'Group Name', property: 'group'},\n        {name: 'Data Type', property: 'dataType'},\n        {name: 'Delta Type', property: 'deltaType'},\n        {name: 'Security Flag', property: 'securityFlag'},\n        {name: 'Default Value', property: 'defaultValue'},\n        {name: 'Validation Rule', property: 'validationRule'},\n        {name: 'Allow DbNull', property: 'allowDbNull'},\n        {name: 'Is Input', property: 'isInput'},\n        {name: 'Is Unicode', property: 'isUnicode'},\n    ];\n\n    hubCache: HubCache;\n    property: string;\n    bulkColumn: FormGroup;\n    typeCodes = TypeCodes;\n    deltaTypes = deltaTypes;\n    securityFlags = securityFlags;\n\n    constructor(private hubService: HubService,\n        private formsService: HubFormsService) { }\n\n    ngOnInit() {\n        this.bulkColumn = this.formsService.tableColumn([], new DexihTableColumn());\n\n        this.subscription = this.hubService.getHubCacheObservable().subscribe(hubCache => {\n            this.hubCache = hubCache;\n        });\n    }\n\n    ngOnDestroy() {\n        if (this.subscription) {this.subscription.unsubscribe(); }\n    }\n\n    getColumnForm(column: DexihTableColumn): FormGroup {\n        return <FormGroup> this.columnsFormArray.controls.find((c: FormGroup) => c.controls.key.value === column.key);\n    }\n\n    applyBulkEdit() {\n\n        let bulkColumn = <DexihTableColumn> this.bulkColumn.value;\n        this.columns.forEach(column => {\n            let columnForm = this.getColumnForm(column);\n            if (!columnForm) { return; }\n\n            switch (this.property) {\n                case 'group':\n                    columnForm.controls.columnGroup.setValue(bulkColumn.columnGroup);\n                    break;\n                case 'dataType':\n                    columnForm.controls.dataType.setValue(bulkColumn.dataType);\n                    columnForm.controls.maxLength.setValue(bulkColumn.maxLength);\n                    columnForm.controls.rank.setValue(bulkColumn.rank);\n                    columnForm.controls.precision.setValue(bulkColumn.precision);\n                    columnForm.controls.scale.setValue(bulkColumn.scale);\n                    break;\n                case 'deltaType':\n                    columnForm.controls.deltaType.setValue(bulkColumn.deltaType);\n                    break;\n                case 'securityFlag':\n                    columnForm.controls.securityFlag.setValue(bulkColumn.securityFlag);\n                    break;\n                case 'defaultValue':\n                    columnForm.controls.defaultValue.setValue(bulkColumn.defaultValue);\n                    break;\n                case 'validationRule':\n                    columnForm.controls.columnValidationKey.setValue(bulkColumn.columnValidationKey);\n                    break;\n                case 'allowDbNull':\n                    columnForm.controls.allowDbNull.setValue(bulkColumn.allowDbNull);\n                    break;\n                case 'isUnicode':\n                    columnForm.controls.isUnicode.setValue(bulkColumn.isUnicode);\n                    break;\n                case 'isInput':\n                    columnForm.controls.isInput.setValue(bulkColumn.isInput);\n                    break;\n            }\n        });\n        this.updated.emit();\n      }\n\n      cancel() {\n          this.updated.emit();\n      }\n\n      setAllowDbNull(value: boolean) {\n        this.columns.forEach(column => {\n            let columnForm = this.getColumnForm(column);\n            columnForm.controls.allowDbNull.setValue(value);\n        });\n      }\n\n      setIsInput(value: boolean) {\n        this.columns.forEach(column  => {\n            let columnForm = this.getColumnForm(column);\n            columnForm.controls.isInput.setValue(value);\n        });\n      }\n\n      setIsUnicode(value: boolean) {\n        this.columns.forEach(column  => {\n            let columnForm = this.getColumnForm(column);\n            columnForm.controls.isUnicode.setValue(value);\n        });\n      }\n}\n","<dexih-widget title=\"Update columns\" headerClass=\"text-white bg-primary\">\n<form [formGroup]=\"bulkColumn\">\n    <section class=\"form-group col-md-4\">\n        <form-select label=\"Property\" [(ngModel)]=\"property\" [ngModelOptions]=\"{standalone: true}\" [items]=\"properties\" itemKey=\"property\"\n            itemName=\"name\">\n        </form-select>\n    </section>\n    <div *ngIf=\"property=='dataType'\">\n        <section class=\"form-group col-md-4\">\n            <form-select label=\"Data Type\" formControlName=\"dataType\" [items]=\"typeCodes\" itemKey=\"key\"\n                itemName=\"name\">\n            </form-select>\n        </section>\n        <section class=\"form-group col-md-2\">\n            <form-input type=\"number\" label=\"Array Dimensions\" formControlName=\"rank\">\n            </form-input>\n        </section>\n        <section *ngIf=\"bulkColumn.value.isString\" class=\"form-group col-md-6\">\n            <form-input label=\"Max Length\" formControlName=\"maxLength\" placeholder=\"Max Length\"\n                type=\"number\" note=\"Maximum string length (blank for unlimited)\">\n            </form-input>\n        </section>\n        <section *ngIf=\"bulkColumn.value.isNumber\" class=\"form-group col-md-3\">\n            <form-input label=\"Precision\" formControlName=\"precision\" placeholder=\"Precision\"\n                type=\"number\">\n            </form-input>\n        </section>\n        <section *ngIf=\"bulkColumn.value.isNumber\" class=\"form-group col-md-3\">\n            <form-input label=\"Scale\" formControlName=\"scale\" placeholder=\"Scale\" type=\"number\">\n            </form-input>\n        </section>\n    </div>\n\n    <div *ngIf=\"property=='group'\" >\n            <section class=\"form-group col-md-6\">\n        <form-input label=\"Group\" formControlName=\"columnGroup\" placeholder=\"Enter a column group name\"\n            iconClass=\"fa fa-list\"\n            note=\"The group column grouping, used to distinguish duplicate column names when applying to structured data (such as json).\">\n        </form-input>\n            </section>\n    </div>\n    <div *ngIf=\"property=='securityFlag'\" >\n        <section class=\"form-group col-md-6\">\n            <form-select label=\"Security Flag\" formControlName=\"securityFlag\" [items]=\"securityFlags\"\n                itemKey=\"key\" itemName=\"name\" note=\"How to secure this column when reading data.\">\n            </form-select>\n        </section>\n    </div>\n    <div *ngIf=\"property=='deltaType'\" >\n        <section class=\"form-group col-md-6\">\n            <form-select label=\"Delta Type\" formControlName=\"deltaType\" [items]=\"deltaTypes\"\n                itemKey=\"key\" itemName=\"name\"\n                note=\"How to treat the column when used to update target table.\">\n            </form-select>\n        </section>\n    </div>\n    <div *ngIf=\"property=='defaultValue'\" >\n        <section class=\"form-group col-md-6\">\n            <form-input label=\"Default Value\" formControlName=\"defaultValue\" placeholder=\"Default Value\"\n                note=\"Default value if unmapped or null.\">\n            </form-input>\n        </section>\n    </div>\n    <div *ngIf=\"property=='validationRule'\" >\n        <section class=\"form-group col-md-6\">\n            <form-select label=\"Validation Rule\" formControlName=\"columnValidationKey\"\n                [allowNullSelect]=\"true\" [items]=\"hubCache?.hub.dexihColumnValidations\" itemKey=\"key\"\n                itemName=\"name\" note=\"Validation rule to apply.\">\n                <columnValidation-edit-button [key]=\"bulkColumn.controls.columnValidationKey.value\"></columnValidation-edit-button>\n            </form-select>\n        </section>\n    </div>\n    <div *ngIf=\"property=='allowDbNull'\">\n        <section class=\"form-group col-md-6\">\n            <form-checkbox label=\"Allow Nulls\" formControlName=\"allowDbNull\"></form-checkbox>\n        </section>\n    </div>\n    <div *ngIf=\"property=='isInput'\">\n        <section class=\"form-group col-md-6\">\n            <form-checkbox label=\"Is an Input Column\" formControlName=\"isInput\"></form-checkbox>\n        </section>\n    </div>\n    <div *ngIf=\"property=='isUnicode'\">\n        <section class=\"form-group col-md-6\">\n            <form-checkbox label=\"Is Unicode\" formControlName=\"isUnicode\"></form-checkbox>\n        </section>\n    </div>\n</form>\n    <ng-template #footer>\n        <dexih-button-apply class=\"mr-1\" (click)=\"applyBulkEdit(items)\"></dexih-button-apply>\n        <dexih-button-cancel class=\"mr-1\" (click)=\"cancel()\"></dexih-button-cancel>\n    </ng-template>\n</dexih-widget>\n\n\n\n\n\n"]}