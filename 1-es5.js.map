{"version":3,"sources":["webpack:///src/app/+hub/table/table-edit/table-column-edit/table-column-edit.component.ts","webpack:///src/app/+hub/table/table-edit/table-column-edit/table-column-edit.component.html","webpack:///src/app/+hub/table/table-edit/table-edit-main.component.ts","webpack:///src/app/+hub/table/table-edit/table-edit-main.component.html","webpack:///src/app/+hub/table/table-edit/table-edit.component.ts","webpack:///src/app/+hub/table/table-edit/table-edit.component.html","webpack:///src/app/+hub/table/table-edit/table-edit.module.ts","webpack:///src/app/+hub/table/table-edit/table-edit.routing.ts"],"names":["TableColumnEditComponent","authService","hubService","formService","route","router","detailedView","_subscription","data","params","queryParams","getCurrentFormObservable","subscribe","result","tableForm","pageTitle","action","columnKey","e","addHubClientErrorMessage","unsubscribe","navigateUp","navigate","relativeTo","parent","isUpdated","changeColumn","selector","templateUrl","TableEditMainComponent","formsService","TableEditComponent","eConnectionCategory","cancelToken","isLoaded","getHubCacheObservable","hubCache","status","Loaded","hasChanged","confirmDialog","then","confirm","load","reason","_hubCacheChangeSubscription","_formChangeSubscription","cancel","ngOnDestroy","tableKey","addHubErrorMessage","hub","dexihDatajobs","table","getTable","connection","getConnection","connectionKey","newTable","key","controls","value","history","pushState","newUrl","window","location","pathname","replace","navigateByUrl","tables","createPaths","currentForm","addHubSuccessMessage","Promise","resolve","$event","returnValue","close","TableEditModule","ngModule","providers","imports","declarations","exports","tableEditRoutes","path","redirectTo","component","navigateSkip","routes","canDeactivate","children","Routing","forChild"],"mappings":"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","file":"1-es5.js","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { AuthService } from '../../../../+auth/auth.service';\nimport { HubService } from '../../../hub.service';\nimport { Location } from '@angular/common';\nimport { FormGroup } from '@angular/forms';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../../hub.forms.service';\n\n@Component({\n    selector: 'dexih-table-column-edit',\n    templateUrl: './table-column-edit.component.html',\n})\nexport class TableColumnEditComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n\n    public tableForm: FormGroup;\n    public columnKey: number;\n    public detailedView = true;\n\n    public pageTitle: string;\n    public action: string;\n\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        public formService: HubFormsService,\n        private route: ActivatedRoute,\n        private router: Router        ) {\n    }\n\n    ngOnInit() {\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.formService.getCurrentFormObservable()\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                let queryParams = result[2];\n                this.tableForm = result[3];\n\n                this.pageTitle = data['pageTitle'];\n                this.action = data['action'];\n\n                this.columnKey = +params['columnKey'];\n                this.detailedView = queryParams['detailed'] === 'false' ? false : true;\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Table Column Edit');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    isUpdated() {\n        this.authService.navigateUp();\n    }\n\n    changeColumn(columnKey: number) {\n        this.router.navigate(['column', columnKey], {relativeTo: this.route.parent});\n    }\n\n}\n","<column-edit [tableForm]=\"tableForm\" [columnKey]=\"columnKey\" [detailedView]=\"detailedView\" (isUpdated)=\"isUpdated()\" (changeColumn)=\"changeColumn($event)\"></column-edit>\n\n ","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubFormsService } from '../../hub.forms.service';\n\n@Component({\n  selector: 'dexih-table-edit-form',\n  templateUrl: './table-edit-main.component.html'\n})\nexport class TableEditMainComponent implements OnInit, OnDestroy {\n\n  constructor(\n    public formsService: HubFormsService,\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ngOnDestroy() {\n  }\n}\n","<dexih-table-edit-properties [formsService]='formsService'></dexih-table-edit-properties>\n<table-edit-columns [tableForm]='formsService.currentForm'></table-edit-columns>\n","import { HostListener, Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DexihConnection, eConnectionCategory, DexihTable } from '../../../shared/shared.models';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n  selector: 'dexih-table-edit-form',\n  templateUrl: './table-edit.component.html'\n})\nexport class TableEditComponent implements OnInit, OnDestroy {\n  public tableKey: number;\n  public connectionKey: number;\n  public connection: DexihConnection;\n\n  eConnectionCategory = eConnectionCategory;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  public cancelToken: CancelToken = new CancelToken();\n\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private isLoaded = false;\n\n\n  constructor(private hubService: HubService,\n    public formsService: HubFormsService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Table Edit');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    this.cancelToken.cancel();\n\n    // shut down service\n    this.formsService.ngOnDestroy();\n  }\n\n  load() {\n    this.isLoaded = true;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.tableKey = + this.params['tableKey'];\n\n      if (!this.tableKey) {\n        this.hubService.addHubErrorMessage('There was no table specified to edit.');\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihDatajobs) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n\n          let table = this.hubCache.getTable(this.tableKey);\n          if (!table) {\n            this.hubService.addHubErrorMessage('The specified table could not be found.');\n          } else {\n            this.connection = this.hubCache.getConnection(table.connectionKey);\n            this.formsService.table(table);\n          }\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let table: DexihTable;\n      if (this.hubService.newTable) {\n        table = this.hubService.newTable;\n        this.hubService.newTable = null;\n      } else {\n        this.connectionKey = + this.params['connectionKey'];\n\n        table = new DexihTable();\n        table.key = 0;\n        table.connectionKey = this.connectionKey;\n      }\n      this.formsService.table(table);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(tableForm => {\n        let key = tableForm.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/table-new', `/table-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n  changedTables(tables) {\n    this.formsService.table(tables[0]);\n  }\n\n  createPaths() {\n    this.hubService.createPaths(this.formsService.currentForm.value, this.cancelToken).then(() => {\n      this.hubService.addHubSuccessMessage('The paths have been created.');\n    }).catch();\n  }\n\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The table has not been saved',\n          'The table changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The table changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","\n<div class=\"container-fluid\">\n    <dexih-widget \n    [title]=\"'Edit Table ('  + formsService.currentForm?.controls?.name?.value +')'\" \n    iconClass=\"fa fa-lg fa-fw fa-table\" \n    [showCloseButton]=\"true\"\n    (close)=\"close()\"\n    >\n        <ng-template #header>\n            <dexih-invalid-form-details class=\"mr-1\" [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\"></dexih-invalid-form-details>\n            <actions-table-button class=\"mr-1\" [showEdit]=\"false\" [tables]=\"this.formsService?.currentForm?.value ? [this.formsService?.currentForm?.value] : []\" (changedTables)=\"changedTables($event)\"></actions-table-button>\n            <dexih-button class=\"mr-1\" *ngIf=\"hubCache?.canWrite && connectionReference?.connectionCategory == eConnectionCategory.File\" \n            (click)=\"createPaths()\" title=\"Create the file paths (or folders).\" iconClass=\"fa fa-folder-open\" buttonClass='btn-primary'>\n                Create Paths\n            </dexih-button>\n            <save-button class=\"mr-1\" *ngIf=\"hubCache?.canWrite\" [formsService]=\"formsService\"></save-button>\n            <cancel-button [formsService]=\"formsService\"></cancel-button>\n        </ng-template>\n\n        <div>\n        <router-outlet></router-outlet>\n    </div>\n    </dexih-widget>\n</div>\n\n\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SharedModule } from '../../../shared/shared.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routing } from './table-edit.routing';\nimport { TableEditComponent } from './table-edit.component';\nimport { TableEditMainComponent } from './table-edit-main.component';\nimport { HubSharedModule } from '../../hub.shared.module';\nimport { ItemEditGuard } from '../../item-edit.guard';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { TableColumnEditComponent } from './table-column-edit/table-column-edit.component';\nimport { TableSharedModule } from '../table.shared.module';\n\n@NgModule({\n    imports: [\n        SharedModule,\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        Routing,\n        HubSharedModule,\n        TableSharedModule\n    ],\n    declarations: [\n      TableEditComponent,\n      TableEditMainComponent,\n      TableColumnEditComponent,\n    ],\n    providers: [\n        HubFormsService,\n        ItemEditGuard\n        ],\n    exports: [\n    ]\n})\nexport class TableEditModule {\n    static forRoot(): ModuleWithProviders<TableEditModule> {\n        return {\n            ngModule: TableEditModule,\n            providers: [ HubFormsService ]\n        };\n    }\n}\n","import { Routes, RouterModule } from '@angular/router';\nimport { TableEditComponent } from './table-edit.component';\nimport { TableColumnEditComponent } from './table-column-edit/table-column-edit.component';\nimport { ItemEditGuard } from '../../item-edit.guard';\nimport { TableEditPreviewDataComponent } from './table-edit-preview-data';\nimport { TableEditMainComponent } from './table-edit-main.component';\nimport { FileFormatEditComponent } from '../../fileFormat';\n\nexport const tableEditRoutes = [\n        { path: '', redirectTo: 'properties'},\n        { path: 'properties', component: TableEditMainComponent,  data: { navigateSkip: true} },\n        { path: 'column', component: TableColumnEditComponent, data: { pageTitle: 'Edit Column' } },\n        { path: 'column/:columnKey', component: TableColumnEditComponent, data: { pageTitle: 'Edit Column' } },\n        { path: 'table-preview/:tableKey', component: TableEditPreviewDataComponent, data: { pageTitle: 'Preview' } },\n        { path: 'fileFormat-new', component: FileFormatEditComponent, data: { action: 'new', pageTitle: 'New File Format'}},\n];\n\nexport const routes: Routes = [\n        { path: '', component: TableEditComponent, canDeactivate: [ItemEditGuard], children: tableEditRoutes},\n];\n\nexport const Routing = RouterModule.forChild(routes);\n"]}