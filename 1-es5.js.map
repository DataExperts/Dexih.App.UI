{"version":3,"sources":["webpack:///src/app/+hub/table/table-edit/table-column-edit/table-column-edit.component.ts","webpack:///src/app/+hub/table/table-edit/table-column-edit/table-column-edit.component.html","webpack:///src/app/+hub/table/table-edit/table-edit-main.component.ts","webpack:///src/app/+hub/table/table-edit/table-edit-main.component.html","webpack:///src/app/+hub/table/table-edit/table-edit.component.ts","webpack:///src/app/+hub/table/table-edit/table-edit.component.html","webpack:///src/app/+hub/table/table-edit/table-edit.module.ts","webpack:///src/app/+hub/table/table-edit/table-edit.routing.ts"],"names":["TableColumnEditComponent","authService","hubService","formService","route","router","detailedView","_subscription","data","params","queryParams","getCurrentFormObservable","subscribe","result","tableForm","pageTitle","action","columnKey","e","addHubClientErrorMessage","unsubscribe","navigateUp","navigate","relativeTo","parent","isUpdated","changeColumn","selector","templateUrl","TableEditMainComponent","formsService","TableEditComponent","eConnectionCategory","cancelToken","isLoaded","getHubCacheObservable","hubCache","status","Loaded","hasChanged","confirmDialog","then","confirm","load","reason","_hubCacheChangeSubscription","_formChangeSubscription","cancel","ngOnDestroy","tableKey","addHubErrorMessage","hub","dexihDatajobs","table","getTable","connection","getConnection","connectionKey","newTable","key","controls","value","history","pushState","newUrl","window","location","pathname","replace","navigateByUrl","tables","createPaths","currentForm","addHubSuccessMessage","Promise","resolve","$event","returnValue","close","TableEditModule","ngModule","providers","imports","declarations","exports","tableEditRoutes","path","redirectTo","component","navigateSkip","routes","canDeactivate","children","Routing","forChild"],"mappings":"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","file":"1-es5.js","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { AuthService } from '../../../../+auth/auth.service';\nimport { HubService } from '../../../hub.service';\nimport { Location } from '@angular/common';\nimport { FormGroup } from '@angular/forms';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../../hub.forms.service';\n\n@Component({\n    selector: 'dexih-table-column-edit',\n    templateUrl: './table-column-edit.component.html',\n})\nexport class TableColumnEditComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n\n    public tableForm: FormGroup;\n    public columnKey: number;\n    public detailedView = true;\n\n    public pageTitle: string;\n    public action: string;\n\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        public formService: HubFormsService,\n        private route: ActivatedRoute,\n        private router: Router        ) {\n    }\n\n    ngOnInit() {\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.formService.getCurrentFormObservable()\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                let queryParams = result[2];\n                this.tableForm = result[3];\n\n                this.pageTitle = data['pageTitle'];\n                this.action = data['action'];\n\n                this.columnKey = +params['columnKey'];\n                this.detailedView = queryParams['detailed'] === 'false' ? false : true;\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Table Column Edit');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    isUpdated() {\n        this.authService.navigateUp();\n    }\n\n    changeColumn(columnKey: number) {\n        this.router.navigate(['column', columnKey], {relativeTo: this.route.parent});\n    }\n\n}\n","<column-edit [tableForm]=\"tableForm\" [columnKey]=\"columnKey\" [detailedView]=\"detailedView\" (isUpdated)=\"isUpdated()\" (changeColumn)=\"changeColumn($event)\"></column-edit>\n\n ","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubFormsService } from '../../hub.forms.service';\n\n@Component({\n  selector: 'dexih-table-edit-form',\n  templateUrl: './table-edit-main.component.html'\n})\nexport class TableEditMainComponent implements OnInit, OnDestroy {\n\n  constructor(\n    public formsService: HubFormsService,\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ngOnDestroy() {\n  }\n}\n","<dexih-table-edit-properties [formsService]='formsService'></dexih-table-edit-properties>\n<table-edit-columns [tableForm]='formsService.currentForm'></table-edit-columns>\n","import { HostListener, Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DexihConnection, eConnectionCategory, DexihTable } from '../../../shared/shared.models';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n  selector: 'dexih-table-edit-form',\n  templateUrl: './table-edit.component.html'\n})\nexport class TableEditComponent implements OnInit, OnDestroy {\n  public tableKey: number;\n  public connectionKey: number;\n  public connection: DexihConnection;\n\n  eConnectionCategory = eConnectionCategory;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  public cancelToken: CancelToken = new CancelToken();\n\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private isLoaded = false;\n\n\n  constructor(private hubService: HubService,\n    public formsService: HubFormsService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Table Edit');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    this.cancelToken.cancel();\n\n    // shut down service\n    this.formsService.ngOnDestroy();\n  }\n\n  load() {\n    this.isLoaded = true;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.tableKey = + this.params['tableKey'];\n\n      if (!this.tableKey) {\n        this.hubService.addHubErrorMessage('There was no table specified to edit.');\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihDatajobs) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n\n          let table = this.hubCache.getTable(this.tableKey);\n          if (!table) {\n            this.hubService.addHubErrorMessage('The specified table could not be found.');\n          } else {\n            this.connection = this.hubCache.getConnection(table.connectionKey);\n            this.formsService.table(table);\n          }\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let table: DexihTable;\n      if (this.hubService.newTable) {\n        table = this.hubService.newTable;\n        this.hubService.newTable = null;\n      } else {\n        this.connectionKey = + this.params['connectionKey'];\n\n        table = new DexihTable();\n        table.key = 0;\n        table.connectionKey = this.connectionKey;\n      }\n      this.formsService.table(table);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(tableForm => {\n        let key = tableForm.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/table-new', `/table-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n  changedTables(tables) {\n    this.formsService.table(tables[0]);\n  }\n\n  createPaths() {\n    this.hubService.createPaths(this.formsService.currentForm.value, this.cancelToken).then(() => {\n      this.hubService.addHubSuccessMessage('The paths have been created.');\n    }).catch();\n  }\n\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The table has not been saved',\n          'The table changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The table changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","\n<div class=\"container-fluid\">\n    <d-widget \n    [title]=\"'Edit Table ('  + formsService.currentForm?.controls?.name?.value +')'\" \n    iconClass=\"fa fa-lg fa-fw fa-table\" \n    [showCloseButton]=\"true\"\n    (close)=\"close()\"\n    >\n        <ng-template #header>\n            <dexih-invalid-form-details class=\"mr-1\" [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\"></dexih-invalid-form-details>\n            <actions-table-button class=\"mr-1\" [showEdit]=\"false\" [tables]=\"this.formsService?.currentForm?.value ? [this.formsService?.currentForm?.value] : []\" (changedTables)=\"changedTables($event)\"></actions-table-button>\n            <d-button class=\"mr-1\" *ngIf=\"hubCache?.canWrite && connectionReference?.connectionCategory == eConnectionCategory.File\" \n            (click)=\"createPaths()\" title=\"Create the file paths (or folders).\" iconClass=\"fa fa-folder-open\" buttonClass='btn-primary'>\n                Create Paths\n            </d-button>\n            <save-button class=\"mr-1\" *ngIf=\"hubCache?.canWrite\" [formsService]=\"formsService\"></save-button>\n            <cancel-button [formsService]=\"formsService\"></cancel-button>\n        </ng-template>\n\n        <div>\n        <router-outlet></router-outlet>\n    </div>\n    </d-widget>\n</div>\n\n\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SharedModule } from '../../../shared/shared.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routing } from './table-edit.routing';\nimport { TableEditComponent } from './table-edit.component';\nimport { TableEditMainComponent } from './table-edit-main.component';\nimport { HubSharedModule } from '../../hub.shared.module';\nimport { ItemEditGuard } from '../../item-edit.guard';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { TableColumnEditComponent } from './table-column-edit/table-column-edit.component';\nimport { TableSharedModule } from '../table.shared.module';\n\n@NgModule({\n    imports: [\n        SharedModule,\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        Routing,\n        HubSharedModule,\n        TableSharedModule\n    ],\n    declarations: [\n      TableEditComponent,\n      TableEditMainComponent,\n      TableColumnEditComponent,\n    ],\n    providers: [\n        HubFormsService,\n        ItemEditGuard\n        ],\n    exports: [\n    ]\n})\nexport class TableEditModule {\n    static forRoot(): ModuleWithProviders<TableEditModule> {\n        return {\n            ngModule: TableEditModule,\n            providers: [ HubFormsService ]\n        };\n    }\n}\n","import { Routes, RouterModule } from '@angular/router';\nimport { TableEditComponent } from './table-edit.component';\nimport { TableColumnEditComponent } from './table-column-edit/table-column-edit.component';\nimport { ItemEditGuard } from '../../item-edit.guard';\nimport { TableEditPreviewDataComponent } from './table-edit-preview-data';\nimport { TableEditMainComponent } from './table-edit-main.component';\nimport { FileFormatEditComponent } from '../../fileFormat';\n\nexport const tableEditRoutes = [\n        { path: '', redirectTo: 'properties'},\n        { path: 'properties', component: TableEditMainComponent,  data: { navigateSkip: true} },\n        { path: 'column', component: TableColumnEditComponent, data: { pageTitle: 'Edit Column' } },\n        { path: 'column/:columnKey', component: TableColumnEditComponent, data: { pageTitle: 'Edit Column' } },\n        { path: 'table-preview/:tableKey', component: TableEditPreviewDataComponent, data: { pageTitle: 'Preview' } },\n        { path: 'fileFormat-new', component: FileFormatEditComponent, data: { action: 'new', pageTitle: 'New File Format'}},\n];\n\nexport const routes: Routes = [\n        { path: '', component: TableEditComponent, canDeactivate: [ItemEditGuard], children: tableEditRoutes},\n];\n\nexport const Routing = RouterModule.forChild(routes);\n"]}