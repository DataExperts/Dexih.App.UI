function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"3TNP":function(e,t,n){"use strict";n.r(t),n.d(t,"HubsModule",(function(){return jt}));var a=n("tyNb"),i=n("mgEF"),s=(n("aCdC"),n("ElCs")),o=n("fXoL"),r=n("ofXK"),c=n("24Dg"),l=["DexihMessage"];function b(e,t){if(1&e&&(o.Ob(0,"section"),o.Ob(1,"div",4),o.Fc(2),o.Nb(),o.Nb()),2&e){var n=o.Zb();o.yb(2),o.Hc(" ",n.webSocketStatus," ")}}var u,h=((u=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this.hubsService=n,this.openDelay=!1,t.initialize()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._hubsMessageSubscription=this.hubsService.getHubMessagesObservable().subscribe((function(t){t&&0!==t.length?e.dexihMessage.addMessage(t[t.length-1]):e.dexihMessage.reset()})),this._webSocketStatusSubscription=this.authService.getWebSocketStatusObservable().subscribe((function(t){e.webSocketStatus=t})),setTimeout((function(){e.openDelay=!0}),5e3)}},{key:"ngOnDestroy",value:function(){this._hubsMessageSubscription&&this._hubsMessageSubscription.unsubscribe(),this._webSocketStatusSubscription&&this._webSocketStatusSubscription.unsubscribe()}},{key:"onFocus",value:function(){var e=this;this.openDelay=!1,setTimeout((function(){e.openDelay=!0}),5e3)}}]),e}()).\u0275fac=function(e){return new(e||u)(o.Kb(s.a),o.Kb(i.a))},u.\u0275cmp=o.Eb({type:u,selectors:[["dexih-hubs"]],viewQuery:function(e,t){var n;1&e&&o.Bc(l,!0),2&e&&o.rc(n=o.Wb())&&(t.dexihMessage=n.first)},hostBindings:function(e,t){1&e&&o.Vb("focus",(function(e){return t.onFocus(e)}),!1,o.uc)},decls:6,vars:1,consts:[["id","content"],[4,"ngIf"],[1,"m-3"],["DexihMessage",""],[1,"alert","alert-danger","m-3"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Dc(1,b,3,1,"section",1),o.Ob(2,"div",2),o.Lb(3,"dexih-message",null,3),o.Nb(),o.Lb(5,"router-outlet"),o.Nb()),2&e&&(o.yb(1),o.hc("ngIf",t.openDelay&&"Connected"!=t.webSocketStatus))},directives:[r.t,c.a,a.j],encapsulation:2}),u),d=n("2Vo4"),f=n("Wumg"),m=n("H3K+"),g=function(e){return["hub-edit",e]},v=function(e){return["/hub",e]},p=function(e){return["/hub",e,"manage","manage-users"]};function y(e,t){if(1&e&&(o.Lb(0,"dexih-button-edit",8),o.Lb(1,"dexih-button-open",8),o.Lb(2,"dexih-button",9)),2&e){var n=t.item;o.hc("routerLink",o.mc(3,g,n.hubKey)),o.yb(1),o.hc("routerLink",o.mc(5,v,n.hubKey)),o.yb(1),o.hc("routerLink",o.mc(7,p,n.hubKey))}}function w(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button-delete",10),o.Vb("click",(function(){o.vc(n);var e=t.items;return o.Zb().deleteHubs(e)})),o.Nb()}}var k=function(){return["hub-new"]};function N(e,t){1&e&&o.Lb(0,"dexih-button-new",11),2&e&&o.hc("routerLink",o.lc(1,k))}var O,C=((O=function(){function e(t,n,a,i){_classCallCheck(this,e),this.authService=t,this.hubService=n,this.router=a,this.route=i,this.isLoaded=!1,this.columns=[{name:"name",title:"Name",format:""},{name:"description",title:"Description",format:""},{name:"updateDate",title:"Last Modified",format:"Calendar"}],this._tableData=new d.a(null),this.tableData=this._tableData.asObservable()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.hubsObserve=this.authService.getHubsObservable().subscribe((function(t){t&&(e.isLoaded=!0),e._tableData.next(t)}))}},{key:"ngOnDestroy",value:function(){this.hubsObserve&&this.hubsObserve.unsubscribe()}},{key:"deleteHubs",value:function(e){var t=this;this.authService.deleteHubs(e).catch((function(e){t.hubService.addHubMessage(e)}))}},{key:"edit",value:function(e){this.router.navigate(["hub-edit",e.hubKey],{relativeTo:this.route})}},{key:"close",value:function(){this.authService.navigateUp()}}]),e}()).\u0275fac=function(e){return new(e||O)(o.Kb(s.a),o.Kb(i.a),o.Kb(a.e),o.Kb(a.a))},O.\u0275cmp=o.Eb({type:O,selectors:[["hubs"]],decls:9,vars:6,consts:[[1,"container-fluid"],["title","Available Hubs","iconClass","fa fa-lg fa-fw fa-life-saver",3,"showCloseButton","close"],[3,"enableMultiSelect","enableStickyToolbar","toolbarZIndex","columns","dataObservable","rowClick"],["select","selectedItemAction"],["selectedItemAction",""],["select","selectedItemsAction"],["selectedItemsAction",""],["actions",""],["queryParamsHandling","","preserveFragment","",1,"mr-1",3,"routerLink"],["iconClass","fa fa-lock","queryParamsHandling","","preserveFragment","","text","Permissions",1,"mr-1",3,"routerLink"],[1,"mr-1",3,"click"],[1,"mr-1",3,"routerLink"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"dexih-widget",1),o.Vb("close",(function(){return t.close()})),o.Ob(2,"dexih-table",2),o.Vb("rowClick",(function(e){return t.edit(e)})),o.Dc(3,y,3,9,"ng-template",3,4,o.Ec),o.Dc(5,w,1,0,"ng-template",5,6,o.Ec),o.Dc(7,N,1,2,"ng-template",null,7,o.Ec),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(1),o.hc("showCloseButton",!0),o.yb(1),o.hc("enableMultiSelect",!0)("enableStickyToolbar",!0)("toolbarZIndex",100)("columns",t.columns)("dataObservable",t.tableData))},directives:[f.P,m.a,f.j,a.f,f.p,f.f,f.g,f.o],encapsulation:2}),O),S=n("itXk"),x=n("3Pt+"),L=n("3WyZ"),I=n("soiQ"),A=["DexihMessage"];function D(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button-save",11),o.Vb("click",(function(){o.vc(n);var e=o.Zb(2);return!e.savingHub&&!e.mainForm.pristine&&e.saveHub()})),o.Nb(),o.Ob(1,"dexih-button-cancel",12),o.Vb("click",(function(){o.vc(n);var e=o.Zb(2);return!e.savingHub&&e.cancel()})),o.Nb()}if(2&e){var a=o.Zb(2);o.hc("disabled",a.savingHub||a.mainForm.pristine)("busy",a.savingHub),o.yb(1),o.hc("disabled",a.savingHub)}}function T(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-widget",3),o.Vb("close",(function(){return o.vc(n),o.Zb().cancel()})),o.Dc(1,D,2,3,"ng-template",null,4,o.Ec),o.Ob(3,"form",5),o.Ob(4,"fieldset"),o.Ob(5,"section"),o.Lb(6,"form-input",6),o.Nb(),o.Ob(7,"section"),o.Lb(8,"form-textarea",7),o.Nb(),o.Ob(9,"section"),o.Ob(10,"form-input",8),o.Fc(11," ("),o.Ob(12,"dexih-button",9),o.Vb("click",(function(){return o.vc(n),o.Zb().generateKey()})),o.Fc(13,"Generate a new key"),o.Nb(),o.Fc(14,") "),o.Nb(),o.Nb(),o.Ob(15,"section"),o.Lb(16,"form-select",10),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){var a=o.Zb();o.hc("showCloseButton",!0)("padding",!0),o.yb(3),o.hc("formGroup",a.mainForm),o.yb(3),o.hc("autocapitalize",a.on)("errors",a.formErrors.name),o.yb(4),o.hc("errors",a.formErrors.encryptionKey),o.yb(2),o.hc("busy",a.generatingKey),o.yb(4),o.hc("items",a.SharedAccessItems)("errors",a.formErrors.sharedAccess)("enableFilter",!1)}}var M,F=((M=function(){function e(t,n,a,i,s){_classCallCheck(this,e),this.authService=t,this.router=n,this.route=a,this.location=i,this.fb=s,this.SharedAccessItems=I.cc.filter((function(e){return e.key>0})),this.generatingKey=!1,this.savingHub=!1,this.hasChanged=!1,this.showAllErrors=!1,this.formErrors={name:"",encryptionKey:"",sharedAccess:"",expiryDate:""},this.validationMessages={name:{required:"Name is required.",minlength:"Name must be at least 4 characters long.",maxlength:"Name cannot be more than 50 characters long.",duplicateHubName:"Name cannot be the same as an existing hub name."},encryptionKey:{required:"Encryption Key is required.",minlength:"Encryption Key must be at least 10 characters long.",maxlength:"Encryption Key cannot be more than 250 characters long."},sharedAccess:{required:"Specify the type of required access."},expiryDate:{validateDate:"The expiry date is invalid."}}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;try{this._subscription=Object(S.a)(this.route.data,this.route.params,this.authService.getHubsObservable(),this.authService.getRemoteAgentsObservable()).subscribe((function(t){var n=t[0],a=t[1],i=t[2];if(e.action=n.action,e.pageTitle=n.pageTitle,"New"===e.action)e.hub=new L.b,e.buildForm();else if(i){var s=+a.hubKey;e.hub=i.find((function(e){return e.hubKey===s})),e.buildForm()}}))}catch(t){this.dexihMessage.addErrorMessage(t.message)}}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe(),this._valueChangesSubscription&&this._valueChangesSubscription.unsubscribe()}},{key:"generateKey",value:function(){var e=this;this.generatingKey=!0,this.authService.getRandomEncryptionKey().then((function(t){e.mainForm.controls.encryptionKey.setValue(t),e.mainForm.markAsDirty(),e.generatingKey=!1})).catch((function(t){e.dexihMessage.addMessage(t),e.generatingKey=!1}))}},{key:"saveHub",value:function(){var e=this;this.mainForm.valid&&this.hasChanged?this.hub.hubKey>0&&this.hub.encryptionKey!==this.mainForm.value.encryptionKey?this.authService.confirmDialog("Warning: Encryption Key Changed","The encryption key has changed.  This will require all connection password & connection strings in the hub to be updated.  Would you like to continue?").then((function(t){t&&e.doSaveHub()})):this.doSaveHub():(this.showAllErrors=!0,this.onValueChanged())}},{key:"doSaveHub",value:function(){var e=this;this.dexihMessage.reset(),this.savingHub=!0,Object.assign(this.hub,this.mainForm.value),this.authService.saveHub(this.hub).then((function(t){e.savingHub=!1,e.cancel(),e.router.navigate(["/hub",t.hubKey,"summary","agents"])})).catch((function(t){e.dexihMessage.addMessage(t),e.savingHub=!1}))}},{key:"cancel",value:function(){this.authService.navigateUp()}},{key:"buildForm",value:function(){var e=this;this.mainForm=this.fb.group({name:[this.hub.name,[x.G.required,x.G.minLength(4),x.G.maxLength(50),this.duplicateHubNameValidator()]],description:[this.hub.description,[]],encryptionKey:[this.hub.encryptionKey,[]],sharedAccess:[this.hub.sharedAccess,[x.G.required]],expiryDate:[this.hub.expiryDate,[]]}),this._valueChangesSubscription&&this._valueChangesSubscription.unsubscribe(),this._valueChangesSubscription=this.mainForm.valueChanges.subscribe((function(t){return e.onValueChanged(t)})),this.onValueChanged(),this.hasChanged=!1}},{key:"duplicateHubNameValidator",value:function(){var e=this;return function(t){var n=t.value;return e.authService.hubNameExists(e.hub.hubKey,n)?{duplicateHubName:{name:n}}:null}}},{key:"onValueChanged",value:function(e){if(this.mainForm){var t=this.mainForm;this.hasChanged=!0;for(var n=0,a=Object.keys(this.formErrors);n<a.length;n++){var i=a[n];this.formErrors[i]="";var s=t.get(i);if(s&&(s.dirty||this.showAllErrors)&&!s.valid)for(var o=this.validationMessages[i],r=0,c=Object.keys(s.errors);r<c.length;r++){var l=c[r];this.formErrors[i]+=o[l]+" "}}}}}]),e}()).\u0275fac=function(e){return new(e||M)(o.Kb(s.a),o.Kb(a.e),o.Kb(a.a),o.Kb(r.n),o.Kb(x.g))},M.\u0275cmp=o.Eb({type:M,selectors:[["dexih-hub-edit-form"]],viewQuery:function(e,t){var n;1&e&&o.Bc(A,!0),2&e&&o.rc(n=o.Wb())&&(t.dexihMessage=n.first)},decls:4,vars:1,consts:[[1,"container"],["DexihMessage",""],["title","Edit Hub","subTitle","Complete the details to create/edit a new hub","iconClass","fa fa-lg fa-fw fa-life-saver",3,"showCloseButton","padding","close",4,"ngIf"],["title","Edit Hub","subTitle","Complete the details to create/edit a new hub","iconClass","fa fa-lg fa-fw fa-life-saver",3,"showCloseButton","padding","close"],["header",""],["id","hub-edit-form",3,"formGroup"],["label","Hub Name","formControlName","name","placeholder","Enter a name for the hub","iconClass","fa fa-life-ring",3,"autocapitalize","errors"],["label","Description","formControlName","description","placeholder","Enter a description for the hub"],["label","Encryption Key","formControlName","encryptionKey","placeholder","Enter an encryption key","iconClass","fa fa-key","note","The encryption key will be used to encrypt table columns flagged as secure.  Ensure this key is kept securely as without it encrypted data will be lost.",2,"z-index","10000",3,"errors"],["buttonClass","btn btn-link mb-1 p-0","iconClass","fa fa-refresh",3,"busy","click"],["label","Shared Data Access","formControlName","sharedAccess","itemKey","key","itemName","description","iconClass","fa fa-lock","note","The level of access required for users to access shared data in this hub.",3,"items","errors","enableFilter"],[1,"mr-1",3,"disabled","busy","click"],[3,"disabled","click"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Lb(1,"dexih-message",null,1),o.Dc(3,T,17,10,"dexih-widget",2),o.Nb()),2&e&&(o.yb(3),o.hc("ngIf",t.mainForm))},directives:[c.a,r.t,f.P,x.I,x.t,x.l,f.D,x.s,x.j,f.H,f.f,f.E,f.t,f.b],encapsulation:2}),M);function E(e,t){1&e&&(o.Ob(0,"div",29),o.Ob(1,"div",30),o.Lb(2,"dexih-button-new",31),o.Nb(),o.Ob(3,"h3"),o.Fc(4,"Let's get started."),o.Nb(),o.Ob(5,"h5"),o.Fc(6,"You do not have any hubs currently available to you."),o.Nb(),o.Ob(7,"h5"),o.Fc(8,"To get started, either create a new hub, or request another user provide access."),o.Nb(),o.Nb())}var K=function(e){return{active:e}};function P(e,t){if(1&e){var n=o.Pb();o.Ob(0,"div",32),o.Ob(1,"label",33),o.Ob(2,"input",34),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb().view=e})),o.Nb(),o.Lb(3,"i",35),o.Nb(),o.Ob(4,"label",36),o.Ob(5,"input",34),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb().view=e})),o.Nb(),o.Lb(6,"i",37),o.Nb(),o.Ob(7,"label",38),o.Ob(8,"input",34),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb().view=e})),o.Nb(),o.Lb(9,"i",39),o.Nb(),o.Ob(10,"label",40),o.Ob(11,"input",34),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb().view=e})),o.Nb(),o.Lb(12,"i",41),o.Nb(),o.Nb()}if(2&e){var a=o.Zb();o.yb(1),o.hc("ngClass",o.mc(12,K,a.view===a.eHubAccess.All)),o.yb(1),o.hc("value",a.eHubAccess.All)("ngModel",a.view),o.yb(2),o.hc("ngClass",o.mc(14,K,a.view===a.eHubAccess.User)),o.yb(1),o.hc("value",a.eHubAccess.User)("ngModel",a.view),o.yb(2),o.hc("ngClass",o.mc(16,K,a.view===a.eHubAccess.ReadOnly)),o.yb(1),o.hc("value",a.eHubAccess.ReadOnly)("ngModel",a.view),o.yb(2),o.hc("ngClass",o.mc(18,K,a.view===a.eHubAccess.Public)),o.yb(1),o.hc("value",a.eHubAccess.Public)("ngModel",a.view)}}function H(e,t){if(1&e&&(o.Ob(0,"div",10),o.Ob(1,"p",11),o.Fc(2),o.Nb(),o.Nb()),2&e){var n=o.Zb(2).$implicit;o.yb(2),o.Gc(n.description)}}function _(e,t){if(1&e&&(o.Ob(0,"div",43),o.Ob(1,"div"),o.Ob(2,"div",44),o.Ob(3,"div",45),o.Ob(4,"div"),o.Fc(5),o.Ob(6,"div",46),o.Fc(7),o.Nb(),o.Nb(),o.Ob(8,"div",47),o.Lb(9,"dexih-button-open",48),o.Lb(10,"dexih-button-edit",49),o.Nb(),o.Nb(),o.Nb(),o.Dc(11,H,3,1,"div",50),o.Nb(),o.Nb()),2&e){var n=o.Zb().$implicit,a=o.Zb();o.yb(5),o.Hc(" ",n.name," "),o.yb(2),o.Hc("(",a.eHubAccess[n.hubAccess],")"),o.yb(2),o.jc("routerLink","/hub/",n.hubKey,"/summary"),o.yb(1),o.jc("routerLink","hub-edit/",n.hubKey,""),o.yb(1),o.hc("ngIf",n.description)}}function Z(e,t){if(1&e&&o.Dc(0,_,12,5,"div",42),2&e){var n=t.$implicit,a=o.Zb();o.hc("ngIf",(a.view===a.eHubAccess.All||n.hubAccess===a.view)&&(!a.filterString||n.name.toUpperCase().includes(a.filterString.toUpperCase())))}}var V,U=((V=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this.router=n,this.logoSmallUrl=L.j,this.eSharedAccess=I.bc,this.ePermission=I.Wb,this.eHubAccess=L.i,this.view=L.i.User,this.hubAccess={}}return _createClass(e,[{key:"ngOnInit",value:function(){this.hubs=this.authService.getHubsObservable()}}]),e}()).\u0275fac=function(e){return new(e||V)(o.Kb(s.a),o.Kb(a.e))},V.\u0275cmp=o.Eb({type:V,selectors:[["hubs-summary"]],decls:57,vars:10,consts:[[1,"container-fluid"],[1,"d-flex","align-items-center","p-3","my-3","text-white-50","bg-info","rounded"],["alt","","width","48","height","48",1,"mr-3",3,"src"],[1,"lh-100"],[1,"mb-0","text-white","lh-100"],["class","alert alert-warning",4,"ngIf"],[1,"card-deck"],[1,"card","mb-3",2,"min-width","18rem"],[1,"card-header","text-white","bg-success"],[1,"fa","fa-lg","fa-fw","fa-life-saver"],[1,"card-body"],[1,"card-text"],[1,"card-footer"],["iconClass","fa fa-life-saver","routerLink","hubs-view",1,"ml-1"],["routerLink","hub-new","title","Create a new hub",1,"ml-1"],[1,"card-header","text-white","bg-primary"],[1,"fa","fa-lg","fa-fw","fa-user"],["iconClass","fa fa-user","routerLink","manage",1,"ml-1"],[1,"card-header","text-white","bg-warning"],[1,"fa","fa-lg","fa-fw","fa-wifi"],["iconClass","fa fa-wifi","routerLink","agents",1,"mr-1"],["iconClass","fa fa-tasks","routerLink","tasks"],[1,"card-header","text-white","bg-danger"],[1,"fa","fa-lg","fa-fw","fa-newspaper-o"],["routerLink","sharedData"],["title","Hubs","iconClass","fa fa-lg fa-fw fa-life-saver",3,"showCloseButton","padding","showFilter","filterString"],["header",""],[1,"card-columns"],["ngFor","",3,"ngForOf"],[1,"alert","alert-warning"],[1,"float-right"],["routerLink","hub-new","title","Create a new Hub","text","New Hub"],["data-toggle","buttons",1,"btn-group","btn-group-toggle","ml-1"],["title","All Hubs.",1,"btn","btn-primary",3,"ngClass"],["type","radio","name","options","autocomplete","off",3,"value","ngModel","ngModelChange"],[1,"fa","fa-globe"],["title","User owned hubs",1,"btn","btn-primary",3,"ngClass"],[1,"fa","fa-user-secret"],["title","Readonly hubs",1,"btn","btn-primary",3,"ngClass"],[1,"fa","fa-book"],["title","Public Hubs",1,"btn","btn-primary",3,"ngClass"],[1,"fa","fa-users"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"d-flex","flex-row","p-0"],[1,"small"],[1,"d-flex","ml-auto"],[3,"routerLink"],[1,"ml-1",3,"routerLink"],["class","card-body",4,"ngIf"]],template:function(e,t){if(1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Lb(2,"img",2),o.Ob(3,"div",3),o.Ob(4,"h3",4),o.Fc(5,"Data Experts Integration Hub"),o.Nb(),o.Nb(),o.Nb(),o.Dc(6,E,9,0,"div",5),o.ac(7,"async"),o.Ob(8,"div",6),o.Ob(9,"div",7),o.Ob(10,"div",8),o.Lb(11,"i",9),o.Fc(12,"Hub Management"),o.Nb(),o.Ob(13,"div",10),o.Ob(14,"p",11),o.Fc(15,"Hub's are used to store definitions for tables and data processing rules, and are used to run, schedule and publish data."),o.Nb(),o.Nb(),o.Ob(16,"div",12),o.Ob(17,"dexih-button",13),o.Fc(18,"Manage"),o.Nb(),o.Lb(19,"dexih-button-new",14),o.Nb(),o.Nb(),o.Ob(20,"div",7),o.Ob(21,"div",15),o.Lb(22,"i",16),o.Fc(23,"Account Management"),o.Nb(),o.Ob(24,"div",10),o.Ob(25,"p",11),o.Fc(26,"Edit your account details, password, and login providers."),o.Nb(),o.Nb(),o.Ob(27,"div",12),o.Ob(28,"dexih-button",17),o.Fc(29,"Account"),o.Nb(),o.Nb(),o.Nb(),o.Ob(30,"div",7),o.Ob(31,"div",18),o.Lb(32,"i",19),o.Fc(33,"Remote Agents"),o.Nb(),o.Ob(34,"div",10),o.Ob(35,"p",11),o.Fc(36,"Remote agents provide connectivity to data sources and are used run and publish data."),o.Nb(),o.Nb(),o.Ob(37,"div",12),o.Ob(38,"dexih-button",20),o.Fc(39,"Agents"),o.Nb(),o.Ob(40,"dexih-button",21),o.Fc(41,"Tasks"),o.Nb(),o.Nb(),o.Nb(),o.Ob(42,"div",7),o.Ob(43,"div",22),o.Lb(44,"i",23),o.Fc(45,"Shared Data"),o.Nb(),o.Ob(46,"div",10),o.Ob(47,"p",11),o.Fc(48,"View all datasets which have been shared."),o.Nb(),o.Nb(),o.Ob(49,"div",12),o.Lb(50,"dexih-button-view",24),o.Nb(),o.Nb(),o.Nb(),o.Ob(51,"dexih-widget",25),o.Vb("filterString",(function(e){return t.filterString=e})),o.Dc(52,P,13,20,"ng-template",null,26,o.Ec),o.Ob(54,"div",27),o.Dc(55,Z,1,1,"ng-template",28),o.ac(56,"async"),o.Nb(),o.Nb(),o.Nb()),2&e){var n,a=0==(null==(n=o.bc(7,6,t.hubs))?null:n.length);o.yb(2),o.hc("src",t.logoSmallUrl,o.xc),o.yb(4),o.hc("ngIf",a),o.yb(45),o.hc("showCloseButton",!1)("padding",!0)("showFilter",!0),o.yb(4),o.hc("ngForOf",o.bc(56,8,t.hubs))}},directives:[r.t,f.f,a.f,f.o,f.y,f.P,r.s,r.q,x.A,x.c,x.s,x.v,f.p,f.j],pipes:[r.b],encapsulation:2}),V),R=n("d2yJ"),G=["DexihMessage"];function B(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button-save",11),o.Vb("click",(function(){return o.vc(n),o.Zb().save()})),o.Nb(),o.Ob(1,"dexih-button-cancel",12),o.Vb("click",(function(){return o.vc(n),o.Zb().cancel()})),o.Nb()}if(2&e){var a=o.Zb();o.hc("busy",a.formsService.formSaving)("disabled",a.formsService.formSaving||!a.formsService.hasChanged)}}function j(e,t){if(1&e&&(o.Ob(0,"form",13),o.Ob(1,"fieldset"),o.Ob(2,"div",14),o.Ob(3,"section",15),o.Lb(4,"form-input",16),o.Nb(),o.Ob(5,"section",15),o.Lb(6,"form-input",17),o.Nb(),o.Nb(),o.Ob(7,"div",14),o.Ob(8,"section",18),o.Lb(9,"form-input",19),o.Nb(),o.Ob(10,"section",18),o.Lb(11,"form-input",20),o.Nb(),o.Nb(),o.Ob(12,"section"),o.Lb(13,"form-checkbox",21),o.Nb(),o.Ob(14,"section"),o.Lb(15,"form-checkbox",22),o.Nb(),o.Ob(16,"section"),o.Lb(17,"form-checkbox",23),o.Nb(),o.Nb(),o.Nb()),2&e){var n=o.Zb();o.hc("formGroup",n.formsService.currentForm)}}function q(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button",24),o.Fc(1,"Forgot Password"),o.Nb(),o.Ob(2,"dexih-button-save",25),o.Vb("click",(function(){return o.vc(n),o.Zb().updatePassword()})),o.Fc(3,"Update Password"),o.Nb()}if(2&e){var a=o.Zb();o.yb(2),o.hc("disabled",!a.passwordForm.valid)("busy",a.updatingPassword)}}function W(e,t){if(1&e&&(o.Ob(0,"form",13),o.Ob(1,"fieldset"),o.Ob(2,"section"),o.Lb(3,"form-input",26),o.Nb(),o.Ob(4,"section"),o.Lb(5,"form-input",27),o.Nb(),o.Ob(6,"section"),o.Lb(7,"form-input",28),o.Nb(),o.Nb(),o.Nb()),2&e){var n=o.Zb();o.hc("formGroup",n.passwordForm),o.yb(7),o.hc("errors",n.passwordMatchError)}}function $(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button",29),o.Vb("click",(function(){return o.vc(n),o.Zb().microsoftLogin(!0)})),o.Fc(1,"Add Microsoft"),o.Nb(),o.Ob(2,"dexih-button",30),o.Vb("click",(function(){return o.vc(n),o.Zb().googleLogin(!0)})),o.Fc(3,"Add Google"),o.Nb()}}function Q(e,t){if(1&e){var n=o.Pb();o.Ob(0,"li",31),o.Ob(1,"div",32),o.Ob(2,"dexih-button-delete",33),o.Vb("click",(function(){o.vc(n);var e=t.$implicit;return o.Zb().deleteLogin(e)})),o.Nb(),o.Nb(),o.Ob(3,"h3"),o.Fc(4),o.Nb(),o.Nb()}if(2&e){var a=t.$implicit;o.yb(4),o.Gc(a.providerDisplayName)}}function z(e,t){if(1&e){var n=o.Pb();o.Ob(0,"section"),o.Ob(1,"div",34),o.Fc(2),o.Ob(3,"dexih-button",35),o.Vb("click",(function(){return o.vc(n),o.Zb().googleLogin(!0)})),o.Nb(),o.Nb(),o.Nb()}if(2&e){var a=o.Zb();o.yb(2),o.Hc(' Google could not automatically sign-in due to "',a.googleMessage,'". Click login button to open new window to login to your google account. ')}}function J(e,t){if(1&e){var n=o.Pb();o.Ob(0,"section"),o.Ob(1,"div",34),o.Fc(2),o.Ob(3,"dexih-button",36),o.Vb("click",(function(){return o.vc(n),o.Zb().microsoftLogin(!0)})),o.Nb(),o.Nb(),o.Nb()}if(2&e){var a=o.Zb();o.yb(2),o.Hc(' Microsoft could not automatically sign-in due to "',a.microsoftMessage,'". Click login button to open new window to login to your microsoft account. ')}}var X,Y=((X=function(){function e(t,n,a,i,s,o){_classCallCheck(this,e),this.authService=t,this.formsService=n,this.fb=a,this.route=i,this.router=s,this.location=o,this.updatingPassword=!1,this.passwordMatchError="",this.passwordStrengthError="",this.googleMessage=!1,this.microsoftMessage=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._userSubscription=this.authService.getUserObservable().subscribe((function(t){e.formsService.createDefault(t,new L.g),e.updateLogins(),e.formsService.currentForm.controls.email.disable(),e.passwordForm=e.fb.group({password:["",[]],newPassword:["",[x.G.required,x.G.minLength(8),x.G.maxLength(20),x.G.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*d)(?=.*[#$^+=!*()@%&]).{8,}$")]],confirmPassword:["",[e.duplicatePasswordValidator()]]})}))}},{key:"ngOnDestroy",value:function(){this._userSubscription&&this._userSubscription.unsubscribe()}},{key:"updateLogins",value:function(){var e=this;this.authService.getLoginProviders().then((function(t){e.logins=t}))}},{key:"duplicatePasswordValidator",value:function(){var e=this;return function(t){if(e.passwordForm){var n=e.passwordForm;return n.controls.confirmPassword.dirty&&n.controls.newPassword.value!==n.controls.confirmPassword.value?(e.passwordMatchError="The passwords do not match",{passwordMatch:{}}):(e.passwordMatchError="",null)}}}},{key:"updatePassword",value:function(){var e=this;this.updatingPassword=!0,this.authService.changePassword(this.passwordForm.controls.password.value,this.passwordForm.controls.newPassword.value).then((function(t){e.updatingPassword=!1,e.dexihMessage.addSuccessMessage("The password change was successful.")})).catch((function(t){e.dexihMessage.addMessage(t),e.updatingPassword=!1}))}},{key:"save",value:function(){var e=this;this.authService.updateUserDetails(this.formsService.currentForm.value).then((function(t){t&&e.dexihMessage.addSuccessMessage("Details updated successfully")})).catch((function(t){e.dexihMessage.addMessage(t)}))}},{key:"cancel",value:function(){this.authService.navigateUp()}},{key:"googleLogin",value:function(e){var t=this;this.dexihMessage.reset(),this.authService.googleSignIn(e).then((function(e){t.authService.addExternalLogin(I.Sb.Google,e.providerKey,e.authenticationToken).then((function(e){t.updateLogins()})).catch((function(e){t.dexihMessage.addMessage(e)}))})).catch((function(e){t.googleMessage=e,t.dexihMessage.addErrorMessage(e)}))}},{key:"microsoftLogin",value:function(e){var t=this;this.dexihMessage.reset(),this.authService.microsoftSignIn(e).then((function(e){t.authService.addExternalLogin(I.Sb.Microsoft,e.providerKey,e.authenticationToken).then((function(e){t.updateLogins()})).catch((function(e){t.dexihMessage.addMessage(e)}))})).catch((function(e){t.microsoftMessage=e,t.dexihMessage.addErrorMessage(e)}))}},{key:"deleteLogin",value:function(e){this.authService.removeExternalLogin(e.loginProvider,e.providerKey)}}]),e}()).\u0275fac=function(e){return new(e||X)(o.Kb(s.a),o.Kb(R.a),o.Kb(x.g),o.Kb(a.a),o.Kb(a.e),o.Kb(r.n))},X.\u0275cmp=o.Eb({type:X,selectors:[["manage-form"]],viewQuery:function(e,t){var n;1&e&&o.Bc(G,!0),2&e&&o.rc(n=o.Wb())&&(t.dexihMessage=n.first)},features:[o.xb([R.a])],decls:19,vars:8,consts:[[1,"container"],["DexihMessage",""],["title","User Details","iconClass","fa fa-lg fa-fw fa-user",3,"padding"],["header",""],[3,"formGroup",4,"ngIf"],["title","Reset Password","iconClass","fa fa-lg fa-fw fa-lock",3,"padding"],["title","Logins","subTitle","The following login providers are available","iconClass","fa fa-lg fa-fw fa-life-saver",3,"padding"],["subHeader",""],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mr-1",3,"busy","disabled","click"],[3,"click"],[3,"formGroup"],[1,"form-row"],[1,"col-md-6"],["label","User Name","formControlName","userName","placeholder","Enter the user name.","iconClass","fa fa-list"],["label","Email Address","formControlName","email","placeholder","Enter the email.","iconClass","fa fa-list"],[1,"form-group","col-md-6"],["label","First Name","formControlName","firstName","placeholder","First Name"],["label","Last Name","formControlName","lastName","placeholder","Last Name"],["label","I want to receive news and special offers","formControlName","subscription"],["label","I want to receive private notifications from other users.","formControlName","notifyPrivateMessage"],["label","I want to receive critical support and issue updates.","formControlName","notifySupportMessage"],["iconClass","fa fa-key","btnClass","btn btn-danger","routerLink","/auth/forgot-password",1,"mr-1"],[3,"disabled","busy","click"],["label","Current Password","formControlName","password","type","password"],["label","New Password","formControlName","newPassword","type","password"],["label","Confirm New Password","formControlName","confirmPassword","type","password",3,"errors"],["buttonClass","btn btn-primary","iconClass","fa fa-windows",1,"mr-1",3,"click"],["buttonClass","btn btn-danger","iconClass","fa fa-google",3,"click"],[1,"list-group-item"],[1,"float-right"],["title","Remove the following login",3,"click"],[1,"alert","alert-danger"],["buttonClass","btn btn-danger","iconClass","fa fa-google","text","Google Login",3,"click"],["buttonClass","btn btn-primary","iconClass","fa fa-microsoft","text","Microsoft Login",3,"click"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Lb(1,"dexih-message",null,1),o.Ob(3,"dexih-widget-vertical"),o.Ob(4,"dexih-widget",2),o.Dc(5,B,2,2,"ng-template",null,3,o.Ec),o.Dc(7,j,18,1,"form",4),o.Nb(),o.Ob(8,"dexih-widget",5),o.Dc(9,q,4,2,"ng-template",null,3,o.Ec),o.Dc(11,W,8,2,"form",4),o.Nb(),o.Ob(12,"dexih-widget",6),o.Dc(13,$,4,0,"ng-template",null,7,o.Ec),o.Ob(15,"ul",8),o.Dc(16,Q,5,1,"li",9),o.Nb(),o.Dc(17,z,4,1,"section",10),o.Dc(18,J,4,1,"section",10),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(4),o.hc("padding",!0),o.yb(3),o.hc("ngIf",t.formsService.currentForm),o.yb(1),o.hc("padding",!0),o.yb(3),o.hc("ngIf",t.passwordForm),o.yb(1),o.hc("padding",!0),o.yb(4),o.hc("ngForOf",t.logins),o.yb(1),o.hc("ngIf",t.googleMessage),o.yb(1),o.hc("ngIf",t.microsoftMessage))},directives:[c.a,f.S,f.P,r.t,r.s,f.t,f.b,x.I,x.t,x.l,f.D,x.s,x.j,f.A,f.f,a.f,f.g],encapsulation:2}),X);function ee(e,t){if(1&e){var n=o.Pb();o.Ob(0,"div",1),o.Ob(1,"dexih-progressbar",2),o.Vb("cancelled",(function(){return o.vc(n),o.Zb().cancelled()}))("click",(function(){return o.vc(n),o.Zb().clicked()})),o.Fc(2),o.Nb(),o.Nb()}if(2&e){var a=o.Zb();o.yb(1),o.hc("animate",!0)("showCancel",a.currentStatus.canCancel)("value",a.currentStatus.percentage)("type",a.currentStatus.statusType),o.yb(1),o.Hc(" ",a.currentStatus.message," ")}}var te,ne=((te=function(){function e(t){_classCallCheck(this,e),this.hubsService=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentStatus=this.getStatus(this.task)}},{key:"ngOnDestroy",value:function(){}},{key:"getStatus",value:function(e){var t=new ae;if(e){switch(t.percentage=e.percentage,e.status){case I.Tb.Error:case I.Tb.Cancelled:t.statusType="danger",t.canCancel=!1;break;case I.Tb.Created:case I.Tb.Running:case I.Tb.Scheduled:case I.Tb.Queued:t.statusType="primary",t.canCancel=!0;break;case I.Tb.Completed:t.statusType="success",t.canCancel=!1}switch(e.status){case I.Tb.Error:t.iconClass="fa fa-ban text-danger";break;case I.Tb.Cancelled:t.iconClass="fa fa-ban text-warning";break;case I.Tb.Created:t.iconClass="fa fa-circle text-success";break;case I.Tb.Queued:t.iconClass="fa fa-square";break;case I.Tb.Running:t.iconClass="fa fa-cogs text-success";break;case I.Tb.Scheduled:t.iconClass="fa fa-calendar text-success";break;case I.Tb.Created:t.iconClass="fa fa-cog text-success";break;case I.Tb.Completed:t.iconClass="fa fa-square text-success"}t.message=e.message,t.error=e.message}else t.message="not running",t.percentage=0,t.statusType="info",t.error="";return t}},{key:"cancelled",value:function(){this.task&&this.hubsService.cancelTasks([this.task])}}]),e}()).\u0275fac=function(e){return new(e||te)(o.Kb(i.a))},te.\u0275cmp=o.Eb({type:te,selectors:[["task-status"]],inputs:{task:"task"},decls:1,vars:1,consts:[["style","width:100%",4,"ngIf"],[2,"width","100%"],[3,"animate","showCancel","value","type","cancelled","click"]],template:function(e,t){1&e&&o.Dc(0,ee,3,5,"div",0),2&e&&o.hc("ngIf",t.currentStatus)},directives:[r.t,f.K],encapsulation:2}),te),ae=function e(){_classCallCheck(this,e)},ie=function(e,t,n){return["/hub",e,"summary","datalinks","result-view",t,n]};function se(e,t){if(1&e&&o.Lb(0,"dexih-button-view",10),2&e){var n=o.Zb().item;o.hc("routerLink",o.oc(1,ie,n.task.referenceKey,n.task.data.auditConnectionKey,n.task.data.auditKey))}}function oe(e,t){if(1&e&&o.Lb(0,"dexih-button-view",11),2&e){var n=o.Zb().item;o.hc("routerLink",o.oc(1,ie,n.task.referenceKey,n.task.data.auditConnectionKey,n.task.data.auditKey))}}function re(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button-view",7),o.Vb("click",(function(){o.vc(n);var e=t.item;return o.Zb().showTask(e.task)})),o.Nb(),o.Dc(1,se,1,5,"dexih-button-view",8),o.Dc(2,oe,1,5,"dexih-button-view",9)}if(2&e){var a=t.item;o.yb(1),o.hc("ngIf","Datalink"==a.task.category),o.yb(1),o.hc("ngIf","Datajob"==a.task.category)}}function ce(e,t){1&e&&o.Lb(0,"task-status",12),2&e&&o.hc("task",t.item.task)}var le,be=((le=function(){function e(t,n,a){_classCallCheck(this,e),this.authService=t,this.router=n,this.route=a,this.showPage=!1,this.showPageMessage="Loading...",this.columns=[{name:"hub",title:"Hub",format:""},{name:"task.category",title:"Category",format:""},{name:"task.status",title:"Status",format:"Enum",enum:I.Tb},{name:"task.stepName",title:"Current Step",format:""},{name:"task.name",title:"Name",format:""},{name:"task.lastUpdate",title:"Last Modified",format:"Calendar"}],this._tableData=new d.a(null),this.tableData=this._tableData.asObservable()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._subscription=Object(S.a)(this.route.data,this.route.params,this.authService.getHubsObservable(),this.authService.getTasksObservable()).subscribe((function(t){var n=t[2],a=[];t[3].forEach((function(e){var t=n.find((function(t){return t.hubKey===e.referenceKey}));a.push({hub:t?t.name:"Unknown hub",task:e})})),e._tableData.next(a)}))}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}},{key:"showTask",value:function(e){this.router.navigate(["view",e.taskId],{relativeTo:this.route})}},{key:"close",value:function(){this.authService.navigateUp()}}]),e}()).\u0275fac=function(e){return new(e||le)(o.Kb(s.a),o.Kb(a.e),o.Kb(a.a))},le.\u0275cmp=o.Eb({type:le,selectors:[["tasks-index"]],decls:7,vars:4,consts:[[1,"container-fluid"],["title","Tasks","iconClass","fa fa-lg fa-fw fa-exchange",3,"showCloseButton","close"],[3,"enableMultiSelect","columns","dataObservable","rowClick"],["select","selectedItemAction"],["selectedItemAction",""],["select","rowStatus"],["rowStatus",""],["text","View Task",3,"click"],["class","ml-1","text","Datalink Result",3,"routerLink",4,"ngIf"],["class","ml-1","text","Datajob Result",3,"routerLink",4,"ngIf"],["text","Datalink Result",1,"ml-1",3,"routerLink"],["text","Datajob Result",1,"ml-1",3,"routerLink"],[3,"task"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"dexih-widget",1),o.Vb("close",(function(){return t.close()})),o.Ob(2,"dexih-table",2),o.Vb("rowClick",(function(e){return t.showTask(e.task)})),o.Dc(3,re,3,2,"ng-template",3,4,o.Ec),o.Dc(5,ce,1,1,"ng-template",5,6,o.Ec),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(1),o.hc("showCloseButton",!0),o.yb(1),o.hc("enableMultiSelect",!0)("columns",t.columns)("dataObservable",t.tableData))},directives:[f.P,m.a,f.y,r.t,a.f,ne],encapsulation:2}),le),ue=n("WrAK");function he(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button",16),o.Vb("click",(function(){o.vc(n);var e=o.Zb(3);return e.exceptionHidden=!e.exceptionHidden})),o.Fc(1,"Toggle Details"),o.Nb()}}function de(e,t){if(1&e&&(o.Ob(0,"pre"),o.Fc(1),o.Nb()),2&e){var n=o.Zb(3);o.yb(1),o.Gc(n.task.exceptionDetails)}}function fe(e,t){if(1&e&&(o.Ob(0,"li",13),o.Ob(1,"h5"),o.Fc(2,"Error encountered!"),o.Nb(),o.Ob(3,"h6"),o.Fc(4),o.Ob(5,"div",14),o.Dc(6,he,2,0,"dexih-button",15),o.Nb(),o.Nb(),o.Ob(7,"div"),o.Dc(8,de,2,1,"pre",12),o.Nb(),o.Nb()),2&e){var n=o.Zb(2);o.yb(4),o.Hc("",n.task.message," "),o.yb(2),o.hc("ngIf",n.task.exceptionDetails),o.yb(2),o.hc("ngIf",!n.exceptionHidden&&n.task.exceptionDetails)}}var me=function(e,t,n){return["/hub",e,"summary","datalinks","result-view",t,n]};function ge(e,t){if(1&e&&(o.Ob(0,"h6"),o.Lb(1,"dexih-button-view",17),o.Nb()),2&e){var n=o.Zb(2);o.yb(1),o.hc("routerLink",o.oc(1,me,n.task.referenceKey,n.task.data.auditConnectionKey,n.task.data.auditKey))}}function ve(e,t){if(1&e&&(o.Ob(0,"h6"),o.Lb(1,"dexih-button-view",18),o.Nb()),2&e){var n=o.Zb(2);o.yb(1),o.hc("routerLink",o.oc(1,me,n.task.referenceKey,n.task.data.auditConnectionKey,n.task.data.auditKey))}}function pe(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-widget",2),o.Vb("close",(function(){return o.vc(n),o.Zb().close()})),o.Ob(1,"div",3),o.Ob(2,"ul",4),o.Dc(3,fe,9,3,"li",5),o.Ob(4,"li",6),o.Ob(5,"h5"),o.Fc(6,"Details"),o.Nb(),o.Nb(),o.Ob(7,"li",7),o.Ob(8,"div",8),o.Ob(9,"div",9),o.Ob(10,"div",10),o.Fc(11,"Status"),o.Nb(),o.Ob(12,"div",10),o.Fc(13),o.Nb(),o.Lb(14,"div",11),o.Ob(15,"div",10),o.Fc(16,"Last Updated"),o.Nb(),o.Ob(17,"div",10),o.Fc(18),o.ac(19,"calendar"),o.Nb(),o.Lb(20,"div",11),o.Ob(21,"div",10),o.Fc(22,"Name"),o.Nb(),o.Ob(23,"div",10),o.Fc(24),o.Nb(),o.Lb(25,"div",11),o.Ob(26,"div",10),o.Fc(27,"Category"),o.Nb(),o.Ob(28,"div",10),o.Fc(29),o.Nb(),o.Lb(30,"div",11),o.Ob(31,"div",10),o.Fc(32,"Description"),o.Nb(),o.Ob(33,"div",10),o.Fc(34),o.Nb(),o.Lb(35,"div",11),o.Nb(),o.Dc(36,ge,2,5,"h6",12),o.Dc(37,ve,2,5,"h6",12),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){var a=o.Zb();o.hc("title","Task - "+(null==a.task?null:a.task.name))("showCloseButton",!0),o.yb(1),o.hc("ngSwitch",a.view),o.yb(2),o.hc("ngIf",(null==a.task?null:a.task.status)==a.eManagedTaskStatus.Error),o.yb(10),o.Gc(a.eManagedTaskStatus[a.task.status]),o.yb(5),o.Gc(o.bc(19,11,a.task.lastUpdate)),o.yb(6),o.Gc(a.task.name),o.yb(5),o.Gc(a.task.category),o.yb(5),o.Gc(a.task.description),o.yb(2),o.hc("ngIf","Datalink"===a.task.category),o.yb(1),o.hc("ngIf","Datajob"===a.task.category)}}var ye,we=((ye=function(){function e(t,n,a){_classCallCheck(this,e),this.authService=t,this.router=n,this.route=a,this.showPage=!1,this.showPageMessage="Loading...",this.eManagedTaskStatus=I.Tb,this.exceptionHidden=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.watchChanges();try{this._subscription=Object(S.a)(this.route.data,this.route.params,this.authService.getTasksObservable()).subscribe((function(t){var n=t[2],a=t[1].reference;e.showPage=!1,e.showPageMessage="Loading...",e.task=n.find((function(e){return e.taskId===a})),e.task||e.authService.navigateUp()}))}catch(t){}}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}},{key:"close",value:function(){this.authService.navigateUp()}},{key:"watchChanges",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ye)(o.Kb(s.a),o.Kb(a.e),o.Kb(a.a))},ye.\u0275cmp=o.Eb({type:ye,selectors:[["task-view"]],decls:2,vars:1,consts:[[1,"container-fluid"],["iconClass","fa fa-lg fa-fw fa-trophy",3,"title","showCloseButton","close",4,"ngIf"],["iconClass","fa fa-lg fa-fw fa-trophy",3,"title","showCloseButton","close"],[1,"content",3,"ngSwitch"],[1,"list-group"],["class","list-group-item list-group-item-danger",4,"ngIf"],[1,"list-group-item","list-group-item-info"],[1,"list-group-item"],[1,"container"],[1,"row","rounded","text-white","bg-secondary"],[1,"col","border","border-white"],[1,"w-100"],[4,"ngIf"],[1,"list-group-item","list-group-item-danger"],[1,"float-right"],[3,"click",4,"ngIf"],[3,"click"],["text","Datalink Result",3,"routerLink"],["text","Datajob Result",3,"routerLink"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Dc(1,pe,38,13,"dexih-widget",1),o.Nb()),2&e&&(o.yb(1),o.hc("ngIf",t.task))},directives:[r.t,f.P,r.x,f.f,f.y,a.f],pipes:[ue.a],encapsulation:2}),ye);function ke(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button-view",5),o.Vb("click",(function(){o.vc(n);var e=t.item;return o.Zb().showMessage(e)})),o.Nb()}}var Ne,Oe=((Ne=function(){function e(t,n,a){_classCallCheck(this,e),this.authService=t,this.router=n,this.route=a,this.showPage=!1,this.showPageMessage="Loading...",this.columns=[{name:"success",title:"Success",format:""},{name:"message",title:"Message",format:""},{name:"value",title:"Value",format:""}],this._tableData=new d.a(null),this.tableData=this._tableData.asObservable()}return _createClass(e,[{key:"ngOnInit",value:function(){this.notifications=this.authService.getNotifications()}},{key:"ngOnDestroy",value:function(){}},{key:"showMessage",value:function(e){this.router.navigate(["view",e.reference],{relativeTo:this.route})}},{key:"close",value:function(){this.authService.navigateUp()}}]),e}()).\u0275fac=function(e){return new(e||Ne)(o.Kb(s.a),o.Kb(a.e),o.Kb(a.a))},Ne.\u0275cmp=o.Eb({type:Ne,selectors:[["notification-index"]],decls:5,vars:6,consts:[[1,"container-fluid"],["title","Notifications","iconClass","fa fa-lg fa-fw fa-exchange",3,"showCloseButton","close"],[3,"enableMultiSelect","enableStickyToolbar","toolbarZIndex","columns","data","rowClick"],["select","selectedItemAction"],["selectedItemAction",""],[3,"click"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"dexih-widget",1),o.Vb("close",(function(){return t.close()})),o.Ob(2,"dexih-table",2),o.Vb("rowClick",(function(e){return t.showMessage(e)})),o.Dc(3,ke,1,0,"ng-template",3,4,o.Ec),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(1),o.hc("showCloseButton",!0),o.yb(1),o.hc("enableMultiSelect",!0)("enableStickyToolbar",!0)("toolbarZIndex",100)("columns",t.columns)("data",t.notifications))},directives:[f.P,m.a,f.y],encapsulation:2}),Ne);function Ce(e,t){if(1&e&&(o.Ob(0,"div"),o.Lb(1,"hr"),o.Ob(2,"pre"),o.Fc(3),o.Nb(),o.Nb()),2&e){var n=o.Zb(3);o.yb(3),o.Gc(n.message.exceptionDetails)}}function Se(e,t){if(1&e&&(o.Ob(0,"section"),o.Ob(1,"div",4),o.Fc(2),o.Dc(3,Ce,4,1,"div",3),o.Nb(),o.Nb()),2&e){var n=o.Zb(2);o.yb(1),o.Cb("alert-danger",0==n.message.success)("alert-success",1==n.message.success),o.yb(1),o.Hc(" ",n.message.message," "),o.yb(1),o.hc("ngIf",n.message.exceptionDetails&&n.message.message!=n.message.exceptionDetails)}}function xe(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-widget",2),o.Vb("close",(function(){return o.vc(n),o.Zb().close()})),o.Dc(1,Se,4,6,"section",3),o.Nb()}if(2&e){var a=o.Zb();o.hc("showCloseButton",!0)("padding",!0),o.yb(1),o.hc("ngIf",a.message)}}var Le,Ie=((Le=function(){function e(t,n,a){_classCallCheck(this,e),this.authService=t,this.router=n,this.route=a,this.showPage=!1,this.showPageMessage="Loading...",this.exceptionHidden=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.watchChanges();try{this._subscription=Object(S.a)(this.route.params).subscribe((function(t){var n=t[0].reference;e.showPage=!1,e.showPageMessage="Loading...",e.message=e.authService.getNotification(n),e.message||e.authService.navigateUp()}))}catch(t){}}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}},{key:"close",value:function(){this.authService.navigateUp()}},{key:"watchChanges",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Le)(o.Kb(s.a),o.Kb(a.e),o.Kb(a.a))},Le.\u0275cmp=o.Eb({type:Le,selectors:[["notification-view"]],decls:2,vars:1,consts:[[1,"container-fluid"],["title","Notification","iconClass","fa fa-lg fa-fw fa-bell",3,"showCloseButton","padding","close",4,"ngIf"],["title","Notification","iconClass","fa fa-lg fa-fw fa-bell",3,"showCloseButton","padding","close"],[4,"ngIf"],[1,"alert","clearfix"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Dc(1,xe,2,3,"dexih-widget",1),o.Nb()),2&e&&(o.yb(1),o.hc("ngIf",t.message))},directives:[r.t,f.P],encapsulation:2}),Le),Ae=n("1wre"),De=n("/pur");function Te(e,t){}function Me(e,t){}var Fe=function(e){return["edit",e]},Ee=function(e){return["token-renew",e]};function Ke(e,t){if(1&e&&(o.Ob(0,"li"),o.Ob(1,"a",19),o.Lb(2,"i",20),o.Fc(3," Edit"),o.Nb(),o.Nb(),o.Ob(4,"li"),o.Ob(5,"a",19),o.Lb(6,"i",21),o.Fc(7," Refresh Token"),o.Nb(),o.Nb()),2&e){var n=o.Zb(2).items;o.yb(1),o.hc("routerLink",o.mc(2,Fe,n[0].remoteAgentKey)),o.yb(4),o.hc("routerLink",o.mc(4,Ee,n[0].remoteAgentKey))}}function Pe(e,t){if(1&e){var n=o.Pb();o.Ob(0,"li"),o.Ob(1,"a",22),o.Vb("click",(function(){o.vc(n);var e=o.Zb(2).items;return o.Zb().test(e)})),o.Lb(2,"i",23),o.Fc(3," Test"),o.Nb(),o.Nb(),o.Ob(4,"li"),o.Ob(5,"a",24),o.Vb("click",(function(){o.vc(n);var e=o.Zb(2).items;return o.Zb().restartAgents(e)})),o.Lb(6,"i",21),o.Fc(7," Restart"),o.Nb(),o.Nb(),o.Ob(8,"li"),o.Ob(9,"a",25),o.Vb("click",(function(){o.vc(n);var e=o.Zb(2).items;return o.Zb().removeUserTokens(e)})),o.Ob(10,"span",26),o.Lb(11,"i",27),o.Fc(12," Revoke Tokens"),o.Nb(),o.Nb(),o.Nb()}}var He=function(){return["token-new"]},_e=function(){return["download"]};function Ze(e,t){if(1&e&&(o.Ob(0,"dexih-button-dropdown",13),o.Ob(1,"li"),o.Ob(2,"a",14),o.Lb(3,"i",15),o.Fc(4," New Token"),o.Nb(),o.Nb(),o.Ob(5,"li"),o.Ob(6,"a",16),o.Lb(7,"i",17),o.Fc(8," New Agent"),o.Nb(),o.Nb(),o.Dc(9,Ke,8,6,"ng-template",18),o.Dc(10,Pe,13,0,"ng-template",18),o.Nb()),2&e){var n=o.Zb().items,a=o.Zb();o.hc("text",n.length>1?"Agents":"Agent")("pullRight",a.pullRight),o.yb(2),o.hc("routerLink",o.lc(6,He)),o.yb(4),o.hc("routerLink",o.lc(7,_e)),o.yb(3),o.hc("ngIf",1==n.length),o.yb(1),o.hc("ngIf",n.length>0)}}function Ve(e,t){if(1&e){var n=o.Pb();o.Dc(0,Ze,11,8,"dexih-button-dropdown",11),o.Ob(1,"dexih-button-refresh",12),o.Vb("click",(function(){return o.vc(n),o.Zb().refresh()})),o.Nb()}if(2&e){var a=t.items;o.hc("ngIf",a&&a.length>=0)}}function Ue(e,t){if(1&e){var n=o.Pb();o.Ob(0,"button",31),o.Vb("click",(function(){o.vc(n);var e=o.Zb().item;return o.Zb().test([e])})),o.Fc(1,"test"),o.Nb()}}function Re(e,t){if(1&e&&(o.Ob(0,"button",36),o.Fc(1,"Failed"),o.Nb()),2&e){var n=o.Zb().$implicit;o.hc("title",n.testMessage)}}function Ge(e,t){if(1&e&&(o.Ob(0,"button",37),o.Fc(1,"Success"),o.Nb()),2&e){var n=o.Zb().$implicit;o.hc("title",n.testMessage)}}function Be(e,t){if(1&e&&(o.Ob(0,"div",32),o.Fc(1),o.Ob(2,"a",33),o.Fc(3,"Open"),o.Nb(),o.Dc(4,Re,2,1,"button",34),o.Dc(5,Ge,2,1,"button",35),o.Nb()),2&e){var n=t.$implicit,a=o.Zb(2);o.yb(1),o.Hc(" ",a.eDownloadUrlType[n.downloadUrlType],": "),o.yb(1),o.hc("href",n.url+"/ping",o.xc),o.yb(2),o.hc("ngIf","error"==n.testStatus),o.yb(1),o.hc("ngIf","success"==n.testStatus)}}function je(e,t){if(1&e&&(o.Dc(0,Ue,2,0,"button",28),o.Ob(1,"div",29),o.Dc(2,Be,6,4,"div",30),o.Nb()),2&e){var n=t.item;o.hc("ngIf",(null==n.downloadUrls?null:n.downloadUrls.length)>0),o.yb(2),o.hc("ngForOf",n.downloadUrls)}}var qe,We,$e=((qe=function(){function e(t,n,a,i,s){_classCallCheck(this,e),this.hubsService=t,this.authService=n,this.hubService=a,this.router=i,this.route=s,this.columns=[{name:"name",title:"Name",format:""},{name:"connected",title:"Status",format:"Text",footer:"ipAddress"},{name:"user",title:"Owner",format:""},{name:"version",footer:"latestVersion",title:"Version",format:"Md",class:"versionClass",tooltip:"versionTooltip"},{name:"lastLoginDateTime",title:"Last Login",format:"Calendar"}],this._tableData=new d.a(null),this.tableData=this._tableData.asObservable(),this.eDownloadUrlType=I.sb,this.cancelToken=new L.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._subscription=this.authService.getRemoteAgentsObservable().subscribe((function(t){t&&(e.remoteAgents=t,e.refreshData())}))}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe(),this.cancelToken.cancel()}},{key:"close",value:function(){this.authService.navigateUp()}},{key:"refreshData",value:function(){var e=[];this.remoteAgents.forEach((function(t){var n=t.activeAgents&&t.activeAgents.length>0?t.activeAgents[0]:null;e.push(n?{remoteAgentKey:t.remoteAgentKey,connected:"active",name:n?n.name:t?t.name:"Unknown",user:n.user,dataPrivacyStatus:n.dataPrivacyStatus,isEncrypted:n.dataPrivacyStatus,ipAddress:n.ipAddress,restrictIp:t.restrictIp,ipAddresses:t.ipAddresses,lastLoginIpAddress:t.lastLoginIpAddress,lastLoginDateTime:t.lastLoginDateTime,remoteAgentId:t.remoteAgentId,downloadUrls:n.downloadUrls,instanceId:n.instanceId,version:n.version,latestVersion:"Latest("+n.latestVersion+")",versionTooltip:n.upgradeAvailable?"Upgrade is available.":"Agent is up to date.",versionClass:n.upgradeAvailable?"dexih-error-text":"",activeAgent:n}:{remoteAgentKey:t.remoteAgentKey,connected:"not connected",name:t.name,user:"",dataPrivacyStatus:"",isEncrypted:"",ipAddress:"",restrictIp:t.restrictIp,ipAddresses:t.ipAddresses,lastLoginIpAddress:t.lastLoginIpAddress,lastLoginDateTime:t.lastLoginDateTime,remoteAgentId:t.remoteAgentId,downloadUrls:[],instanceId:null,version:"",latestVersion:"",versionTooltip:"",versionClass:"",activeAgent:null})})),this._tableData.next(e)}},{key:"test",value:function(e,t){var n=this;e.forEach((function(e){e.downloadUrls.forEach((function(e,a){n.authService.getFromExternal(e.url+"/ping","Testing remote agent connectivity...",t).then((function(t){t&&"alive"===t.status?e.testStatus="success":(e.testStatus="error",e.testMessage="Server returned invalid message.")})).catch((function(t){e.testStatus="error",e.testMessage=t.message}))}))}))}},{key:"removeUserTokens",value:function(e){var t=this;this.authService.removeUserTokens(e.map((function(e){return e.remoteAgentKey}))).then((function(e){return t.refreshData()})).catch((function(e){return t.hubsService.addHubClientErrorMessage(e,"Remove tokens")}))}},{key:"refreshUserToken",value:function(e){this.router.navigate(["token-renew",e.remoteAgentKey],{relativeTo:this.route})}},{key:"edit",value:function(e){this.router.navigate(["edit",e.remoteAgentKey],{relativeTo:this.route})}},{key:"restartAgents",value:function(e){var t=this,n=e.filter((function(e){return e.activeAgent})).map((function(e){return e.activeAgent}));0!==n.length?n.forEach((function(e){t.hubsService.restartAgent(e,!1,t.cancelToken)})):this.hubService.addHubErrorMessage("No active agents were selected.")}},{key:"refresh",value:function(){this.authService.pingRemoteAgents()}}]),e}()).\u0275fac=function(e){return new(e||qe)(o.Kb(i.a),o.Kb(s.a),o.Kb(i.a),o.Kb(a.e),o.Kb(a.a))},qe.\u0275cmp=o.Eb({type:qe,selectors:[["remoteAgents"]],decls:12,vars:6,consts:[[1,"container-fluid"],["title","Connected Agents","iconClass","fa fa-lg fa-fw fa-life-saver",3,"showCloseButton","close"],["rowStatusHeading","Direct Data Connections",3,"enableMultiSelect","enableStickyToolbar","toolbarZIndex","columns","dataObservable","rowClick"],["select","selectedItemAction"],["selectedItemAction",""],["select","selectedItemsAction"],["selectedItemsAction",""],["actions",""],["select","rowStatus"],["rowStatus",""],["title","Remote Agent Installation","path","/assets/help/intro/remote_agent.md",1,"m-3"],["buttonClass","btn-primary","iconClass","fa fa-table",3,"text","pullRight",4,"ngIf"],["text","Refresh Agents","title","Refresh the active agents",1,"ml-1",3,"click"],["buttonClass","btn-primary","iconClass","fa fa-table",3,"text","pullRight"],["title","Create a new remote agent token.",1,"dropdown-item",3,"routerLink"],[1,"fa","fa-file-o"],["title","Configure and download a new remote agent",1,"dropdown-item",3,"routerLink"],[1,"fa","fa-download"],[3,"ngIf"],[1,"dropdown-item",3,"routerLink"],[1,"fa","fa-edit"],[1,"fa","fa-refresh"],["title","Test the connectivity of the remote agents.",1,"dropdown-item",3,"click"],[1,"fa","fa-thumbs-o-up"],["title","Restart the selected agents",1,"dropdown-item",3,"click"],["title","Revoke the selected tokens",1,"dropdown-item",3,"click"],[1,"text-danger"],[1,"fa","fa-ban"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"list-group","mt-1"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"list-group-item"],["target","_blank",3,"href"],["class","btn btn-danger btn-sm float-right",3,"title",4,"ngIf"],["class","btn btn-success btn-sm float-right",3,"title",4,"ngIf"],[1,"btn","btn-danger","btn-sm","float-right",3,"title"],[1,"btn","btn-success","btn-sm","float-right",3,"title"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"dexih-widget",1),o.Vb("close",(function(){return t.close()})),o.Ob(2,"dexih-table",2),o.Vb("rowClick",(function(e){return t.edit(e)})),o.Dc(3,Te,0,0,"ng-template",3,4,o.Ec),o.Dc(5,Me,0,0,"ng-template",5,6,o.Ec),o.Dc(7,Ve,2,1,"ng-template",null,7,o.Ec),o.Dc(9,je,3,2,"ng-template",8,9,o.Ec),o.Nb(),o.Nb(),o.Lb(11,"dexih-help",10),o.Nb()),2&e&&(o.yb(1),o.hc("showCloseButton",!0),o.yb(1),o.hc("enableMultiSelect",!0)("enableStickyToolbar",!0)("toolbarZIndex",100)("columns",t.columns)("dataObservable",t.tableData))},directives:[f.P,m.a,De.a,r.t,f.s,f.i,a.h,r.s],encapsulation:2}),qe),Qe=n("Xjf6"),ze=((We=function(){function e(t,n,a,i){_classCallCheck(this,e),this.authService=t,this.hubService=n,this.router=a,this.route=i}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._subscription=this.route.queryParams.subscribe((function(t){var n=t.path;e.path=n?"/assets/help/"+n:"/assets/help/intro/getting_started.md"})),this._hubCacheSubscription=this.hubService.getHubCacheObservable().subscribe((function(t){e.hubKey=t&&t.hub?t.hub.hubKey:null}))}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe(),this._hubCacheSubscription&&this._hubCacheSubscription.unsubscribe()}},{key:"close",value:function(){this.authService.navigateUp()}},{key:"linkClick",value:function(e){this.router.navigate([],{relativeTo:this.route,queryParams:{path:e}})}}]),e}()).\u0275fac=function(e){return new(e||We)(o.Kb(s.a),o.Kb(Qe.a),o.Kb(a.e),o.Kb(a.a))},We.\u0275cmp=o.Eb({type:We,selectors:[["help"]],decls:2,vars:3,consts:[[1,"container-fluid"],["title","Help",3,"path","display","hubKey","linkClick"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"dexih-help",1),o.Vb("linkClick",(function(e){return t.linkClick(e)})),o.Nb(),o.Nb()),2&e&&(o.yb(1),o.hc("path",t.path)("display",!0)("hubKey",t.hubKey))},directives:[De.a],encapsulation:2}),We);function Je(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button-download",5),o.Vb("click",(function(){o.vc(n);var e=o.Zb();return!e.downloading&&e.download()})),o.Nb(),o.Ob(1,"dexih-button",6),o.Vb("click",(function(){o.vc(n);var e=o.Zb();return!e.downloading&&e.downloadRemoteSettings()})),o.Nb(),o.Ob(2,"dexih-button-cancel",7),o.Vb("click",(function(){o.vc(n);var e=o.Zb();return!e.downloading&&e.cancel()})),o.Nb()}if(2&e){var a=o.Zb();o.hc("busy",a.downloading),o.yb(1),o.hc("busy",a.downloading)}}function Xe(e,t){if(1&e){var n=o.Pb();o.Ob(0,"a",46),o.Vb("click",(function(){return o.vc(n),o.Zb(2).generateEncryptionKey()})),o.Lb(1,"i",47),o.Fc(2," Generate Random Key "),o.Nb()}}function Ye(e,t){1&e&&(o.Ob(0,"span"),o.Lb(1,"i",48),o.Fc(2," Refreshing... please wait "),o.Nb())}function et(e,t){1&e&&o.Lb(0,"form-checkbox",49)}function tt(e,t){if(1&e&&(o.Ob(0,"section"),o.Lb(1,"form-tags",50),o.Nb()),2&e){var n=o.Zb(2);o.yb(1),o.hc("errors",n.formsService.formErrors.allowedPaths)}}function nt(e,t){if(1&e&&(o.Ob(0,"section"),o.Lb(1,"form-tags-dropdown",51),o.Nb()),2&e){var n=o.Zb(2);o.yb(1),o.hc("items",n.hubs)("errors",n.formsService.formErrors.allowedHubs)("returnKeys",!0)}}var at=function(){return{standalone:!0}};function it(e,t){if(1&e){var n=o.Pb();o.Ob(0,"form",8),o.Ob(1,"fieldset"),o.Ob(2,"section"),o.Lb(3,"form-input",9),o.Nb(),o.Ob(4,"section"),o.Ob(5,"form-select",10),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb().environment=e})),o.Nb(),o.Nb(),o.Ob(6,"section"),o.Ob(7,"form-input",11),o.Fc(8," ( "),o.Dc(9,Xe,3,0,"a",12),o.Dc(10,Ye,3,0,"span",13),o.Fc(11," ) "),o.Nb(),o.Nb(),o.Ob(12,"div",14),o.Ob(13,"section",15),o.Ob(14,"form-checkbox",16),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb().embedUserName=e})),o.Nb(),o.Nb(),o.Nb(),o.Ob(15,"div",14),o.Ob(16,"section",15),o.Lb(17,"form-checkbox",17),o.Nb(),o.Ob(18,"section",15),o.Lb(19,"form-checkbox",18),o.Nb(),o.Nb(),o.Ob(20,"div",14),o.Ob(21,"section",15),o.Lb(22,"form-checkbox",19),o.Nb(),o.Ob(23,"section",15),o.Lb(24,"form-checkbox",20),o.Nb(),o.Nb(),o.Ob(25,"section"),o.Ob(26,"form-select",21),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb().logLevel=e})),o.Nb(),o.Nb(),o.Ob(27,"div",14),o.Ob(28,"section",15),o.Lb(29,"form-input",22),o.Nb(),o.Ob(30,"section",15),o.Lb(31,"form-input",23),o.Nb(),o.Nb(),o.Ob(32,"div",14),o.Ob(33,"section",15),o.Lb(34,"form-checkbox",24),o.Nb(),o.Ob(35,"section",15),o.Lb(36,"form-checkbox",25),o.Nb(),o.Nb(),o.Ob(37,"div",14),o.Ob(38,"section",15),o.Lb(39,"form-checkbox",26),o.Nb(),o.Ob(40,"section",15),o.Lb(41,"form-checkbox",27),o.Nb(),o.Nb(),o.Ob(42,"div",14),o.Ob(43,"section",15),o.Lb(44,"form-checkbox",28),o.Nb(),o.Lb(45,"section",15),o.Nb(),o.Ob(46,"div",14),o.Ob(47,"section",15),o.Lb(48,"form-checkbox",29),o.Nb(),o.Ob(49,"section",15),o.Lb(50,"form-checkbox",30),o.Nb(),o.Nb(),o.Ob(51,"div",14),o.Ob(52,"section",15),o.Lb(53,"form-checkbox",31),o.Nb(),o.Nb(),o.Ob(54,"div",14),o.Ob(55,"section",15),o.Lb(56,"form-checkbox",32),o.Nb(),o.Ob(57,"section",15),o.Lb(58,"form-checkbox",33),o.Nb(),o.Nb(),o.Ob(59,"div",14),o.Ob(60,"section",15),o.Lb(61,"form-checkbox",34),o.Nb(),o.Ob(62,"section",15),o.Dc(63,et,1,0,"form-checkbox",35),o.Nb(),o.Nb(),o.Dc(64,tt,2,1,"section",13),o.Ob(65,"section"),o.Lb(66,"form-checkbox",36),o.Nb(),o.Dc(67,nt,2,3,"section",13),o.Ob(68,"div",14),o.Ob(69,"section",15),o.Lb(70,"form-input",37),o.Nb(),o.Ob(71,"section",15),o.Lb(72,"form-input",38),o.Nb(),o.Nb(),o.Ob(73,"div",14),o.Ob(74,"section",15),o.Lb(75,"form-input",39),o.Nb(),o.Ob(76,"section",15),o.Lb(77,"form-input",40),o.Nb(),o.Nb(),o.Ob(78,"div",14),o.Ob(79,"section",15),o.Lb(80,"form-input",41),o.Nb(),o.Ob(81,"section",15),o.Lb(82,"form-checkbox",42),o.Nb(),o.Nb(),o.Ob(83,"div",14),o.Ob(84,"section",15),o.Lb(85,"form-checkbox",43),o.Nb(),o.Ob(86,"section",15),o.Lb(87,"form-checkbox",44),o.Nb(),o.Nb(),o.Ob(88,"section"),o.Lb(89,"form-tags",45),o.Nb(),o.Nb(),o.Nb()}if(2&e){var a=o.Zb();o.hc("formGroup",a.formsService.currentForm),o.yb(3),o.hc("errors",a.formsService.formErrors.name),o.yb(2),o.hc("ngModel",a.environment)("ngModelOptions",o.lc(19,at))("items",a.eEnvironmentItems)("enableFilter",!1),o.yb(2),o.hc("autocapitalize",a.on)("errors",a.formsService.formErrors.encryptionKey),o.yb(2),o.hc("ngIf",0==a.refreshingEncryptionKey),o.yb(1),o.hc("ngIf",1==a.refreshingEncryptionKey),o.yb(4),o.hc("ngModel",a.embedUserName)("ngModelOptions",o.lc(20,at)),o.yb(12),o.hc("ngModel",a.logLevel)("ngModelOptions",o.lc(21,at))("items",a.logLevelItems)("enableFilter",!1),o.yb(37),o.hc("ngIf",a.formsService.currentForm.controls.allowLocalFiles.value),o.yb(1),o.hc("ngIf",a.formsService.currentForm.controls.allowLocalFiles.value&&!a.formsService.currentForm.controls.allowAllPaths.value),o.yb(3),o.hc("ngIf",!a.formsService.currentForm.controls.allowAllHubs.value)}}var st,ot=((st=function(){function e(t,n,a,i){_classCallCheck(this,e),this.hubsService=t,this.authService=n,this.formsService=a,this.fb=i,this.downloading=!1,this.refreshingEncryptionKey=!1,this.refreshingUserToken=!1,this.logLevelItems=I.tc,this.eEnvironmentItems=I.wb.filter((function(e){return e.key>0})),this.embedUserName=!0,this.logLevel=I.sc.Information,this.environment=I.vb.Windows}return _createClass(e,[{key:"ngOnInit",value:function(){this.hubs=this.authService.getHubs();var e=new I.T;this.remoteAgentSettings(e),this.logLevel=I.sc.Information}},{key:"ngOnDestroy",value:function(){}},{key:"cancel",value:function(){this.authService.navigateUp()}},{key:"download",value:function(){var e=this;this.formsService.currentForm.valid?(this.downloading=!0,this.hubsService.downloadRemoteAgent(this.embedUserName,this.environment,this.logLevel,this.formsService.currentForm.value).then((function(t){e.downloading=!1,e.hubsService.addHubSuccessMessage("Download successful.")})).catch((function(t){e.downloading=!1,e.hubsService.addHubMessage(t)}))):this.formsService.showErrors()}},{key:"downloadRemoteSettings",value:function(){var e=this;this.formsService.currentForm.valid?(this.downloading=!0,this.hubsService.downloadRemoteSettings(this.embedUserName,this.environment,this.logLevel,this.formsService.currentForm.value).then((function(t){e.downloading=!1,e.hubsService.addHubSuccessMessage("Download successful.")})).catch((function(t){e.downloading=!1}))):this.formsService.showErrors()}},{key:"generateEncryptionKey",value:function(){var e=this;this.refreshingEncryptionKey=!0,this.authService.getRandomEncryptionKey().then((function(t){e.formsService.currentForm.controls.encryptionKey.setValue(t),e.refreshingEncryptionKey=!1})).catch((function(t){e.hubsService.addHubErrorMessage(t),e.refreshingEncryptionKey=!1}))}},{key:"generateUserToken",value:function(){var e=this;this.refreshingUserToken=!0,this.authService.getUserToken().then((function(t){e.formsService.currentForm.controls.userToken.setValue(t.userToken),e.formsService.currentForm.controls.remoteAgentId.setValue(t.remoteAgentId),e.refreshingUserToken=!1})).catch((function(t){e.hubsService.addHubErrorMessage(t),e.refreshingUserToken=!1}))}},{key:"remoteAgentSettings",value:function(e){var t=this.fb.group({name:[e.name,[x.G.required,x.G.minLength(3),x.G.maxLength(50)]],encryptionKey:[e.encryptionKey,[x.G.required]]});this.formsService.addMissing(e,t,new I.T),this.formsService.clearFormSubscriptions(),this.formsService.startForm(t)}}]),e}()).\u0275fac=function(e){return new(e||st)(o.Kb(i.a),o.Kb(s.a),o.Kb(R.a),o.Kb(x.g))},st.\u0275cmp=o.Eb({type:st,selectors:[["dexih-remoteAgent-download-form"]],features:[o.xb([R.a])],decls:6,vars:3,consts:[[1,"container"],["title","Download Agent","iconClass","fa fa-lg fa-fw fa-download",3,"showCloseButton","padding","close"],["header",""],[3,"formGroup",4,"ngIf"],["title","Remote Agent Installation","path","/assets/help/intro/remote_agent.md",1,"m-3"],["text","Download",1,"mr-1",3,"busy","click"],["iconClass","fa fa-wrench","text","Settings File",1,"mr-1",3,"busy","click"],[3,"click"],[3,"formGroup"],["label","Remote Agent Name","formControlName","name","placeholder","Enter the name.","iconClass","fa fa-list",3,"errors"],["label","Operating System","itemKey","key","itemName","name","note","The operating system that remote agent will be executed on.",3,"ngModel","ngModelOptions","items","enableFilter","ngModelChange"],["label","Encryption Key","formControlName","encryptionKey","placeholder","Encryption key (blank will auto-generate)","iconClass","fa fa-key","note","Encryption key is used to encrypt secure fields and connection passwords.  Note: this key is not retained by the integration hub, and if lost encrypted data can not be restored.",3,"autocapitalize","errors"],["href","javascript:void(0)",3,"click",4,"ngIf"],[4,"ngIf"],[1,"form-row"],[1,"form-group","col-md-6"],["label","Auto-login using current user.",3,"ngModel","ngModelOptions","ngModelChange"],["label","Auto-upgrade when new versions of the remote agent become available.","formControlName","autoUpgrade"],["label","Allow beta and pre-releases.","formControlName","preRelease"],["label","Allow data and files to be uploaded to the remote agent.","formControlName","allowUpload"],["label","Allow data and files to be downloaded (including data previews) from the remote agent.","formControlName","allowDownload"],["label","Logging Level","itemKey","key","itemName","name","note","The level of detail to be included in the diagnostic logs.",3,"ngModel","ngModelOptions","items","enableFilter","ngModelChange"],["label","Local Upload/Download Port","formControlName","downloadPort","placeholder","Enter the upload/download port","note","The local port for the remote agent to use for upload/download operations."],["label","External Upload/Download Url","formControlName","externalDownloadUrl","note","The url which can be used to access the upload/download operations on the remote agent.  e.g. https://10.10.10.10:33944."],["label","Include plugin for Oracle databases (~4MB download)","formControlName","oracle"],["label","Include plugin for DB2 databases (~30MB download)","formControlName","dB2"],["label","Include plugin for Mongo databases  (~4MB download)","formControlName","mongo"],["label","Include plugin for Excel files (~3MB download)","formControlName","excel"],["label","Include plugin for Machine Learning Functions (~32-40MB download)","formControlName","mLNet"],["label","Allow data access through the Local Area Network (LAN).","formControlName","allowLanAccess"],["label","Allow data access through the Internet.","formControlName","allowExternalAccess"],["label","Allow data access through an internet based Proxy Server.","formControlName","allowProxy"],["label","Enforce Https (SSL encrypted connections).","formControlName","enforceHttps"],["label","Automatically attempt to create an SSL certificate (used for encryption).","formControlName","autoGenerateCertificate"],["label","Allow files to be managed on local file system.","formControlName","allowLocalFiles"],["label","Allow all remote agent paths to be available.","formControlName","allowAllPaths",4,"ngIf"],["label","Allow all hubs to be available.","formControlName","allowAllHubs"],["label","Alerts Smtp Server","formControlName","smtpServer","placeholder","Alerts Smtp Server","note","Enter the Smtp Server name to use to send alert emails."],["type","number","label","Smtp Port Number","formControlName","smtpPort","note","The port number to for tme Smtp Server"],["label","Alerts Smtp UserName","formControlName","smtpUserName","placeholder","Alerts Smtp Server","note","Enter the Smtp user name to use to send alert emails."],["label","Smtp Password","formControlName","smtpPassword","note","The Smtp password"],["label","Alerts From Email","formControlName","fromEmail","note",'Email address listed "From" when sending alerts.'],["label","Smpt Server Requires SSL encryption.","formControlName","enableSsl"],["label","Send alert on startup and shutdown.","formControlName","alertOnShutdown"],["label","Send alert on critical remote agent errors.","formControlName","alertOnCritical"],["label","Email addresses to send the bcc alerts to.","formControlName","adminEmails","iconClass","fa fa-email","note","A set of emails that any alerts will be bcc'd to."],["href","javascript:void(0)",3,"click"],[1,"fa","fa-refresh"],[1,"fa","fa-spin","fa-refresh"],["label","Allow all remote agent paths to be available.","formControlName","allowAllPaths"],["label","Allowed root paths for local file management.","formControlName","allowedPaths","iconClass","fa fa-list","note","The root directories which can be accessed when managing flat files.   All directories below the specified root directories will be available.",3,"errors"],["label","Hubs allowed by the remote agent.","formControlName","allowedHubs","itemKey","hubKey","itemName","name","iconClass","fa fa-list",3,"items","errors","returnKeys"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"dexih-widget",1),o.Vb("close",(function(){return t.cancel()})),o.Dc(2,Je,3,2,"ng-template",null,2,o.Ec),o.Dc(4,it,90,22,"form",3),o.Nb(),o.Lb(5,"dexih-help",4),o.Nb()),2&e&&(o.yb(1),o.hc("showCloseButton",!0)("padding",!0),o.yb(3),o.hc("ngIf",t.formsService.currentForm))},directives:[f.P,r.t,De.a,f.h,f.f,f.b,x.I,x.t,x.l,f.D,x.s,x.j,f.E,x.v,f.A,f.F,f.G],encapsulation:2}),st);function rt(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button-save",5),o.Vb("click",(function(){return o.vc(n),o.Zb().save()})),o.Nb(),o.Ob(1,"dexih-button-cancel",6),o.Vb("click",(function(){return o.vc(n),o.Zb().close()})),o.Nb()}}function ct(e,t){if(1&e){var n=o.Pb();o.Ob(0,"span"),o.Fc(1," ( "),o.Ob(2,"a",14),o.Vb("click",(function(){return o.vc(n),o.Zb(3).addCurrentIp()})),o.Lb(3,"i",15),o.Fc(4),o.Nb(),o.Fc(5,") "),o.Nb()}if(2&e){var a=o.Zb(3);o.yb(4),o.Hc(" Add Current (",a.ipAddress,") ")}}function lt(e,t){if(1&e&&(o.Ob(0,"section"),o.Ob(1,"form-tags",13),o.Dc(2,ct,6,1,"span",12),o.Nb(),o.Nb()),2&e){var n=o.Zb(2);o.yb(2),o.hc("ngIf",n.ipAddress)}}function bt(e,t){if(1&e&&(o.Ob(0,"form",7),o.Ob(1,"fieldset"),o.Ob(2,"section"),o.Lb(3,"form-input",8),o.Nb(),o.Ob(4,"section"),o.Lb(5,"form-input",9),o.Nb(),o.Ob(6,"section"),o.Lb(7,"form-checkbox",10),o.Nb(),o.Ob(8,"section"),o.Lb(9,"form-checkbox",11),o.Nb(),o.Dc(10,lt,3,1,"section",12),o.Nb(),o.Nb()),2&e){var n=o.Zb();o.hc("formGroup",n.formsService.currentForm),o.yb(10),o.hc("ngIf",n.formsService.currentForm.controls.restrictIp.value)}}var ut,ht=((ut=function(){function e(t,n,a,i,s,o){_classCallCheck(this,e),this.authService=t,this.hubsService=n,this.formsService=a,this.fb=i,this.router=s,this.route=o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;try{this._subscription=Object(S.a)(this.route.data,this.route.params,this.authService.getRemoteAgentsObservable()).subscribe((function(t){var n=t[1];e.remoteAgents=t[2],e.remoteAgents&&(e.remoteAgentKey=+n.remoteAgentKey,e.hubsService.remoteAgents().then((function(t){var n=e.remoteAgents.find((function(t){return t.remoteAgentKey===e.remoteAgentKey})),a=e.fb.group({});e.formsService.addMissing(n,a,new I.F),a.controls.name.disable(),a.controls.remoteAgentId.disable(),e.formsService.clearFormSubscriptions(),e.formsService.startForm(a)})))}))}catch(t){this.hubsService.addHubClientErrorMessage(t,"Remote Agent Edit")}}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}},{key:"close",value:function(){this.authService.navigateUp()}},{key:"save",value:function(){var e=this,t=this.formsService.currentForm,n=t.value;n.name=t.controls.name.value,n.remoteAgentId=t.controls.remoteAgentId.value,this.authService.saveRemoteAgent(this.formsService.currentForm.value).then((function(t){e.hubsService.addHubSuccessMessage("The remote agent was updated successfully."),e.authService.pingRemoteAgents()}))}},{key:"addCurrentIp",value:function(){var e=this;if(this.ipAddress){var t=this.formsService.currentForm.controls.ipAddresses,n=t.value;n.findIndex((function(t){return t===e.ipAddress}))<0&&(n.push(this.ipAddress),t.setValue(n))}}}]),e}()).\u0275fac=function(e){return new(e||ut)(o.Kb(s.a),o.Kb(i.a),o.Kb(R.a),o.Kb(x.g),o.Kb(a.e),o.Kb(a.a))},ut.\u0275cmp=o.Eb({type:ut,selectors:[["remote-agents"]],inputs:{hubKey:"hubKey"},features:[o.xb([R.a])],decls:7,vars:3,consts:[["DexihMessage",""],[1,"container"],["title","Edit Agent","iconClass","fa fa-lg fa-fw fa-database",3,"padding","showCloseButton","close"],["header",""],[3,"formGroup",4,"ngIf"],[1,"mr-1",3,"click"],[3,"click"],[3,"formGroup"],["label","Agent name","note","This can only be changed on the remote agent settings file.","formControlName","name","iconClass","fa fa-comment"],["label","Remote Agent Id","note","This can only be changed on the remote agent settings file.","formControlName","remoteAgentId","iconClass","fa fa-comment"],["label","Allow data sharing through the agent via other hubs or through the API.","formControlName","allowExternalConnect"],["label","Restrict remote agent ip addresses.","formControlName","restrictIp"],[4,"ngIf"],["label","Restricted IP Addresses","formControlName","ipAddresses","placeholder","Enter the IP Address.","note","List of Ip Addresses.  The remote agent only be authorized for this hub if originating from one of the listed ip addresses."],["href","javascript:void(0)",3,"click"],[1,"fa","fa-refresh"]],template:function(e,t){1&e&&(o.Lb(0,"dexih-message",null,0),o.Ob(2,"div",1),o.Ob(3,"dexih-widget",2),o.Vb("close",(function(){return t.close()})),o.Dc(4,rt,2,0,"ng-template",null,3,o.Ec),o.Dc(6,bt,11,2,"form",4),o.Nb(),o.Nb()),2&e&&(o.yb(3),o.hc("padding",!0)("showCloseButton",!0),o.yb(3),o.hc("ngIf",t.formsService.currentForm))},directives:[c.a,f.P,r.t,f.t,f.b,x.I,x.t,x.l,f.D,x.s,x.j,f.A,f.F],encapsulation:2}),ut);function dt(e,t){1&e&&(o.Ob(0,"label",11),o.Fc(1,"A new remote agent token has been generated. "),o.Nb())}function ft(e,t){1&e&&(o.Ob(0,"label",11),o.Fc(1,"The token for this user/remote id has been renewed. "),o.Nb())}function mt(e,t){if(1&e&&(o.Dc(0,dt,2,0,"label",9),o.Dc(1,ft,2,0,"label",9),o.Ob(2,"div",10),o.Fc(3," Ensure this token is kept safe and secure. It cannot be viewed again. If it is lost or compromised, a new token should be created. "),o.Nb()),2&e){var n=o.Zb(2);o.hc("ngIf","New"==n.action),o.yb(1),o.hc("ngIf","ReNew"==n.action)}}function gt(e,t){if(1&e){var n=o.Pb();o.Ob(0,"div",2),o.Ob(1,"dexih-widget",3),o.Vb("close",(function(){return o.vc(n),o.Zb().close()})),o.Dc(2,mt,4,2,"ng-template",null,4,o.Ec),o.Ob(4,"section"),o.Ob(5,"form-textarea",5),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb().remoteToken.user=e})),o.Nb(),o.Nb(),o.Ob(6,"section"),o.Ob(7,"form-textarea",6),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb().remoteToken.remoteAgentId=e})),o.Nb(),o.Nb(),o.Ob(8,"section"),o.Ob(9,"form-textarea",7),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb().remoteToken.userToken=e})),o.Nb(),o.Nb(),o.Ob(10,"section"),o.Ob(11,"form-textarea",8),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb().appSettings=e})),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){var a=o.Zb();o.yb(1),o.hc("padding",!0)("showCloseButton",!0),o.yb(4),o.hc("showCopy",!0)("showPreview",!1)("hideToggle",!0)("disabled",!0)("ngModel",a.remoteToken.user),o.yb(2),o.hc("showCopy",!0)("showPreview",!1)("hideToggle",!0)("disabled",!0)("ngModel",a.remoteToken.remoteAgentId),o.yb(2),o.hc("showCopy",!0)("showPreview",!1)("hideToggle",!0)("disabled",!0)("ngModel",a.remoteToken.userToken),o.yb(2),o.hc("showCopy",!0)("showPreview",!1)("hideToggle",!0)("disabled",!0)("ngModel",a.appSettings)}}var vt,pt=((vt=function(){function e(t,n,a){_classCallCheck(this,e),this.route=t,this.hubsService=n,this.authService=a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._subscription=Object(S.a)(this.route.data,this.route.params).subscribe((function(t){return n=e,i=regeneratorRuntime.mark((function e(){var n,a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t[0],a=t[1],this.action=n.action,("New"===n.action?this.authService.createRemoteAgent():this.authService.refreshRemoteAgentToken(+a.remoteAgentKey)).then((function(e){i.remoteToken=e,i.updateAppSettings()})).catch((function(e){i.hubsService.addHubMessage(e),i.authService.navigateUp()}));case 2:case"end":return e.stop()}}),e,this)})),new((a=void 0)||(a=Promise))((function(e,t){function s(e){try{r(i.next(e))}catch(n){t(n)}}function o(e){try{r(i.throw(e))}catch(n){t(n)}}function r(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(s,o)}r((i=i.apply(n,[])).next())}));var n,a,i}))}},{key:"updateAppSettings",value:function(){this.appSettings='"RemoteAgentId": "'.concat(this.remoteToken.remoteAgentId,'",\n"User": "').concat(this.remoteToken.user,'",\n"UserToken": "').concat(this.remoteToken.userToken,'",\n')}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}},{key:"close",value:function(){this.authService.navigateUp()}}]),e}()).\u0275fac=function(e){return new(e||vt)(o.Kb(a.a),o.Kb(i.a),o.Kb(s.a))},vt.\u0275cmp=o.Eb({type:vt,selectors:[["remote-agent-token"]],features:[o.xb([R.a])],decls:3,vars:1,consts:[["DexihMessage",""],["class","container",4,"ngIf"],[1,"container"],["title","New Agent Token","iconClass","fa fa-lg fa-fw fa-wifi",3,"padding","showCloseButton","close"],["subHeader",""],["rows","1","label","User",3,"showCopy","showPreview","hideToggle","disabled","ngModel","ngModelChange"],["rows","1","label","RemoteAgentId",3,"showCopy","showPreview","hideToggle","disabled","ngModel","ngModelChange"],["rows","4","label","UserToken",3,"showCopy","showPreview","hideToggle","disabled","ngModel","ngModelChange"],["rows","4","label","AppSettings Content","note","Copy this section over the existing items in the AppSettings section of the appsettings.json configuration file for your remote agent.",3,"showCopy","showPreview","hideToggle","disabled","ngModel","ngModelChange"],["class","label",4,"ngIf"],[1,"alert","alert-info"],[1,"label"]],template:function(e,t){1&e&&(o.Lb(0,"dexih-message",null,0),o.Dc(2,gt,12,22,"div",1)),2&e&&(o.yb(2),o.hc("ngIf",t.remoteToken))},directives:[c.a,r.t,f.P,f.H,x.s,x.v],encapsulation:2}),vt),yt=n("wd/R"),wt=n("IGpA"),kt=["DexihMessage"];function Nt(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button-save",19),o.Vb("click",(function(){o.vc(n);var e=o.Zb(2);return!e.saving&&!e.mainForm.pristine&&e.save()})),o.Nb(),o.Ob(1,"dexih-button-cancel",20),o.Vb("click",(function(){o.vc(n);var e=o.Zb(2);return!e.saving&&e.cancel()})),o.Nb()}if(2&e){var a=o.Zb(2);o.hc("disabled",a.saving||a.mainForm.pristine)("busy",a.saving),o.yb(1),o.hc("disabled",a.saving)}}function Ot(e,t){if(1&e&&(o.Ob(0,"form",23),o.Ob(1,"fieldset"),o.Ob(2,"section"),o.Lb(3,"form-textarea",24),o.ac(4,"calendar"),o.Nb(),o.Nb(),o.Nb()),2&e){var n=t.$implicit;o.hc("formGroup",n),o.yb(3),o.kc("label","",n.controls.userName.value," - ",o.bc(4,4,n.controls.updateDate.value),""),o.hc("disabled",!0)}}function Ct(e,t){if(1&e&&(o.Ob(0,"dexih-widget-section",21),o.Dc(1,Ot,5,6,"form",22),o.Nb()),2&e){var n=o.Zb(2);o.hc("showExpandButton",!0)("padding",!0),o.yb(1),o.hc("ngForOf",n.mainForm.controls.dexihIssueComments.controls)}}function St(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button-save",19),o.Vb("click",(function(){o.vc(n);var e=o.Zb(3);return!e.saving&&e.newComment&&e.saveComment()})),o.Nb(),o.Ob(1,"dexih-button-cancel",20),o.Vb("click",(function(){o.vc(n);var e=o.Zb(3);return!e.saving&&e.cancel()})),o.Nb()}if(2&e){var a=o.Zb(3);o.hc("disabled",a.saving||!a.newComment)("busy",a.saving),o.yb(1),o.hc("disabled",a.saving)}}var xt=function(){return{standalone:!0}};function Lt(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-widget-section",25),o.Dc(1,St,2,3,"ng-template",null,6,o.Ec),o.Ob(3,"form"),o.Ob(4,"fieldset"),o.Ob(5,"section"),o.Ob(6,"form-textarea",26),o.Vb("ngModelChange",(function(e){return o.vc(n),o.Zb(2).newComment=e})),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()}if(2&e){var a=o.Zb(2);o.hc("showExpandButton",!0)("padding",!0),o.yb(6),o.hc("ngModel",a.newComment)("ngModelOptions",o.lc(5,xt))("hideToggle",!0)}}function It(e,t){if(1&e&&(o.Ob(0,"dexih-widget-section",25),o.Ob(1,"p"),o.Fc(2,"This is a public issue and is managed through the GitHub issue below."),o.Nb(),o.Ob(3,"a",27),o.Lb(4,"i",28),o.Fc(5,"GitHub Issue"),o.Nb(),o.Nb()),2&e){var n=o.Zb(2);o.hc("showExpandButton",!0)("padding",!0),o.yb(3),o.hc("href",null==n.mainForm.controls.gitHubLink?null:n.mainForm.controls.gitHubLink.value,o.xc)}}function At(e,t){if(1&e&&(o.Ob(0,"dexih-widget",3),o.Lb(1,"support-options",4),o.Ob(2,"dexih-widget-section",5),o.Dc(3,Nt,2,3,"ng-template",null,6,o.Ec),o.Ob(5,"form",7),o.Ob(6,"fieldset"),o.Ob(7,"section"),o.Lb(8,"form-input",8),o.Nb(),o.Ob(9,"div",9),o.Ob(10,"section",10),o.Lb(11,"form-select",11),o.Nb(),o.Ob(12,"section",10),o.Lb(13,"form-select",12),o.Nb(),o.Nb(),o.Ob(14,"div",9),o.Ob(15,"section",10),o.Lb(16,"form-select",13),o.Nb(),o.Ob(17,"section",10),o.Lb(18,"form-select",14),o.Nb(),o.Nb(),o.Ob(19,"section"),o.Lb(20,"form-checkbox",15),o.Nb(),o.Ob(21,"section"),o.Lb(22,"form-textarea",16),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Dc(23,Ct,2,3,"dexih-widget-section",17),o.Dc(24,Lt,7,6,"dexih-widget-section",18),o.Dc(25,It,6,3,"dexih-widget-section",18),o.Nb()),2&e){var n=o.Zb();o.yb(1),o.hc("isExpanded",!1),o.yb(1),o.hc("subTitle",n.subTitle)("showExpandButton",!0)("padding",!0),o.yb(3),o.hc("formGroup",n.mainForm),o.yb(3),o.hc("errors",n.formErrors.name),o.yb(3),o.hc("items",n.eIssueTypeItems),o.yb(2),o.hc("items",n.eIssueSeverityItems),o.yb(3),o.hc("items",n.eIssueCategoryItems),o.yb(2),o.hc("items",n.eIssueStatusItems),o.yb(4),o.hc("hideToggle",n.isNew),o.yb(1),o.hc("ngIf",n.mainForm.controls.dexihIssueComments.controls.length>0),o.yb(1),o.hc("ngIf",n.mainForm.controls.key.value>0&&n.mainForm.controls.isPrivate.value),o.yb(1),o.hc("ngIf",n.mainForm.controls.key.value>0&&!n.mainForm.controls.isPrivate.value)}}var Dt,Tt=yt,Mt=((Dt=function(){function e(t,n,a){_classCallCheck(this,e),this.authService=t,this.route=n,this.fb=a,this.eIssueTypeItems=I.Ob,this.eIssueSeverityItems=I.Kb,this.eIssueStatusItems=I.Mb,this.eIssueCategoryItems=I.Ib,this.SharedAccessItems=I.cc.filter((function(e){return e.key>0})),this.generatingKey=!1,this.saving=!1,this.hasChanged=!1,this.showAllErrors=!1,this.disable=!1,this.isNew=!0,this.formErrors={name:"",description:""},this.validationMessages={name:{required:"Name is required.",minlength:"Name must be at least 4 characters long.",maxlength:"Name cannot be more than 50 characters long.",duplicateHubName:"Name cannot be the same as an existing hub name."},description:{required:"Description is required."}},this.supportOptions=[{name:"Forums",icon:"fa fa-smile-o",link:"https://dexih.mn.co/feed",description:"Use the community forums for questions and other integration hub discussion."},{name:"Twitter",icon:"fa fa-twitter",link:"https://twitter.com/dataexperts",description:"Send messages to our twitter for quick short queries and comments."},{name:"YouTube",icon:"fa fa-youtube",link:"https://www.youtube.com/channel/UCUQQ_sVuFti-xYvKtfLJNkg",description:"Refer to our youtube channel for video tutorials."},{name:"Features / Issues",icon:"fa fa-github",link:"https://github.com/DataExperts/Dexih.App.UI",description:"We are an open source platform.  Raise feature requests and bugs on our github pages."}],this.cancelToken=new L.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;try{this._subscription=Object(S.a)(this.route.data,this.route.params).subscribe((function(t){var n=t[0],a=t[1];if(e.action=n.action,e.pageTitle=n.pageTitle,"new"===e.action)e.issue=new I.D,e.buildForm(),e.isNew=!0,e.disable=!1;else if("edit"===e.action){var i=+a.issueKey;e.isNew=!1,e.authService.getIssue(i,e.cancelToken).then((function(t){e.issue=t,e.subTitle="Updated by "+t.userName+" - "+Tt(t.updateDate).calendar(),e.buildForm(),e.disable=!e.authService.getUser().isAdmin}))}}))}catch(t){this.dexihMessage.addErrorMessage(t.message)}}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe(),this._valueChangesSubscription&&this._valueChangesSubscription.unsubscribe(),this.cancelToken.cancel()}},{key:"save",value:function(){var e=this;this.dexihMessage.reset(),this.saving=!0,Object.assign(this.issue,this.mainForm.value),this.authService.saveIssue(this.issue).then((function(){e.saving=!1,e.dexihMessage.addSuccessMessage("Issue created successfully."),e.cancel()})).catch((function(t){e.dexihMessage.addMessage(t),e.saving=!1}))}},{key:"saveComment",value:function(){var e=this;this.dexihMessage.reset(),this.saving=!0,this.authService.addIssueComment(this.issue.key,this.newComment).then((function(){e.saving=!1,e.dexihMessage.addSuccessMessage("Issue comment added successfully."),e.cancel()})).catch((function(t){e.dexihMessage.addMessage(t),e.saving=!1}))}},{key:"cancel",value:function(){this.authService.navigateUp()}},{key:"buildForm",value:function(){var e=this;this.mainForm=this.fb.group({key:[{value:this.issue.key,disabled:this.disable},[]],name:[{value:this.issue.name,disabled:this.disable},[x.G.required,x.G.minLength(4),x.G.maxLength(50)]],description:[{value:this.issue.description,disabled:this.disable},[x.G.required]],type:[{value:this.issue.type,disabled:this.disable},[]],category:[{value:this.issue.category,disabled:this.disable},[]],severity:[{value:this.issue.severity,disabled:this.disable},[]],isPrivate:[{value:this.issue.isPrivate,disabled:this.disable},[]],updateDate:[{value:this.issue.updateDate,disabled:!0},[]],userName:[{value:this.issue.userName,disabled:!0},[]],issueStatus:[{value:this.issue.issueStatus,disabled:!1},[]],gitHubLink:[{value:this.issue.gitHubLink,disabled:!1},[]],dexihIssueComments:this.fb.array(this.issue.dexihIssueComments.map((function(t){return e.fb.group({comment:{value:t.comment,disabled:e.disable},userName:[{value:t.userName,disabled:!0},[]],updateDate:{value:t.updateDate,disabled:!0}})})))}),this._valueChangesSubscription&&this._valueChangesSubscription.unsubscribe(),this._valueChangesSubscription=this.mainForm.valueChanges.subscribe((function(){return e.onValueChanged()})),this.onValueChanged(),this.hasChanged=!1}},{key:"onValueChanged",value:function(){if(this.mainForm){var e=this.mainForm;this.hasChanged=!0;for(var t=0,n=Object.keys(this.formErrors);t<n.length;t++){var a=n[t];this.formErrors[a]="";var i=e.get(a);if(i&&(i.dirty||this.showAllErrors)&&!i.valid)for(var s=this.validationMessages[a],o=0,r=Object.keys(i.errors);o<r.length;o++){var c=r[o];this.formErrors[a]+=s[c]+" "}}}}}]),e}()).\u0275fac=function(e){return new(e||Dt)(o.Kb(s.a),o.Kb(a.a),o.Kb(x.g))},Dt.\u0275cmp=o.Eb({type:Dt,selectors:[["issue-edit-form"]],viewQuery:function(e,t){var n;1&e&&o.Bc(kt,!0),2&e&&o.rc(n=o.Wb())&&(t.dexihMessage=n.first)},decls:4,vars:1,consts:[[1,"container"],["DexihMessage",""],["iconClass","fa fa-ticket","title","Support",4,"ngIf"],["iconClass","fa fa-ticket","title","Support"],[3,"isExpanded"],["title","Raise Issue","iconClass","fa fa-lg fa-fw fa-comments",3,"subTitle","showExpandButton","padding"],["header",""],["id","edit-form",3,"formGroup"],["label","Title","formControlName","name","placeholder","Title","iconClass","fa fa-life-ring",3,"errors"],[1,"form-row"],[1,"form-group","col-md-6"],["label","Type","formControlName","type","iconClass","fa fa-life-ring","itemKey","key","itemName","description",3,"items"],["label","Severity","formControlName","severity","iconClass","fa fa-life-ring","itemKey","key","itemName","description",3,"items"],["label","Category","formControlName","category","iconClass","fa fa-life-ring","itemKey","key","itemName","description",3,"items"],["label","Status","formControlName","issueStatus","iconClass","fa fa-circle-notch","itemKey","key","itemName","description",3,"items"],["c","","label","Is Private (will not be published to public github issue)","formControlName","isPrivate"],["label","Description","formControlName","description","placeholder","Details of the issue of feature request","rows","20",3,"hideToggle"],["title","Commentary","iconClass","fa fa-lg fa-fw fa-comments",3,"showExpandButton","padding",4,"ngIf"],["title","Add new comment","iconClass","fa fa-lg fa-fw fa-comments",3,"showExpandButton","padding",4,"ngIf"],[1,"mr-1",3,"disabled","busy","click"],[3,"disabled","click"],["title","Commentary","iconClass","fa fa-lg fa-fw fa-comments",3,"showExpandButton","padding"],["id","comment-form",3,"formGroup",4,"ngFor","ngForOf"],["id","comment-form",3,"formGroup"],["formControlName","comment","placeholder","Comment","iconClass","fa fa-comment",3,"label","disabled"],["title","Add new comment","iconClass","fa fa-lg fa-fw fa-comments",3,"showExpandButton","padding"],["placeholder","Enter a new comment","iconClass","fa fa-comment","rows","20",3,"ngModel","ngModelOptions","hideToggle","ngModelChange"],["target","_blank",1,"btn","btn-primary",3,"href"],[1,"fa","fa-github"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Lb(1,"dexih-message",null,1),o.Dc(3,At,26,14,"dexih-widget",2),o.Nb()),2&e&&(o.yb(3),o.hc("ngIf",t.mainForm))},directives:[c.a,r.t,f.P,wt.a,f.T,x.I,x.t,x.l,f.D,x.s,x.j,f.E,f.A,f.H,f.t,f.b,r.s,x.u,x.v],pipes:[ue.a],encapsulation:2}),Dt),Ft=function(e){return["edit",e]};function Et(e,t){1&e&&o.Lb(0,"dexih-button-edit",10),2&e&&o.hc("routerLink",o.mc(1,Ft,t.item.key))}function Kt(e,t){if(1&e){var n=o.Pb();o.Ob(0,"dexih-button-delete",11),o.Vb("click",(function(){o.vc(n);var e=t.items;return o.Zb().delete(e)})),o.Nb()}}var Pt=function(){return["new"]};function Ht(e,t){1&e&&o.Lb(0,"dexih-button-new",12),2&e&&o.hc("routerLink",o.lc(1,Pt))}var _t,Zt,Vt=[{path:"",component:C,data:{pageTitle:"Hubs View"}},{path:"hub-edit/:hubKey",component:F,data:{action:"Edit",pageTitle:"Edit Hub"}},{path:"hub-new",component:F,data:{action:"New",pageTitle:"New Hub"}}],Ut=[{path:"manage",component:Y,data:{pageTitle:"Manage"}},{path:"sharedData",data:{pageTitle:"Shared Data"},children:[{path:"",component:Ae.c,data:{pageTitle:"Shared Data"}},{path:"preview/:hubKey/:objectType/:objectKey",component:Ae.a,data:{pageTitle:"Preview"}},{path:"previewDashboard/:hubKey/:dashboardKey",component:Ae.b,data:{pageTitle:"Preview Dashboard"}}]},{path:"tasks",data:{pageTitle:"Tasks"},children:[{path:"",component:be,data:{pageTitle:"Tasks"}},{path:"view/:reference",component:we,data:{pageTitle:"Task"}}]},{path:"notifications",data:{pageTitle:"Notifications"},children:[{path:"",component:Oe,data:{pageTitle:"Notifications"}},{path:"view/:reference",component:Ie,data:{pageTitle:"Notification"}}]},{path:"support",data:{pageTitle:"Issues"},children:[{path:"",component:(_t=function(){function e(t,n,a){_classCallCheck(this,e),this.authService=t,this.router=n,this.route=a,this.columns=[{name:"name",title:"Name",format:""},{name:"description",title:"Description",format:"Md"},{name:"type",title:"Type",format:"Enum",enum:I.Nb},{name:"category",title:"Category",format:"Enum",enum:I.Hb},{name:"severity",title:"Severity",format:"Enum",enum:I.Jb},{name:"issueStatus",title:"Status",format:"Enum",enum:I.Lb},{name:"gitHubLink",title:"Github Issue",format:"Md"},{name:"updateDate",title:"Last Modified",format:"Calendar"}],this._tableData=new d.a(null),this.tableData=this._tableData.asObservable(),this.cancelToken=new L.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.getIssues(this.cancelToken).then((function(t){var n=t.map((function(e){return{key:e.key,name:e.name,description:e.description,type:e.type,category:e.category,severity:e.severity,issueStatus:e.issueStatus,gitHubLink:e.gitHubLink?"[github](".concat(e.gitHubLink,")"):null,updateDate:e.updateDate}}));e._tableData.next(n)}))}},{key:"ngOnDestroy",value:function(){this.cancelToken.cancel()}},{key:"edit",value:function(e){this.router.navigate(["edit",e.key],{relativeTo:this.route})}},{key:"close",value:function(){this.authService.navigateUp()}}]),e}(),_t.\u0275fac=function(e){return new(e||_t)(o.Kb(s.a),o.Kb(a.e),o.Kb(a.a))},_t.\u0275cmp=o.Eb({type:_t,selectors:[["issue"]],decls:11,vars:8,consts:[[1,"container-fluid"],["title","Raised Issues","iconClass","fa fa-lg fa-fw fa-life-saver",3,"showCloseButton","close"],[3,"isExpanded"],["title","Current Support Issues",3,"padding"],[3,"enableMultiSelect","enableStickyToolbar","toolbarZIndex","columns","dataObservable","rowClick"],["select","selectedItemAction"],["selectedItemAction",""],["select","selectedItemsAction"],["selectedItemsAction",""],["actions",""],["queryParamsHandling","","preserveFragment","",1,"mr-1",3,"routerLink"],[3,"click"],[1,"mr-1",3,"routerLink"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Ob(1,"dexih-widget",1),o.Vb("close",(function(){return t.close()})),o.Lb(2,"support-options",2),o.Ob(3,"dexih-widget-section",3),o.Ob(4,"dexih-table",4),o.Vb("rowClick",(function(e){return t.edit(e)})),o.Dc(5,Et,1,3,"ng-template",5,6,o.Ec),o.Dc(7,Kt,1,0,"ng-template",7,8,o.Ec),o.Dc(9,Ht,1,2,"ng-template",null,9,o.Ec),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.yb(1),o.hc("showCloseButton",!0),o.yb(1),o.hc("isExpanded",!0),o.yb(1),o.hc("padding",!1),o.yb(1),o.hc("enableMultiSelect",!0)("enableStickyToolbar",!0)("toolbarZIndex",100)("columns",t.columns)("dataObservable",t.tableData))},directives:[f.P,wt.a,f.T,m.a,f.j,a.f,f.g,f.o],encapsulation:2}),_t),data:{pageTitle:"Issues"}},{path:"new",component:Mt,data:{action:"new",pageTitle:"Create"}},{path:"edit/:issueKey",component:Mt,data:{action:"edit",pageTitle:"Edit"}}]},{path:"agents",data:{pageTitle:"Remote Agents"},children:[{path:"",component:$e,data:{pageTitle:"Remote Agents"}},{path:"edit/:remoteAgentKey",component:ht,data:{pageTitle:"Remote Edit"}},{path:"download",component:ot,data:{pageTitle:"Download Agent"}},{path:"token-new",component:pt,data:{action:"New",pageTitle:"New Token"}},{path:"token-renew/:remoteAgentKey",component:pt,data:{action:"Renew",pageTitle:"Renew Token"}}]},{path:"help",component:ze,data:{pageTitle:"Help"}},{path:"",children:Vt}],Rt=a.i.forChild([{path:"",component:h,children:[{path:"",redirectTo:"index"},{path:"index",data:{pageTitle:"Hubs"},children:[{path:"",component:U,data:{pageTitle:"Hubs Summary"}},{path:"hubs-view",data:{pageTitle:"Hubs View"},children:Vt},{path:"",children:Ut}]},{path:"",children:Ut}]}]),Gt=n("PCNd"),Bt=n("4Y1E"),jt=((Zt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(){return{ngModule:e,providers:[i.a,Bt.a]}}}]),e}()).\u0275mod=o.Ib({type:Zt}),Zt.\u0275inj=o.Hb({factory:function(e){return new(e||Zt)},providers:[i.a,Bt.a],imports:[[Gt.a,Rt,x.C]]}),Zt)}}]);