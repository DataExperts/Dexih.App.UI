{"version":3,"sources":["webpack:///src/app/+hub/api/api-edit/api-edit.component.ts","webpack:///src/app/+hub/api/api-edit/api-edit.component.html","webpack:///src/app/+hub/api/api-edit/index.ts","webpack:///src/app/+hub/api/api-index/api-index.component.ts","webpack:///src/app/+hub/api/api-index/api-index.component.html","webpack:///src/app/+hub/api/api-index/index.ts","webpack:///src/app/+hub/columnValidation/columnValidation-edit/columnValidation-edit.component.ts","webpack:///src/app/+hub/columnValidation/columnValidation-edit/columnValidation-edit.component.html","webpack:///src/app/+hub/columnValidation/columnValidation-index/columnValidation-index.component.ts","webpack:///src/app/+hub/columnValidation/columnValidation-index/columnValidation-index.component.html","webpack:///src/app/+hub/columnValidation/index.ts","webpack:///src/app/+hub/connection/connection-edit/connection-edit.component.html","webpack:///src/app/+hub/connection/connection-edit/connection-edit.component.ts","webpack:///src/app/+hub/connection/connection-edit/index.ts","webpack:///src/app/+hub/connection/connection-import/connection-import.component.html","webpack:///src/app/+hub/connection/connection-import/connection-import.component.ts","webpack:///src/app/+hub/connection/connection-import/index.ts","webpack:///src/app/+hub/connection/connection-index/connection-index.component.html","webpack:///src/app/+hub/connection/connection-index/connection-index.component.ts","webpack:///src/app/+hub/connection/connection-index/index.ts","webpack:///src/app/+hub/connection/index.ts","webpack:///src/app/+hub/copy/export/export.component.ts","webpack:///src/app/+hub/copy/export/export.component.html","webpack:///src/app/+hub/copy/import/import.component.ts","webpack:///src/app/+hub/copy/import/import.component.html","webpack:///src/app/+hub/copy/index.ts","webpack:///src/app/+hub/customFunction/customFunction-edit/customFunction-edit.component.ts","webpack:///src/app/+hub/customFunction/customFunction-edit/customFunction-edit.component.html","webpack:///src/app/+hub/customFunction/customFunction-edit/customFunction-parameter.component.ts","webpack:///src/app/+hub/customFunction/customFunction-edit/customFunction-parameter.component.html","webpack:///src/app/+hub/customFunction/customFunction-edit/index.ts","webpack:///src/app/+hub/customFunction/customFunction-index/customFunction-index.component.ts","webpack:///src/app/+hub/customFunction/customFunction-index/customFunction-index.component.html","webpack:///src/app/+hub/customFunction/index.ts","webpack:///src/app/+hub/dashboard/dashboard-edit/dashboard-edit.component.ts","webpack:///src/app/+hub/dashboard/dashboard-edit/dashboard-edit.component.html","webpack:///src/app/+hub/dashboard/dashboard-edit/index.ts","webpack:///src/app/+hub/dashboard/dashboard-edit/item/dashboard-item.component.ts","webpack:///src/app/+hub/dashboard/dashboard-edit/item/dashboard-item.component.html","webpack:///src/app/+hub/dashboard/dashboard-index/dashboard-index.component.ts","webpack:///src/app/+hub/dashboard/dashboard-index/dashboard-index.component.html","webpack:///src/app/+hub/dashboard/dashboard-index/index.ts","webpack:///src/app/+hub/dashboard/index.ts","webpack:///src/app/+hub/datajob/datajob-edit/datajob-edit.component.ts","webpack:///src/app/+hub/datajob/datajob-edit/datajob-edit.component.html","webpack:///src/app/+hub/datajob/datajob-index/datajob-index.component.ts","webpack:///src/app/+hub/datajob/datajob-index/datajob-index.component.html","webpack:///src/app/+hub/datajob/datajob-index/index.ts","webpack:///src/app/+hub/datajob/datajob-run/datajob-run.component.ts","webpack:///src/app/+hub/datajob/datajob-run/datajob-run.component.html","webpack:///src/app/+hub/datajob/index.ts","webpack:///src/app/+hub/datalink/datalink-index/datalink-index.component.ts","webpack:///src/app/+hub/datalink/datalink-index/datalink-index.component.html","webpack:///src/app/+hub/datalink/datalink-index/index.ts","webpack:///src/app/+hub/datalink/datalink-new/datalink-new.component.ts","webpack:///src/app/+hub/datalink/datalink-new/datalink-new.component.html","webpack:///src/app/+hub/datalink/datalink-new/index.ts","webpack:///src/app/+hub/datalink/datalink-preview-data/datalink-preview-data.component.ts","webpack:///src/app/+hub/datalink/datalink-preview-data/datalink-preview-data.component.html","webpack:///src/app/+hub/datalink/datalink-preview-data/index.ts","webpack:///src/app/+hub/datalink/datalink-run/datalink-run.component.ts","webpack:///src/app/+hub/datalink/datalink-run/datalink-run.component.html","webpack:///src/app/+hub/datalink/index.ts","webpack:///src/app/+hub/files/files-bulk-load/files-bulk-load.component.html","webpack:///src/app/+hub/files/files-bulk-load/files-bulk-load.component.ts","webpack:///src/app/+hub/files/files-manage/files-manage.component.ts","webpack:///src/app/+hub/files/files-manage/files-manage.component.html","webpack:///src/app/+hub/files/index.ts","webpack:///src/app/+hub/hub.base.module.ts","webpack:///src/app/+hub/hub.base.routing.ts","webpack:///src/app/+hub/hubVariable/hubVariable-edit/hubVariable-edit.component.html","webpack:///src/app/+hub/hubVariable/hubVariable-edit/hubVariable-edit.component.ts","webpack:///src/app/+hub/hubVariable/hubVariable-index/hubVariable-index.component.ts","webpack:///src/app/+hub/hubVariable/hubVariable-index/hubVariable-index.component.html","webpack:///src/app/+hub/hubVariable/index.ts","webpack:///src/app/+hub/listOfValues/listOfValues-edit/index.ts","webpack:///src/app/+hub/listOfValues/listOfValues-edit/listOfValues-edit.component.ts","webpack:///src/app/+hub/listOfValues/listOfValues-edit/listOfValues-edit.component.html","webpack:///src/app/+hub/listOfValues/listOfValues-index/index.ts","webpack:///src/app/+hub/listOfValues/listOfValues-index/listOfValues-index.component.ts","webpack:///src/app/+hub/listOfValues/listOfValues-index/listOfValues-index.component.html","webpack:///src/app/+hub/manage/manage-users-index/manage-users-index.component.ts","webpack:///src/app/+hub/manage/manage-users-index/manage-users-index.component.html","webpack:///src/app/+hub/remoteAgent/index.ts","webpack:///src/app/+hub/remoteAgent/remoteAgent-edit/remoteAgent-edit.component.ts","webpack:///src/app/+hub/remoteAgent/remoteAgent-edit/remoteAgent-edit.component.html","webpack:///src/app/+hub/remoteAgent/remoteAgent-index/remoteAgent-index.component.html","webpack:///src/app/+hub/remoteAgent/remoteAgent-index/remoteAgent-index.component.ts","webpack:///src/app/+hub/results/index.ts","webpack:///src/app/+hub/results/results-index/index.ts","webpack:///src/app/+hub/results/results-index/results-index.component.ts","webpack:///src/app/+hub/results/results-index/results-index.component.html","webpack:///src/app/+hub/results/results-view/index.ts","webpack:///src/app/+hub/results/results-view/preview-results.component.ts","webpack:///src/app/+hub/results/results-view/preview-results.component.html","webpack:///src/app/+hub/results/results-view/profile-results.component.ts","webpack:///src/app/+hub/results/results-view/profile-results.component.html","webpack:///src/app/+hub/results/results-view/progress.component.ts","webpack:///src/app/+hub/results/results-view/progress.component.html","webpack:///src/app/+hub/results/results-view/results-view.component.ts","webpack:///src/app/+hub/results/results-view/results-view.component.html","webpack:///src/app/+hub/results/results-view/results-view.module.ts","webpack:///src/app/+hub/results/results-view/stats.component.ts","webpack:///src/app/+hub/results/results-view/stats.component.html","webpack:///src/app/+hub/search/index.ts","webpack:///src/app/+hub/search/object-type.pipe.ts","webpack:///src/app/+hub/search/search.component.ts","webpack:///src/app/+hub/search/search.component.html","webpack:///src/app/+hub/search/search.module.ts","webpack:///src/app/+hub/sharedData/sharedData-index.component.ts","webpack:///src/app/+hub/sharedData/sharedData-index.component.html","webpack:///src/app/+hub/table/table-index/index.ts","webpack:///src/app/+hub/table/table-index/table-index.component.html","webpack:///src/app/+hub/table/table-index/table-index.component.ts","webpack:///src/app/+hub/table/table-preview-data/index.ts","webpack:///src/app/+hub/tags/tags.component.ts","webpack:///src/app/+hub/tags/tags.component.html","webpack:///src/app/+hub/test/datalinkTest-index/datalinkTest-index.component.ts","webpack:///src/app/+hub/test/datalinkTest-index/datalinkTest-index.component.html","webpack:///src/app/+hub/test/datalinkTest-new/datalinkTest-new.component.html","webpack:///src/app/+hub/test/datalinkTest-new/datalinkTest-new.component.ts","webpack:///src/app/+hub/test/index.ts","webpack:///src/app/+hub/view/view-edit/index.ts","webpack:///src/app/+hub/view/view-index/index.ts"],"names":["formsService","ApiEditComponent","hubService","authService","route","router","refreshDataSubject","sourceTypes","key","Datalink","name","Table","eSourceType","connectionTables","datalinks","selectQuery","data","isLoaded","cancelToken","_subscription","params","getHubCacheObservable","subscribe","result","hubCache","action","pageTitle","status","Loaded","getConnectionTables","hub","dexihDatalinks","hasChanged","confirmDialog","then","confirm","load","reason","e","addHubClientErrorMessage","apiKey","addHubErrorMessage","dexihApis","api","find","c","watchChanges","getColumns","_formChangeSubscription","getCurrentFormObservable","form","controls","value","history","pushState","newUrl","window","location","pathname","replace","navigateByUrl","unsubscribe","_changesSubscription","currentForm","sourceDatalinkKey","valueChanges","sourceTableKey","reset","cancel","navigateUp","apiForm","sourceType","table","getTable","tableColumns","dexihTableColumns","inputColumns","getInputColumns","datalink","ioColumns","buildInputOutput","getDatalinkOutputColumns","sourceDatalinkTable","dexihDatalinkColumns","columns","filter","isInput","map","logicalName","dataType","rank","defaultValue","previewDatalinkKeyData","parameters","next","previewTableKeyData","format","downloadObject","objectKey","objectType","query","downloadData","Promise","resolve","$event","returnValue","close","refresh","selector","templateUrl","providers","ApiIndexComponent","eSharedObjectType","iconClass","tooltip","width","align","title","footer","tags","_tableData","tableData","asObservable","updateApis","_hubCacheChangeSubscription","navigate","relativeTo","apis","isValid","apiSource","getSourceDetails","updateDate","sharedIcon","isShared","sharedToolTip","getObjectTags","ColumnValidation","getHubCacheChangeObservable","hubCacheChange","changeClass","Api","TagObjects","editApi","styles","ColumnValidationEditComponent","eInvalidAction","eCleanAction","eTypeCode","InvalidActions","CleanActions","typeCodes","invalidActions","cleanActions","lookupColumnValue","eCacheStatus","_lookupColumnSubscription","connections","columnValidationKey","dexihColumnValidations","validation","getValidationLookupColumn","lookupColumnKey","column","getColumn","tableKey","testColumnValidation","testValue","testResult","ColumnValidationIndexComponent","updateValidations","validations","deleteColumnValidations","description","items","cache","createHub","hubKey","forEach","item","cacheAddColumnValidation","filename","length","exportHub","edit","ConnectionEditComponent","savingConnection","refreshingConnection","revealingConnectionString","creatingDatabase","databases","eConnectionPurposeItems","eConnectionPurpose","eConnectionCategory","variables","logger","LogC","Trace","getRemoteLibrariesObservable","remoteLibraries","dexihHubVariables","_purposeSubscription","connectionKey","dexihConnections","connection","Warning","updateDatabaseTypes","purpose","GetConnectionReference","connectionReference","defaultDatabase","updateUrl","previousConnectionKey","previousConnection","Object","assign","url","index","indexOf","substr","connectionTypes","d","Source","allowsSourceConnection","Managed","allowsManagedConnection","Target","allowsTargetConnection","connectionClassName","setValue","connectionAssemblyName","connectionCategory","Hub","server","uri","protocol","hostname","port","username","user","getUser","email","connectionString","connectionStringDisplay","decrypt","addHubMessage","password","passwordDisplay","encryptConnection","refreshConnection","addHubSuccessMessage","promptDialog","createDatabase","passwordRaw","encrypt","connectionStringRaw","save","event","getRoute","ConnectionImportComponent","showPage","showPageMessage","tableFilter","viewFilter","getRemoteAgentObservable","remoteAgent","getTables","updateFilter","tables","tableType","View","getDatabaseTableNames","cacheTables","dexihTables","i","cacheTable","t","schema","defaultSchema","entityStatus","importTables","importResult","mergeTables","isBusy","lastStatus","Error","message","deleteTables","selected","selectedTables","findIndex","informationDialog","parent","tableKeys","join","changeType","Replace","New","Delete","deletedTable","previousTable","createDate","editTable","ConnectionIndexComponent","queryParams","purposeFilter","updateConnections","deleteConnections","push","type","Connection","cacheAddConnection","editConnection","ExportComponent","getSharedObjects","cacheAddObject","label","ImportComponent","hubFormsService","automaticUpload","importActions","importOptions","_hubCacheSubscription","file","FormData","append","toString","postForm","refreshImport","files","srcElement","doImport","objects","o","property","importAction","newImport","importPackage","CustomFunctionEditComponent","eParameterDirection","outputParameters","inputParameters","outputParameterValues","inputParameterValues","functionTypes","eFunctionType","_functionTypeSubscription","customFunctionKey","dexihCustomFunctions","customFunction","functionType","getNextSequence","Condition","JoinCondition","Validate","returnType","Boolean","updateParameters","pristine","dexihCustomFunctionParameters","parametersArray","sort","a","b","position","direction","Input","Output","parameter","newParameter","oldParameter","newParameterForm","customFunctionParametersFormGroup","p","valueIndex","Array","isArray","splice","removeAt","tmpTransform","createDataTransformItem","downloadCustomFunction","testCustomFunction","syntaxMessage","returnParameterValue","converted","stack","selectedCustomFunction","functionCode","methodCode","functionResultCode","resultCode","transformItemType","CustomFunction","param","datalinkTransformItemKey","returnParam","ReturnValue","dexihFunctionParameters","CustomFunctionParameterComponent","customFunctionParameterForm","addParameter","removeParameter","eBasicType","ignoreChanges","emit","add","remove","CustomFunctionIndexComponent","updateCustomFunctions","functions","deleteCustomFunctions","cacheAddCustomFunction","DashboardEditComponent","isRefreshing","refreshComplete","views","dexihViews","dashboardKey","dashboard","dexihDashboards","JSON","parse","stringify","minCols","maxCols","minRows","maxRows","autoRefresh","runTime","showEdit","previewDashboard","keys","dexihDashboardItems","dashboardItemKey","getRemoteResponse","dataKey","constructDataTableColumns","lock","viewKey","view","cols","rows","x","y","found","row","col","occupied","currentItem","formGroup","dashboardItem","updateDashboardItemView","downloadObjects","DashboardItemComponent","showPreview","isMaximized","onRemove","onMaximize","eViewType","firstLoad","dialogOpen","dataRows","isHubCacheLoaded","_refreshDataSubscription","dataResult","viewConfig","animateConfig","parentParameters","_parametersSubscription","_viewKeySubscription","changes","itemChange","newItem","currentValue","preview","previewViewKey","results","preventDefault","stopPropagation","removeItem","styleUrls","DashboardIndexComponent","updateDashboards","deleteDashboards","dashboards","Dashboard","cacheAddDashboard","DatajobEditComponent","ngOnDestroy","datajobKey","dexihDatajobs","datajob","newDatajob","createDefaultDatajob","DatajobIndexComponent","updateDatajobs","datajobs","Datajob","editDatajob","DatajobRunComponent","truncateTable","resetIncremental","resetValue","datajobKeys","datajobKeyArray","split","runDatajobs","activateDatajobs","DatalinkIndexComponent","eDatalinkType","eDatalinkTypeItems","typeFilter","updateDatalinks","newDatalinks","datalinkType","datalinkData","sourceName","targetName","sourceTable","sourceDatalink","Rows","isQuery","dexihDatalinkTargets","queryParamsHandling","editDatalink","DatalinkNewComponent","fb","showAllErrors","addSourceColumns","auditColumnTypes","AutoIncrement","IsCurrentField","Version","ValidFromDate","ValidToDate","CreateDate","UpdateDate","CreateAuditKey","UpdateAuditKey","allAuditColumns","savingDatalink","formErrors","validationMessages","managedTargetConnections","managedConnections","updateTables","targetConnectionKey","targetConnection","auditConnectionKey","General","buildForm","_valueChangesSubscription","sourceTableKeys","sourceTables","mainForm","group","required","onValueChanged","field","control","get","dirty","valid","messages","errors","auditColumns","createDatalinks","openDatalink","root","back","iteration","setTimeout","DatalinkPreviewDataComponent","eDataObjectType","previewUpdates","DatalinkRunComponent","datalinkKeys","datalinkKeyArray","datalinkKey","datalinkName","runDatalinks","FilesBulkLoadComponent","entityType","canEdit","formatTypes","eFileStatus","uploadedFiles","reference","currentTable","uploadColumns","fileConnections","ref","con","File","bulkLoadForm","Text","updateConnection","_connectionKeySubscription","_flatFilesSubscription","getFlatFilesObservable","flatFileReady","getConnection","doUpload","prototype","call","bulkLoad","bulkUploadFiles","fileFormatKey","formatType","includeFileName","includeFileDate","includeFileRowNumber","fileHandler","concat","upload","success","newTables","saveTables","savedTable","id","FilesManageComponent","updateStrategy","Reload","updateStrategies","path","None","eFlatFilePath","eFlatFilePathItems","fc","Incoming","refreshFiles","allowsFlatFiles","getFileList","fileName","deleteFiles","toPath","moveFiles","downloadFiles","uploadFile","HubBaseModule","ngModule","imports","declarations","exports","resultViewRoute","children","pathMatch","component","tableRoutes","loadChildren","m","TableEditModule","datalinkRoutes","DatalinkEditModule","tablesRoute","connectionRoutes","canDeactivate","connectionsRoute","agentRoutes","agentsRoute","resultRoutes","manageRoute","importRoute","exportRoute","sharedDataRoute","DashboardEditModule","customFunctionRoutes","customFunctionRoute","columnValidationRoutes","columnValidationsRoute","fileFormatRoutes","fileFormatsRoute","viewRoutes","viewRoute","dashboardRoutes","dashboardRoute","lovRoutes","lovRoute","apiRoutes","apiRoute","hubVariableRoutes","hubVariablesRoute","tagsRoute","datalinkTestRoutes","DatalinkTestEditModule","datalinkTestsRoute","filesRoutes","FilesBulkLoadModule","filesRoute","datalinksRoute","datajobRoutes","DatajobEditModule","datajobsRoute","searchRoute","redirectTo","routes","BaseRouting","forChild","HubVariableEditComponent","_isEncryptedSubscription","hubVariableKey","hubVariable","isEncrypted","valueRaw","HubVariableIndexComponent","updateVariables","deleteHubVariables","HubVariable","variable","vars","ListOfValuesEditComponent","eLOVObjectType","_sourceChangeSubscription","listOfValuesKey","dexihListOfValues","listOfValues","refreshColumns","previewListOfValues","listOfValuesItem","staticData","insert","ListOfValuesIndexComponent","update","lov","deleteListOfValues","ListOfValues","lovItem","getListOfValuesCache","ManageUsersIndexComponent","ePermission","ePermissionItems","permission","PublishReader","emails","sendInvites","refreshUsers","getHubUsers","users","userNames","userName","setUserPermissions","dexihMessage","addSuccessMessage","alertEmail","userIds","setUserAlerts","removeUsers","RemoteAgentEditComponent","isNew","getRemoteAgentsObservable","remoteAgents","remoteAgentKey","remoteAgentHubKey","activeAgent","ipAddress","remoteAgentHub","dexihRemoteAgentHubs","isAuthorized","isDefault","ipAddressesControl","ipAddresses","saveRemoteAgent","RemoteAgentIndexComponent","statusFilter","updateRemoteAgents","connected","dataPrivacyStatus","lastLoginDateTime","lastLoginIpAddress","remoteAgentId","RemoteAgent","agentHub","agent","deleteRemoteAgent","ResultsIndexComponent","auditTypes","datalinkTests","auditType","hubPath","getHubUrl","datalinkKeysString","datajobKeysString","datalinkTestsKeysString","_transformWriterResultChangeSubscription","auditKey","connectionKeys","dexihDatalinkTests","uniqueKeys","ar","getAuditResults","getTransformWriterResultChangeObservable","writerResult","referenceKey","existingResult","showResult","PreviewResultsComponent","auditResult","targetTable","testStep","getDatalinkTestStep","testDatalink","testTable","errorTableName","errorSchema","errorConnectionKey","deltaType","NonTrackingField","auditCol","Int64","opCol","CharArray","maxLength","DatabaseOperation","reasonCol","String","UpdateReason","runningQuery","createAuditColumn","updateAuditColumn","column1","operator","IsEqual","value2","andOr","Or","compareDataType","filters","createSelectQuery","previewTableDataQuery","Csv","ProfileResultsComponent","showDetailed","previewProfileData","downloadProfileData","ProgressComponent","percent","total","ResultsViewComponent","getResultDetail","r","ResultsViewModule","StatsComponent","exceptionHidden","fail","eRunStatus","eTriggerMethod","endTime","Date","valueOf","startTime","runStatus","Running","RunningErrors","Started","Abended","Cancelled","Failed","FinishedErrors","Finished","Passed","barChartData","rowsPerSecond","rowsReadPrimary","rowsReadReference","readTicks","rowsTotal","processingTicks","writeTicks","parts","ticks","ObjectTypePipe","SearchComponent","searchObjectTypes","eSearchObjectType","isFirst","searchObject","searchForm","updateSearch","_searchSubscription","pipe","newValue","searchResults","search","searchString","SearchModule","SharedDataIndexComponent","snapshot","updateSharedData","objectTypeName","dataObjects","dataObject","shareItems","TableIndexComponent","connectionName","updateTableData","Query","defaultTableLogicalName","tableName","connectionType","isFile","TagsComponent","state","colors","color","tag","dexihTags","editTag","document","body","scrollTop","documentElement","deleteTags","hide","cacheAddTag","Tags","height","overflow","animations","DatalinkTestIndexComponent","deleteDatalinkTests","runDatalinkTestSnapshot","runDatalinkTests","DatalinkTest","tests","DatalinkTestNewComponent","saving","sourceDatalinkKeys","sourceDatalinks","sourceConnectionKey","newDatalinkTest","snapshotData"],"mappings":"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","file":"6-es5.js","sourcesContent":["import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { HubCache, eCacheStatus, ConnectionTables } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { Subscription, combineLatest, merge, Subject} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { InputOutputColumns } from '../../hub.lineage.models';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { eSourceType, DexihDatalink, InputColumn, DexihColumnBase, SelectQuery, DexihApi, DownloadObject, eDataObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'dexih-api-edit-form',\n  templateUrl: './api-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class ApiEditComponent implements OnInit, OnDestroy {\n  public apiKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _changesSubscription: Subscription;\n\n  public refreshDataSubject: Subject<void> = new Subject<void>();\n\n  sourceTypes = [\n    { key: eSourceType.Datalink, name: 'Datalink' },\n    { key: eSourceType.Table, name: 'Table' }\n  ];\n\n  eSourceType = eSourceType;\n\n  public connectionTables: ConnectionTables[] = [];\n  public datalinks: DexihDatalink[] = [];\n\n  public inputColumns: InputColumn[];\n  public tableColumns: DexihColumnBase[];\n  selectQuery: SelectQuery = new SelectQuery();\n\n  columns: Array<any>;\n  public data: Array<any> = [];\n  private isLoaded = false;\n\n  private cancelToken = new CancelToken();\n\n  constructor(\n    private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.hubCache && this.hubCache.isLoaded()) {\n          this.connectionTables = this.hubCache.getConnectionTables();\n          this.datalinks = this.hubCache.hub.dexihDatalinks;\n        }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n        if (this.hubCache.isLoaded()) {\n          if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded || this.isLoaded) { return; }\n          this.isLoaded = true;\n        }\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Api Edit');\n    }\n  }\n\n  load() {\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.apiKey = + this.params['apiKey'];\n\n      if (!this.apiKey) {\n        this.hubService.addHubErrorMessage('There was no api specified to edit.');\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihApis) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n\n          let api = this.hubCache.hub.dexihApis.find(c => c.key === this.apiKey);\n\n          this.selectQuery = api.selectQuery;\n          if (!this.selectQuery) { this.selectQuery = new SelectQuery(); }\n\n          this.formsService.api(api);\n          this.watchChanges();\n\n          this.getColumns();\n          // this.refresh();\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let api = new DexihApi();\n      this.formsService.api(api);\n      this.watchChanges();\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/api-new', `/api-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n  }\n\n  watchChanges() {\n    if (this._changesSubscription) { this._changesSubscription.unsubscribe(); }\n    this._changesSubscription = merge(\n      this.formsService.currentForm.controls.sourceDatalinkKey.valueChanges,\n      this.formsService.currentForm.controls.sourceTableKey.valueChanges\n    ).subscribe(() => {\n      this.reset();\n      this.selectQuery = new SelectQuery();\n      this.getColumns();\n  //    this.refresh();\n  });\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._changesSubscription) { this._changesSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n  getColumns() {\n    let apiForm = this.formsService.currentForm;\n\n    if (apiForm.controls.sourceType.value === eSourceType.Table && apiForm.controls.sourceTableKey.value > 0) {\n      let table = this.hubCache.getTable(apiForm.controls.sourceTableKey.value);\n      if (table) {\n        this.tableColumns = table.dexihTableColumns;\n        this.inputColumns = this.getInputColumns(table.dexihTableColumns);\n        return;\n      } else {\n        this.reset();\n      }\n    } else {\n      this.reset();\n    }\n\n    if (apiForm.controls.sourceType.value === eSourceType.Datalink && apiForm.controls.sourceDatalinkKey.value > 0) {\n      let datalink = this.datalinks.find(c => c.key === apiForm.controls.sourceDatalinkKey.value);\n      if (datalink) {\n        const ioColumns = new InputOutputColumns();\n        ioColumns.buildInputOutput(this.hubCache, datalink);\n        this.tableColumns = ioColumns.getDatalinkOutputColumns(datalink);\n        this.inputColumns = this.getInputColumns(datalink.sourceDatalinkTable.dexihDatalinkColumns);\n      } else {\n        this.reset();\n      }\n    } else {\n      this.reset();\n    }\n  }\n\n  getInputColumns(columns: DexihColumnBase[]): InputColumn[] {\n    let inputColumns = columns.filter(c => c.isInput).map(c => {\n      return <InputColumn>  {\n          name: c.name, logicalName: c.logicalName, dataType: c.dataType, rank: c.rank, value: c.defaultValue};\n    });\n\n    return inputColumns;\n  }\n\n  reset() {\n    this.tableColumns = [];\n    this.inputColumns = [];\n    this.columns = null;\n    this.data = null;\n  }\n\n  refresh() {\n    let apiForm = this.formsService.currentForm;\n    if (apiForm.controls.sourceType.value === eSourceType.Datalink) {\n      this.hubService.previewDatalinkKeyData(apiForm.controls.sourceDatalinkKey.value, false,\n        this.selectQuery, this.inputColumns, apiForm.controls.parameters.value, this.cancelToken).then((result) => {\n        this.refreshDataSubject.next();\n        this.columns = result.columns;\n        this.data = result.data;\n      }).catch(() => {\n      });\n\n    }\n    if (apiForm.controls.sourceType.value === eSourceType.Table) {\n      this.hubService.previewTableKeyData(apiForm.controls.sourceTableKey.value,\n          false, this.selectQuery, this.inputColumns, apiForm.controls.parameters.value, this.cancelToken).then((result) => {\n        this.columns = result.columns;\n        this.data = result.data;\n      }).catch(() => {\n      });\n    }\n  }\n\n  download(format) {\n    let api = <DexihApi>this.formsService.currentForm.value;\n    let downloadObject = new DownloadObject();\n    if (api.sourceType === eSourceType.Table) {\n      downloadObject.objectKey = api.sourceDatalinkKey;\n      downloadObject.objectType = eDataObjectType.Datalink;\n    }\n    if (api.sourceType === eSourceType.Table) {\n      downloadObject.objectKey = api.sourceTableKey;\n      downloadObject.objectType = eDataObjectType.Table;\n    }\n\n    downloadObject.query = this.selectQuery;\n    this.hubService.downloadData([downloadObject], false, format, this.cancelToken)\n  }\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The api has not been saved',\n          'The api changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The api changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","<div class=\"container\">\n\t<dexih-widget title=\"Edit API\" iconClass=\"fa fa-lg fa-fw fa-feed\" [showCloseButton]=\"true\" [padding]=\"false\"\n\t\t(close)=\"close()\">\n\t\t<ng-template #header>\n\t\t\t<dexih-invalid-form-details [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\"\n\t\t\t\tclass=\"mr-1\"></dexih-invalid-form-details>\n\t\t\t<download-button class=\"mr-1\" (download)=\"download($event)\"></download-button>\n\t\t\t<save-button *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\" class=\"mr-1\"></save-button>\n\t\t\t<cancel-button [formsService]=\"formsService\"></cancel-button>\n\t\t</ng-template>\n\n\t\t<dexih-widget-section title=\"Properties\" [showExpandButton]=\"true\">\n\t\t\t<form *ngIf=\"formsService.currentForm\" [formGroup]=\"formsService.currentForm\">\n\t\t\t\t<fieldset>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<form-input label=\"Api Name\" formControlName=\"name\" placeholder=\"Enter the api name.\"\n\t\t\t\t\t\t\t[autocapitalize]=\"true\" iconClass=\"fa fa-list\" [errors]=\"formsService.formErrors['name']\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<form-textarea label=\"Description\" [showMarkdown]=\"true\" formControlName=\"description\"\n\t\t\t\t\t\t\tplaceholder=\"Enter the description.\">\n\t\t\t\t\t\t</form-textarea>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-checkbox label=\"Auto Start\" formControlName=\"autoStart\"\n\t\t\t\t\t\t\t\t\tnote=\"Re-start the API when the remote agent is restarted.\">\n\t\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-input label=\"Log Directory\" formControlName=\"logDirectory\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter a directory to log api updates.\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\t\t\t\t[errors]=\"formsService.formErrors['logDirectory']\"\n\t\t\t\t\t\t\t\t\tnote=\"Directory to create detailed logs of API calls.  Leave blank to exclude file logging.\">\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-checkbox label=\"Cache Queries\" formControlName=\"cacheQueries\"\n\t\t\t\t\t\t\t\t\tnote=\"Cache API called to improve performance\">\n\t\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-time label=\"Reset Cache Interval\" formControlName=\"cacheResetInterval\"\n\t\t\t\t\t\t\t\t\t[errors]=\"formsService.formErrors['resetCacheInterval']\"\n\t\t\t\t\t\t\t\t\tnote=\"The interval to reset the cache (forcing a reload of new data).\">\n\t\t\t\t\t\t\t\t</form-time>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-select label=\"Data Source Type\" formControlName=\"sourceType\" [items]=\"sourceTypes\"\n\t\t\t\t\t\t\t\t\titemKey=\"key\" itemName=\"name\" iconClass=\"fa fa-database\"\n\t\t\t\t\t\t\t\t\tnote='Specify the source type for this view' [enableFilter]=\"false\">\n\t\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\"\n\t\t\t\t\t\t\t\t*ngIf=\"formsService.currentForm.value.sourceType == eSourceType.Table\">\n\t\t\t\t\t\t\t\t<form-select label=\"Source Table\" formControlName=\"sourceTableKey\"\n\t\t\t\t\t\t\t\t\t[errors]=\"errors?.sourceTableKey\" [items]=\"connectionTables\" parentName=\"name\"\n\t\t\t\t\t\t\t\t\tchildItems=\"dexihTables\" itemKey=\"key\" itemName=\"logicalName\"\n\t\t\t\t\t\t\t\t\tnote=\"Select the source table\">\n\t\t\t\t\t\t\t\t\t<table-edit-button [key]=\"formsService.currentForm.controls.sourceTableKey.value\"></table-edit-button>\n\t\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\"\n\t\t\t\t\t\t\t\t*ngIf=\"formsService.currentForm.value.sourceType == eSourceType.Datalink\">\n\t\t\t\t\t\t\t\t<form-select label=\"Source Datalink\" formControlName=\"sourceDatalinkKey\"\n\t\t\t\t\t\t\t\t\t[errors]=\"errors?.sourceDatalinkKey\" [items]=\"datalinks\" itemKey=\"key\"\n\t\t\t\t\t\t\t\t\titemName=\"name\" note='Select the source datalink'>\n\t\t\t\t\t\t\t\t\t<datalink-edit-button [key]=\"formsService.currentForm.controls.sourceDatalinkKey.value\"></datalink-edit-button>\n\t\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</fieldset>\n\t\t\t</form>\n\t\t</dexih-widget-section>\n\n\t\t<dexih-widget-section *ngIf=\"formsService.currentForm\"  title=\"Parameters\" [showExpandButton]=\"true\" [padding]=\"true\">\n\t\t\t<input-parameters [showEdit]=\"true\" [parameters]=\"formsService.currentForm.controls.parameters\"\n\t\t\t\t[formsService]=\"formsService\">\n\t\t\t</input-parameters>\n\t\t</dexih-widget-section>\n\n\t\t<dexih-widget-section title=\"Data\" [showExpandButton]=\"true\">\n\n\t\t\t<div class=\"d-flex flex-wrap pt-1\" *ngIf=\"inputColumns && inputColumns.length > 0\">\n\t\t\t\t<span *ngFor=\"let column of inputColumns; let i = index\" class=\"input-group\">\n\t\t\t\t\t<div class=\"input-group-prepend\">\n\t\t\t\t\t\t<div class=\"input-group-text\">\n\t\t\t\t\t\t\t{{column.logicalName}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<form-input name=\"column{{i}}\" class=\"form-control p-0\"\n\t\t\t\t\t\t[placeholder]=\"'Enter ' + column.logicalName\" [(ngModel)]=\"column.value\"></form-input>\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<section>\n\t\t\t\t<h5>Data Configuration</h5>\n\t\t\t\t<query-builder [selectQuery]=\"selectQuery\" [columns]=\"tableColumns\" [inputColumns]=\"inputColumns\" [parameters]=\"formsService?.currentForm?.controls.parameters.value\" [refreshEvent]=\"refreshDataSubject.asObservable()\" (onRefreshData)=\"refresh()\">\n\t\t\t\t</query-builder>\n\t\t\t</section>\n\n\t\t\t<dexih-table [enableMultiSelect]=\"false\" [enableSaveCsv]=\"true\" [columns]=\"columns\" [data]=\"data\">\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<dexih-button-refresh class=\"mr-1\" (click)=\"refresh()\" text=\"Reload\"></dexih-button-refresh>\n\t\t\t\t</ng-template>\n\t\t\t</dexih-table>\n\t\t</dexih-widget-section>\n\t</dexih-widget>\n\n\t<dexih-help class=\"m-3\" title=\"Connections\" path=\"/assets/help/reference/api.md\"></dexih-help>\n</div>","export * from './api-edit.component';\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { DexihApi, eSourceType, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'apis',\n    templateUrl: './api-index.component.html',\n    styles: []\n})\nexport class ApiIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    apis: Array<DexihApi>;\n\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },\n        { name: 'apiSource', title: 'Api Source' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n\n                this.updateApis();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'View Index');\n        }\n\n\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    editApi(api: DexihApi) {\n        this.router.navigate(['api-edit', api.key], { relativeTo: this.route });\n    }\n\n    updateApis() {\n        if (this.hubCache.isLoaded()) {\n            let apis: Array<DexihApi>;\n            apis = this.hubCache.hub.dexihApis.filter(c => c.isValid);\n\n            let tableData = apis.map(api => {\n                return {\n                    key: api.key,\n                    name: api.name,\n                    apiSource: this.getSourceDetails(api),\n                    updateDate: api.updateDate,\n                    sharedIcon: api.isShared ? 'fa fa-group' : 'fa fa-user-secret',\n                    sharedToolTip: api.isShared ? 'Table is shared' : 'Table is private',\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.ColumnValidation, api.key)\n                };\n            });\n            this._tableData.next(tableData);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    getSourceDetails(api: DexihApi): string {\n        if (api.sourceType === eSourceType.Table) {\n            let table = this.hubCache.getTable(api.sourceTableKey);\n            if (table) {\n                return 'Table: ' + table.name;\n            } else {\n                return 'Error: Table not found';\n            }\n        } else {\n            let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === api.sourceDatalinkKey);\n            if (datalink) {\n                return 'Datalink: ' + datalink.name;\n            } else {\n                return 'Error: Datalink not found';\n            }\n        }\n\n        return 'Error: Source not configured';\n    }\n\n\n\n    watchChanges() {\n        // watch the current validation in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Api || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateApis();\n            }\n        });\n    }\n}\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"Api's\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-feed\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t\t<dexih-table \n\t\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t\t[columns]=\"columns\"\n\t\t\t\t[dataObservable]=\"tableData\"\n\t\t\t\t(rowClick)=\"editApi($event)\"\n\t\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t\t>\n\t\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.ColumnValidation\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.Api'></dependent-items-button>\n\t\t\t\t\t</ng-template>\n\t\n\n\t\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t\t<actions-api-button [apis]=\"items\"></actions-api-button>\n\t\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n\t\t\t\t\t\t<api-status [apiKey]='item?.key'></api-status>\n\t\t\t\t\t</ng-template>\n\t\t\t</dexih-table>\n\n\t\t</dexih-widget>\n\t\t\n\t\t<dexih-help class=\"m-3\"  title=\"Connections\" path=\"/assets/help/reference/api.md\"></dexih-help>\n</div>\n\n\n","export * from './api-index.component';\n","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { HubCache, InvalidActions, CleanActions, eCacheStatus } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { TypeCodes } from '../../hub.remote.models';\nimport { eInvalidAction, eCleanAction, eTypeCode, DexihConnection, DexihColumnValidation } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n  selector: 'dexih-columnValidation-edit-form',\n  templateUrl: './columnValidation-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class ColumnValidationEditComponent implements OnInit, OnDestroy {\n\n  private columnValidationKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public params: Params;\n  public pageTitle: string;\n\n  eInvalidAction = eInvalidAction;\n  eCleanAction = eCleanAction;\n  eTypeCode = eTypeCode;\n  InvalidActions = InvalidActions;\n  CleanActions = CleanActions;\n\n  typeCodes = TypeCodes;\n  invalidActions = InvalidActions;\n  cleanActions = CleanActions;\n\n  public testValue: string;\n  public testResult: any;\n\n  public lookupColumnValue = '';\n\n  public connections: Array<DexihConnection>;\n  private isLoaded = false;\n\n  public eCacheStatus = eCacheStatus;\n  public cancelToken: CancelToken = new CancelToken();\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n  private _lookupColumnSubscription: Subscription;\n\n  constructor(private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Column Validation');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._lookupColumnSubscription) { this._lookupColumnSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  private load() {\n    this.connections = this.hubCache.getConnectionTables();\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.columnValidationKey = +this.params['validationKey'];\n\n      if (!this.columnValidationKey) {\n        this.hubService.addHubErrorMessage('There was no validation specified to edit.');\n        // this.errorMessage = 'There was no validation specified to edit.';\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihColumnValidations) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let validation = this.hubCache.hub.dexihColumnValidations.find(c => c.key === this.columnValidationKey);\n          this.formsService.validation(validation);\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let validation = new DexihColumnValidation();\n      this.formsService.validation(validation);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/columnValidation-new', `/columnValidation-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n\n    this.isLoaded = true;\n\n    this.getValidationLookupColumn();\n    if (this._lookupColumnSubscription) { this._lookupColumnSubscription.unsubscribe(); }\n    this._lookupColumnSubscription = this.formsService.currentForm.controls.lookupColumnKey.valueChanges.subscribe(() => {\n      this.getValidationLookupColumn();\n    });\n  }\n\n  getValidationLookupColumn() {\n    let lookupColumnKey = this.formsService.currentForm.controls.lookupColumnKey.value;\n    if (lookupColumnKey) {\n      let column = this.hubCache.getColumn(lookupColumnKey);\n      if (column) {\n        let table = this.hubCache.getTable(column.tableKey);\n        this.lookupColumnValue = 'Exists in table:' + table.name + ', column:' + column.name;\n      } else {\n        this.lookupColumnValue = 'Column not found.  Re-select a valid column.';\n      }\n    } else {\n      this.lookupColumnValue = '';\n    }\n  }\n\n  test() {\n    this.hubService.testColumnValidation(this.formsService.currentForm.value, this.testValue, this.cancelToken).then(result => {\n      this.testResult = result;\n    });\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The view has not been saved',\n          'The column validation changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The column validation changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","\t<div class=\"container\">\n\t<dexih-widget \n\ttitle=\"Edit Validation\" \n\ticonClass=\"fa fa-lg fa-fw fa-check-square-o\" \n\t[showCloseButton]=\"true\"\n\t(close)=\"close()\"\n\t[padding]=\"true\"\n\t>\n        <ng-template #header>\n\t\t\t<div class=\"d-inline-flex\">\n\t\t\t\t<ng-template [ngIf]=\"hubCache && hubCache.status === eCacheStatus.Loaded\">\n\t\t\t\t\t<dexih-invalid-form-details class=\"mr-1\" [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\"></dexih-invalid-form-details>\n\t\t\t\t\t<div *ngIf=\"hubCache.canWrite\" >\n\t\t\t\t\t\t<div class=\"input-group mr-1\">\n\t\t\t\t\t\t\t<div class=\"input-group-prepend\">\n\t\t\t\t\t\t\t\t<button class=\"btn btn-primary\" type=\"button\" (click)=\"test()\"><i\tclass=\"fa fa-check-circle-o\"></i></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" placeholder=\"Test value\" [(ngModel)]=\"testValue\" style=\"max-width: 100px\" aria-label=\"\" aria-describedby=\"basic-addon1\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<save-button class=\"mr-1\" *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\"></save-button>\n\t\t\t\t</ng-template>\n\t\t\t\t<cancel-button class=\"mr-1\" [formsService]=\"formsService\"></cancel-button>\n\t\t\t</div>\n        </ng-template>\n\n\t\t<form *ngIf=\"formsService.currentForm\"  [formGroup]=\"formsService.currentForm\">\n\t\t\t<fieldset>\n\t\t\t\t<section *ngIf=\"testResult\">\n\t\t\t\t\t<div class=\"alert \" [class.alert-danger]=\"testResult.success == false\" [class.alert-success]=\"testResult.success == true\">\n\t\t\t\t\t\tTest Result = {{testResult.success}} \n\t\t\t\t\t\t<div *ngIf=\"testResult.cleanedValue\">Cleaned Value = {{testResult.cleanedValue}} </div>\n\t\t\t\t\t\t<div *ngIf=\"testResult.rejectReason\">Reject Reason = {{testResult.rejectReason}} </div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Column Validation Name\" formControlName=\"name\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\" [autocapitalize]=\"true\" [errors]=\"formsService.formErrors['name']\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Data Type\" formControlName=\"dataType\" [items]=\"typeCodes\" itemKey=\"key\" itemName=\"name\">\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t<section>\n\t\t\t\t<form-textarea label=\"Description\" [showMarkdown]=\"true\"  formControlName=\"description\" placeholder=\"Enter the description.\" >\n\t\t\t\t</form-textarea>\n\t\t\t</section>\n\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Validation Fail Action\" formControlName=\"invalidAction\" [items]=\"InvalidActions\" itemKey=\"key\" itemName=\"name\"\n\t\t\t\t\t\t\tnote='Action to take when the validation fails.'>\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section *ngIf=\"formsService.currentForm.value.invalidAction==eInvalidAction.Clean || formsService.currentForm.value.invalidAction==eInvalidAction.RejectClean\" class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Clean Action\" formControlName=\"cleanAction\" [items]=\"cleanActions\" itemKey=\"key\" itemName=\"name\"\n\t\t\t\t\t\t\tnote='Clean Action to apply'>\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<section *ngIf=\"(formsService.currentForm.value.invalidAction == eInvalidAction.RejectClean || formsService.currentForm.value.invalidAction == eInvalidAction.Clean) && formsService.currentForm.value.cleanAction == eCleanAction.CleanValue\" >\n\t\t\t\t\t<form-input label=\"Clean Value\" formControlName=\"cleanValue\" placeholder=\"Enter the clean value.\" iconClass=\"fa fa-list\" >\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\n\t\t\t\t<section >\n\t\t\t\t\t<form-checkbox label=\"Ignore null values.\" formControlName=\"allowDbNull\" >\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\n\t\t\t\t<div class=\"form-row\" *ngIf=\"formsService.currentForm.value.dataType==eTypeCode.String || formsService.currentForm.value.dataType==eTypeCode.Char\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Minimum String Length\" formControlName=\"minLength\" placeholder=\"Enter the minimum string length\" type=\"number\" iconClass=\"fa fa-list\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Maximum String Length\" formControlName=\"maxLength\" placeholder=\"Enter the maximum string length\" type=\"number\" iconClass=\"fa fa-list\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<section *ngIf=\"formsService.currentForm.value.dataType==eTypeCode.String || formsService.currentForm.value.dataType==eTypeCode.Char\" >\n\t\t\t\t\t\t<form-input label=\"Simple Pattern Match\" formControlName=\"patternMatch\" placeholder=\"Provide a match string\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\tnote=\"Simple pattern match, use the format - A=Upper, a=Lower, Z=Any Character, 9=numeric.  (For example: AA999 matches AS123)\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\t\t\t\t<section *ngIf=\"formsService.currentForm.value.dataType==eTypeCode.String || formsService.currentForm.value.dataType==eTypeCode.Char\" >\n\t\t\t\t\t\t<form-input label=\"Regular Expression Match\" formControlName=\"regexMatch\" placeholder=\"Provide a regular expression\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\tnote=\"Use a standard regular expression to validate.  For example [A-Za-z0-9] will ensure string only contains characters and numbers.\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\n\n\t\t\t\t<div class=\"form-row\" *ngIf=\"formsService.currentForm.value.dataType!=eTypeCode.String && formsService.currentForm.value.dataType!=eTypeCode.Char\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Minimum Value\" formControlName=\"minValue\" placeholder=\"Enter the minimum value\" type=\"number\" iconClass=\"fa fa-list\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Maximum Value\" formControlName=\"maxValue\" placeholder=\"Enter the maximum value\" type=\"number\" iconClass=\"fa fa-list\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-tags label=\"Restrict to list of values\" formControlName=\"listOfValues\" placeholder=\"Provide a list of values which are valid.\" >\n\t\t\t\t\t</form-tags>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-tags label=\"Excluded list of values\" formControlName=\"listOfNotValues\" placeholder=\"Provide a list of values which are valid.\" >\n\t\t\t\t\t</form-tags>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-select label=\"Restrict to values that exist in a lookup table column\" \n\t\t\t\t\t\tformControlName=\"lookupColumnKey\" \n\t\t\t\t\t\t[items]=\"connections\" \n\t\t\t\t\t\tgrandParentName=\"name\"\n\t\t\t\t\t\tparentName=\"name\"\n\t\t\t\t\t\titemKey=\"key\"\n\t\t\t\t\t\titemName=\"name\"\n\t\t\t\t\t\tchildItems=\"dexihTables\"\n\t\t\t\t\t\tgrandChildItems=\"dexihTableColumns\"\n\t\t\t\t\t\t[allowNullSelect]=\"true\"\n\t\t\t\t\t\tnote='Checks the selected table column, and ensures the value contains at least one match.'>\n\t\t\t\t\t</form-select>\n\t\t\t\t</section>\n\n\t\t\t\t<section >\n\t\t\t\t\t<form-checkbox label=\"Only lookup values where the 'is current' column is true.\" formControlName=\"lookupIsValid\" >\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\n\t\t\t\t<section >\n\t\t\t\t\t<form-checkbox label=\"Allow valid when lookup returns multiple rows.\" formControlName=\"lookupMultipleRecords\" >\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\t\t\t\t\n\t\t\t</fieldset>\n\t\t</form>\n \n    </dexih-widget>\n\n</div>","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { DexihColumnValidation, DexihHub, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'columnValidations',\n  templateUrl: './columnValidation-index.component.html',\n  styles: []\n})\nexport class ColumnValidationIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    validations: Array<DexihColumnValidation>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar'},\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                this.hubCache = result[0];\n                this.updateValidations();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Column Validation Index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    deleteValidations(validations: Array<DexihColumnValidation>) {\n        this.hubService.deleteColumnValidations(validations);\n    }\n\n    updateValidations() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let validations = this.hubCache.hub.dexihColumnValidations.filter(c => c.isValid)\n                .map(c => {\n                    return {\n                        key: c.key,\n                        name: c.name,\n                        description: c.description,\n                        updateDate: c.updateDate,\n                        tags: this.hubCache.getObjectTags(eSharedObjectType.ColumnValidation, c.key)\n                    }\n                });\n            this._tableData.next(validations);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(validation: DexihColumnValidation) {\n        this.router.navigate(['columnValidation-edit', validation.key], { relativeTo: this.route});\n    }\n\n    export(items: Array<DexihColumnValidation>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        items.forEach(item => { this.hubCache.cacheAddColumnValidation(item.key, hub); });\n\n        let filename = items.length === 1 ? 'ColumnValidation - ' + items[0].name + '.json' : 'columnValidations.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    watchChanges() {\n      // watch the current validation in case it is changed in another session.\n      this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n          if (hubCacheChange.changeClass === eSharedObjectType.ColumnValidation\n            || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n            this.updateValidations();\n          }\n      });\n  }\n}\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"Validation Rules\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-check-square-o\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t<dexih-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t<actions-columnValidation-button [columnValidation]=\"item\" class=\"mr-1\"></actions-columnValidation-button>\n\t\t\t\t\t<dependent-items-button class=\"mr-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.ColumnValidation'></dependent-items-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<dexih-button-save-local class=\"mr-1\" (click)=\"export(items)\"></dexih-button-save-local>\n\t\t\t\t\t<dexih-button-delete class=\"mr-1\" *ngIf=\"hubCache.canWrite\" (click)=\"deleteValidations(items)\"></dexih-button-delete>\n\t\t\t\t\t<tags-update-button class=\"mr-1\" [objectType]=\"eSharedObjectType.ColumnValidation\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\t\t\t\t\n\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<dexih-button-new *ngIf=\"hubCache.canWrite\" [routerLink]=\"['columnValidation-new']\" class=\"mr-1\"></dexih-button-new>\n\t\t\t\t</ng-template>\n\t\t</dexih-table>\n\n    </dexih-widget>\n</div>\n\n\n","export * from './columnValidation-index/columnValidation-index.component';\nexport * from './columnValidation-edit/columnValidation-edit.component';\n","<div class=\"container\">\n\t<dexih-widget \n\t\ttitle=\"Edit Connection\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-database\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t\t[padding]=\"true\"\n\t\t>\n        <ng-template #header>\n\t\t\t<dexih-invalid-form-details class=\"mr-1\" [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\"></dexih-invalid-form-details>\n\t\t\t<dexih-button class=\"mr-1\" *ngIf=\"hubCache.canWrite\" buttonClass=\"btn btn-success\" [busy]=\"refreshingConnection\" iconClass=\"fa fa-thumbs-o-up\" (click)=\"!refreshingConnection && refreshConnection()\" title=\"Test the connection against the source.\">Test</dexih-button>\n\t\t\t<save-button *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\" class=\"mr-1\"></save-button>\n\n\t\t\t<ng-template [ngIf]=\"hubCache.canWrite && connectionReference\">\n\t\t\t\t<ng-template [ngIf]=\"connectionReference.connectionCategory == eConnectionCategory.SqlDatabase || connectionReference.connectionCategory == eConnectionCategory.DatabaseFile || connectionReference.connectionCategory == eConnectionCategory.NoSqlDatabase || connectionReference.connectionCategory == eConnectionCategory.Hub\">\n\t\t\t\t\t<dexih-button class=\"mr-1\" *ngIf=\"formsService.currentForm.controls.key.value\" [routerLink]=\"['../../connection-import', formsService.currentForm.controls.key.value]\" iconClass=\"fa fa-plus\">Import Tables</dexih-button>\n\t\t\t\t</ng-template>\n\t\t\t\t<ng-template [ngIf]=\"connectionReference.connectionCategory == eConnectionCategory.File\">\n\t\t\t\t\t<dexih-button class=\"mr-1\" *ngIf=\"formsService.currentForm.controls.key.value\" [routerLink]=\"['../../../tables', 'table-new', formsService.currentForm.controls.key.value]\" iconClass=\"fa fa-plus\">New File</dexih-button>\n\t\t\t\t</ng-template>\n\t\t\t\t<ng-template [ngIf]=\"connectionReference.connectionCategory == eConnectionCategory.WebService\">\n\t\t\t\t\t<dexih-button class=\"mr-1\" *ngIf=\"formsService.currentForm.controls.key.value\" [routerLink]=\"['../../../tables', 'table-new', formsService.currentForm.controls.key.value]\"  iconClass=\"fa fa-plus\">New WebService</dexih-button>\n\t\t\t\t</ng-template>\n\t\t\t</ng-template>\n\n\t\t\t<cancel-button [formsService]=\"formsService\"></cancel-button>\n        </ng-template>\n\n\t\t<form *ngIf=\"formsService.currentForm\"  [formGroup]=\"formsService.currentForm\">\n\t\t\t<!--dummy hidden password to stop chrome/firefox/safari autocompletion password.-->\n\t\t\t<input id=\"fake_user_name\" name=\"fake_user[name]\" style=\"position:absolute; top:-5000px;\" type=\"text\" value=\"Fake Auto-fill\">\n\t\t\t<input id=\"fake_password\" type=\"password\" name=\"fake_password[password]\" style=\"position:absolute; top:-5000px;\" type=\"text\" value=\"Fake Auto-fill\">\n\n\t\t\t<fieldset>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<form-select label=\"Purpose\" formControlName=\"purpose\" placeholder=\"Connection purpose\" iconClass=\"fa fa-database\"\n\t\t\t\t\t\t\t[items]=\"eConnectionPurposeItems\" itemName=\"name\" itemKey=\"key\" [enableFilter]=\"false\"\n\t\t\t\t\t\t\t[errors]=\"formsService.formErrors.purpose\">\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\n\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Name\" formControlName=\"name\" placeholder=\"Enter a name for the connection\" [autocapitalize]=\"true\" iconClass=\"fa fa-database\"\n\t\t\t\t\t\t\t[errors]=\"formsService.formErrors.name\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Database Type\" [(ngModel)]=\"connectionReference\" [ngModelOptions]=\"{standalone: true}\" (ngModelChange)=\"selectDatabaseType($event)\" \n\t\t\t\t\t\t\t[items]=\"connectionTypes\" itemName=\"name\" itemKey=\"name\" [enableKeySelect]=\"false\"\n\t\t\t\t\t\t\ticonClass=\"fa fa-database\" [sortItems]=\"true\">\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<section>\n                    <form-textarea label=\"Description\" formControlName=\"description\" [showMarkdown]=\"true\" placeholder=\"Enter the description.\"  [errors]=\"formsService.formErrors.description\">\n                    </form-textarea>\n                </section>\n\n\t\t\t\t<span *ngIf=\"connectionReference\">\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<markdown [data]=\"connectionReference.description\" (click)=\"getRoute($event)\"></markdown>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<span *ngIf=\"connectionReference.allowsConnectionString == true\">\n\t\t\t\t\t\t<section >\n\t\t\t\t\t\t\t<form-checkbox label=\"Use a connection string\" formControlName=\"useConnectionString\" >\n\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t</section>\n\n\t\t\t\t\t\t<section *ngIf=\"formsService.currentForm.controls.useConnectionString.value == true\">\n\t\t\t\t\t\t\t<form-input *ngIf=\"!formsService.currentForm.controls.useConnectionStringVariable.value\"\n\t\t\t\t\t\t\t\tlabel=\"Connection String\" (keydown)=\"connectionStringChanged()\" formControlName=\"connectionStringDisplay\" placeholder=\"Enter a the connection string\" iconClass=\"fa fa-database\" [errors]=\"formsService.formErrors.connectionStringDisplay\">\n\t\t\t\t\t\t\t\t<span *ngIf=\"!formsService.formErrors.connectionStringRaw\"> (<a href=\"javascript:void(0)\" *ngIf=\"revealingConnectionString == false\" (click)=\"revealConnectionString()\"> <i class=\"fa fa-refresh\"></i> Reveal </a>\n\t\t\t\t\t\t\t\t<span *ngIf=\"revealingConnectionString == true\" > <i class=\"fa fa-spin fa-refresh\"></i> Revealing... please wait </span>)</span>\n\t\t\t\t\t\t\t</form-input>\n\n\t\t\t\t\t\t\t<form-select *ngIf=\"formsService.currentForm.controls.useConnectionStringVariable.value\"\n\t\t\t\t\t\t\t\tlabel=\"Connection String\" \n\t\t\t\t\t\t\t\tformControlName=\"connectionString\" \n\t\t\t\t\t\t\t\t[items]=\"variables\" \n\t\t\t\t\t\t\t\ticonClass=\"fa fa-at\" \n\t\t\t\t\t\t\t\t[sortItems]=\"true\" \n\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\"\n\t\t\t\t\t\t\t\ttextEntryNote=\"Enter the variable name surrounded by {}\">\n\t\t\t\t\t\t\t</form-select>\n\n\t\t\t\t\t\t\t<form-checkbox label=\"Use a variable for connection string\" formControlName=\"useConnectionStringVariable\" (click)=\"clearConnectionString()\" >\n\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t</section>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span *ngIf=\"formsService.currentForm.controls.useConnectionString.value == false\">\n\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t<form-select \n\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\" \n\t\t\t\t\t\t\t\t[label]=\"connectionReference.serverDescription\" \n\t\t\t\t\t\t\t\tformControlName=\"server\" \n\t\t\t\t\t\t\t\tplaceholder=\"Enter the details.\" \n\t\t\t\t\t\t\t\ticonClass=\"fa fa-server\" \n\t\t\t\t\t\t\t\t[errors]=\"formsService.formErrors.server\"\n\t\t\t\t\t\t\t\t[items]=\"variables\" \n\t\t\t\t\t\t\t\t[enableFilter]=\"true\"\n\t\t\t\t\t\t\t\t[note]=\"connectionReference.serverHelp\"\n\t\t\t\t\t\t\t></form-select> \n\t\t\t\t\t\t</section>\n\n\t\t\t\t\t\t<section *ngIf=\"connectionReference.allowsWindowsAuth == true\">\n\t\t\t\t\t\t\t<form-checkbox label=\"Use windows authentication\" formControlName=\"useWindowsAuth\">\n\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t</section>\n\n\t\t\t\t\t\t<div *ngIf=\"connectionReference.allowsUserPassword && (formsService.currentForm.controls.useWindowsAuth.value == false || connectionReference.allowsWindowsAuth == false)\" class=\"form-row\">\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-select \n\t\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\" \n\t\t\t\t\t\t\t\t\tlabel=\"User Name\" \n\t\t\t\t\t\t\t\t\tformControlName=\"username\" \n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter user name\" \n\t\t\t\t\t\t\t\t\ticonClass=\"fa fa-user\" \n\t\t\t\t\t\t\t\t\t[errors]=\"formsService.formErrors.username\"\n\t\t\t\t\t\t\t\t\t[items]=\"variables\" \n\t\t\t\t\t\t\t\t\t[enableFilter]=\"true\"\n\t\t\t\t\t\t\t\t></form-select> \n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-input *ngIf=\"formsService.currentForm.controls.usePasswordVariable.value == false\" label=\"Password\" (keydown)=\"passwordChanged()\" formControlName=\"passwordDisplay\" type=\"password\" placeholder=\"Enter a password\"  iconClass=\"fa fa-lock\" [errors]=\"formsService.formErrors.password\">\n\t\t\t\t\t\t\t\t</form-input>\n\n\t\t\t\t\t\t\t\t<form-select *ngIf=\"formsService.currentForm.controls.usePasswordVariable.value\"\n\t\t\t\t\t\t\t\t\tlabel=\"Password\" \n\t\t\t\t\t\t\t\t\tformControlName=\"password\" \n\t\t\t\t\t\t\t\t\t[items]=\"variables\" \n\t\t\t\t\t\t\t\t\ticonClass=\"fa fa-at\" \n\t\t\t\t\t\t\t\t\t[sortItems]=\"true\" \n\t\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</form-select>\n\n\t\t\t\t\t\t\t\t<form-checkbox label=\"Use a variable for password\" formControlName=\"usePasswordVariable\" (click)=\"clearPassword()\" >\n\t\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div *ngIf=\"connectionReference.allowsToken && (formsService.currentForm.controls.useWindowsAuth.value == false || connectionReference.allowsWindowsAuth == false)\" class=\"form-row\">\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-input *ngIf=\"formsService.currentForm.controls.usePasswordVariable.value == false\" label=\"Secure Token\" (keydown)=\"passwordChanged()\" formControlName=\"passwordDisplay\" type=\"password\" placeholder=\"Enter secure token\"  iconClass=\"fa fa-lock\" [errors]=\"formsService.formErrors.password\">\n\t\t\t\t\t\t\t\t</form-input>\n\n\t\t\t\t\t\t\t\t<form-select *ngIf=\"formsService.currentForm.controls.usePasswordVariable.value\"\n\t\t\t\t\t\t\t\t\tlabel=\"Secure Token\" \n\t\t\t\t\t\t\t\t\tformControlName=\"password\" \n\t\t\t\t\t\t\t\t\t[items]=\"variables\" \n\t\t\t\t\t\t\t\t\ticonClass=\"fa fa-at\" \n\t\t\t\t\t\t\t\t\t[sortItems]=\"true\" \n\t\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</form-select>\n\n\t\t\t\t\t\t\t\t<form-checkbox label=\"Use a variable for token\" formControlName=\"usePasswordVariable\" (click)=\"clearPassword()\" >\n\t\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<section *ngIf=\"connectionReference.requiresDatabase\" ng-disabled=\"refreshingConnection || creatingDatabase\" >\n\t\t\t\t\t\t\t<form-select \n\t\t\t\t\t\t\t\t[label]=\"connectionReference.databaseDescription\" \n\t\t\t\t\t\t\t\tformControlName=\"defaultDatabase\" \n\t\t\t\t\t\t\t\t[items]=\"databases\" \n\t\t\t\t\t\t\t\t[defaultItem]=\"formsService.currentForm.value.defaultDatabase\" \n\t\t\t\t\t\t\t\ticonClass=\"fa fa-database\" \n\t\t\t\t\t\t\t\t[sortItems]=\"true\" \n\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\"\n\t\t\t\t\t\t\t\ttextEntryNote=\"Enter the database name\"\n\t\t\t\t\t\t\t\t(textValueChange)=\"newDatabaseName($event)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t(<a href=\"javascript:void(0)\" *ngIf=\"refreshingConnection == false\" (click)=\"refreshConnection()\"> <i class=\"fa fa-refresh\"></i> Refresh </a>\n\t\t\t\t\t\t\t<span *ngIf=\"refreshingConnection == true\" > <i class=\"fa fa-spin fa-refresh\"></i> Refreshing... please wait </span>) (\n\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" *ngIf=\"creatingDatabase == false\" (click)=\"createDatabase()\"> <i class=\"fa fa-edit\"></i> New Database </a>\n\t\t\t\t\t\t\t\t<span *ngIf=\"creatingDatabase == true\"> <i class=\"fa fa-spin fa-refresh\"></i> Creating database... please wait </span>)\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t<form-input  type=\"number\" label=\"Connection Timeout\" formControlName=\"connectionTimeout\" iconClass=\"fa fa-clock-o\"\t[errors]=\"formsService.formErrors.connectionTimeout\"\n\t\t\t\t\t\t\tnote=\"The duration in seconds the remote agent will wait to establish a connection.\">\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t<form-input type=\"number\" label=\"Command Timeout\" formControlName=\"commandTimeout\" iconClass=\"fa fa-clock-o\"\t[errors]=\"formsService.formErrors.commandTimeout\"\n\t\t\t\t\t\t\tnote=\"The duration in seconds the remote agent will for a command to start returning a result.\">\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<section *ngIf=\"formsService.currentForm.controls.purpose.value == 'Managed'\">\n\t\t\t\t\t\t<form-checkbox label=\"Multi-use Managed Database (table keys will be added to table names to allow multiple hubs to use same database)\"\n\t\t\t\t\t\t\tformControlName=\"embedTableKey\" [errors]=\"formsService.formErrors.embedTableKey\">\n\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t</section>\n\n\t\t\t\t</span>\n\t\t\t</fieldset>\n\n\t\t</form>\n\t</dexih-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Connections\" path=\"/assets/help/reference/connection.md\"></dexih-help>\n\n</div>","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { LogFactory, eLogLevel } from '../../../../logging';\nimport { eConnectionPurpose, eConnectionCategory, ConnectionReference, DexihConnection, RemoteLibraries, eConnectionPurposeItems } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n  selector: 'dexih-connection-edit-form',\n  templateUrl: './connection-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class ConnectionEditComponent implements OnInit, OnDestroy {\n\n  public connectionKey: number;\n  private connectionTypes: Array<ConnectionReference>;\n  private hubCache: HubCache;\n  private remoteLibraries: RemoteLibraries;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _purposeSubscription: Subscription;\n\n  public savingConnection = false;\n  public refreshingConnection = false;\n  public revealingConnectionString = false;\n  public creatingDatabase = false;\n\n  public databases: Array<string> = [];\n\n  public eConnectionPurposeItems = eConnectionPurposeItems.filter( c => c.key > 0);\n  public eConnectionPurpose = eConnectionPurpose;\n  public eConnectionCategory = eConnectionCategory;\n\n  public cancelToken: CancelToken = new CancelToken();\n\n  public connectionReference: ConnectionReference;\n  private isLoaded = false;\n\n  public variables = [];\n\n  private logger = new LogFactory('connection-edit');\n\n  constructor(private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {\n  }\n\n  ngOnInit() {\n    this.logger.LogC(() => `OnInit`, eLogLevel.Trace);\n\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n        this.hubService.getRemoteLibrariesObservable()\n      ).subscribe(async result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n        this.remoteLibraries = result[3];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        this.variables = this.hubCache.hub.dexihHubVariables.map(c => '{' + c.name + '}');\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(async confirm => {\n                if (confirm) {\n                    await this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            await this.load();\n        }\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Connection Edit');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._purposeSubscription) { this._purposeSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  private async load() {\n    this.isLoaded = true;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.connectionKey = + this.params['connectionKey'];\n\n      this.logger.LogC(() => `edit connection key ${this.connectionKey}.`, eLogLevel.Trace);\n\n      if (!this.connectionKey) {\n        this.hubService.addHubErrorMessage('There was no connection specified to edit.');\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihConnections) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let connection = this.hubCache.hub.dexihConnections.find(c => c.key === this.connectionKey);\n          if (!connection) {\n            this.hubService.addHubErrorMessage('The specified connection could not be found.');\n            this.logger.LogC(() => `edit connection with key ${this.connectionKey} not found.`, eLogLevel.Warning);\n          } else {\n            this.updateDatabaseTypes(connection.purpose);\n            this.connectionReference = await this.hubService.GetConnectionReference(connection);\n            this.formsService.connection(connection);\n            if (connection.defaultDatabase) {\n              this.databases = [connection.defaultDatabase];\n            }\n            this.logger.LogC(() => `edit connection, form loaded.`, eLogLevel.Trace);\n          }\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let connection = new DexihConnection();\n      connection.purpose = +this.params['purpose'];\n\n      this.logger.LogC(() => `new connection, purpose ${connection.purpose}.`, eLogLevel.Trace);\n\n      this.updateDatabaseTypes(connection.purpose);\n      this.formsService.connection(connection);\n\n      this.updateUrl();\n\n      this.logger.LogC(() => `new connection, form loaded.`, eLogLevel.Trace);\n    }\n\n    if (this.action === 'copy') {\n\n      let connection = new DexihConnection();\n\n      let previousConnectionKey = + this.params['connectionKey'];\n      let previousConnection = this.hubCache.hub.dexihConnections.find(c => c.key === previousConnectionKey);\n      Object.assign(connection, previousConnection);\n      connection.name += ' (copy)';\n      connection.key = null;\n      this.connectionReference = await this.hubService.GetConnectionReference(connection);\n\n      this.logger.LogC(() => `copy connection, connectionKey ${previousConnectionKey}.`, eLogLevel.Trace);\n      this.updateDatabaseTypes(connection.purpose);\n      this.formsService.connection(connection);\n\n      this.updateUrl();\n\n      this.logger.LogC(() => `new connection, form loaded.`, eLogLevel.Trace);\n    }\n\n    if (this._purposeSubscription) { this._purposeSubscription.unsubscribe(); }\n    this._purposeSubscription = this.formsService.currentForm.controls.purpose.valueChanges.subscribe(purpose => {\n        this.updateDatabaseTypes(purpose);\n    });\n  }\n\n  private updateUrl() {\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let url = window.location.pathname;\n            let index = url.indexOf('/connection-new');\n            if (index > 0) {\n              let newUrl = url.substr(0, index) + `/connection-edit/${key}`;\n              this.router.navigateByUrl(newUrl);\n            }\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n  }\n\n  private updateDatabaseTypes(purpose: eConnectionPurpose) {\n    this.connectionTypes = this.remoteLibraries.connections.filter(d =>\n      (purpose === eConnectionPurpose.Source && d.allowsSourceConnection) ||\n      (purpose === eConnectionPurpose.Managed && d.allowsManagedConnection) ||\n      (purpose === eConnectionPurpose.Target && d.allowsTargetConnection));\n  }\n\n  async selectDatabaseType(connectionReference: ConnectionReference) {\n    this.formsService.currentForm.controls.connectionClassName.setValue(connectionReference.connectionClassName);\n    this.formsService.currentForm.controls.connectionAssemblyName.setValue(connectionReference.connectionAssemblyName);\n\n    // For integration hub connections, pre-fill some information.\n    if (this.connectionReference.connectionCategory === eConnectionCategory.Hub) {\n      if (!this.formsService.currentForm.controls.server.value) {\n        const uri = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');\n        this.formsService.currentForm.controls.server.setValue(uri);\n      }\n      if (!this.formsService.currentForm.controls.username.value) {\n        const user = this.authService.getUser()\n        if (user) {\n          this.formsService.currentForm.controls.username.setValue(user.email);\n        }\n      }\n    }\n  }\n\n  connectionStringChanged() {\n    this.logger.LogC(() => `connectionStringChanged.`, eLogLevel.Trace);\n    if (this.formsService.currentForm.controls.connectionString.value) {\n      this.formsService.currentForm.controls.connectionString.setValue(null);\n      this.formsService.currentForm.controls.connectionStringDisplay.setValue('');\n    }\n  }\n\n  clearConnectionString() {\n    this.formsService.currentForm.controls.connectionString.setValue(null);\n    this.formsService.currentForm.controls.connectionStringDisplay.setValue('');\n  }\n\n  revealConnectionString() {\n    this.logger.LogC(() => `revealConnectionString.`, eLogLevel.Trace);\n    this.revealingConnectionString = true;\n\n    this.hubService.decrypt(this.formsService.currentForm.controls.connectionString.value, this.cancelToken)\n      .then(result => {\n        this.formsService.currentForm.controls.connectionStringDisplay.setValue(result);\n        this.revealingConnectionString = false;\n      }).catch(reason => {\n        this.hubService.addHubMessage(reason);\n        this.revealingConnectionString = false;\n      });\n  }\n\n  passwordChanged() {\n    this.logger.LogC(() => `passwordChanged.`, eLogLevel.Trace);\n\n    if (this.formsService.currentForm.controls.password.value) {\n      this.formsService.currentForm.controls.password.setValue(null);\n      this.formsService.currentForm.controls.passwordDisplay.setValue('');\n    }\n  }\n\n  clearPassword() {\n    this.formsService.currentForm.controls.password.setValue(null);\n    this.formsService.currentForm.controls.passwordDisplay.setValue('');\n  }\n\n  async refreshConnection() {\n    this.logger.LogC(() => `refreshConnection.`, eLogLevel.Trace);\n\n    await this.encryptConnection();\n\n    this.refreshingConnection = true;\n    this.hubService.refreshConnection(this.formsService.currentForm.value, this.cancelToken)\n      .then(result => {\n        this.hubService.addHubSuccessMessage('The connection was successful.');\n        this.databases = result;\n        this.refreshingConnection = false;\n      }).catch(reason => {\n        this.hubService.addHubMessage(reason);\n        this.refreshingConnection = false;\n      });\n  }\n\n  newDatabaseName(value: string) {\n    this.formsService.currentForm.controls.defaultDatabase.setValue(value);\n  }\n\n  createDatabase() {\n    this.creatingDatabase = true;\n\n    this.authService.promptDialog('Create Database', 'Enter the name for the new database?').then(async result => {\n      if (result) {\n        await this.encryptConnection();\n\n        let connection = Object.assign({}, this.formsService.currentForm.value);\n        connection.defaultDatabase = result;\n\n        this.hubService.createDatabase(connection, this.cancelToken)\n          .then(() => {\n            this.hubService.addHubSuccessMessage('The database was created successfully.');\n            this.databases = [result];\n            this.formsService.currentForm.controls.defaultDatabase.setValue(result);\n            this.creatingDatabase = false;\n          }).catch(reason => {\n            this.hubService.addHubMessage(reason);\n            this.creatingDatabase = false;\n          });\n      } else {\n        this.creatingDatabase = false;\n      }\n    }).catch(() => {\n      this.creatingDatabase = false;\n    });\n  }\n\n  async encryptConnection() {\n    let form = this.formsService.currentForm;\n\n    let passwordRaw = form.controls.passwordRaw.value;\n    if (passwordRaw) {\n      let password = await this.hubService.encrypt(passwordRaw, this.cancelToken);\n      form.controls.password.setValue(password);\n      form.controls.passwordRaw.setValue(null);\n    }\n\n    let connectionStringRaw = form.controls.connectionStringRaw.value;\n    if (connectionStringRaw) {\n      let connectionString = await this.hubService.encrypt(connectionStringRaw, this.cancelToken);\n      form.controls.connectionString.setValue(connectionString);\n      form.controls.connectionStringRaw.setValue(null);\n    }\n  }\n\n  async save() {\n    await this.encryptConnection();\n    await this.formsService.save();\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The connection has not been saved',\n          'The connection changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  public getRoute(event) {\n    this.authService.getRoute(event);\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The connection changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","export * from './connection-edit.component';\n","<div class=\"container-fluid\">\n    <dexih-widget [title]=\"'Import Tables for ' + connection?.name\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-database\" \n\t\t[showIf]=\"showPage\"\n\t\t[loadingMessage]=\"showPageMessage\"\n\t\t[showCloseButton] = \"true\"\n\t\t(close)=\"close()\"\n\t\t[padding]=\"false\"\n\t>\n\t\t<ng-template #header>\n\n\t\t</ng-template>\n\n\t\t<dexih-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"editTable($event)\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<dexih-button-splitdropdown class=\"mr-1\" *ngIf=\"hubCache.canWrite\" text=\"Import\" buttonClass=\"btn btn-success\" iconClass=\"fa fa-cloud-download\" (buttonClick)=\"importSelected(items)\" title=\"Import selected tables\" >\n\t\t\t\t\t\t<a class=\"dropdown-item\" (click)=\"newDatalinks(items)\" title=\"Import tables and create default staging datalinks\">Import &amp; Create Datalinks</a>\n\t\t\t\t\t</dexih-button-splitdropdown>\n\t\t\t\t\t\t\t\n\t\t\t\t\t<dexih-button-delete (click)=\"deleteSelected(items)\" title=\"Delete selected tables\"></dexih-button-delete>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-table=\"item\">\n\t\t\t\t\t<dexih-button-edit class=\"mr-1\"  *ngIf=\"table.key\" [routerLink]=\"['table-edit', table.key]\" queryParamsHandling preserveFragment (click)=\"deleteSelected(items)\" title=\"Edit this table\"></dexih-button-edit>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #filter select=\"filter\" let-items=\"items\">\n\t\t\t\t\t<dexih-button-dropdown class=\"mr-1\" buttonClass=\"btn-primary\" iconClass=\"fa fa-download\" [text]=\"tableFilter\" title=\"Filter by import status\" [pullRight]=\"true\">\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"tableFilter=='All'\" (click)=\"setTableFilter('All')\">All</a>\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"tableFilter=='Imported'\" (click)=\"setTableFilter('Imported')\">Imported</a>\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"tableFilter=='NonImported'\" (click)=\"setTableFilter('NonImported')\">Non Imported</a>\n\t\t\t\t\t</dexih-button-dropdown>\n\t\n\t\t\t\t\t<dexih-button-dropdown class=\"mr-1\" buttonClass=\"btn-primary\" iconClass=\"fa fa-table\" [text]=\"viewFilter\" title=\"Filter by tables/views\" [pullRight]=\"true\">\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"viewFilter=='All'\" (click)=\"setViewFilter('All')\">All</a>\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"viewFilter=='Imported'\" (click)=\"setViewFilter('Tables')\">Tables</a>\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"viewFilter=='NonImported'\" (click)=\"setViewFilter('Views')\">Views</a>\n\t\t\t\t\t</dexih-button-dropdown>\n\t\t\t\t</ng-template>\n\t\t</dexih-table>\n\n    </dexih-widget>\n</div>\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache, EntityStatus } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { DexihConnection, DexihTable, eTableType, eStatus, eImportAction, eSharedObjectType, ConnectionReference } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n    selector: 'connections',\n    templateUrl: './connection-import.component.html',\n    styles: []\n})\nexport class ConnectionImportComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n    connectionKey: number;\n    connection: DexihConnection;\n    connectionReference: ConnectionReference;\n    names: Array<string>;\n    tables: Array<DexihTable>;\n\n    showPage = false;\n    showPageMessage = 'Loading...';\n\n    tableFilter: string;\n    viewFilter: string;\n\n    private cancelToken = new CancelToken();\n\n    columns = [\n        { name: 'schema', title: 'Schema', format: '' },\n        { name: 'name', title: 'Name', format: '' },\n        { name: 'tableType', title: 'Type', enum: eTableType, format: 'Enum' },\n        { name: 'entityStatus.message', title: 'Latest Status' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<DexihTable>> = this._tableData.asObservable();\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        private router: Router,\n        private route: ActivatedRoute\n    ) {\n        this.tableFilter = 'All';\n        this.viewFilter = 'Tables';\n    }\n\n    ngOnInit() {\n        this.showPageMessage = 'Querying source database tables.  Please wait...';\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n                this.hubService.getRemoteAgentObservable()\n            ).subscribe(async result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n                let remoteAgent = result[3];\n\n                this.connectionKey = + params['connectionKey'];\n\n                if (!this.connectionKey) {\n                    this.hubService.addHubErrorMessage('There was no connection specified to import tables.');\n                    this.close();\n                } else {\n                    if (this.hubCache.isLoaded()) {\n                        this.connection = this.hubCache.hub.dexihConnections\n                            .find(connection => connection.key === this.connectionKey);\n\n                        this.connectionReference = await this.hubService.GetConnectionReference(this.connection);\n\n                        this.showPage = false;\n\n                        if (remoteAgent) {\n                            if (this.connection) {\n                                this.getTables(this.connection);\n                            } else {\n                                this.hubService.addHubErrorMessage('The connection could not be found.');\n                                this.close();\n                            }\n                        } else {\n                            this.showPageMessage = 'Waiting for an active remote agent...';\n                        }\n                    }\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Connection Import');\n        }\n\n        // watch for any changes in the connections.\n        this.watchChanges();\n    }\n\n    setTableFilter(tableFilter) {\n        this.tableFilter = tableFilter;\n        this.updateFilter();\n    }\n\n    setViewFilter(viewFilter) {\n        this.viewFilter = viewFilter;\n        this.updateFilter();\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    updateFilter() {\n        let tables;\n        switch (this.tableFilter) {\n            case 'Imported':\n                tables = this.tables.filter(c => c.key > 0);\n                break;\n            case 'NonImported':\n                tables = this.tables.filter(c => c.key === 0 || !c.key);\n                break;\n            default:\n                tables = this.tables;\n                break;\n        }\n\n        switch (this.viewFilter) {\n            case 'Views':\n                tables = tables.filter(c => c.tableType === eTableType.View);\n                break;\n            case 'Tables':\n                tables = tables.filter(c => c.tableType === eTableType.Table);\n                break;\n        }\n\n        this._tableData.next(tables);\n    }\n\n    getTables(connection: DexihConnection) {\n        this.showPage = false;\n        this.showPageMessage = 'Importing tables from remote database...';\n\n        this.hubService.getDatabaseTableNames(connection, this.cancelToken)\n            .then(tables => {\n                this.tables = tables;\n\n                let cacheTables = this.hubCache.hub.dexihTables.filter(c => c.connectionKey === connection.key);\n\n                for (let i = 0; i < tables.length; i++) {\n                    let cacheTable = null;\n                    let table = tables[i];\n\n                    if (cacheTables) {\n                        cacheTable = cacheTables.find(t => t.name === table.name && t.schema === table.schema);\n\n                        if (!cacheTable && this.connectionReference && this.connectionReference.defaultSchema === table.schema) {\n                            cacheTable = cacheTables.find(t => t.name === table.name && !t.schema)\n                        }\n                    }\n\n                    if (cacheTable) {\n                        this.tables[i] = cacheTable;\n                    } else {\n                        table.connectionKey = connection.key;\n                        table.tableType = <eTableType>table.tableType;\n                        table.entityStatus = new EntityStatus();\n                    }\n                }\n\n                this.showPage = true;\n                this.showPageMessage = '';\n\n                this.updateFilter();\n\n\n            }).catch(reason => {\n                this.hubService.addHubMessage(reason);\n            });\n    }\n\n\n    import(table: DexihTable) {\n        this.hubService.importTables([table], true, this.cancelToken).then(importResult => {\n            this.mergeTables(importResult);\n            // if (importResult) {\n            //     importResult[0].entityStatus.isBusy = false;\n            // }\n        }).catch(reason => {\n            table.entityStatus.isBusy = false;\n            table.entityStatus.lastStatus = eStatus.Error;\n            table.entityStatus.message = reason.message;\n        });\n    }\n\n    deleteTable(table: DexihTable) {\n        this.hubService.deleteTables([table]).then(result => {\n            table.entityStatus.isBusy = false;\n        }).catch(reason => {\n            table.entityStatus.isBusy = false;\n            table.entityStatus.lastStatus = eStatus.Error;\n            table.entityStatus.message = reason.message;\n        });\n    }\n\n    importSelected(selected: Array<DexihTable>) {\n        let selectedTables = selected.filter(t => !t.entityStatus.isBusy);\n        selectedTables.forEach(t => t.entityStatus.isBusy = true);\n        this.hubService.importTables(selectedTables, true, this.cancelToken).then(result => {\n            this.mergeTables(result);\n            // selectedTables.forEach(t => t.entityStatus.isBusy = false);\n        }).catch(reason => {\n            selectedTables.forEach(t => t.entityStatus.isBusy = false);\n        });\n    }\n\n    mergeTables(tables: Array<DexihTable>) {\n        if (!tables) { return; }\n        tables.forEach(table => {\n            let index = this.tables.findIndex(t => t.name === table.name && t.schema === table.schema);\n\n            if (index >= 0) {\n                this.tables[index] = table;\n            }\n        });\n\n        this.updateFilter();\n    }\n\n    deleteSelected(selected: Array<DexihTable>) {\n        let selectedTables = selected.filter(t => !t.entityStatus.isBusy && t.key > 0);\n\n        if (selectedTables.length === 0) {\n            this.authService.informationDialog(\n                'Can not delete', 'None of the selected tables can be deleted, as they are either busy, or have not been imported.');\n        }\n        selectedTables.forEach(t => t.entityStatus.isBusy = true);\n        this.hubService.deleteTables(selectedTables).then(result => {\n            selectedTables.forEach(t => t.entityStatus.isBusy = false);\n        }).catch(reason => {\n            selectedTables.forEach(t => t.entityStatus.isBusy = false);\n        });\n    }\n\n    editTable(table: DexihTable) {\n        if (table && table.key) {\n            this.router.navigate(['table-edit', table.key], { relativeTo: this.route.parent });\n        }\n    }\n\n    newDatalinks(items: Array<DexihTable>) {\n        let selectedTables = items.filter(t => !t.entityStatus.isBusy);\n        selectedTables.forEach(t => t.entityStatus.isBusy = true);\n        this.hubService.importTables(selectedTables, true, this.cancelToken).then(result => {\n            this.mergeTables(result);\n\n            let tableKeys = result.map(c => c.key).join('|');\n            this.router.navigate(['datalink-new', tableKeys, 0], { relativeTo: this.route.parent });\n\n        }).catch(reason => {\n            selectedTables.forEach(t => t.entityStatus.isBusy = false);\n        });\n\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Table) {\n                if (hubCacheChange.changeType === eImportAction.Replace || hubCacheChange.changeType === eImportAction.New) {\n                    let table: DexihTable = hubCacheChange.data;\n\n                    if (table.connectionKey === this.connectionKey) {\n                        let index = this.tables.findIndex(t => t.name === table.name && t.schema === table.schema);\n                        if (index >= 0) {\n                            this.tables[index] = table;\n                            this.updateFilter();\n                        }\n                    }\n                }\n                if (hubCacheChange.changeType === eImportAction.Delete) {\n                    let deletedTable: DexihTable = hubCacheChange.data;\n                    if (deletedTable.connectionKey === this.connectionKey) {\n                        let previousTable = this.tables.find(t => t.key === deletedTable.key);\n                        if (previousTable) {\n                            // table has been delete, so clear key attributes so it appears deleted.\n                            previousTable.key = null;\n                            previousTable.entityStatus.isBusy = false;\n                            previousTable.updateDate = null;\n                            previousTable.createDate = null;\n                            this.updateFilter();\n                        }\n                    }\n                }\n            }\n        });\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n}\n","export * from './connection-import.component';\n","<div class=\"container-fluid\">\n\t<dexih-widget title=\"Connections\" iconClass=\"fa fa-lg fa-fw fa-database\" [showCloseButton]=\"true\" (close)=\"close()\">\n\t\t<dexih-table \n\t\t\t[enableMultiSelect]=\"true\" \n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\" \n\t\t\t[dataObservable]=\"tableData\" \n\t\t\t(rowClick)=\"editConnection($event)\" \t\t\t\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t>\n\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t<actions-connection-button [connections]=\"items\"></actions-connection-button>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.Connection\" [objects]=\"items\" ></tags-update-button>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #filter select=\"filter\" let-items=\"items\">\n\t\t\t\t<dexih-button-dropdown class=\"mr-1\" [autoCompact]=\"false\" buttonClass=\"btn-primary\" iconClass=\"fa fa-filter\" [text]=\"eConnectionPurpose[purposeFilter]\" title=\"Filter by a purpose\"\n\t\t\t\t[pullRight]=\"true\">\n\t\t\t\t   <a class=\"dropdown-item\" [class.active]=\"purposeFilter=='All'\" routerLink='.' [queryParams]=\"{purposeFilter: 'All'}\" title=\"All Connections\">All</a>\n\t\t\t\t   <a *ngFor=\"let purpose of eConnectionPurposeItems | gtFilter:'key':0\" [class.active]=\"purposeFilter==purpose.key\" class=\"dropdown-item\" routerLink='.'\n\t\t\t\t\t[queryParams]=\"{purposeFilter: purpose.key}\" [title]=\"purpose.name\">{{purpose.name}}</a>\n\t\t\t   </dexih-button-dropdown>\t\t\t</ng-template>\n\n\t\t</dexih-table>\n\n\t</dexih-widget>\n\n\t<dexih-help class=\"m-3\"  title=\"Connections\" path=\"/assets/help/reference/connection.md\"></dexih-help>\n\n</div>","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { DexihConnection, eConnectionPurpose, DexihHub, eSharedObjectType, eConnectionPurposeItems } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'connections',\n    templateUrl: './connection-index.component.html',\n    styles: []\n})\nexport class ConnectionIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    pageTitle: string;\n\n    hubCache: HubCache;\n    purposeFilter: eConnectionPurpose;\n    eConnectionPurpose = eConnectionPurpose;\n    eConnectionPurposeItems = eConnectionPurposeItems;\n    public eSharedObjectType = eSharedObjectType;\n    connections: Array<DexihConnection>;\n\n    columns = [\n        { name: 'name', title: 'Name', format: 'Md', footer: 'description', tags: 'tags' },\n        { name: 'purpose', title: 'Purpose', format: '' },\n        { name: 'type', title: 'Type', format: '' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the connections.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                let queryParams = result[2];\n                this.hubCache = result[3];\n\n                this.purposeFilter = + queryParams['purposeFilter'];\n                if (!this.purposeFilter) { this.purposeFilter = 0; }\n\n                this.pageTitle = eConnectionPurpose[this.purposeFilter] + ' Connections';\n                this.updateConnections();\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Connection Index');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    deleteConnection(connection: DexihConnection) {\n        this.hubService.deleteConnections([connection]).catch(reason => {\n        });\n    }\n\n    deleteConnections(connections: Array<DexihConnection>) {\n        this.hubService.deleteConnections(connections);\n    }\n\n    editConnection(connection) {\n        this.router.navigate(['connection-edit', connection.key], { relativeTo: this.route });\n    }\n\n    async updateConnections() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let connections: Array<DexihConnection>;\n            if (this.purposeFilter === 0 || !this.purposeFilter) {\n                connections = this.hubCache.hub.dexihConnections;\n            } else {\n                connections = this.hubCache.hub.dexihConnections\n                    .filter(c => c.purpose === this.purposeFilter);\n            }\n\n            let tableData = []\n            for await (const connection of connections)  {\n                let connectionReference = await this.hubService.GetConnectionReference(connection);\n                tableData.push({\n                    key: connection.key,\n                    connectionAssemblyName: connection.connectionAssemblyName,\n                    connectionClassName: connection.connectionClassName,\n                    purpose: eConnectionPurpose[connection.purpose],\n                    type: connectionReference ? connectionReference.name : 'Unknown (' + connection.connectionClassName + ')',\n                    name: connection.name,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.Connection, connection.key),\n                    description: connection.description,\n                    updateDate: connection.updateDate\n                });\n            };\n            this._tableData.next(tableData);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    export(connections: Array<DexihConnection>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        connections.forEach(connection => { this.hubCache.cacheAddConnection(connection.key, hub); });\n\n        let filename = connections.length === 1 ? 'Connection - ' + connections[0].name + '.json' : 'connections.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Connection\n                || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateConnections();\n            }\n        });\n    }\n}\n","export * from './connection-index.component';\n","export * from './connection-index/connection-index.component';\nexport * from './connection-edit/connection-edit.component';\nexport * from './connection-import/connection-import.component';\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache, SharedObject } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { DexihApi, DexihHub } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'export',\n    templateUrl: './export.component.html',\n    styles: []\n})\nexport class ExportComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },\n        { name: 'label', title: 'Item Type'},\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    public data: Array<SharedObject>;\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService) {\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                this.hubCache = result[0];\n\n                if (!this.hubCache.isLoaded()) { return; }\n\n\n                let data: SharedObject[] = this.hubCache.getSharedObjects();\n                this.data = data;\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'View Index');\n        }\n    }\n\n    exportAll() {\n        this.export(this.data);\n    }\n\n    export(items: Array<SharedObject>) {\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        items.forEach(item => {\n            this.hubCache.cacheAddObject(item.type, item.item, hub);\n        });\n\n        let filename = items.length === 1 ? `${items[0].label}-${items[0].type}.json` : `hub-${this.hubCache.hub.name}.json`;\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n}\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"Export\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-feed\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t\t<dexih-table \n\t\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t\t[columns]=\"columns\"\n\t\t\t\t[data]=\"data\"\n\t\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t\t>\n\t\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t\t\t<dexih-button-save-local class=\"mr-1\" text=\"Export Selected\" (click)=\"export(items)\"></dexih-button-save-local>\n\t\t\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-api=\"item\">\n\t\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t\t\t<dexih-button-save-local class=\"mr-1\" text=\"Export All\" (click)=\"exportAll()\"></dexih-button-save-local>\n\t\t\t\t\t</ng-template>\n\n\t\t\t</dexih-table>\n\n\t\t</dexih-widget>\n\t\t\n</div>\n\n\n","import { Component, OnInit, OnDestroy, ViewChild, ElementRef } from '@angular/core';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../../hub.service';\nimport { Observable, BehaviorSubject, Subscription} from 'rxjs';\nimport { importActions, HubCache, sharedObjectProperties } from '../../hub.models';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { Import, eImportAction, ImportAction, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'import',\n    templateUrl: './import.component.html',\n    providers: [HubFormsService]\n})\n\nexport class ImportComponent implements OnInit, OnDestroy {\n    @ViewChild('fileInput', { static: true }) fileInput: ElementRef;\n\n    private _hubCacheSubscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    private hubCache: HubCache;\n\n    public automaticUpload = true;\n\n    pageTitle = 'Import Objects';\n    showPage = false;\n    showPageMessage = 'Loading...';\n    messageId: string;\n\n    importActions = importActions;\n\n    public import: Import;\n    public importOptions: ImportAction[];\n    eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', format: 'Md', description: 'description' },\n        { name: 'objectType', title: 'Type', format: '' },\n        { name: 'importAction', title: 'Action', format: 'Enum', enum: eImportAction },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        public hubFormsService: HubFormsService\n    ) { }\n\n    ngOnInit() {\n        this.importOptions = sharedObjectProperties.map(c => <ImportAction> { action: eImportAction.Replace, objectType: c.type })\n\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheObservable().subscribe(hubCache => {\n            this.hubCache = hubCache;\n        });\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheSubscription) { this._hubCacheSubscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    public doImport(file: File) {\n\n        const form: FormData = new FormData();\n        form.append('file', file, file.name);\n        form.append('hubKey', this.hubCache.hub.hubKey.toString());\n\n        for (let i = 0; i < this.importOptions.length; i++) {\n            form.append(`ImportActions[${i}].Action`, this.importOptions[i].action.toString());\n            form.append(`ImportActions[${i}].ObjectType`, this.importOptions[i].objectType.toString());\n        }\n\n        this.authService.postForm('/api/Hub/ImportPlan', form).then(result => {\n            this.import = result;\n            this.refreshImport();\n        });\n    }\n\n    public uploadFile(event) {\n        let files = event.srcElement.files;\n        this.doImport(files[0]);\n        // this.fileInput.nativeElement.value = '';\n    }\n\n    public filesDrop(files: any) {\n        this.doImport(files[0]);\n    }\n\n    public refreshImport() {\n        let objects = [];\n\n        sharedObjectProperties.forEach(o => {\n            let items = this.import[o.property];\n\n            items.forEach(item => {\n                objects.push({\n                    objectType: o.property,\n                    name: item.item.name,\n                    importAction: item.importAction,\n                    item: item,\n                })\n            });\n        });\n\n        this._tableData.next(objects);\n    }\n\n    public reset() {\n        this._tableData.next(null);\n    }\n\n    public importSelected(items) {\n        let newImport = new Import();\n\n        items.forEach(item => {\n            if (!newImport[item.objectType]) {\n                newImport[item.objectType] = [];\n            }\n            newImport[item.objectType].push(item.item);\n        });\n\n        this.hubService.importPackage(newImport).then(() => {\n            this.authService.navigateUp();\n        });\n    }\n\n    public importAll() {\n        this.hubService.importPackage(this.import).then(() => {\n            this.authService.navigateUp();\n        });\n    }\n\n}\n","<div class=\"container\">\n    <dexih-widget *ngIf=\"!(tableData | async)?.length\" title=\"Import Objects\" iconClass=\"fa fa-lg fa-fw fa-level-down\" [showCloseButton]=\"true\"\n        (close)=\"close()\" >\n        <ul class=\"list-group\">\n            <li class=\"list-group-item list-group-item-info rounded-0\">\n                <h5>Drop Export Files</h5>\n            </li>\n            <li class=\"list-group-item \">\n                <div class=\"well my-drop-zone\" dropZone [requireFiles]=\"true\" (dropFiles)=\"filesDrop($event)\" dropAllowedClass=\"nv-file-over\">\n                    <div class=\"form-row\">\n                        <section class=\"form-group col-md-6\">\n                            Drop import files\n                        </section>\n                        <section class=\"form-group col-md-6\">\n                            <div class=\"custom-file w-auto pull-right\">\n                                <input #fileInput type=\"file\" class=\"custom-file-input \" (change)=\"uploadFile($event)\">\n                                <label class=\"custom-file-label\" for=\"inputGroupFile01\">Choose file</label>\n                            </div>\n                        </section>\n                    </div>\n                </div>\n            </li>\n            <li class=\"list-group-item list-group-item-info\">\n                <h5>Import Options</h5>\n            </li>\n            <li class=\"list-group-item \">\n                    <fieldset>\n                        <div class=\"form-row\">\n                            <section *ngFor=\"let action of importOptions\" class=\"form-group col-md-6\">\n                                <form-select label=\"{{eSharedObjectType[action.objectType]}} Action\" [(ngModel)]=\"action.action\" [items]=\"importActions\" itemKey=\"key\" itemName=\"name\"\n                                    note='Action when importing {{eSharedObjectType[action.objectType]}}'>\n                                </form-select>\n                            </section>\n                        </div>\n                    </fieldset>\n            </li>\n        </ul>\n\n    </dexih-widget>\n\n    <dexih-widget *ngIf=\"(tableData | async)?.length > 0\" title=\"Import Package\" iconClass=\"fa fa-lg fa-fw fa-level-down\" [showCloseButton]=\"true\" (close)=\"reset()\">\n        <div *ngIf=\"import?.warnings?.length > 0\" class=\"alert alert-warning\" >\n            <ul *ngFor=\"let warning of import.warnings\" class=\"list-item\">\n                Warning: {{warning}}\n            </ul>\n        </div>\n\n        <dexih-table [enableMultiSelect]=\"true\" [columns]=\"columns\" [dataObservable]=\"tableData\">\n            <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n                <dexih-button iconClass=\"fa fa-upload\" buttonClass=\"btn-primary\" (click)=\"importSelected(items)\" text=\"Import Selected\" class=\"ml-1\"></dexih-button>\n            </ng-template>\n            \n            <ng-template #actions let-items=\"items\">\n                    <dexih-button iconClass=\"fa fa-cloud-upload\" buttonClass=\"btn-primary\" (click)=\"importAll()\" text=\"Import All\"></dexih-button>\n                    <dexih-button-close class=\"ml-1\" (click)=\"reset()\"></dexih-button-close>\n                </ng-template>\n            </dexih-table>\n\n    </dexih-widget>\n\n</div>","export { ImportComponent } from './import/import.component';\nexport { ExportComponent } from './export/export.component';\n","import { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { HubCache, eCacheStatus} from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Observable ,  Subscription, combineLatest} from 'rxjs';\nimport { Location } from '@angular/common';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { TypeCodes, functionTypes } from '../../hub.remote.models';\nimport { FormGroup, FormArray } from '@angular/forms';\nimport { Message, CancelToken } from '../../../+auth/auth.models';\nimport { eParameterDirection, eFunctionType, DexihCustomFunction, eTypeCode,\n  DexihCustomFunctionParameter, DexihDatalinkTransformItem, eTransformItemType, DexihFunctionParameter } from '../../../shared/shared.models';\n\n@Component({\n\n  selector: 'dexih-customFunction-edit-form',\n  templateUrl: './customFunction-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class CustomFunctionEditComponent implements OnInit, OnDestroy {\n\n  private customFunctionKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  typeCodes = TypeCodes;\n  eParameterDirection = eParameterDirection;\n\n  outputParameters = [];\n  inputParameters = [];\n\n  outputParameterValues = [];\n  inputParameterValues = [];\n  returnParameterValue;\n\n  functionType: eFunctionType;\n  functionTypes = functionTypes;\n  eFunctionType = eFunctionType;\n\n  syntaxMessage: Message;\n\n  public testValue: string;\n  public testResult: any;\n\n  public lookupColumnValue = '';\n  private isLoaded = false;\n\n  public cancelToken: CancelToken = new CancelToken();\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _functionTypeSubscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n  constructor(private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Column Validation');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._functionTypeSubscription) { this._functionTypeSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  private load() {\n    this.isLoaded = true;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.customFunctionKey = + this.params['customFunctionKey'];\n\n      if (!this.customFunctionKey) {\n        this.hubService.addHubErrorMessage('There was no custom function specified to edit.');\n        // this.errorMessage = 'There was no validation specified to edit.';\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihCustomFunctions) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let customFunction = this.hubCache.hub.dexihCustomFunctions.find(c => c.key === this.customFunctionKey);\n          this.formsService.customFunction(customFunction);\n          this.functionType = this.formsService.currentForm.controls.functionType.value;\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let customFunction = new DexihCustomFunction();\n      customFunction.key = this.hubCache.getNextSequence();\n      this.formsService.customFunction(customFunction);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key >= 0) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/customFunction-new', `/customFunction-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n\n      this.functionType = this.formsService.currentForm.controls.functionType.value;\n    }\n\n    this._functionTypeSubscription = this.formsService.currentForm.controls.functionType.valueChanges.subscribe(functionType => {\n      this.functionType = functionType;\n      if (this.functionType === eFunctionType.Condition\n        || this.functionType === eFunctionType.JoinCondition || this.functionType === eFunctionType.Validate) {\n        this.formsService.currentForm.controls.returnType.setValue(eTypeCode.Boolean);\n        this.updateParameters();\n      }\n    });\n\n    this.updateParameters();\n  }\n\n  canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>(resolve => {\n      if (this.formsService.currentForm && !this.formsService.currentForm.pristine) {\n        this.authService.confirmDialog('Function has changed',\n        'The function has changed.  Would you like to discard the changes and return to the previous screen?'\n        ).then(confirm => {\n          resolve(confirm);\n        }).catch(reason => {\n          resolve(false);\n        });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  parametersArray(): FormArray {\n    return <FormArray> this.formsService.currentForm.controls.dexihCustomFunctionParameters;\n  }\n\n  private updateParameters() {\n    let parameters = this.parametersArray();\n    this.inputParameters = parameters.controls.sort((a, b) => a.value.position - b.value.position)\n      .filter(c => c.value.direction === eParameterDirection.Input);\n\n  this.outputParameters = parameters.controls.sort((a, b) => a.value.position - b.value.position)\n    .filter(c => c.value.direction === eParameterDirection.Output);\n\n    this.inputParameterValues.length = this.inputParameters.length;\n    this.outputParameterValues.length = this.outputParameters.length;\n  }\n\n  addParameter(parameter: FormGroup, direction: eParameterDirection) {\n    try {\n      let newParameter = new DexihCustomFunctionParameter();\n      if (parameter) {\n        let oldParameter = parameter.value;\n        newParameter.dataType = oldParameter.dataType;\n        newParameter.name = oldParameter.name;\n        newParameter.position = oldParameter.position + 1;\n      }\n\n      newParameter.key = this.hubCache.getNextSequence();\n      newParameter.name = '';\n      newParameter.direction = direction;\n      newParameter.rank = 0;\n      newParameter.isValid = true;\n\n      let parameters = this.parametersArray();\n      let newParameterForm = this.formsService.customFunctionParametersFormGroup(newParameter);\n      parameters.push(newParameterForm);\n\n      // reset the positions\n      parameters.controls.sort((a, b) => a.value.position - b.value.position).forEach((p, index) => {\n        (<FormGroup>p).controls.position.setValue(index * 10);\n      });\n\n      this.updateParameters();\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Edit Custom Function, add parameter');\n    }\n\n  }\n\n  addParameterValue(index: number, valueIndex: number) {\n    if (Array.isArray(this.inputParameterValues[index])) {\n      this.inputParameterValues[index].splice(valueIndex + 1, 0, '');\n    } else {\n      this.inputParameterValues[index] = new Array(1);\n    }\n  }\n\n  removeParameterValue(index: number, valueIndex: number) {\n    this.inputParameterValues[index].splice(valueIndex, 1);\n  }\n\n  removeParameter(parameter: FormGroup) {\n    try {\n      let inputParameters = this.parametersArray();\n      let index: number = inputParameters.controls.indexOf(parameter);\n      if (index > -1) {\n        inputParameters.removeAt(index);\n      }\n\n      this.updateParameters();\n\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Edit Custom Function, remove parameter');\n    }\n  }\n\n  downloadCode(parameters = null) {\n    let tmpTransform = this.createDataTransformItem();\n\n    this.hubService.downloadCustomFunction(tmpTransform, parameters);\n  }\n\n  test(parameters = null) {\n    let tmpTransform = this.createDataTransformItem();\n\n    this.hubService.testCustomFunction(tmpTransform, parameters, this.cancelToken).then(result => {\n      this.syntaxMessage = new Message(true, 'The function has successfully compiled.', null, null);\n\n      if (result && result.length > 0) {\n        result.forEach((value, index) => {\n          if (index === 0) {\n            this.returnParameterValue = value;\n          } else {\n            this.outputParameterValues[index - 1] = value;\n          }\n        });\n      } else {\n        this.returnParameterValue = null;\n        this.outputParameterValues.forEach(c => c = null );\n     }\n    }).catch(reason => {\n      let converted = reason;\n      if (reason.stack) {\n          converted = new Message(false, 'Client Error: ' + reason.message, reason.stack, '');\n      }\n      this.syntaxMessage = converted;\n      this.returnParameterValue = null;\n      this.outputParameterValues.forEach(c => c = null );\n    });\n  }\n\n  createDataTransformItem(): DexihDatalinkTransformItem {\n    let selectedCustomFunction: DexihCustomFunction = this.formsService.currentForm.value;\n\n    let item = new DexihDatalinkTransformItem();\n    item.functionCode = selectedCustomFunction.methodCode;\n    item.functionResultCode = selectedCustomFunction.resultCode;\n    item.transformItemType = eTransformItemType.CustomFunction;\n\n    let parameters: DexihFunctionParameter[] = [];\n\n      selectedCustomFunction.dexihCustomFunctionParameters.sort((a, b) => a.position - b.position)\n        .forEach((param: DexihCustomFunctionParameter, index: number) => {\n        if (param) {\n          let newParameter = new DexihFunctionParameter();\n          newParameter.key = 0;\n          newParameter.datalinkTransformItemKey = 0;\n          newParameter.name = param.name;\n          newParameter.rank = param.rank;\n          newParameter.direction = param.direction;\n          newParameter.dataType = param.dataType;\n          newParameter.position = index;\n          newParameter.isValid = true;\n\n          parameters.push(newParameter);\n        }\n      });\n\n      let returnParam = new DexihFunctionParameter();\n      returnParam.key = 0;\n      returnParam.datalinkTransformItemKey = 0;\n      returnParam.name = 'Return';\n      returnParam.rank = 0;\n      returnParam.direction = eParameterDirection.ReturnValue;\n      returnParam.dataType = selectedCustomFunction.returnType;\n      returnParam.position = 0;\n      returnParam.isValid = true;\n      parameters.push(returnParam);\n\n      // item.returnType = selectedCustomFunction.returnType;\n      item.dexihFunctionParameters = parameters;\n\n      return item;\n\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n}\n","<div class=\"container\">\n\t<dexih-widget-vertical>\n\t<dexih-widget \n\t\ttitle=\"Edit Function\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-code\" \n\t\t[showCloseButton]=\"true\"\n\t\t[padding]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t<ng-template #header>\n\t\t\t<dexih-invalid-form-details [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\" class=\"mr-1\"></dexih-invalid-form-details>\n\t\t\t<save-button *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\" class=\"mr-1\"></save-button>\n\t\t\t<cancel-button [formsService]=\"formsService\"></cancel-button>\n\t\t</ng-template>\n\n\t\t<form *ngIf=\"formsService.currentForm\"  [formGroup]=\"formsService.currentForm\">\n\t\t\t<fieldset>\n\t\t\t\t<section *ngIf=\"testResult\">\n\t\t\t\t\t<div class=\"alert \" [class.alert-danger]=\"testResult.success == false\" [class.alert-success]=\"testResult.success == true\">\n\t\t\t\t\t\tTest Result = {{testResult.success}}\n\t\t\t\t\t\t<div *ngIf=\"testResult.cleanedValue\">Cleaned Value = {{testResult.cleanedValue}} </div>\n\t\t\t\t\t\t<div *ngIf=\"testResult.rejectReason\">Reject Reason = {{testResult.rejectReason}} </div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-select label=\"Function Type\" formControlName=\"functionType\" [items]=\"functionTypes\" itemKey=\"key\" itemName=\"name\" iconClass=\"fa fa-question\">\n\t\t\t\t\t</form-select>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-input label=\"Custom Function Name\" formControlName=\"name\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\" [autocapitalize]=\"true\" [errors]=\"formsService.formErrors['name']\">\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-textarea label=\"Description\" [showMarkdown]=\"true\" formControlName=\"description\" placeholder=\"Enter the description.\">\n\t\t\t\t\t</form-textarea>\n\t\t\t\t</section>\n\n\t\t\t\t<ng-template [ngIf]=\"functionType\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class=\"label mb-1\">\n\t\t\t\t\t\t\tInput Parameters\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngIf=\"inputParameters.length === 0\" class=\"mb-1\">\n\t\t\t\t\t\t\t<dexih-button\n\t\t\t\t\t\t\t\t(click)=\"addParameter(null, eParameterDirection.Input)\"\n\t\t\t\t\t\t\t\ticonClass=\"fa fa-plus-square-o\"\n\t\t\t\t\t\t\t\ttitle=\"Click to add a parameter\" >Add Parameter\n\t\t\t\t\t\t\t</dexih-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngFor=\"let parameter of inputParameters; let i = index\" [ngStyle]=\"{'z-index': 200-i, 'position': 'relative'}\">\n\t\t\t\t\t\t\t<customFunction-parameter [customFunctionParameterForm]=\"parameter\" (addParameter)=\"addParameter($event, eParameterDirection.Input)\"\n\t\t\t\t\t\t\t (removeParameter)=\"removeParameter($event)\"></customFunction-parameter>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"functionType != eFunctionType.Condition\">\n\t\t\t\t\t\t<div class=\"label mb-1\">\n\t\t\t\t\t\t\tOutput Parameters\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div [ngStyle]=\"{'z-index': 101, 'position': 'relative'}\">\n\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t<div class=\"input-group mb-1\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<input class=\"form-control\" readonly value=\"Return Data Type\" />\n\t\t\t\t\t\t\t\t\t<form-select [border]=\"false\" class=\"form-control p-0\"  formControlName=\"returnType\" [items]=\"typeCodes\" itemKey=\"key\" itemName=\"name\">\n\t\t\t\t\t\t\t\t\t\t</form-select>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</section>\n\n\t\t\t\t\t\t\t<div *ngIf=\"outputParameters.length === 0\">\n\t\t\t\t\t\t\t\t\t<dexih-button\n\t\t\t\t\t\t\t\t\t(click)=\"addParameter(null, eParameterDirection.Output)\"\n\t\t\t\t\t\t\t\t\ticonClass=\"fa fa-plus-square-o\"\n\t\t\t\t\t\t\t\t\ttitle=\"Click to add a parameter\" >Add Parameter</dexih-button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div *ngFor=\"let parameter of outputParameters; let i = index\" [ngStyle]=\"{'z-index': 100-i, 'position': 'relative'}\">\n\t\t\t\t\t\t\t\t<customFunction-parameter [customFunctionParameterForm]=\"parameter\" (addParameter)=\"addParameter($event, eParameterDirection.Output)\"\n\t\t\t\t\t\t\t\t (removeParameter)=\"removeParameter($event)\"></customFunction-parameter>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<br>\n\t\t\t\t\t</div>\n\t\t\t\t\tFunction Code\n\t\t\t\t\t<textarea class='form-control' rows=\"20\" width=\"100%\" spellcheck=\"false\" formControlName=\"methodCode\"></textarea>\n\t\t\t</ng-template>\n\t\t\t</fieldset>\n\t\t</form>\n\t\t</dexih-widget>\n\t\t<dexih-widget title=\"Test Function\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-code\" [padding]=\"true\" >\n\n\t\t<ng-template #header>\n\t\t\t<dexih-button class=\"mr-1\" buttonClass=\"btn btn-success\" (click)=\"test()\">Syntax Check</dexih-button>\n\t\t\t<dexih-button class=\"mr-1\" buttonClass=\"btn btn-success\" (click)=\"test(inputParameterValues)\">Run</dexih-button>\n\t\t\t<dexih-button-save-local (click)=\"downloadCode(inputParameterValues)\" text=\"Sample Code\"></dexih-button-save-local>\n\t\t</ng-template>\n\n\t\t<dexih-message [message]=\"syntaxMessage\"></dexih-message>\n\n\t\t<form>\n\t\t\t<fieldset>\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"label\" *ngIf=\"inputParameters.length > 0\">\n\t\t\t\t\t\tInput Parameters\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngFor=\"let inputParameter of inputParameters; let i = index\" [ngStyle]=\"{'z-index': 200-i, 'position': 'relative'}\">\n\t\t\t\t\t\t<div *ngIf=\"inputParameter.controls.rank.value > 0; else showValue\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<dexih-button\n\t\t\t\t\t\t\t\t\t(click)=\"addParameterValue(i)\"\n\t\t\t\t\t\t\t\t\ticonClass=\"fa fa-plus-square-o\"\n\t\t\t\t\t\t\t\t\ttitle=\"Click to add a parameter\" >\n\t\t\t\t\t\t\t\t\tAdd {{inputParameter.controls.name.value}} value\n\t\t\t\t\t\t\t\t</dexih-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div *ngFor=\"let value of inputParameterValues[i]; let j = index\">\n\n\t\t\t\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"form-control\">\n\t\t\t\t\t\t\t\t\t\t\t{{inputParameter.controls.name.value + '[' + j + ']'}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<form-input [border]=\"false\" class=\"form-control p-0\" [(ngModel)]=\"inputParameterValues[i][j]\" [name]=\"'inputParameterValues-' + i + '-' + j\" type=\"text\" placeholder=\"Enter a test value for the parameter\"></form-input>\n\n\t\t\t\t\t\t\t\t\t\t<div class=\"input-group-text p-0\">\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" (click)=\"addParameterValue(i, j)\" class=\"btn btn-sm border-0 bg-transparent\" value=\"Add\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-plus-square-o\"></i>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"input-group-text p-0\">\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" (click)=\"removeParameterValue(i, j)\" class=\"btn btn-sm border-0 bg-transparent\" value=\"Remove\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-minus-square-o\"></i>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ng-template #showValue>\n\t\t\t\t\t\t\t<form-input [label]=\"inputParameter.controls.name.value\" [(ngModel)]=\"inputParameterValues[i]\" [name]=\"'inputParameterValues' + i\"\n\t\t\t\t\t\t\t type=\"text\" placeholder=\"Enter a test value for the parameter\"></form-input>\n\t\t\t\t\t\t</ng-template>\n\t\t\t\t\t</div>\n\t\t\t\t\t<form-input label=\"Return Value\" [disabled]=\"true\" [(ngModel)]=\"returnParameterValue\" name=\"returnParameterValue\" type=\"text\"></form-input>\n\t\t\t\t\t<div class=\"label\" *ngIf=\"outputParameters.length > 0\">\n\t\t\t\t\t\tOutputs Parameters\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngFor=\"let outputParameter of outputParameters; let i = index\" [ngStyle]=\"{'z-index': 200-i, 'position': 'relative'}\">\n\t\t\t\t\t\t<form-input [disabled]=\"true\" [label]=\"outputParameter.controls.name.value\" [(ngModel)]=\"outputParameterValues[i]\"\n\t\t\t\t\t\t [name]=\"'outputParameterValues' + i\" type=\"text\"></form-input>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\t\t</form>\n\t</dexih-widget>\n\n\t<dexih-help class=\"m-3\" title=\"Custom Functions\" path=\"/assets/help/reference/function.md\"></dexih-help>\n\n</dexih-widget-vertical>\n</div>","import { Component, Input, Output, ViewChild, OnInit, OnDestroy, EventEmitter } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { TypeFunctions, TypeCodes, eBasicType } from '../../hub.remote.models';\n\n@Component({\n\n    selector: 'customFunction-parameter',\n    templateUrl: './customFunction-parameter.component.html'\n})\nexport class CustomFunctionParameterComponent implements OnInit, OnDestroy {\n\n    @Input() public customFunctionParameterForm: FormGroup = null;\n\n    @Output() public addParameter: EventEmitter<FormGroup> = new EventEmitter<FormGroup>();\n    @Output() public removeParameter: EventEmitter<FormGroup> = new EventEmitter<FormGroup>();\n\n\n    private type: TypeFunctions;\n    eBasicType = eBasicType;\n    typeCodes = TypeCodes;\n\n    public staticValue: string;\n\n    ignoreChanges = false;\n\n    constructor() {\n    }\n\n    ngOnInit() {\n    }\n\n    ngOnDestroy() {\n    }\n\n    add() {\n        this.addParameter.emit(this.customFunctionParameterForm);\n    }\n\n    remove() {\n        this.removeParameter.emit(this.customFunctionParameterForm);\n    }\n\n}\n","<form [formGroup]=\"customFunctionParameterForm\" class=\"mb-1\">\n        <div class=\"input-group\">\n            <input type=\"text\" class=\"form-control\" formControlName=\"name\" placeholder=\"Enter a name for the parameter\">\n\n            <!-- <form-input [border]=\"false\" class=\"form-control p-0\" formControlName=\"name\" type=\"text\" placeholder=\"Enter a name for the parameter\"></form-input> -->\n\n            <form-select [border]=\"false\" class=\"form-control p-0\" formControlName=\"dataType\" [items]=\"typeCodes\" itemKey=\"key\" itemName=\"name\">\n            </form-select>\n\n            <div class=\"input-group-append\">\n                <div class=\"input-group-text p-0\">\n                    <span class=\"p-1\">Array Dimensions (0-non array)</span>\n                    <input class=\" mx-1\" type=\"number\" formControlName=\"rank\">\n                </div>\n                <div class=\"input-group-text p-0\">\n                    <button type=\"button\" (click)=\"add()\" class=\"btn btn-sm border-0 bg-transparent\" value=\"Add\">\n                        <i class=\"fa fa-plus-square-o\"></i>\n                    </button>\n                </div>\n                <div class=\"input-group-text p-0\">\n                    <button type=\"button\" (click)=\"remove()\" class=\"btn btn-sm border-0 bg-transparent\" value=\"Remove\">\n                        <i class=\"fa fa-minus-square-o\"></i>\n                    </button>\n                </div>\n            </div>\n        </div>\n</form>","export {CustomFunctionEditComponent} from './customFunction-edit.component';\nexport {CustomFunctionParameterComponent} from './customFunction-parameter.component';\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { HubCache } from '../../hub.models';\nimport { DexihCustomFunction, DexihHub, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'customFunction',\n  templateUrl: './customFunction-index.component.html',\n  styles: []\n})\nexport class CustomFunctionIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    customFunctions: Array<DexihCustomFunction>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags'},\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar'},\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                this.hubCache = result[0];\n                this.updateCustomFunctions();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Column Validation Index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    deleteCustomFunctions(functions: Array<DexihCustomFunction>) {\n        this.hubService.deleteCustomFunctions(functions);\n    }\n\n    updateCustomFunctions() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let functions = this.hubCache.hub.dexihCustomFunctions.filter(c => c.isValid)\n                .map(c => {\n                    return {\n                        key: c.key,\n                        name: c.name,\n                        description: c.description,\n                        updateDate: c.updateDate,\n                        tags: this.hubCache.getObjectTags(eSharedObjectType.CustomFunction, c.key)\n                    }\n                });\n            this._tableData.next(functions);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(customFunction: DexihCustomFunction) {\n        this.router.navigate(['customFunction-edit', customFunction.key], { relativeTo: this.route});\n    }\n\n    export(items: Array<DexihCustomFunction>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        items.forEach(item => { this.hubCache.cacheAddCustomFunction(item.key, hub); });\n\n        let filename = items.length === 1 ? 'CustomFunction - ' + items[0].name + '.json' : 'customFunctions.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    watchChanges() {\n      // watch the current validation in case it is changed in another session.\n      this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n          if (hubCacheChange.changeClass === eSharedObjectType.CustomFunction ||\n            hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n            this.updateCustomFunctions();\n          }\n      });\n  }\n}\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"Custom Functions\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-code\" \n\t\t[showCloseButton]=\"true\"\n\t\t[padding]=\"false\"\n\t\t(close)=\"close()\"\n\t>\n\t\t<dexih-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<dexih-button-save-local class=\"mr-1\" (click)=\"export(items)\"></dexih-button-save-local>\n\t\t\t\t\t<dexih-button-delete class=\"mr-1\" *ngIf=\"hubCache.canWrite\" (click)=\"deleteCustomFunctions(items)\"></dexih-button-delete>\n\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.CustomFunction\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<dexih-button-new *ngIf=\"hubCache.canWrite\" class=\"mr-1\" [routerLink]=\"['customFunction-new']\"></dexih-button-new>\n\t\t\t\t</ng-template>\n\t\t</dexih-table>\n\n\t</dexih-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Custom Functions\" path=\"/assets/help/reference/function.md\"></dexih-help>\n\n</div>\n\n\n","export * from './customFunction-index/customFunction-index.component';\nexport {CustomFunctionEditComponent, CustomFunctionParameterComponent} from './customFunction-edit';\n","import { Component, OnInit, OnDestroy, HostListener, QueryList, ViewChildren } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { HubService } from '../../hub.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { FormArray, FormGroup } from '@angular/forms';\nimport { DashboardItemComponent } from './item/dashboard-item.component';\nimport { EventEmitter } from 'selenium-webdriver';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { HubCache, eCacheStatus, DataCache, PreviewResults } from '../../hub.models';\nimport { DexihView, DexihDashboard, DexihDashboardItem, DexihActiveAgent, DownloadObject, eDataObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'dexih-dashboard-edit-form',\n  templateUrl: './dashboard-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class DashboardEditComponent implements OnInit, OnDestroy {\n  @ViewChildren('dashboardItem') dashboardItems: QueryList<DashboardItemComponent>;\n\n  public dashboardKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n  public remoteAgent: DexihActiveAgent;\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private isLoaded = false;\n\n  public isRefreshing = false;\n  private refreshComplete = false;\n  private cancelToken = new CancelToken();\n\n  views: DexihView[];\n\n  constructor(\n    private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n        this.hubService.getRemoteAgentObservable()\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n        this.remoteAgent = result[3];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        this.views = this.hubCache.hub.dexihViews;\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Dashboard Edit');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n  load() {\n    this.isLoaded = true;\n\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.dashboardKey = +this.params['dashboardKey'];\n\n      if (!this.dashboardKey) {\n        this.hubService.addHubErrorMessage('There was no dashboard specified to edit.');\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihColumnValidations) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let dashboard = this.hubCache.hub.dexihDashboards.find(c => c.key === this.dashboardKey);\n\n          // create a copy of the dashboard to avoid changes to the hub cache.\n          dashboard = JSON.parse(JSON.stringify(dashboard));\n          this.formsService.dashboard(dashboard);\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      this.refreshComplete = true;\n      let dashboard = new DexihDashboard();\n      dashboard.minCols = 4;\n      dashboard.maxCols = 100;\n      dashboard.minRows = 4;\n      dashboard.maxRows = 100;\n      dashboard.autoRefresh = true;\n\n      this.formsService.dashboard(dashboard);\n      let runTime = this.formsService.currentForm.controls.runTime.value;\n      runTime.showEdit = true;\n      // this.formsService.currentForm.controls.runTime.setValue(runTime);\n      // this.add();\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/dashboard-new', `/dashboard-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n\n    if (this.formsService.currentForm.controls.autoRefresh.value && this.remoteAgent && !this.refreshComplete) {\n      this.refreshComplete = true;\n      this.refresh();\n    }\n  }\n\n  // add() {\n  //   let form = this.formsService.currentForm;\n  //   let items = <FormArray> form.controls.dexihDashboardItems;\n  //   let item = new DexihDashboardItem();\n  //   item.cols = 1;\n  //   item.rows = 1;\n  //   item.x = 0;\n  //   item.y = 0;\n  //   let control = this.formsService.dashboardItem(item);\n  //   items.push(control);\n  // }\n\n  refresh() {\n    this.hubService.previewDashboard(this.formsService.currentForm.value,\n      this.formsService.currentForm.value.parameters, this.cancelToken).then(keys => {\n      let items = <FormArray> this.formsService.currentForm.controls.dexihDashboardItems;\n\n      keys.forEach(url => {\n        let item = <FormGroup> items.controls.find((form: FormGroup) => form.controls.key.value === url.dashboardItemKey);\n        if (item) {\n          let data = <DataCache> item.controls.runTime.value.data;\n          data.isRefreshing = true;\n          this.hubService.getRemoteResponse<PreviewResults>(url.dataKey, this.cancelToken).then(result => {\n            result.columns = this.authService.constructDataTableColumns(result.columns);\n            data.data.next(result);\n            data.isRefreshing = false;\n          }).catch();\n        }\n      });\n    });\n  }\n\n  public toggleEdit() {\n    let runTime = this.formsService.currentForm.controls.runTime.value;\n    runTime.showEdit = !runTime.showEdit;\n    this.formsService.currentForm.controls.runTime.setValue(runTime);\n  }\n\n  public toggleLock() {\n    let runTime = this.formsService.currentForm.controls.runTime.value;\n    runTime.lock = !runTime.lock;\n    this.formsService.currentForm.controls.runTime.setValue(runTime);\n  }\n\n  add(viewKey) {\n    let view = this.hubCache.hub.dexihViews.find(c => c.key === viewKey);\n    if (!view) { return; }\n    let form = this.formsService.currentForm;\n    let items = <FormArray> form.controls.dexihDashboardItems;\n    let item = new DexihDashboardItem();\n    item.key = this.hubCache.getNextSequence();\n\n    item.cols = 1;\n    item.rows = 1;\n    item.x = -1;\n    item.y = -1;\n\n    // look for an empty cell\n    found:\n    for (let row = 0; row < form.controls.maxRows.value; row++) {\n      for (let col = 0; col < form.controls.maxCols.value; col++) {\n        let occupied = false;\n        for (let i = 0; i < items.controls.length; i++) {\n          let currentItem = <DexihDashboardItem> items.controls[i].value;\n          if (currentItem.x <= col && (currentItem.x + currentItem.cols) > col &&\n            currentItem.y <= row && (currentItem.y + currentItem.rows) > row) {\n              occupied = true;\n              break;\n          }\n        }\n\n        if (!occupied) {\n          item.x = col;\n          item.y = row;\n\n          break found;\n        }\n      }\n    }\n    item.viewKey = viewKey;\n    item.name = view.name;\n    let formGroup = this.formsService.dashboardItem(item);\n    this.formsService.updateDashboardItemView(formGroup);\n    items.push(formGroup);\n  }\n\n  public newView() {\n    this.router.navigate(['view-new'], { relativeTo: this.route } )\n  }\n\n  download(format) {\n    let items = <DexihDashboardItem[]> this.formsService.currentForm.controls.dexihDashboardItems.value;\n\n    let downloadObjects = items.filter(c => c.viewKey).map(item => {\n      let view = this.hubCache.hub.dexihViews.find(c => c.key === item.viewKey);\n\n      let downloadObject = new DownloadObject();\n      if (view.sourceType === eDataObjectType.Datalink) {\n        downloadObject.objectKey = view.sourceDatalinkKey;\n        downloadObject.objectType = eDataObjectType.Datalink;\n      }\n      if (view.sourceType === eDataObjectType.Table) {\n        downloadObject.objectKey = view.sourceTableKey;\n        downloadObject.objectType = eDataObjectType.Table;\n      }\n      downloadObject.query = view.selectQuery;\n\n      return downloadObject;\n    })\n\n    this.hubService.downloadData(downloadObjects, false, format, this.cancelToken)\n  }\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The dashboard has not been saved',\n          'The dashboard changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The dashboard changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","<div class=\"container-fluid\" >\n\t<dexih-widget title=\"Dashboard - {{formsService?.currentForm?.controls.name.value}}\" iconClass=\"fa fa-lg fa-fw fa-pie-chart\" [showCloseButton]=\"true\" [padding]=\"false\"\n\t (close)=\"close()\">\n\t\t<ng-template #header>\n\t\t\t<dexih-invalid-form-details [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\" class=\"mr-1\"></dexih-invalid-form-details>\n\t\t\t<dexih-button-edit class=\"mr-1\" (click)=\"toggleEdit()\" [text]=\"formsService.currentForm?.controls.runTime.value.showEdit ? 'Hide Edit' : 'Edit'\"></dexih-button-edit>\n\t\t\t<dexih-button [iconClass]=\"formsService.currentForm?.controls.runTime.value.lock ? 'fa fa-lock' : 'fa fa-unlock'\" class=\"mr-1\" (click)=\"toggleLock()\" [text]=\"formsService.currentForm?.controls.runTime.value.lock ? 'Unlock' : 'Lock'\"></dexih-button>\n\t\t\t<dexih-button-refresh class=\"mr-1\"  (click)=\"refresh()\"></dexih-button-refresh>\n\t\t\t<dexih-button-dropdown class=\"mr-1\" iconClass=\"fa fa-plus\" text=\"Add\">\n\t\t\t\t<a class=\"dropdown-item\" (click)=\"newView()\">(New View)</a>\n\t\t\t\t<li *ngFor=\"let view of views\"><a class=\"dropdown-item\" (click)=\"add(view.key)\">{{view.name}}</a></li>\n\t\t\t</dexih-button-dropdown>\n\t\t\t<download-button class=\"mr-1\" (download)=\"download($event)\"></download-button>\n\t\t\t<save-button *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\" class=\"mr-1\"></save-button>\n\t\t\t<cancel-button [formsService]=\"formsService\"></cancel-button>\n\t\t</ng-template>\n\n\t\t<router-outlet></router-outlet>\n\n\t</dexih-widget>\n</div>","export {DashboardEditComponent} from './dashboard-edit.component';\nexport {DashboardItemComponent} from './item/dashboard-item.component';\n","import { Component, OnInit, Input, OnDestroy, Output, EventEmitter,\n    ViewChild, OnChanges, SimpleChanges } from '@angular/core';\nimport { FormGroup, FormArray } from '@angular/forms';\nimport { HubService } from '../../..';\nimport { Subscription, combineLatest, Subject } from 'rxjs';\nimport { HubCache, DexihInputParameter, DataCache, PreviewResults } from '../../../hub.models';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { DexihWidgetComponent } from 'dexih-ngx-components';\nimport { CancelToken } from '../../../../+auth/auth.models';\nimport { DexihView, InputParameterBase, InputParameter, eDataObjectType, eViewType, DexihActiveAgent } from '../../../../shared/shared.models';\nimport { AuthService } from '../../../../+auth/auth.service';\n\n@Component({\n    selector: 'dashboard-item',\n    templateUrl: 'dashboard-item.component.html',\n    styleUrls: ['./dashboard-item.component.scss']\n})\n\nexport class DashboardItemComponent implements OnInit, OnChanges, OnDestroy {\n    @Input() item: FormGroup;\n    @Input() showEdit = true;\n    @Input() showPreview = false;\n    @Input() refreshData: EventEmitter<string>;\n    @Input() isMaximized = false;\n\n    @Output() onRemove = new EventEmitter();\n    @Output() onMaximize = new EventEmitter<FormGroup>();\n\n    @ViewChild('widget', {static: true}) public widget: DexihWidgetComponent;\n\n    private _subscription: Subscription;\n    private _viewKeySubscription: Subscription;\n    private _refreshDataSubscription: Subscription;\n    private _parametersSubscription: Subscription;\n\n    hubCache: HubCache;\n    remoteAgent: DexihActiveAgent;\n\n    eViewType = eViewType;\n\n    views: DexihView[];\n    view: DexihView;\n    parameters: DexihInputParameter[];\n\n    private firstLoad = true;\n    private dialogOpen = false;\n\n    data: DataCache;\n    dataResult: PreviewResults;\n    public dataRows = [];\n\n    private refreshDataSubject: Subject<void> = new Subject<void>();\n\n    private cancelToken = new CancelToken();\n\n    public parentParameters;\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        private formsService: HubFormsService) {\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.hubService.getHubCacheObservable(),\n                this.hubService.getRemoteAgentObservable()\n            ).subscribe(result => {\n                this.hubCache = result[0];\n                this.remoteAgent = result[1];\n\n                if (this.hubService.isHubCacheLoaded) {\n                    this.views = this.hubCache.hub.dexihViews;\n                    if (this.item?.controls.viewKey) {\n                        this.view = this.hubCache.hub.dexihViews.find(c => c.key === this.item.controls.viewKey.value);\n\n                        this.data = <DataCache> this.item.controls.runTime.value.data;\n\n                        if (this.data) {\n                            this._refreshDataSubscription = this.data.data.subscribe(dataResult => {\n                                if (!dataResult) {\n                                    return;\n                                }\n\n                                this.dataResult = dataResult;\n\n                                if (!dataResult.viewConfig.animateConfig) {\n                                    this.dataRows = this.dataResult.data;\n                                }\n\n                                if (dataResult.status) {\n                                    this.hubService.addHubMessage(dataResult.status, false, this.view.name);\n                                }\n                            });\n\n                        } else if (this.remoteAgent) {\n                            if (!this.firstLoad) {\n                                if (!this.dialogOpen) {\n                                    this.dialogOpen = true;\n                                    this.authService.confirmDialog('Remote Agent Available',\n                                        'A remote agent is available, would you like to refresh the data?').then(confirm => {\n                                            if (confirm) {\n                                                this.refresh();\n                                            }\n                                            this.dialogOpen = false;\n                                        });\n                                }\n                            } else {\n                                this.refresh();\n                            }\n\n                            this.firstLoad = false;\n                        }\n                    }\n\n                    this.parentParameters = this.formsService.currentForm.controls.parameters.value;\n                    if (this._parametersSubscription) { this._parametersSubscription.unsubscribe(); }\n                    this._parametersSubscription = this.formsService.currentForm.controls.parameters.valueChanges.subscribe(value => {\n                        this.parentParameters = value;\n                    });\n                }\n            });\n\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'View Index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._viewKeySubscription) { this._viewKeySubscription.unsubscribe(); }\n        if (this._refreshDataSubscription) { this._refreshDataSubscription.unsubscribe(); }\n        if (this._parametersSubscription) { this._parametersSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        let itemChange = changes['item'];\n        if (itemChange) {\n            let newItem = <FormGroup> itemChange.currentValue;\n\n            if (this.views && newItem.value) {\n                this.view = this.hubCache.hub.dexihViews.find(c => c.key === newItem.value);\n            }\n            if (this._viewKeySubscription) { this._viewKeySubscription.unsubscribe(); }\n            this._viewKeySubscription = newItem.controls.viewKey.valueChanges.subscribe(viewKey => {\n                this.formsService.updateDashboardItemView(newItem);\n            });\n        }\n    }\n\n    // public updateView(viewKey) {\n    //     if (this.views && viewKey) {\n    //         this.view = this.hubCache.hub.dexihViews.find(c => c.key === viewKey);\n    //         if (this.view) {\n    //             this.item.controls.name.setValue(this.view.name);\n    //             this.item.controls.runTime.value.data = new DataCache();\n\n    //             // reset parameters.\n    //             let formParameters = <FormArray> this.item.controls.parameters;\n    //             let currentParameters = <DexihInputParameter[]> formParameters.value;\n\n    //             formParameters.clear();\n\n    //             let parameters = <InputParameterBase[]> this.view.parameters;\n    //             if (this.view.sourceType === eDataObjectType.Datalink) {\n    //                 let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === this.view.sourceDatalinkKey);\n    //                 if (datalink && datalink.parameters) {\n    //                     parameters = parameters.concat(datalink.parameters);\n    //                 }\n    //             }\n\n    //             parameters.forEach(parameter => {\n    //                 let currentParameter = currentParameters.find( c => c.name === parameter.name);\n    //                 let newParameter = new InputParameterBase();\n    //                 if (currentParameter) {\n    //                     newParameter.name = currentParameter.name;\n    //                     newParameter.value = currentParameter.value;\n    //                 } else {\n    //                     newParameter.name = parameter.name;\n    //                     newParameter.value = parameter.value;\n    //                 }\n    //                 let newFormParameter = this.formsService.parameter(newParameter);\n    //                 formParameters.push(newFormParameter);\n    //             });\n    //         }\n    //     }\n    // }\n\n    public refresh() {\n        let preview = this.hubService.previewViewKey(this.item.controls.viewKey.value, null,\n            this.formsService.currentForm.controls.parameters.value,\n        this.item.controls.parameters.value, this.cancelToken);\n        this.data = <DataCache> this.item.controls.runTime.value.data;\n        this.data.refresh(preview);\n        preview.then(results => {\n            this.refreshDataSubject.next();\n            this.dataResult = results;\n            if (!this.dataResult.viewConfig.animateConfig) {\n                this.dataRows = this.dataResult.data;\n            }\n        }).catch(reason => {\n            this.hubService.addHubMessage(reason);\n        });\n    }\n\n    parameterChange() {\n        this.refresh();\n    }\n\n    public toggleEdit() {\n        this.showEdit = !this.showEdit;\n    }\n\n    removeItem($event) {\n        $event.preventDefault();\n        $event.stopPropagation();\n        this.onRemove.emit();\n    }\n\n    public maximise() {\n        this.onMaximize.emit(this.item);\n    }\n}\n","<div class=\"side-menu\">\n    <div class=\"side-menu-content\">\n        <div class=\"spin-icon\">\n            <i class=\"fa fa-cog fa-spin\"></i>\n        </div>\n        <div class=\"side-menu-box\">\n            <div class=\"bg-light rounded p-1\">\n                <div>\n                    <dexih-button-refresh [compact]=\"true\" (click)=\"refresh()\"></dexih-button-refresh>\n                    <dexih-button-edit *ngIf=\"!this.showEdit\" class=\"ml-1\" [compact]=\"true\" (click)=\"toggleEdit()\">\n                    </dexih-button-edit>\n                    <dexih-button-preview *ngIf=\"this.showEdit\" class=\"ml-1\" [compact]=\"true\" (click)=\"toggleEdit()\">\n                    </dexih-button-preview>\n                    <dexih-button *ngIf=\"!isMaximized\" class=\"ml-1\" buttonClass=\"btn btn-primary\"\n                        iconClass=\"fa fa-window-maximize text-white\" (click)=\"maximise()\" tooltip=\"Maximize window\">\n                    </dexih-button>\n                    <dexih-button *ngIf=\"isMaximized\" class=\"ml-1\" buttonClass=\"btn btn-primary\"\n                        iconClass=\"fa fa-window-minimize text-white\" (click)=\"maximise()\" tooltip=\"Minimize window\">\n                    </dexih-button>\n                    <dexih-button-delete class=\"ml-1\" (click)=\"removeItem($event)\" [compact]=\"true\">\n                    </dexih-button-delete>\n                </div>\n\n                <div *ngIf=\"!showEdit && !showPreview && view\">\n\n                    <div class=\"m-1\" *ngIf=\"inputColumns && inputColumns.length > 0\">\n                        <span *ngFor=\"let column of inputColumns; let i = index\" class=\"input-group\">\n                            <div class=\"input-group-prepend\">\n                                <div class=\"input-group-text\">\n                                    {{column.logicalName}}\n                                </div>\n                            </div>\n                            <form-input name=\"column{{i}}\" class=\"form-control p-0\"\n                                [placeholder]=\"'Enter ' + column.logicalName\" [(ngModel)]=\"column.value\"></form-input>\n                        </span>\n                    </div>\n\n                    <div class=\"m-1\" *ngIf=\"item.controls.parameters.length > 0\">\n                        <input-parameters [showEdit]=\"false\" [parameters]=\"item.controls.parameters\"\n                            [formsService]=\"formsService\" [parentParameters]=\"parentParameters\"\n                            (onRefreshData)=\"refresh()\" [refreshEvent]=\"refreshDataSubject.asObservable()\">\n                        </input-parameters>\n                    </div>\n\n                    <div *ngIf=\"!data?.isRefreshing && dataResult?.columns?.length > 0 && dataResult?.viewConfig && dataResult?.data\"\n                        class=\"m-1\" style=\"z-index: 99999;\">\n                        <series-animate [showEdit]=\"false\" [showFrame]=\"false\"\n                            [animateConfig]=\"dataResult?.viewConfig.animateConfig\" [columns]=\"dataResult?.columns\"\n                            (hasChanged)=\"hasChanged()\" [baseData]=\"dataResult?.data\" [(data)]=\"dataRows\">\n                        </series-animate>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div *ngIf=\"showEdit\" class=\"p-3 gridster-item-content\">\n    <form [formGroup]=\"item\">\n        <section>\n            <form-input label=\"Item Name\" formControlName=\"name\" placeholder=\"Enter the dashboard item name.\"\n                [autocapitalize]=\"on\" iconClass=\"fa fa-list\">\n            </form-input>\n        </section>\n        <section>\n            <form-textarea label=\"Description\" [showMarkdown]=\"true\" formControlName=\"description\"\n                placeholder=\"Enter the description.\">\n            </form-textarea>\n        </section>\n        <section>\n            <form-select label=\"Select View\" formControlName=\"viewKey\" [items]=\"views\" itemKey=\"key\" itemName=\"name\">\n                <view-edit-button [key]=\"item.controls.viewKey.value\"></view-edit-button>\n            </form-select>\n        </section>\n        <section>\n            <form-checkbox label=\"Show Header\" formControlName=\"header\">\n            </form-checkbox>\n            <form-checkbox label=\"Allow Scrolling\" formControlName=\"scrollable\">\n            </form-checkbox>\n        </section>\n    </form>\n\n    <input-parameters [showEdit]=\"showEdit\" [allowAddRemove]=\"false\" [parameters]=\"item.controls.parameters\" [formsService]=\"formsService\"\n        [parentParameters]=\"parentParameters\" (onRefreshData)=\"refresh()\" [refreshEvent]=\"refreshDataSubject.asObservable()\">\n    </input-parameters>\n\n</div>\n\n<ng-template [ngIf]=\"!showEdit\">\n\n    <div *ngIf=\"!showPreview && view\" class=\"box\" [ngStyle]=\"{'overflow': item.controls.scrollable.value ? 'scroll' : 'hidden'}\">\n        <div *ngIf=\"data?.isRefreshing; else notRefreshing\" class=\"p-3\">\n            <div class=\"dexih-loader\"></div> Refreshing, please wait...\n        </div>\n        \n        <ng-template #notRefreshing>\n\n            <div *ngIf=\"item.controls.header.value\" class=\"box-header bg-secondary text-white\">\n                <div class=\"m-3\">\n                    <b>{{item.controls.name.value}}</b>\n                </div>\n            </div>\n        \n            <div *ngIf=\"item.controls.description.value\" class=\"box-header\">\n                <div class=\"m-1\">\n                    <ngx-md [data]=\"item.controls.description.value\"></ngx-md>\n                </div>\n            </div>\n    \n\n            <div class=\"box-content\"\n                *ngIf=\"!data?.isRefreshing && dataResult?.columns?.length > 0 && dataResult?.data?.length > 0; else elseBlock\">\n\n                <dexih-table *ngIf=\"view.viewType == eViewType.Table\" [enableMultiSelect]=\"false\" [enableResponsive]=\"false\"\n                    [enableSaveCsv]=\"false\" [enableFilter]=\"false\" [columns]=\"dataResult.columns\" [data]=\"dataRows\">\n                </dexih-table>\n\n                <div class=\"h-100\">\n                <chart-view [responsive]=\"true\" *ngIf=\"view.viewType == eViewType.Chart\" [columns]=\"dataResult.columns\"\n                    [data]=\"dataRows\" [config]=\"view.chartConfig\">\n                </chart-view>\n            </div>\n            </div>\n            <ng-template #elseBlock>\n                <div class=\"alert alert-info\" (click)=\"refresh()\">\n                    <i class=\"fa fa-warning\"></i>\n                    Select to refresh the view.\n                </div>\n            </ng-template>\n        </ng-template>\n    </div>\n</ng-template>","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { HubCache } from '../../hub.models';\nimport { DexihDashboard, DexihHub, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'dashboards',\n    templateUrl: './dashboard-index.component.html',\n    styles: []\n})\nexport class DashboardIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    dashboards: Array<DexihDashboard>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },\n        { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n\n                this.updateDashboards();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Dashboard Index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    delete(dashboard: Array<DexihDashboard>) {\n        // TDB\n        this.hubService.deleteDashboards(dashboard);\n    }\n\n    updateDashboards() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let dashboards: Array<DexihDashboard>;\n            dashboards = this.hubCache.hub.dexihDashboards.filter(c => c.isValid);\n            let tableData = dashboards.map(dashboard => {\n                return {\n                    key: dashboard.key,\n                    name: dashboard.name,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.Dashboard, dashboard.key),\n                    updateDate: dashboard.updateDate,\n                    sharedIcon: dashboard.isShared ? 'fa fa-group' : 'fa fa-user-secret',\n                    sharedToolTip: dashboard.isShared ? 'Table is shared' : 'Table is private'\n                };\n            });\n            this._tableData.next(tableData);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(dashboard: DexihDashboard) {\n        this.router.navigate(['dashboard-edit', dashboard.key], { relativeTo: this.route });\n    }\n\n    // TBD\n    export(items: Array<DexihDashboard>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(cache.hub.hubKey, '');\n        items.forEach(item => { cache.cacheAddDashboard(item.key, hub); });\n\n        let filename = items.length === 1 ? 'Dashboard - ' + items[0].name + '.json' : 'dashboards.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    // TBD\n    watchChanges() {\n        // watch the current validation in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Dashboard || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateDashboards();\n            }\n        });\n    }\n}\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"Dashboards\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-pie-chart\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t\t<dexih-table \n\t\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t\t[columns]=\"columns\"\n\t\t\t\t[dataObservable]=\"tableData\"\n\t\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t\t>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.Dashboard'></dependent-items-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.Dashboard\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t\t<actions-dashboard-button [dashboards]=\"items\"></actions-dashboard-button>\n\t\t\t\t\t</ng-template>\n\t\t\t</dexih-table>\n\n\t</dexih-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Dashboards\" path=\"/assets/help/reference/dashboard.md\"></dexih-help>\n</div>\n\n\n","export * from './dashboard-index.component';\n","export * from './dashboard-index/';\nexport {DashboardEditComponent, DashboardItemComponent} from './dashboard-edit/';\n","import { HostListener, Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Route, Router, Params } from '@angular/router';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DexihDatajob } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'dexih-datajob-edit-form',\n  templateUrl: './datajob-edit.component.html'\n})\nexport class DatajobEditComponent implements OnInit, OnDestroy {\n  public datajobKey: number;\n\n  public hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n  private isLoaded = false;\n\n\n  constructor(private hubService: HubService,\n    public formsService: HubFormsService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(true),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Datajob Edit');\n    }\n\n\n  }\n\n  ngOnDestroy() {\n    if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n\n    this.formsService.ngOnDestroy();\n  }\n\n  load() {\n    this.isLoaded = true;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.datajobKey = + this.params['datajobKey'];\n\n      if (!this.datajobKey) {\n        this.hubService.addHubErrorMessage('There was no datajob specified to edit.');\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihDatajobs) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n\n          let datajob = this.hubCache.hub.dexihDatajobs.find(c => c.key === this.datajobKey);\n          if (!datajob) {\n            this.hubService.addHubErrorMessage('The specified datajob could not be found.');\n          } else {\n            this.formsService.datajob(datajob);\n          }\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let datajob: DexihDatajob;\n      if (this.hubService.newDatajob) {\n        datajob = this.hubService.newDatajob;\n        this.hubService.newDatajob = null;\n      } else {\n        datajob = this.hubService.createDefaultDatajob();\n        datajob.key = 0;\n      }\n\n      this.formsService.datajob(datajob);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/datajob-new', `/datajob-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n  }\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The data job has not been saved',\n          'The datajob changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The datajob changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","<div class=\"container\">\n    <dexih-widget title=\"Edit Job\" iconClass=\"fa fa-lg fa-fw fa-cog\">\n\n        <ng-template #header>\n            <dexih-invalid-form-details class=\"mr-1\" [control]=\"formsService.currentForm\"\n                (click)=\"formsService.showErrors()\"></dexih-invalid-form-details>\n            <save-button *ngIf=\"hubCache?.canWrite\" class=\"mr-1\" [formsService]=\"formsService\"></save-button>\n            <cancel-button class=\"mr-1\" [formsService]=\"formsService\"></cancel-button>\n        </ng-template>\n\n        <div>\n            <router-outlet></router-outlet>\n        </div>\n    </dexih-widget>\n</div>\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { HubCache } from '../../hub.models';\nimport { DexihDatajob, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'datajobs',\n    templateUrl: './datajob-index.component.html',\n    styles: []\n})\nexport class DatajobIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    datajobs: Array<DexihDatajob>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the datajobs.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n\n                this.updateDatajobs();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datajob Index');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    // deleteDatajob(datajob: DexihDatajob) {\n    //     this.hubService.deleteDatajobs([datajob]).catch(reason => {\n    //     });\n    // }\n\n    // deleteDatajobs(datajobs: Array<DexihDatajob>) {\n    //     this.hubService.deleteDatajobs(datajobs);\n    // }\n\n    updateDatajobs() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let datajobs = this.hubCache.hub.dexihDatajobs\n            .filter(c => c.isValid)\n            .map(c => {\n                return {\n                    key: c.key,\n                    name: c.name,\n                    description: c.description,\n                    updateDate: c.updateDate,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.Datajob, c.key)\n                }\n            });\n            this._tableData.next(datajobs);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    // runDatajobs(datajobs, truncateTarget, resetIncremental) {\n    //     this.hubService.runDatajobs(datajobs, truncateTarget, resetIncremental, null);\n    // }\n\n    // activateDatajobs(datajobs) {\n    //     this.hubService.activateDatajobs(datajobs);\n    // }\n\n    // cancelDatajobs(datajobs: Array<DexihDatajob>) {\n    //     this.hubService.deactivateDatajobs(datajobs.map(c => c.key));\n    // }\n\n    editDatajob(datajob: DexihDatajob) {\n        this.router.navigate(['datajob-edit', datajob.key], { relativeTo: this.route });\n    }\n\n    // exportDatajobs(datajobs: Array<DexihDatajob>) {\n    //     const cache = this.hubCache;\n    //     const hub = new DexihHub(this.hubCache.hub.hubKey, '');\n    //     datajobs.forEach(datajob => { this.hubCache.cacheAddDatajob(datajob.key, hub); });\n\n    //     let filename = datajobs.length === 1 ? 'Datajob - ' + datajobs[0].name + '.json' : 'datajobs.json';\n\n    //     this.hubService.exportHub(hub, filename);\n    // }\n\n    watchChanges() {\n        // watch the current datajob in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Datajob || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateDatajobs();\n            }\n        });\n    }\n}\n","<div class=\"container-fluid\">\n\t<dexih-widget title=\"Data Jobs\" iconClass=\"fa fa-lg fa-fw fa-calendar\"\n\t[showCloseButton]=\"true\"\n\t(close)=\"close()\"\n\t>\n\n\n\t\t<dexih-table \n\t\t\t[enableMultiSelect]=\"true\" \n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\" \n\t\t\t[dataObservable]=\"tableData\" \n\t\t\t(rowClick)=\"editDatajob($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t>\n\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.Datajob'></dependent-items-button>\n\t\t</ng-template>\n\n\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-datajob=\"item\">\n\t\t\t\t<datalink-status [datajobKey]='datajob?.key'></datalink-status>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.Datajob\" [objects]=\"items\" ></tags-update-button>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t<actions-datajob-button [datajobs]=\"items\"></actions-datajob-button>\n\t\t\t</ng-template>\n\t\t</dexih-table>\n\n\t</dexih-widget>\n\n\t<dexih-help class=\"m-3\" title=\"Datalinks\" path=\"/assets/help/reference/datajob.md\"></dexih-help>\n\n</div>","export * from './datajob-index.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { ActivatedRoute } from '@angular/router';\nimport { DexihDatajob, InputParameter } from '../../../shared/shared.models';\nimport { HubCache } from '../../hub.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n    selector: 'datajob-run',\n    templateUrl: './datajob-run.component.html'\n})\nexport class DatajobRunComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n    private cancelToken: CancelToken = new CancelToken();\n\n    private datajobs: DexihDatajob[];\n    private hubCache: HubCache;\n\n    public action: string; // new or edit\n    public pageTitle: string;\n    public message: string;\n\n\n    public truncateTable = false;\n    public resetIncremental = false;\n    public resetValue = '';\n\n    parameters: InputParameter[];\n\n    isRefreshing = false;\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private route: ActivatedRoute) {\n\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n                this.hubService.getRemoteAgentObservable()\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n\n                this.action = data['action'];\n                this.pageTitle = data['pageTitle'];\n\n                if (this.hubCache.isLoaded()) {\n                    let datajobKeys: string = params['datajobKeys'];\n                    this.datajobs = new Array<DexihDatajob>();\n\n                    if (datajobKeys) {\n                        this.parameters = [];\n                        let datajobKeyArray = datajobKeys.split('|').map(c => +c);\n                        datajobKeyArray.forEach(datajobKey => {\n                            let datajob = this.hubCache.hub.dexihDatajobs.find(c => c.key === datajobKey);\n                            this.datajobs.push(datajob);\n                            datajob.parameters.forEach(c => {\n                                if (this.parameters.findIndex(p => c.name === p.name) < 0) {\n                                    this.parameters.push({name: c.name, value: c.value, rank: c.rank});\n                                }\n                            });\n                        });\n                    }\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datajob Run');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    run() {\n        this.hubService.runDatajobs(this.datajobs, this.truncateTable,\n            this.resetIncremental, this.resetValue, this.parameters, this.cancelToken);\n        this.authService.navigateUp();\n    }\n\n    activate() {\n        this.hubService.activateDatajobs(this.datajobs, this.parameters, this.cancelToken);\n        this.authService.navigateUp();\n    }\n\n}\n","<div class=\"container\">\n    <dexih-widget title=\"Datajob Options\" iconClass=\"fa fa-lg fa-fw fa-exchange\"  [showCloseButton]=\"true\" (close)=\"close()\" [padding]=\"true\">\n            <ng-template #header>\n                <dexih-button-refresh class=\"mr-1\" (click)=\"run()\" text=\"Run Now\"></dexih-button-refresh>\n                <dexih-button-refresh class=\"mr-1\" (click)=\"activate()\" text=\"Activate Triggers\"></dexih-button-refresh>\n                <dexih-button-cancel (click)=\"cancel()\"></dexih-button-cancel>\n            </ng-template>\n\n        <ng-template #subHeader>\n            <label class=\"label\">Run the following datajobs(s):</label>\n            <div>\n                <div class=\"row\">\n                    <span class=\"col alert alert-primary m-1\" *ngFor=\"let datajob of datajobs | fieldSort: 'name'\">\n                        {{datajob.name}}\n                    </span>\n                </div>\n            </div>\n        </ng-template>\n            \n\t\t<form>\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"col\">\n\t\t\t\t\t\t\t<form-checkbox label=\"Truncate all target tables before execution.\" [(ngModel)]=\"truncateTable\" [ngModelOptions]=\"{standalone: true}\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\n                    <div class=\"form-row\">\n                        <section class=\"col\">\n                                <form-checkbox label=\"Reset the source incremental value, and load all source rows.\" [(ngModel)]=\"resetIncremental\" [ngModelOptions]=\"{standalone: true}\"></form-checkbox>\n                            </section>\n                        </div>\n\n                    <div class=\"form-row\">\n                        <section class=\"col\">\n                            <form-input label=\"Incremental Value\" [(ngModel)]=\"resetValue\" [ngModelOptions]=\"{standalone: true}\" placeholder=\"\" iconClass=\"fa fa-list\" note=\"Use a specific incremental value to start loading source rows from (leave empty for null value)\" >\n                                </form-input>\n                        </section>\n                    </div>\n    \n    \n                    <div class=\"d-flex flex-wrap pt-1\" *ngIf=\"parameters && parameters.length > 0\" >\n                        <div class=\"input-group-text\">\n                            Input Parameters\n                        </div>\n                \n                        <input-parameters-view [parameters]=\"parameters\"></input-parameters-view>\n                    </div>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\n    </dexih-widget>\n</div>","export * from './datajob-index/datajob-index.component';\nexport * from './datajob-edit/datajob-edit.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { eDatalinkType, DexihDatalink, eSourceType, eSharedObjectType, eDatalinkTypeItems, DexihTag } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'datalink-index',\n    templateUrl: './datalink-index.component.html',\n    styles: []\n})\nexport class DatalinkIndexComponent implements OnInit, OnDestroy {\n    hubCache: HubCache;\n    typeFilter: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    public eSharedObjectType = eSharedObjectType;\n    public eDatalinkType = eDatalinkType;\n    public eDatalinkTypeItems = eDatalinkTypeItems;\n\n    columns = [\n        { name: 'name', title: 'Name', format: 'Md', footer: 'description', tags: 'tags' },\n        { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },\n        { name: 'datalinkType', title: 'Datalink Type', format: '' },\n        { name: 'sourceName', title: 'Source', format: '' },\n        { name: 'targetName', title: 'Target', format: '' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<DexihDatalink>>(null);\n    tableData: Observable<Array<DexihDatalink>> = this._tableData.asObservable();\n\n    constructor(private hubService: HubService, private authService: AuthService, private router: Router, private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let queryParams = result[2];\n                this.hubCache = result[3];\n\n                if (!this.hubCache.isLoaded()) { return; }\n\n                this.typeFilter = + queryParams['typeFilter'];\n                if (!this.typeFilter) {\n                    this.typeFilter = 0;\n                }\n                this.updateDatalinks();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datalink Index');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    private updateDatalinks() {\n        let newDatalinks: Array<DexihDatalink>;\n        if (this.hubCache.isLoaded()) {\n            if (!this.hubCache.hub.dexihDatalinks) {\n                this._tableData.next(new Array<DexihDatalink>());\n            } else {\n\n                if (this.typeFilter === 0 || !this.typeFilter) {\n                    newDatalinks = this.hubCache.hub.dexihDatalinks;\n                } else {\n                    newDatalinks = this.hubCache.hub.dexihDatalinks.filter(d => d.datalinkType === this.typeFilter);\n                }\n\n                let datalinkData = new Array<any>();\n\n                newDatalinks.forEach(d => {\n                    let sourceName = '';\n                    let targetName = '';\n\n                    switch (d.sourceDatalinkTable.sourceType) {\n                        case eSourceType.Table:\n                            let sourceTable = this.hubCache.getTable(d.sourceDatalinkTable.sourceTableKey);\n                            sourceName = sourceTable ? sourceTable.logicalName : 'Error, not found';\n                            break;\n                        case eSourceType.Datalink:\n                            let sourceDatalink = this.hubCache.hub.dexihDatalinks\n                                .find(c => c.key === d.sourceDatalinkTable.sourceDatalinkKey);\n                            sourceName = sourceDatalink ? 'Datalink: ' + sourceDatalink.name : 'Error, not found';\n                            break;\n                        case eSourceType.Rows:\n                            sourceName = 'Static Rows';\n                            break;\n                    }\n\n                    if (d.isQuery) {\n                        targetName = 'None specified.';\n                    } else {\n                        targetName = d.dexihDatalinkTargets.filter(t => t.isValid).map(c => {\n                            let table = this.hubCache.getTable(c.tableKey);\n                            return table && table.logicalName || 'Error, not found';\n                        }).join(', ');\n                    }\n\n                    datalinkData.push({\n                        key: d.key,\n                        datalinkType: this.eDatalinkType[d.datalinkType],\n                        name: d.name,\n                        tags: this.hubCache.getObjectTags(eSharedObjectType.Datalink, d.key),\n                        description: d.description,\n                        sourceName: sourceName,\n                        targetName: targetName,\n                        updateDate: d.updateDate,\n                        sharedIcon: d.isShared ? 'fa fa-group' : 'fa fa-user-secret',\n                        sharedToolTip: d.isShared ? 'Table is shared' : 'Table is private'\n                    });\n                });\n\n                this._tableData.next(datalinkData);\n            }\n        }\n\n    }\n\n    // ngOnDestroy() {\n    //    this.hubSubscription.unsubscribe();\n    // }\n\n    editDatalink(datalink: DexihDatalink) {\n        this.router.navigate(['datalink-edit', 'edit', datalink.key],\n            { queryParamsHandling: 'merge', relativeTo: this.route.parent });\n    }\n\n    watchChanges() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n\n        // watch the current connection in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Datalink || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateDatalinks();\n            }\n        });\n    }\n}\n\n\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"Datalinks\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-exchange\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t<dexih-table \n\t\t\ttableClass=\"table table-striped table-hover m-0\"\n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\" [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"editDatalink($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<actions-datalink-button [datalinks]=\"items\" ></actions-datalink-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #filter select=\"filter\" let-items=\"items\">\n\t\t\t\t\t<dexih-button-dropdown class=\"mr-1\" [autoCompact]=\"false\" buttonClass=\"btn btn-primary\" iconClass=\"fa fa-filter\" [text]=\"eDatalinkType[typeFilter]\" title=\"Filter by a purpose\" [pullRight]=\"true\">\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='All'\" routerLink='.' [queryParams]=\"{typeFilter: 'All'}\" title=\"All Datalinks\">All</a>\n\t\t\t\t\t\t<a *ngFor=\"let datalinkType of eDatalinkTypeItems | gtFilter: 'key': 0\" [class.active]=\"typeFilter==datalinkType.key\" class=\"dropdown-item\" routerLink='.' [queryParams]=\"{typeFilter: datalinkType.key}\" [title]=\"datalinkType.name\">{{datalinkType.name}}</a>\n\t\t\t\t\t</dexih-button-dropdown>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.Datalink\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n\t\t\t\t\t<datalink-status [datalinkKey]='item?.key'></datalink-status>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.Datalink'></dependent-items-button>\n\t\t\t\t</ng-template>\n\t\t</dexih-table>\n\n\t</dexih-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Datalinks\" path=\"/assets/help/reference/datalink.md\"></dexih-help>\n</div>\n\n","export * from './datalink-index.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { HubService } from '../../hub.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { Location } from '@angular/common';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { eDatalinkType, DexihConnection, DexihTable, eConnectionPurpose, eDeltaType, eSharedObjectType, eDatalinkTypeItems } from '../../../shared/shared.models';\n\n@Component({\n\n  selector: 'dexih-datalink-new-form',\n  templateUrl: './datalink-new.component.html'\n})\nexport class DatalinkNewComponent implements OnInit, OnDestroy {\n\n  private _subscription: Subscription;\n  private _valueChangesSubscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n  private hubCache: HubCache;\n\n  public pageTitle: string;\n\n  hasChanged = false;\n  showAllErrors = false;\n\n  private tableKeys: Array<number>;\n\n  public sourceTableKeys: Array<number>;\n  public name: string;\n  public datalinkType: eDatalinkType;\n  public targetConnectionKey: number;\n  public auditConnectionKey: number;\n  public addSourceColumns = true;\n\n  public managedTargetConnections: Array<DexihConnection>;\n  public managedConnections: Array<DexihConnection>;\n\n  public sourceTables: Array<DexihTable>;\n\n  public eConnectionPurpose = eConnectionPurpose;\n\n  public auditColumnTypes = [\n    { key: eDeltaType.AutoIncrement, name: 'Auto Incrementing Key', value: false },\n    { key: eDeltaType.IsCurrentField, name: 'Is Current Flag', value: false },\n    { key: eDeltaType.Version, name: 'Record Version', value: false },\n    { key: eDeltaType.ValidFromDate, name: 'Valid From Date', value: false },\n    { key: eDeltaType.ValidToDate, name: 'Valid To Date', value: false },\n    { key: eDeltaType.CreateDate, name: 'Created Date', value: false },\n    { key: eDeltaType.UpdateDate, name: 'Updated Date', value: false },\n    { key: eDeltaType.CreateAuditKey, name: 'Created by AuditKey Reference', value: false },\n    { key: eDeltaType.UpdateAuditKey, name: 'Updated by AuditKey Reference', value: false }\n  ];\n\n  public allAuditColumns = false;\n\n  eDatalinkTypeItems = eDatalinkTypeItems;\n\n  public savingDatalink = false;\n\n  mainForm: FormGroup;\n\n  formErrors = {\n    'name': '',\n    'targetConnectionKey': '',\n    'auditConnectionKey': '',\n    'datalinkType': ''\n  };\n\n  validationMessages = {\n    'name': {\n      'required': 'Name is required.',\n      'minlength': 'Name must be at least 4 characters long.',\n      'maxlength': 'Name cannot be more than 50 characters long.',\n    },\n    'targetConnectionKey': {\n    },\n    'auditConnectionKey': {\n    },\n    'datalinkType': {\n      'required': 'Datalink Type is required.',\n    },\n  };\n\n\n  constructor(\n    private hubService: HubService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private fb: FormBuilder) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let params = result[1];\n        this.hubCache = result[2];\n\n        this.managedTargetConnections = this.hubCache.hub.dexihConnections\n          .filter(c => c.purpose === eConnectionPurpose.Managed || c.purpose === eConnectionPurpose.Target)\n\n        this.managedConnections = this.hubCache.hub.dexihConnections\n          .filter(c => c.purpose === eConnectionPurpose.Managed)\n\n        let tableKeys: string = params['sourceTableKeys'];\n        this.tableKeys = tableKeys.split('|').map(c => +c);\n\n        if (this.hubCache.status === eCacheStatus.Loaded) {\n          this.updateTables();\n\n          this.targetConnectionKey = +params['targetConnectionKey'];\n\n          if (!this.targetConnectionKey) {\n            let targetConnection = this.hubCache.hub.dexihConnections.find(c => c.purpose === eConnectionPurpose.Managed);\n            if (targetConnection) {\n              this.targetConnectionKey = targetConnection.key;\n            }\n          }\n          this.auditConnectionKey = this.targetConnectionKey;\n          this.datalinkType = eDatalinkType.General;\n\n          this.buildForm();\n\n          this.watchChanges();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Datalink New');\n    }\n\n\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._valueChangesSubscription) { this._valueChangesSubscription.unsubscribe(); }\n    if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n  }\n\n  updateTables() {\n\n    this.sourceTableKeys = new Array<number>();\n    this.sourceTables = new Array<DexihTable>();\n\n    if (this.tableKeys && this.hubCache.hub.dexihConnections) {\n      this.hubCache.hub.dexihTables.forEach(table => {\n        if (this.tableKeys.findIndex(t => t === table.key) >= 0) {\n          this.sourceTableKeys.push(table.key);\n          this.sourceTables.push(table);\n        }\n      });\n    }\n  }\n\n  buildForm(): void {\n    this.mainForm = this.fb.group({\n      'name': [this.name, [\n      ]],\n      'targetConnectionKey': [this.targetConnectionKey > 0 ? this.targetConnectionKey : null, [\n        // Validators.required,\n      ]],\n      'auditConnectionKey': [this.auditConnectionKey > 0 ? this.auditConnectionKey : null, [\n        // Validators.required,\n      ]],\n      'datalinkType': [this.datalinkType, [\n        Validators.required,\n      ]],\n    });\n\n    if (this._valueChangesSubscription) { this._valueChangesSubscription.unsubscribe(); }\n    this._valueChangesSubscription = this.mainForm.valueChanges.subscribe(data => this.onValueChanged());\n    this.onValueChanged(); // (re)set validation messages now\n\n\n    this.hasChanged = false;\n  }\n\n  onValueChanged() {\n    if (!this.mainForm) { return; }\n    const form = this.mainForm;\n\n    this.hasChanged = true;\n\n    for (const field of Object.keys(this.formErrors)) {\n      // clear previous error message (if any)\n      this.formErrors[field] = '';\n      const control = form.get(field);\n\n      if (control && (control.dirty || this.showAllErrors) && !control.valid) {\n        const messages = this.validationMessages[field];\n        for (const key of Object.keys(control.errors)) {\n          this.formErrors[field] += messages[key] + ' ';\n        }\n      }\n    }\n  }\n\n  selectAllAuditColumns() {\n    this.allAuditColumns = !this.allAuditColumns;\n    this.auditColumnTypes.forEach(c => c.value = this.allAuditColumns);\n  }\n\n  saveDatalink() {\n    if (this.mainForm.valid) {\n\n      let value = this.mainForm.value;\n      this.savingDatalink = true;\n      let auditColumns = this.auditColumnTypes.filter(c => c.value).map(c => c.key);\n      this.hubService.createDatalinks(\n        this.sourceTableKeys,\n        value.name,\n        value.datalinkType,\n        value.targetConnectionKey,\n        null,\n        null,\n        value.auditConnectionKey,\n        this.addSourceColumns,\n        auditColumns).then(result => {\n          this.savingDatalink = false;\n          if (result.length === 1) {\n            this.openDatalink(result[0].key);\n          } else {\n            this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinks'], { relativeTo: this.route.root });\n          }\n        }).catch(() => {\n          this.savingDatalink = false;\n        });\n    } else {\n      this.showAllErrors = true;\n      this.onValueChanged();\n    }\n  }\n\n  cancel() {\n    this.location.back();\n  }\n\n  // delay the open datalink until the hub cache is updated with the new datalink.\n  openDatalink(key: number, iteration = 0) {\n    if (iteration >= 10 ) {\n      this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinks'], { relativeTo: this.route.root });\n    }\n    setTimeout(() => {\n      if (this.hubCache.hub.dexihDatalinks.findIndex(c => c.key === key) >= 0) {\n        this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinks', 'datalink-edit', 'edit', key],\n        { relativeTo: this.route.root });\n      } else {\n        this.openDatalink(key, iteration++);\n      }\n    }, 500);\n  }\n\n  watchChanges() {\n    // watch the current connection in case it is changed in another session.\n    this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n        if (hubCacheChange.changeClass === eSharedObjectType.Table) {\n            this.updateTables();\n        }\n    });\n}\n}\n","<div class=\"container\">\n\t<dexih-widget title=\"New Datalink(s)\"\n\t\ticonClass=\"fa fa-lg fa-fw fa-exchange\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"!savingDatalink && cancel()\"\n\t\t[padding]=\"true\"\n\t\t>\n\t\t<ng-template #header>\n\t\t\t<dexih-button-save class=\"mr-1\" (click)=\"!savingDatalink && saveDatalink()\" [busy]=\"savingDatalink\"></dexih-button-save>\n\t\t\t<dexih-button-cancel (click)=\"!savingDatalink && cancel()\" [busy]=\"savingDatalink\"></dexih-button-cancel>\n\t\t</ng-template>\n\n\t\t<ng-template #subHeader>\n\t\t\t<label class=\"label\">Create datalinks for the following source table(s):</label>\n\t\t\t<div>\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<span class=\"col alert alert-primary m-1\" *ngFor=\"let sourceTable of sourceTables | fieldSort: 'name'\">\n\t\t\t\t\t\t{{sourceTable.name}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\n\t\t<form *ngIf=\"sourceTableKeys\"  [formGroup]=\"mainForm\">\n\n\t\t\t<fieldset>\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input *ngIf=\"sourceTables.length == 1\" label=\"Datalink Name\" formControlName=\"name\" placeholder=\"Datalink name (leave blank for auto naming)\" [autocapitalize]=\"true\"\n\t\t\t\t\t\t iconClass=\"fa fa-comment\" [errors]=\"formErrors.name\"></form-input>\n\t\t\t\t\t\t<form-input *ngIf=\"sourceTables.length > 1\" disabled label=\"Datalink Name\" placeholder=\"Datalink name can not be specified when creating multiple datalinks.\"\n\t\t\t\t\t\t iconClass=\"fa fa-comment\"></form-input>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select formControlName=\"datalinkType\" label=\"Type\" [items]=\"eDatalinkTypeItems\" itemKey=\"key\" itemName=\"description\" [errors]=\"formErrors.datalinkType\"></form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select formControlName=\"targetConnectionKey\" label=\"Target Connection\" [items]=\"managedConnections\" itemKey=\"key\"\n\t\t\t\t\t\t itemName=\"name\" note=\"Specify the connection for the target table.\" [errors]=\"formErrors.targetConnectionKey\" [allowNullSelect]=\"true\" selectNullMessage=\"No target table\"></form-select>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select formControlName=\"auditConnectionKey\" label=\"Audit Connection\" [items]=\"managedConnections\" itemKey=\"key\"\n\t\t\t\t\t\t itemName=\"name\" note=\"Specify the connection to store execution results.\" [errors]=\"formErrors.auditConnectionKey\"\n\t\t\t\t\t\t [allowNullSelect]=\"true\" selectNullMessage=\"No datalink auditing\"></form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\t\t</form>\n\n\t\t<form *ngIf=\"sourceTableKeys\" >\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"col col-11\">\n\t\t\t\t\t\t\t<form-checkbox label=\"Include source columns in target table\" [ngModel]=\"addSourceColumns\" name=\"addSourceColumns\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"col col-11\">\n\t\t\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\t\t\tSpecify the audit columns (in addition to source columns) to be included in the target table.\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<form-checkbox label=\"Select All/None\" (ngModelChange)=\"selectAllAuditColumns()\" [ngModel]=\"allAuditColumns\" name=\"selectAllAuditColumns\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section *ngFor=\"let auditColumnType of auditColumnTypes\" class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t<form-checkbox [label]=\"auditColumnType.name\" [(ngModel)]=\"auditColumnType.value\" [ngModelOptions]=\"{standalone: true}\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\t</dexih-widget>\n</div>","export * from './datalink-new.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { ActivatedRoute } from '@angular/router';\nimport { eDataObjectType } from '../../../shared/shared.models';\n\n@Component({\n\n    selector: 'datalink-preview-data',\n    templateUrl: './datalink-preview-data.component.html'\n})\nexport class DatalinkPreviewDataComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n\n    public key: number;\n    public previewUpdates: boolean;\n\n    public action: string; // new or edit\n    public pageTitle: string;\n    public message: string;\n\n    public eDataObjectType = eDataObjectType;\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private route: ActivatedRoute) {\n\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n\n                this.action = data['action'];\n                this.pageTitle = data['pageTitle'];\n                this.key = +params['datalinkKey'];\n                this.previewUpdates = params['previewUpdates'] === 'true';\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datalink Preview');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n}\n","<div class=\"container-fluid\">\n\n    <dexih-widget title=\"Preview Datalink\" iconClass=\"fa fa-lg fa-fw fa-exchange\" [showCloseButton]=\"true\"\n        (close)=\"close()\">\n        <preview-data [key]='key' [previewUpdates]='previewUpdates' [viewSource]='eDataObjectType.Datalink'></preview-data>\n    </dexih-widget>\n</div>","export { DatalinkPreviewDataComponent } from './datalink-preview-data.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubCache } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { ActivatedRoute } from '@angular/router';\nimport { DexihDatalink, InputColumn, InputParameter, InputParameterBase } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n    selector: 'datalink-run',\n    templateUrl: './datalink-run.component.html'\n})\nexport class DatalinkRunComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n    private cancelToken: CancelToken = new CancelToken();\n\n    private datalinks: DexihDatalink[];\n    private hubCache: HubCache;\n\n    public action: string; // new or edit\n    public pageTitle: string;\n    public message: string;\n\n    public inputColumns: InputColumn[];\n    public parameters: InputParameterBase[];\n\n    public truncateTable = false;\n    public resetIncremental = false;\n    public resetValue = '';\n\n    isRefreshing = false;\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private route: ActivatedRoute) {\n\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n                this.hubService.getRemoteAgentObservable()\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n\n                this.action = data['action'];\n                this.pageTitle = data['pageTitle'];\n\n                if (this.hubCache.isLoaded()) {\n                    let datalinkKeys: string = params['datalinkKeys'];\n                    this.datalinks = new Array<DexihDatalink>();\n\n                    if (datalinkKeys) {\n                        this.inputColumns = [];\n                        this.parameters = [];\n                        let datalinkKeyArray = datalinkKeys.split('|').map(c => +c);\n                        datalinkKeyArray.forEach(datalinkKey => {\n                            let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === datalinkKey);\n                            this.datalinks.push(datalink);\n                            datalink.sourceDatalinkTable.dexihDatalinkColumns.filter(c => c.isInput).forEach(c => {\n                                this.inputColumns.push({datalinkKey: datalinkKey, datalinkName: datalink.name,\n                                    name: c.name, logicalName: c.logicalName,\n                                    dataType: c.dataType, rank: c.rank, value: c.defaultValue, defaultValue: c.defaultValue });\n                            });\n                            datalink.parameters.forEach( c => {\n                                if (this.parameters.findIndex( p => p.name === c.name ) < 0) {\n                                    this.parameters.push(c);\n                                }\n                            });\n                        });\n                    }\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datalink Preview');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    runDatalinks() {\n        this.hubService.runDatalinks(this.datalinks.map(c => c.key), this.truncateTable,\n            this.resetIncremental, this.resetValue, this.inputColumns, this.parameters, this.cancelToken);\n        this.authService.navigateUp();\n    }\n}\n","<div class=\"container\">\n    <dexih-widget title=\"Datalink Options\" iconClass=\"fa fa-lg fa-fw fa-exchange\"  [showCloseButton]=\"true\" (close)=\"close()\" [padding]=\"true\">\n            <ng-template #header>\n                <dexih-button-refresh class=\"mr-1\" (click)=\"runDatalinks()\" text=\"Run Now\"></dexih-button-refresh>\n                <dexih-button-cancel (click)=\"cancel()\"></dexih-button-cancel>\n            </ng-template>\n\n        <ng-template #subHeader>\n            <label class=\"label\">Run the following datalink(s):</label>\n            <div class=\"d-flex flex-wrap\">\n                <div class=\"alert alert-primary m-1\" *ngFor=\"let datalink of datalinks | fieldSort: 'name'\">\n                    {{datalink.name}}\n                </div>\n            </div>\n        </ng-template>\n            \n\t\t<form>\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"col\">\n\t\t\t\t\t\t\t<form-checkbox label=\"Truncate all target tables before execution.\" [(ngModel)]=\"truncateTable\" [ngModelOptions]=\"{standalone: true}\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\n                    <div class=\"form-row\">\n                        <section class=\"col\">\n                                <form-checkbox label=\"Reset the source incremental value, and load all source rows.\" [(ngModel)]=\"resetIncremental\" [ngModelOptions]=\"{standalone: true}\"></form-checkbox>\n                            </section>\n                        </div>\n\n                    <div class=\"form-row\">\n                        <section class=\"col\">\n                            <form-input label=\"Incremental Value\" [(ngModel)]=\"resetValue\" [ngModelOptions]=\"{standalone: true}\" placeholder=\"\" iconClass=\"fa fa-list\" note=\"Use a specific incremental value to start loading source rows from (leave empty for null value)\" >\n                                </form-input>\n                        </section>\n                    </div>\n    \n    \n                    <div class=\"d-flex flex-wrap pt-1\" *ngIf=\"inputColumns && inputColumns.length > 0\" >\n                        <div class=\"input-group-text\">\n                            Input Values\n                        </div>\n                \n                        <span *ngFor=\"let column of inputColumns; let i = index\" class=\"input-group\">\n                            <div class=\"input-group-prepend\">\n                                <div class=\"input-group-text\">\n                                    {{column.logicalName}}\n                                </div>\n                            </div>\n                            <form-input name=\"column{{i}}\" class=\"form-control p-0\" [placeholder]=\"column.logicalName\" [(ngModel)]=\"column.value\"></form-input>\n                        </span>\n                    </div>\n\n                    <div *ngIf=\"parameters && parameters.length > 0\" >\n                        <label class=\"label\">Parameters:</label>\n                        <input-parameters-view [parameters]=\"parameters\"></input-parameters-view>\n                    </div>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\n    </dexih-widget>\n</div>","export { DatalinkIndexComponent } from './datalink-index';\nexport { DatalinkNewComponent } from './datalink-new/datalink-new.component';\nexport { DatalinkPreviewDataComponent } from './datalink-preview-data';\n\n","<section *ngIf=\"hubCache?.hub && (!fileConnections || fileConnections.length === 0)\">\n    <div class=\"alert alert-danger m-3\">\n        There are no files configured.  Create a file based connection, and add at least one file definition.\n        <hr>\n        <div>\n            <a class=\"btn btn-sm btn-primary text-white\" routerLink=\"/hub/{{hubCache.hub.hubKey}}/connections/connection-new/Source\" [title]=\"\">New Connection</a>\n        </div>\n    </div>\n</section>\n\n<div *ngIf=\"fileConnections && fileConnections.length > 0\" class=\"container\">\n    <dexih-widget *ngIf=\"!currentTable\" [title]=\"'Bulk Load: ' + connection?.name\" iconClass=\"fa fa-lg fa-fw fa-files-o\" [showCloseButton]=\"true\" (close)=\"close()\">\n        <form *ngIf=\"bulkLoadForm\" [formGroup]=\"bulkLoadForm\">\n        <div class=\"m-3\">\n            <section>\n                <form-select label=\"Connection\" formControlName=\"connectionKey\" [items]=\"fileConnections\" itemKey=\"key\"\n                    itemName=\"name\" iconClass=\"fa fa-database\" note='The connection where the files will be uploaded to.'>\n                    <a routerLink=\"//hub/{{hubCache.hub.hubKey}}/connections/connection-new/Source\">(<i class=\"fa fa-sticky-note-o\"></i> New )</a>\n                </form-select>\n            </section>\n\n            <div class=\"form-row\">\n                <section class=\"col-md-6\">\n                    <form-select label=\"Format Type\" formControlName=\"formatType\" [items]=\"formatTypes\" itemKey=\"key\"\n                        itemName=\"name\" iconClass=\"fa fa-text\" note='The format of data.'>\n                    </form-select>\n                </section>\n\n                <section class=\"col-md-6\" *ngIf=\"bulkLoadForm.controls.formatType.value == eTypeCode.Text\">\n                    <form-select label=\"File Format\" formControlName=\"fileFormatKey\" placeholder=\"File Format\"\n                        [items]=\"hubCache.hub.dexihFileFormats\" itemKey=\"key\" itemName=\"name\" [enableFilter]=\"false\"\n                        note=\"Specify the file format to use, if not specified, a csv (command separated) format will be used.\"\n                        [allowNullSelect]=\"true\" selectNullMessage=\"Use default (csv) format\">\n                        <a routerLink=\"/hub/{{hubCache.hub.hubKey}}/fileFormats/fileFormat-new\">(<i class=\"fa fa-sticky-note-o\"></i> New )</a>\n                    </form-select>\n                </section>\n            </div>\n\n            <section >\n                <form-checkbox label=\"Include file name field\" formControlName=\"includeFileName\"></form-checkbox>\n                <form-checkbox label=\"Include file date field\" formControlName=\"includeFileDate\"></form-checkbox>\n                <form-checkbox label=\"Include file row field\" formControlName=\"includeFileRowNumber\"></form-checkbox>\n            </section>\n        </div>\n    </form>\n\n        <ul *ngIf=\"connection\" class=\"list-group\">\n            <dexih-widget-section title='Drop Files to Load' [showExpandButton]=\"true\">\n                <div class=\"well my-drop-zone\" dropZone [requireFiles]=\"true\" (dropFiles)=\"filesDrop($event)\" dropAllowedClass=\"nv-file-over\">\n                    Drop Files to Load Here\n                    <div class=\"custom-file w-25 float-right\">\n                        <input type=\"file\" class=\"custom-file-input\" onclick=\"this.value=null\" (change)=\"uploadFile($event)\">\n                        <label class=\"custom-file-label\" for=\"inputGroupFile01\">Choose files</label>\n                    </div>\n                </div>\n            </dexih-widget-section>\n\n            <dexih-widget-section title='Upload Queues' [showExpandButton]=\"true\" [padding]=\"false\">\n                <dexih-table [enableMultiSelect]=\"true\" [columns]=\"uploadColumns\" [data]=\"uploadedFiles\">\n\n                    <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n                        <dexih-button class=\"mr-1\" iconClass=\"fa fa-upload\" buttonClass='btn-primary' (click)=\"uploadSelected(items)\">Upload</dexih-button>\n                        <dexih-button-cancel class=\"mr-1\" (click)=\"cancelSelected(items)\"></dexih-button-cancel>\n                        <dexih-button-delete (click)=\"removeSelected(items)\" text=\"Remove\"></dexih-button-delete>\n                    </ng-template>\n\n                    <ng-template #actions let-items=\"items\">\n                        <div class=\"d-flex align-items-center h-100\">\n                        <form-checkbox [(ngModel)]=\"automaticUpload\" label=\"Automatically upload files when added to the queue.\"></form-checkbox>\n                        </div>\n                    </ng-template>\n\n                    <ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n                        <div *ngIf=\"item.isRunning()\" class=\"progress\" style=\"margin-bottom: 0;\">\n                            <div class=\"progress-bar\" role=\"progressbar\" [ngStyle]=\"{ 'width': item.progress + '%' }\"></div>\n                        </div>\n                        <span>\n                            <i class='fa' [ngClass]=\"{\n                                'fa-check': item.status === eFileStatus.Complete, \n                                'fa-exclamation-circle': item.status === eFileStatus.Error,\n                                'fa-ban': item.status === eFileStatus.Cancelled}\"></i>{{item.status}}</span>\n                    </ng-template>\n                </dexih-table>            \n            </dexih-widget-section>\n    \n            <dexih-widget-section title='Tables Created' [showExpandButton]=\"true\" [padding]=\"false\">\n                <dexih-table [enableMultiSelect]=\"true\" [columns]=\"tableColumns\" [data]=\"tables\" (rowClick)=\"editTable($event)\">\n\n                    <ng-template select=\"selectedItemsAction\" #selectedItemsAction let-items=\"items\">\n                        <dexih-button class=\"ml-1\" (click)=\"saveTables(items)\" iconClass=\"fa fa-table\" title=\"Save the selected tables.\">Create Tables</dexih-button>\n                        <dexih-button class=\"ml-1\" (click)=\"createDatalinks(items)\" iconClass=\"fa fa-exchange\" title=\"Save the selected tables, and create datalinks to load them into a staging area.\">Create Datalinks</dexih-button>\n                        <dexih-button-delete class=\"ml-1\"  (click)=\"discardTables(items)\" title=\"Discard the selected tables.\" text=\"Discard\"></dexih-button-delete>\n                    </ng-template>\n    \n                </dexih-table>\n            </dexih-widget-section>\n        </ul>\n    </dexih-widget>\n\n    <dexih-widget *ngIf=\"currentTable\" [title]=\"'Edit table: ' + formsService.currentForm.controls.name.value\" [showCloseButton]=\"true\" (close)=\"closeTable()\">\n        <ng-template #header>\n            <dexih-button-apply (click)=\"applyChanges()\"></dexih-button-apply>\n            <dexih-button-cancel class=\"ml-1\" (click)=\"cancel()\"></dexih-button-cancel>\n        </ng-template>\n        <router-outlet></router-outlet>\n    </dexih-widget>\n</div>","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { FileHandler, eFileStatus, CancelToken } from '../../../+auth/auth.models';\nimport { Subscription, combineLatest } from 'rxjs';\nimport { HubCache, eCacheStatus, formatTypes } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../..';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DexihConnection, eTypeCode, DexihTable, eConnectionCategory, eConnectionPurpose } from '../../../shared/shared.models';\nimport { FormBuilder, FormGroup } from '@angular/forms';\n\n@Component({\n    selector: 'files-bulk-load',\n    templateUrl: 'files-bulk-load.component.html'\n})\n\nexport class FilesBulkLoadComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n    private _connectionKeySubscription: Subscription;\n    private _flatFilesSubscription: Subscription;\n\n    public entityType = 'Table';\n\n    public canEdit = false;\n    public connection: DexihConnection;\n\n    public bulkLoadForm: FormGroup;\n\n    public formatTypes = formatTypes;\n    public eTypeCode = eTypeCode;\n    public eFileStatus = eFileStatus;\n\n    public hubCache: HubCache;\n\n    public automaticUpload = true;\n\n    public uploadedFiles: FileHandler[] = [];\n\n    private reference: string = null;\n    public tables: DexihTable[] = []\n\n    public currentTable: DexihTable = null;\n\n    private cancelToken = new CancelToken();\n\n    pageTitle = 'Manage Files';\n    showPage = false;\n    showPageMessage = 'Loading...';\n\n    tableColumns = [\n        { name: 'logicalName', title: 'Logical Name', format: 'Md', footer: 'description' },\n        { name: 'name', title: 'Table Name'  },\n    ];\n\n    uploadColumns = [\n        { name: 'file.name', title: 'File Name', format: '' },\n        { name: 'file.size', title: 'Size', format: '' },\n    ];\n\n    public fileConnections: DexihConnection[];\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        private route: ActivatedRoute,\n        private router: Router,\n        public formsService: HubFormsService,\n        private fb: FormBuilder) { }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(true),\n                this.hubService.getRemoteLibrariesObservable()\n            ).subscribe(result => {\n                let queryParams = result[0];\n                this.hubCache = result[1];\n                let remoteLibraries = result[2];\n\n                this.fileConnections = this.hubCache.hub.dexihConnections\n                    .filter(c => {\n                        let ref = remoteLibraries.connections.find(con =>\n                            c.connectionAssemblyName === con.connectionAssemblyName\n                            && c.connectionClassName === con.connectionClassName);\n\n                        if (ref) {\n                            return (ref.connectionCategory === eConnectionCategory.File || c.purpose !== eConnectionPurpose.Source);\n                        } else {\n                            return false;\n                        }\n                    });\n\n                let connectionKey = +queryParams['connectionKey'];\n                if (!connectionKey) {\n                    if (this.fileConnections.length > 0) {\n                        connectionKey = this.fileConnections[0].key;\n                    }\n                }\n\n                this.bulkLoadForm = this.fb.group({\n                    'connectionKey': [connectionKey],\n                    'formatType': [eTypeCode.Text],\n                    'fileFormatKey': [],\n                    'includeFileName': [false],\n                    'includeFileDate': [false],\n                    'includeFileRowNumber': [false]\n                  });\n\n                this.updateConnection(connectionKey);\n\n                if (this._connectionKeySubscription) { this._connectionKeySubscription.unsubscribe(); }\n                this._connectionKeySubscription = this.bulkLoadForm.controls.connectionKey.valueChanges.subscribe(key => {\n                    this.updateConnection(key);\n                });\n            });\n\n            if (this._flatFilesSubscription) { this._flatFilesSubscription.unsubscribe(); }\n            this._flatFilesSubscription = this.hubService.getFlatFilesObservable().subscribe(flatFileReady => {\n                if (flatFileReady.reference === this.reference) {\n                    this.tables = flatFileReady.tables;\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Files Manage');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._flatFilesSubscription) { this._flatFilesSubscription.unsubscribe(); }\n        if (this._connectionKeySubscription) { this._connectionKeySubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    public close() {\n        this.authService.navigateUp();\n    }\n\n    private updateConnection(connectionKey) {\n        this.connection = this.hubCache.getConnection(connectionKey);\n\n        if (!this.connection && connectionKey) {\n            this.hubService.addHubErrorMessage(`The connection with the key ${connectionKey} could not be found.`);\n        } else if (this.connection) {\n            this.pageTitle = 'Load files for ' + this.connection.name;\n            this.showPage = true;\n        }\n    }\n\n    public uploadFile(event) {\n        let files = event.srcElement.files;\n        this.doUpload(files);\n        return false;\n    }\n\n    public filesDrop(files: any) {\n        this.doUpload(files);\n    }\n\n    public doUpload(files) {\n        Array.prototype.forEach.call(files, file => {\n            let bulkLoad = this.bulkLoadForm.value;\n            this.hubService.bulkUploadFiles(bulkLoad.connectionKey, bulkLoad.fileFormatKey, bulkLoad.formatType,\n                bulkLoad.includeFileName, bulkLoad.includeFileDate, bulkLoad.includeFileRowNumber, file.name,\n                this.cancelToken).then(result => {\n                let url = result.url;\n                this.reference = result.reference;\n\n                let fileHandler = new FileHandler(file, url);\n                this.uploadedFiles = this.uploadedFiles.concat(fileHandler);\n                // this.uploadedFiles.push(fileHandler);\n\n                if (this.automaticUpload) {\n                    this.authService.upload(fileHandler).then(status => {\n                        if (status.success) {\n                            this.hubService.addHubSuccessMessage(file.name + ' uploaded.');\n                        } else {\n                            this.hubService.addHubMessage(status);\n                        }\n                    }).catch(reason => {\n                        this.hubService.addHubMessage(reason);\n                    });\n                }\n            }).catch(reason => {\n                this.hubService.addHubMessage(reason);\n            });\n        });\n    }\n\n    public editTable(table: DexihTable) {\n        this.currentTable = table;\n        this.formsService.table(table);\n        this.router.navigate(['table-edit'], { relativeTo: this.route });\n    }\n\n    public applyChanges() {\n        if (this.formsService.hasChanged) {\n            let table = this.formsService.currentForm.value;\n            Object.assign(this.currentTable, table);\n        }\n        this.currentTable = null;\n        this.authService.navigateUp();\n    }\n\n    public cancel() {\n        this.currentTable = null;\n        this.authService.navigateUp();\n    }\n\n    public async saveTables(items: DexihTable[]): Promise<number[]> {\n        let newTables = Object.assign([], this.tables);\n        let keys: number[] = [];\n        for (let i = 0; i < items.length; i++ ) {\n            let table = items[i];\n            let savedTable = await this.hubService.saveTables([table]);\n\n            keys.push(savedTable[0].key);\n\n            // after table is saved, remove from unsaved list.\n            let index = this.tables.findIndex(t => table.key === t.key);\n            newTables.splice(index, 1);\n        };\n\n        this.tables = newTables;\n        return keys;\n    }\n\n    public async createDatalinks(items: DexihTable[]) {\n        let keys = await this.saveTables(items);\n        let tableKeys = keys.join('|');\n        this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'tables', 'datalink-new', tableKeys, 0],\n            { relativeTo: this.route.root });\n    }\n\n    public discardTables(items: DexihTable[]) {\n        let newTables = Object.assign([], this.tables);\n        for (let i = 0; i < items.length; i++ ) {\n            let table = items[i];\n            let index = this.tables.findIndex(t => table.key === t.key);\n            newTables.splice(index, 1);\n        };\n        this.tables = newTables;\n    }\n\n\n    public uploadSelected(items: Array<FileHandler>) {\n        items.forEach(item => {\n            this.authService.upload(item).then(status => {\n                this.hubService.addHubMessage(status);\n            }).catch(reason => {\n                this.hubService.addHubMessage(reason);\n            });\n        });\n    }\n\n    public removeSelected(items: Array<FileHandler>) {\n        items.forEach(item => {\n            let index = this.uploadedFiles.findIndex(c => c.id === item.id);\n            if (index >= 0) {\n                this.uploadedFiles.splice(index, 1);\n            }\n        });\n    }\n\n    public cancelSelected(items: Array<FileHandler>) {\n        items.forEach(item => item.cancel());\n    }\n\n    public canDeactivate(): Promise<boolean> {\n        return new Promise<boolean>((resolve) => {\n            if (this.tables.length > 0) {\n                this.authService.confirmDialog('Unsaved tables!',\n              'Table(s) have not been saved, this action will discard unsaved tables.  Do you want to discard the changes and exit?')\n              .then((confirm) => {\n                  resolve(confirm);\n                }).catch(() => {\n                  resolve(false);\n                });\n          } else {\n            resolve(true);\n          }\n        });\n      }\n\n      // @HostListener allows is to guard against browser refresh, close, etc.\n      @HostListener('window:beforeunload', ['$event'])\n      unloadNotification($event: any) {\n        if (this.tables.length > 0) {\n          $event.returnValue =\n            'Table(s) have not been saved, this action will discard unsaved tables.  Do you want to discard the changes and exit?';\n        }\n      }\n}\n","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../../hub.service';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { HubCache, FileProperties, eCacheStatus, ConnectionTables, updateStrategies } from '../../hub.models';\nimport { Message, FileHandler, eFileStatus, CancelToken } from '../../../+auth/auth.models';\nimport { DexihTable, eFlatFilePath, DexihConnection, eConnectionCategory, eFlatFilePathItems, eConnectionPurpose,\n    ConnectionReference, RemoteLibraries, eUpdateStrategy, eUpdateStrategyItems } from '../../../shared/shared.models';\n\n\n@Component({\n    selector: 'files-manage',\n    templateUrl: './files-manage.component.html'\n})\nexport class FilesManageComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n\n    public entityType = 'Table';\n\n    public canEdit = false;\n    public tableKey: number;\n    public table: DexihTable;\n    public connectionReference: ConnectionReference;\n    public updateStrategy: eUpdateStrategy = eUpdateStrategy.Reload;\n\n    public updateStrategies = updateStrategies;\n\n    public path = eFlatFilePath.None;\n    public localPath: string;\n    public eFlatFilePath = eFlatFilePath;\n    public eFlatFilePathItems = eFlatFilePathItems.filter(c => c.key > 0);\n    public eFileStatus = eFileStatus;\n\n    public connectionTables: ConnectionTables[];\n\n    public remoteLibraries: RemoteLibraries;\n\n    public hubCache: HubCache;\n\n    public automaticUpload = true;\n\n    public uploadedFiles: FileHandler[] = [];\n    public cancelToken: CancelToken = new CancelToken();\n\n    pageTitle = 'Manage Files';\n    showPage = false;\n    showPageMessage = 'Loading...';\n\n    columns = [\n        { name: 'fileName', title: 'File Name', format: '' },\n        { name: 'length', title: 'Size', format: '' },\n        { name: 'lastModified', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<FileProperties>>(null);\n    tableData: Observable<Array<FileProperties>> = this._tableData.asObservable();\n\n    uploadColumns = [\n        { name: 'file.name', title: 'File Name', format: '' },\n        { name: 'file.size', title: 'Size', format: '' },\n    ];\n\n    public fileConnections: DexihConnection[];\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        private route: ActivatedRoute,\n        private router: Router) { }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(true),\n                this.hubService.getRemoteLibrariesObservable(),\n            ).subscribe(result => {\n                let params = result[0];\n                let queryParams = result[1];\n                this.hubCache = result[2];\n                this.remoteLibraries = result[3];\n\n                // if (this.hubCache.status !== eCacheStatus.Loaded) { return; }\n\n                // if the connection is a file connection or not a source connection\n                this.fileConnections = this.hubCache.hub.dexihConnections\n                    .filter(c => {\n                        let ref = this.remoteLibraries.connections.find(con =>\n                            c.connectionAssemblyName === con.connectionAssemblyName\n                            && c.connectionClassName === con.connectionClassName);\n                        if (ref) {\n                            return (ref.connectionCategory === eConnectionCategory.File || c.purpose !== eConnectionPurpose.Source);\n                        } else {\n                            return false;\n                        }\n                    });\n\n                let connectionTables = this.hubCache.getConnectionTables();\n\n                this.connectionTables = connectionTables.filter(c => {\n                    if (c.dexihTables.length > 0) {\n                        return this.fileConnections.find(fc => c.key === fc.key) == null ? false : true;\n                    }\n                });\n\n                let hasChanged = false;\n                this.tableKey = +queryParams['tableKey'];\n                if (!this.tableKey) {\n                    if (this.connectionTables.length > 0 && this.connectionTables[0].dexihTables.length > 0) {\n                        this.tableKey = this.connectionTables[0].dexihTables[0].key;\n                        hasChanged = true;\n                    }\n                }\n\n                this.path = +queryParams['path'];\n                if (!this.path) {\n                    this.path = eFlatFilePath.Incoming;\n                    hasChanged = true;\n                }\n\n                if (hasChanged) {\n                    this.router.navigate(\n                        [],\n                        {\n                          relativeTo: this.route,\n                          queryParams: { tableKey: this.tableKey, path: this.path},\n                          queryParamsHandling: 'merge', // remove to replace all query params by provided\n                        });\n                        return;\n                }\n\n                this.table = this.hubCache.getTable(this.tableKey);\n                let connection = this.hubCache.getConnection(this.table.connectionKey);\n                this.connectionReference = this.remoteLibraries.connections.find(con =>\n                    connection.connectionAssemblyName === con.connectionAssemblyName\n                    && connection.connectionClassName === con.connectionClassName);\n\n                if (!this.table && this.tableKey) {\n                    this.hubService.addHubErrorMessage(`The table with the key ${this.tableKey} could not be found.`);\n                } else if (this.table) {\n                    this.pageTitle = 'Manage files for ' + this.table.name;\n                    this.showPage = true;\n                    this.refreshFiles();\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Files Manage');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    updateTable(tableKey: number) {\n        this.router.navigate(\n            [],\n            {\n              relativeTo: this.route,\n              queryParams: { tableKey: tableKey, path: 'incoming'},\n              queryParamsHandling: 'merge', // remove to replace all query params by provided\n            });\n    }\n\n    refreshFiles() {\n        if (this.connectionReference.allowsFlatFiles) {\n            this.hubService.getFileList(this.table, this.path, this.cancelToken).then(result => {\n                this._tableData.next(result);\n            }).catch(reason => {\n                this._tableData.next([]);\n            });\n        }\n    }\n\n    public uploadSelected(items: Array<FileHandler>) {\n        items.forEach(item => {\n            this.authService.upload(item).then(status => {\n                if (status.success) {\n                    this.hubService.addHubSuccessMessage(`File ${item.file.name} uploaded successfully.`)\n                    this.refreshFiles();\n                } else {\n                    this.hubService.addHubMessage(status);\n                }\n            }).catch(reason => {\n                this.hubService.addHubMessage(reason);\n            });\n        });\n    }\n\n    public removeSelected(items: Array<FileHandler>) {\n        items.forEach(item => {\n            let index = this.uploadedFiles.findIndex(c => c.id === item.id);\n            if (index >= 0) {\n                this.uploadedFiles.splice(index, 1);\n            }\n        });\n    }\n\n    public cancelSelected(items: Array<FileHandler>) {\n        items.forEach(item => item.cancel());\n    }\n\n    public deleteSelected(items: Array<FileProperties>) {\n        let files = items.map(c => c.fileName);\n        this.hubService.deleteFiles(this.table, this.path, files, this.cancelToken).then(c => {\n            if (c) {\n                this.refreshFiles();\n            }\n        }).catch();\n    }\n\n    public moveSelected(items: Array<FileProperties>, toPath: eFlatFilePath) {\n        let files = items.map(c => c.fileName);\n        this.hubService.moveFiles(this.table, this.path, toPath, files, this.cancelToken).then(c => {\n            if (c) {\n                this.refreshFiles();\n            }\n        }).catch(reason => {\n            this.hubService.addHubMessage(status);\n        });\n}\n\n    public downloadSelected(items: Array<FileProperties>) {\n        let files = items.map(c => c.fileName);\n        this.hubService.downloadFiles(this.table, this.path, files, this.cancelToken).then(c => {\n            if (c) {\n                this.refreshFiles();\n            }\n        }).catch();\n    }\n\n    public preview(item: FileProperties) {\n        this.router.navigate(['hub', this.hubCache.hub.hubKey, 'summary', 'files', 'manage', this.tableKey, this.path, item.fileName]);\n    }\n\n    public close() {\n        this.authService.navigateUp();\n    }\n\n    public uploadFile(event) {\n        let files = event.srcElement.files;\n        this.doUpload(files);\n        return false;\n    }\n\n    public doUpload(files) {\n        Array.prototype.forEach.call(files, file => {\n            this.hubService.uploadFile(this.table, this.path, this.updateStrategy, file.name, this.cancelToken).then(url => {\n                let fileHandler = new FileHandler(file, url);\n                if (this.automaticUpload) {\n                    this.authService.upload(fileHandler).then(status => {\n                        if (status.success) {\n                            this.hubService.addHubSuccessMessage(`File ${file.name} uploaded successfully.`)\n                            this.refreshFiles();\n                        } else {\n                            this.hubService.addHubMessage(status);\n                        }\n                    }).catch(reason => {\n                        this.hubService.addHubMessage(reason);\n                    });\n\n                }\n                this.uploadedFiles.push(fileHandler);\n                this.uploadedFiles = [...this.uploadedFiles];\n            }).catch(reason => {\n                this.hubService.addHubMessage(reason);\n            });\n        });\n    }\n\n    public filesDrop(files: any) {\n        this.doUpload(files);\n    }\n}\n","<div *ngIf=\"!connectionTables || connectionTables.length === 0\" class=\"alert alert-danger m-3\">\n    There are no files configured.  Create a file based connection, and add at least one file definition.\n    <hr>\n    <div>\n        <dexih-button-new routerLink=\"/hub/{{hubCache?.hub.hubKey}}/connections/connection-new/Source\" text=\"New Connection\" [autoCompact]=\"false\"></dexih-button-new>\n        <dexih-button *ngFor=\"let connection of fileConnections\" routerLink=\"/hub/{{hubCache?.hub.hubKey}}/connections/tables/table-new/{{connection.key}}\" [autoCompact]=\"false\" [title]=\"\">New Table ({{connection.name}})</dexih-button>\n    </div>\n</div>\n\n<div *ngIf=\"connectionTables && connectionTables.length > 0\" class=\"container\">\n    <dexih-widget [title]=\"'Manage Files: ' + table?.name\" iconClass=\"fa fa-lg fa-fw fa-table\" [showCloseButton]=\"true\"\n        (close)=\"close()\" >\n        <ng-template #header>\n            <dexih-button-dropdown class=\"mr-1\" iconClass=\"fa fa-file-o\" text=\"New File\">\n                    <a *ngFor=\"let connection of fileConnections\" class=\"dropdown-item\" routerLink=\"/hub/{{hubCache?.hub.hubKey}}/connections/tables/table-new/{{connection.key}}\" [title]=\"\">{{connection.name}}</a>\n            </dexih-button-dropdown>\n            <dexih-button-dropdown *ngIf=\"connectionReference?.allowFlatFiles && table?.autoManageFiles\" iconClass=\"fa fa-filter\" [text]=\"eFlatFilePath[path]\" title=\"Select the file location\" [pullRight]=\"true\">\n                    <a *ngFor=\"let item of eFlatFilePathItems\" class=\"dropdown-item\" [class.active]=\"path=='item.name'\" routerLinkActive=\"active\" data-toggle=\"tab\" routerLink=\".\" [queryParams]=\"{tableKey: tableKey, path: item.key}\">\n                            <i class=\"fa fa-elipsis-h\"></i>{{item.name}}</a>\n            </dexih-button-dropdown>\n        </ng-template>\n\n        <ul *ngIf=\"table\" class=\"list-group\">\n            <li class=\"list-group-item\">\n                <section>\n                    <form-select label=\"Flat File\" [(ngModel)]=\"tableKey\" [ngModelOptions]=\"{standalone: true}\"\n                        (ngModelChange)=\"updateTable($event)\" [items]=\"connectionTables\" parentName=\"name\" childItems=\"dexihTables\"\n                        itemKey=\"key\" itemName=\"logicalName\" note=\"Select the flat file to manage\">\n                    </form-select>\n                </section>\n                <section *ngIf=\"!connectionReference?.allowFlatFiles\">\n                    <form-select label=\"Update Strategy\" [(ngModel)]=\"updateStrategy\" [ngModelOptions]=\"{standalone: true}\"\n                        [items]=\"updateStrategies\" itemKey=\"key\" itemName=\"description\" iconClass=\"fa fa-database\"\n                        note='Specify how records should be inserted/updated in the target table.'\n                        >\n                    </form-select>\n                </section>\n            </li>\n            <li class=\"list-group-item list-group-item-info rounded-0\">\n                <h5>Drop Files to Upload</h5>\n            </li>\n            <li class=\"list-group-item \">\n                <div class=\"well my-drop-zone\" dropZone [requireFiles]=\"true\" (dropFiles)=\"filesDrop($event)\" dropAllowedClass=\"nv-file-over\">\n                    Drop Files to Upload Here\n                    <div class=\"custom-file w-25 float-right\">\n                        <input type=\"file\" class=\"custom-file-input\" onclick=\"this.value=null\" (change)=\"uploadFile($event)\">\n                        <label class=\"custom-file-label\" for=\"inputGroupFile01\">Choose files</label>\n                    </div>\n                </div>\n            </li>\n            <li class=\"list-group-item list-group-item-info  rounded-0\">\n                <h5>Upload Queue</h5>\n            </li>\n            <li class=\"list-group-item p-0\">\n                <dexih-table [enableMultiSelect]=\"true\" [columns]=\"uploadColumns\" [data]=\"uploadedFiles\">\n\n                    <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n                        <dexih-button class=\"mr-1\" iconClass=\"fa fa-upload\" buttonClass='btn-primary' (click)=\"uploadSelected(items)\">Upload</dexih-button>\n                        <dexih-button-cancel class=\"mr-1\" (click)=\"cancelSelected(items)\"></dexih-button-cancel>\n                        <dexih-button-delete (click)=\"removeSelected(items)\" text=\"Remove\"></dexih-button-delete>\n                    </ng-template>\n\n                    <ng-template #actions let-items=\"items\">\n                        <section>\n                            <form-checkbox [(ngModel)]=\"automaticUpload\" label=\"Automatically upload files when added to the queue.\"></form-checkbox>\n                        </section>\n                    </ng-template>\n\n                    <ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n                        <div *ngIf=\"item.isRunning()\" class=\"progress\" style=\"margin-bottom: 0;\">\n                            <div class=\"progress-bar\" role=\"progressbar\" [ngStyle]=\"{ 'width': item.progress + '%' }\"></div>\n                        </div>\n                        <span >\n                            <i class='fa' [ngClass]=\"{\n                                'fa-check': item.status === eFileStatus.Complete, \n                                'fa-exclamation-circle': item.status === eFileStatus.Error,\n                                'fa-ban': item.status === eFileStatus.Cancelled}\"></i>{{item.status}}</span>\n                    </ng-template>\n                </dexih-table>\n            </li>\n            <ng-template [ngIf]=\"connectionReference?.allowFlatFiles\">\n            <li class=\"list-group-item list-group-item-info rounded-0\">\n                <h5>Files (Local directory:\n                    <a href='file://///{{localPath}}'>{{localPath}}</a>)</h5>\n\n            </li>\n            <li class=\"list-group-item p-0\">\n                <dexih-table [enableMultiSelect]=\"true\" [columns]=\"columns\" [dataObservable]=\"tableData\">\n\n                    <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n                        <dexih-button-delete class=\"mr-1\" (click)=\"deleteSelected(items)\"></dexih-button-delete>\n                        <dexih-button-download class=\"mr-1\" (click)=\"downloadSelected(items)\"></dexih-button-download>\n                        <dexih-button-dropdown class=\"mr-1\" iconClass=\"fa fa-mail-forward\" text=\"Move\" [pullRight]=\"true\">\n                            <a class=\"dropdown-item\" *ngIf=\"path != eFlatFilePath.Incoming\" (click)=\"moveSelected(items, eFlatFilePath.Incoming)\">To Incoming</a>\n                            <a class=\"dropdown-item\" *ngIf=\"path != eFlatFilePath.Outgoing\" (click)=\"moveSelected(items, eFlatFilePath.Outgoing)\">To Processed</a>\n                            <a class=\"dropdown-item\" *ngIf=\"path != eFlatFilePath.Processed\" (click)=\"moveSelected(items, eFlatFilePath.Processed)\">To Processed</a>\n                            <a class=\"dropdown-item\" *ngIf=\"path != eFlatFilePath.Rejected\" (click)=\"moveSelected(items, eFlatFilePath.Rejected)\">To Rejected</a>\n                        </dexih-button-dropdown>\n                    </ng-template>\n\n                    <ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n                        <dexih-button-preview [routerLink]=\"['/hub', hubCache?.hub.hubKey, 'summary', 'files', 'manage', tableKey, 'file-preview', path, item.fileName]\"></dexih-button-preview>\n                    </ng-template>\n\n                    <ng-template #actions let-items=\"items\">\n                        <dexih-button-dropdown *ngIf=\"table?.autoManageFiles\" class=\"mr-1\" buttonClass=\"btn-primary\" iconClass=\"fa fa-filter\" [text]=\"eFlatFilePath[path]\"\n                            title=\"Select the file location\" [pullRight]=\"true\">\n                            <a *ngFor=\"let item of eFlatFilePathItems\" class=\"dropdown-item\" [class.active]=\"path=='item.name'\" routerLinkActive=\"active\" data-toggle=\"tab\" routerLink=\".\" [queryParams]=\"{tableKey: tableKey, path: item.key}\">\n                                <i class=\"fa fa-elipsis-h\"></i>{{item.name}}</a>\n                        </dexih-button-dropdown>\n                        <dexih-button-refresh (click)=\"refreshFiles()\"></dexih-button-refresh>\n                    </ng-template>\n                </dexih-table>\n            </li>\n        </ng-template>\n        </ul>\n    </dexih-widget>\n</div>","export { FilesManageComponent } from './files-manage/files-manage.component';\nexport { FilesBulkLoadComponent } from './files-bulk-load/files-bulk-load.component';\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { SharedModule } from '../shared/shared.module';\nimport { ColumnValidationEditComponent, ColumnValidationIndexComponent } from './columnValidation';\nimport { ConnectionEditComponent, ConnectionImportComponent, ConnectionIndexComponent } from './connection';\nimport { ImportComponent, ExportComponent } from './copy';\nimport { DatajobIndexComponent } from './datajob';\nimport { DatalinkIndexComponent, DatalinkNewComponent } from './datalink';\nimport { DatalinkPreviewDataComponent } from './datalink/datalink-preview-data';\nimport { FileFormatIndexComponent } from './fileFormat';\nimport { FilesManageComponent, FilesBulkLoadComponent } from './files';\nimport { BaseRouting } from './hub.base.routing';\nimport { HubService } from './hub.service';\nimport { HubSharedModule } from './hub.shared.module';\nimport { HubVariableEditComponent, HubVariableIndexComponent } from './hubVariable';\nimport { ItemEditGuard } from './item-edit.guard';\nimport { ManageUsersIndexComponent } from './manage/manage-users-index/manage-users-index.component';\nimport { RemoteAgentEditComponent, RemoteAgentIndexComponent } from './remoteAgent';\nimport { ResultsIndexComponent } from './results';\nimport { ResultsViewModule } from './results/results-view/results-view.module';\nimport { SharedDataIndexComponent } from './sharedData/sharedData-index.component';\nimport { TableIndexComponent } from './table/table-index';\nimport { CustomFunctionIndexComponent, CustomFunctionEditComponent, CustomFunctionParameterComponent } from './customFunction';\nimport { DatalinkTestIndexComponent, DatalinkTestNewComponent } from './test'\nimport { ViewIndexComponent } from './view/view-index';\nimport { ViewEditComponent } from './view/view-edit';\nimport { DashboardIndexComponent } from './dashboard';\nimport { ApiIndexComponent } from './api/api-index';\nimport { ApiEditComponent } from './api/api-edit';\nimport { DatalinkRunComponent } from './datalink/datalink-run/datalink-run.component';\nimport { SearchModule} from './search';\nimport { DatajobRunComponent } from './datajob/datajob-run/datajob-run.component';\nimport { ListOfValuesEditComponent } from './listOfValues/listOfValues-edit';\nimport { ListOfValuesIndexComponent } from './listOfValues/listOfValues-index';\nimport { TagsComponent } from './tags/tags.component';\n\n@NgModule({\n    imports: [\n        SharedModule,\n        BaseRouting,\n        ReactiveFormsModule,\n        HubSharedModule,\n        ResultsViewModule,\n        SearchModule,\n    ],\n    declarations: [\n        ConnectionIndexComponent,\n        ConnectionEditComponent,\n        ConnectionImportComponent,\n        DatalinkIndexComponent,\n        DatalinkPreviewDataComponent,\n        DatalinkRunComponent,\n        DatajobRunComponent,\n        TableIndexComponent,\n        DatalinkNewComponent,\n        RemoteAgentIndexComponent,\n        RemoteAgentEditComponent,\n        ResultsIndexComponent,\n        DatajobIndexComponent,\n        ColumnValidationIndexComponent, ColumnValidationEditComponent,\n        FileFormatIndexComponent,\n        ViewIndexComponent,\n        ApiIndexComponent, ApiEditComponent,\n        HubVariableEditComponent, HubVariableIndexComponent,\n        ImportComponent, ExportComponent,\n        FilesManageComponent,\n        ManageUsersIndexComponent,\n        SharedDataIndexComponent,\n        CustomFunctionIndexComponent, CustomFunctionEditComponent, CustomFunctionParameterComponent,\n        DatalinkTestIndexComponent, DatalinkTestNewComponent,\n        DashboardIndexComponent,\n        ListOfValuesEditComponent, ListOfValuesIndexComponent,\n        TagsComponent\n    ],\n    providers: [ ItemEditGuard ],\n    exports: [ ]\n})\nexport class HubBaseModule {\n\n    static forRoot(): ModuleWithProviders<HubBaseModule> {\n        return {\n            ngModule: HubBaseModule,\n            providers: [HubService, ItemEditGuard]\n        };\n    }\n}\n","import { Route, RouterModule, Routes } from '@angular/router';\n\nimport { ColumnValidationEditComponent, ColumnValidationIndexComponent } from './columnValidation';\nimport { ConnectionEditComponent } from './connection/connection-edit';\nimport { ConnectionImportComponent } from './connection/connection-import';\nimport { ConnectionIndexComponent } from './connection/connection-index';\nimport { ImportComponent, ExportComponent } from './copy';\nimport { DatajobIndexComponent } from './datajob/datajob-index';\nimport { DatalinkIndexComponent } from './datalink/datalink-index';\nimport { DatalinkNewComponent } from './datalink/datalink-new';\nimport { DatalinkPreviewDataComponent } from './datalink/datalink-preview-data';\nimport { FileFormatEditComponent, FileFormatIndexComponent } from './fileFormat';\nimport { FilesManageComponent, FilesBulkLoadComponent } from './files';\nimport { HubVariableEditComponent, HubVariableIndexComponent } from './hubVariable';\nimport { ManageUsersIndexComponent } from './manage/manage-users-index/manage-users-index.component';\nimport { RemoteAgentEditComponent, RemoteAgentIndexComponent } from './remoteAgent';\nimport { ResultsIndexComponent, ResultsViewComponent } from './results';\nimport { SharedDataIndexComponent } from './sharedData/sharedData-index.component';\nimport { TableIndexComponent } from './table/table-index';\nimport { TablePreviewDataComponent } from './table/table-preview-data';\nimport { CustomFunctionIndexComponent, CustomFunctionEditComponent } from './customFunction';\nimport { ItemEditGuard } from './item-edit.guard';\nimport { DatalinkTestIndexComponent, DatalinkTestNewComponent } from './test'\nimport { ViewEditComponent } from './view/view-edit';\nimport { ViewIndexComponent } from './view/view-index';\nimport { ApiEditComponent } from './api/api-edit';\nimport { ApiIndexComponent } from './api/api-index';\nimport { DatalinkRunComponent } from './datalink/datalink-run/datalink-run.component';\nimport { SearchComponent } from './search';\nimport { DashboardEditComponent, DashboardIndexComponent } from './dashboard';\nimport { DatajobRunComponent } from './datajob/datajob-run/datajob-run.component';\nimport { DexihDashboard, DexihView, DexihApi } from '../shared/shared.models';\nimport { ListOfValuesEditComponent } from './listOfValues/listOfValues-edit';\nimport { ListOfValuesIndexComponent } from './listOfValues/listOfValues-index';\nimport { TagsComponent } from './tags/tags.component';\n\nconst resultViewRoute: Route = { path: 'result-view/:auditConnectionKey/:auditKey', children: [\n        {path: '', pathMatch: 'full', component: ResultsViewComponent, data: { pageTitle: 'Detailed Result' }},\n        { path: 'result-view/:auditConnectionKey/:auditKey', children: [\n            {path: '', pathMatch: 'full', component: ResultsViewComponent, data: { pageTitle: 'Child Result' }},\n            { path: 'result-view/:auditConnectionKey/:auditKey', children: [\n                {path: '', pathMatch: 'full', component: ResultsViewComponent, data: { pageTitle: 'GrandChild Result' }},\n            ]\n        }\n        ]\n    }\n    ]\n};\n\nconst tableRoutes: Routes = [\n    { path: 'table-edit/:tableKey', data: { pageTitle: 'Edit Table', action: 'edit'},\n        loadChildren: () => import('./table/table-edit/table-edit.module').then(m => m.TableEditModule)},\n    { path: 'table-new',  data: {  pageTitle: 'New Table', action: 'new'},\n        loadChildren: () => import('./table/table-edit/table-edit.module').then(m => m.TableEditModule)},\n    { path: 'table-new/:connectionKey',  data: {  pageTitle: 'New Table', action: 'new'},\n        loadChildren: () => import('./table/table-edit/table-edit.module').then(m => m.TableEditModule)},\n    { path: 'datalink-new/:sourceTableKeys/:targetConnectionKey',\n        component: DatalinkNewComponent, data: { action: 'new', pageTitle: 'New Datalink' } },\n    { path: 'table-preview/:tableKey', component: TablePreviewDataComponent, data: { pageTitle: 'Preview Table' } },\n];\n\nconst datalinkRoutes: Routes = [\n    { path: 'datalink-edit', loadChildren: () => import('./datalink/datalink-edit/datalink-edit.module').then(m => m.DatalinkEditModule)},\n    { path: 'datalink-preview/:datalinkKey/:previewUpdates', component: DatalinkPreviewDataComponent,\n        data: { pageTitle: 'Preview Datalink' } },\n    { path: 'table-preview/:tableKey', component: TablePreviewDataComponent, data: { pageTitle: 'Preview Table' } },\n    { path: 'datalink-run/:datalinkKeys', component: DatalinkRunComponent, data: { pageTitle: 'Run Datalink' } },\n    resultViewRoute\n];\n\nconst tablesRoute: Route = { path: 'tables', data: { pageTitle: 'Tables' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: TableIndexComponent, data: { pageTitle: 'Tables' }},\n    {path: '', children: (<Routes>tableRoutes)},\n    {path: '', children: (<Routes>datalinkRoutes)},\n    ])\n};\n\nconst connectionRoutes: Routes = [\n    { path: 'connection-edit/:connectionKey', component: ConnectionEditComponent, canDeactivate: [ItemEditGuard],\n        data: {action: 'edit', pageTitle: 'Edit Connection' }},\n    { path: 'connection-import/:connectionKey', data: { pageTitle: 'Import Tables'}, children: [\n        {path: '', pathMatch: 'full', component: ConnectionImportComponent, data: { pageTitle: 'Import Tables' }} ,\n        { path: 'table-edit/:tableKey', data: { pageTitle: 'Edit Table', action: 'edit'},\n                loadChildren: () => import('./table/table-edit/table-edit.module').then(m => m.TableEditModule)},\n        { path: 'datalink-new/:sourceTableKeys/:targetConnectionKey',\n        component: DatalinkNewComponent, data: { action: 'new', pageTitle: 'New Datalink' } },\n    ]},\n    { path: 'connection-new/:purpose', component: ConnectionEditComponent, data: {action: 'new', pageTitle: 'New Connection' }},\n    { path: 'connection-copy/:connectionKey', component: ConnectionEditComponent, data: {action: 'copy', pageTitle: 'New Connection' }}\n];\n\nconst connectionsRoute: Route =  { path: 'connections', data: {pageTitle: 'Connections' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: ConnectionIndexComponent, data: {pageTitle: 'Connections' }},\n    {path: '', children: (<Routes>connectionRoutes)},\n    tablesRoute\n    ])\n};\n\nconst agentRoutes: Routes = [\n    { path: '', pathMatch: 'full', component: RemoteAgentIndexComponent, data: { pageTitle: 'Remote Agents' }},\n    { path: 'agent-edit/:remoteAgentKey/:remoteAgentHubKey', component: RemoteAgentEditComponent, data: { pageTitle: 'Edit Agent' }}\n];\n\nconst agentsRoute: Route = { path: 'agents', data: { pageTitle: 'Remote Agents' }, children: agentRoutes\n};\n\nconst resultRoutes: Routes = [\n    { path: 'results', data: { pageTitle: 'Execution Results' }, children: [\n        {path: '', pathMatch: 'full', component: ResultsIndexComponent, data: { pageTitle: 'Execution Results' } },\n        resultViewRoute\n    ] },\n    resultViewRoute\n];\n\nconst manageRoute: Route = { path: 'manage', children: (<Routes>[\n    { path: 'manage-users', component: ManageUsersIndexComponent, data: {pageTitle: 'Manage Users'}}\n    ])\n};\n\nconst importRoute: Route = { path: 'import', children: (<Routes>[\n    { path: '', pathMatch: 'full', component: ImportComponent, data: {pageTitle: 'Import Objects'}}\n    ])\n};\n\nconst exportRoute: Route = { path: 'export', children: (<Routes>[\n    { path: '', pathMatch: 'full', component: ExportComponent, data: {pageTitle: 'Export Objects'}}\n    ])\n};\n\nconst sharedDataRoute: Route = { path: 'sharedData', data: { pageTitle: 'Shared Data' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: SharedDataIndexComponent},\n    {path: '', children: [\n        { path: 'table-preview/:tableKey', component: TablePreviewDataComponent, data: { pageTitle: 'Preview Table' } },\n        { path: 'datalink-preview/:datalinkKey', component: DatalinkPreviewDataComponent, data: { pageTitle: 'Preview Datalink' } },\n        { path: 'dashboard-preview/:dashboardKey', data: { pageTitle: 'Preview Dashboard', action: 'edit'},\n        loadChildren: () => import('./dashboard/dashboard-edit/dashboard-edit.module').then(m => m.DashboardEditModule)},\n        { path: 'view-preview/:viewKey', component: ViewEditComponent, data: { pageTitle: 'Preview View', action: 'edit' } },\n        { path: 'api-preview/:apiKey', component: ApiEditComponent, data: { pageTitle: 'Preview Api', action: 'edit' } }\n    ]}])\n};\n\nconst customFunctionRoutes: Routes = [\n    { path: 'customFunction-edit/:customFunctionKey', component: CustomFunctionEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit Custom Function'}},\n    { path: 'customFunction-new', component: CustomFunctionEditComponent, data: { action: 'new', pageTitle: 'New Custom Function'}},\n];\n\nconst customFunctionRoute: Route = { path: 'customFunctions', data: { pageTitle: 'Custom Functions' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: CustomFunctionIndexComponent},\n    {path: '', children: (<Routes>customFunctionRoutes)},\n    ])\n};\n\nconst columnValidationRoutes: Routes = [\n    { path: 'columnValidation-edit/:validationKey', component: ColumnValidationEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit Validation'}},\n    { path: 'columnValidation-new', component: ColumnValidationEditComponent, data: { action: 'new', pageTitle: 'New Validation'}},\n];\n\nconst columnValidationsRoute: Route = { path: 'columnValidations', data: { pageTitle: 'Column Validations' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: ColumnValidationIndexComponent},\n    {path: '', children: (<Routes>columnValidationRoutes)},\n    ])\n};\n\nconst fileFormatRoutes: Routes = [\n    { path: 'fileFormat-edit/:fileFormatKey', component: FileFormatEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit FileFormat'}},\n    { path: 'fileFormat-new', component: FileFormatEditComponent, data: { action: 'new', pageTitle: 'New FileFormat'}},\n];\n\nconst fileFormatsRoute: Route = { path: 'fileFormats', data: { pageTitle: 'File Formats' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: FileFormatIndexComponent},\n    {path: '', children: (<Routes>fileFormatRoutes)}\n    ])\n};\n\nconst viewRoutes: Routes = [\n    { path: 'view-edit/:viewKey', component: ViewEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit View'}},\n    { path: 'view-new', component: ViewEditComponent, data: { action: 'new', pageTitle: 'New View'}},\n];\n\nconst viewRoute: Route = { path: 'views', data: { pageTitle: 'Views' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: ViewIndexComponent},\n    {path: '', children: (<Routes>viewRoutes)}\n    ])\n};\n\nconst dashboardRoutes: Routes = [\n    { path: 'dashboard-edit/:dashboardKey', data: { pageTitle: 'Edit Dashboard', action: 'edit'},\n        loadChildren: () => import('./dashboard/dashboard-edit/dashboard-edit.module').then(m => m.DashboardEditModule)},\n    { path: 'dashboard-new',  data: {  pageTitle: 'New Dashboard', action: 'new'},\n        loadChildren: () => import('./dashboard/dashboard-edit/dashboard-edit.module').then(m => m.DashboardEditModule)},\n];\n\nconst dashboardRoute: Route = { path: 'dashboards', data: { pageTitle: 'Dashboards' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: DashboardIndexComponent},\n    {path: '', children: (<Routes>dashboardRoutes)}\n    ])\n};\n\nconst lovRoutes: Routes = [\n    { path: 'listOfValues-edit/:listOfValuesKey', component: ListOfValuesEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit List Of Values'}},\n    { path: 'listOfValues-new', component: ListOfValuesEditComponent, data: { action: 'new', pageTitle: 'New List of Values'}},\n];\n\nconst lovRoute: Route = { path: 'listOfValues', data: { pageTitle: 'List of Values' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: ListOfValuesIndexComponent},\n    {path: '', children: (<Routes>lovRoutes)}\n    ])\n};\n\nconst apiRoutes: Routes = [\n    { path: 'api-edit/:apiKey', component: ApiEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit Api'}},\n    { path: 'api-new', component: ApiEditComponent, data: { action: 'new', pageTitle: 'New Api'}},\n];\n\nconst apiRoute: Route = { path: 'apis', data: { pageTitle: 'Apis' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: ApiIndexComponent},\n    {path: '', children: (<Routes>apiRoutes)}\n    ])\n};\nconst hubVariableRoutes: Routes = [\n    { path: 'hubVariable-edit/:hubVariableKey', component: HubVariableEditComponent, data: { action: 'edit',\n        pageTitle: 'Edit Hub Variable'}},\n    { path: 'hubVariable-new', component: HubVariableEditComponent, data: { action: 'new', pageTitle: 'New Hub Variable'}},\n];\n\nconst hubVariablesRoute: Route = { path: 'hubVariables', data: { pageTitle: 'Hub Variables' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: HubVariableIndexComponent},\n    {path: '', children: (<Routes>hubVariableRoutes)}\n    ])\n};\n\nconst tagsRoute: Route = { path: 'tags', component: TagsComponent}\n\nconst datalinkTestRoutes: Routes = [\n    { path: 'datalinkTest-edit/:datalinkTestKey', data: { pageTitle: 'Edit Datalink Test', action: 'edit'},\n            loadChildren: () => import('./test/datalinkTest-edit/datalinkTest-edit.module').then(m => m.DatalinkTestEditModule)},\n    { path: 'datalinkTest-new',  data: {  pageTitle: 'New Datalink Test', action: 'new'},\n            loadChildren: () => import('./test/datalinkTest-edit/datalinkTest-edit.module').then(m => m.DatalinkTestEditModule)},\n    { path: 'datalinkTest-new/:datalinkKeys', component: DatalinkTestNewComponent,\n        data: {  pageTitle: 'New Datalink Test', action: 'new'}},\n    resultViewRoute\n];\n\nconst datalinkTestsRoute: Route = { path: 'datalinkTests', data: { pageTitle: 'Datalink Tests' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: DatalinkTestIndexComponent},\n    {path: '', children: (<Routes>datalinkTestRoutes)},\n    {path: '', children: (<Routes>resultRoutes)},\n    ])\n};\n\nconst filesRoutes: Routes = [\n    { path: 'manage', children: (<Routes> [\n        { path: '', component: FilesManageComponent, data: { action: 'edit', pageTitle: 'Manage Files'}},\n        { path: ':tableKey', data: { action: 'edit', pageTitle: 'Manage Files'}, children: (<Routes> [\n            { path: '', component: FilesManageComponent, data: { action: 'edit', pageTitle: 'Manage Files'}},\n            { path: 'file-preview/:path/:fileName', component: TablePreviewDataComponent, data: { pageTitle: 'Preview File' } }\n        ])}\n    ])},\n    { path: 'bulk-load', children: (<Routes> [\n       {path: '', data: { action: 'new', pageTitle: 'Bulk Load Files'},\n        loadChildren: () => import('./files/files-bulk-load/files-bulk-load.module').then(m => m.FilesBulkLoadModule)},\n       {path: ':connectionKey', data: { action: 'new', pageTitle: 'Bulk Load Files'},\n        loadChildren: () => import('./files/files-bulk-load/files-bulk-load.module').then(m => m.FilesBulkLoadModule)},\n    ])},\n];\n\nconst filesRoute: Route = { path: 'files', data: { pageTitle: 'Files' }, children: (<Routes>[\n    {path: '', children: (<Routes>filesRoutes)}\n    ])\n};\n\nconst datalinksRoute = { path: 'datalinks', data: { pageTitle: 'Data Links' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', data: { pageTitle: 'Data Links' }, component: DatalinkIndexComponent},\n    {path: '', children: (<Routes>datalinkRoutes)},\n    {path: '', children: (<Routes>resultRoutes)},\n    ])\n};\n\n// const publishedRoute: Route = { path: 'published', children: (<Routes>[\n//     { path: '', redirectTo: 'All'},\n//     { path: ':typeFilter', children: (<Routes> [\n//         {path: '', pathMatch: 'full', component: DatalinkIndexComponent, data: { pageTitle: 'Published' }},\n//     {path: '', children: (<Routes>datalinkRoutes)},\n//     {path: '', children: (<Routes>resultRoutes)},\n//     ])}\n//     ])\n// };\n\nconst datajobRoutes: Routes = [\n    { path: 'datajob-edit/:datajobKey', data: { pageTitle: 'Edit Data Job', action: 'edit'},\n            loadChildren: () => import('./datajob/datajob-edit/datajob-edit.module').then(m => m.DatajobEditModule)},\n    { path: 'datajob-new',  data: {  pageTitle: 'New Data Job', action: 'new'},\n            loadChildren: () => import('./datajob/datajob-edit/datajob-edit.module').then(m => m.DatajobEditModule)},\n    { path: 'datajob-run/:datajobKeys', component: DatajobRunComponent, data: { pageTitle: 'Run datajobs' } },\n\n];\n\nconst datajobsRoute: Route = { path: 'datajobs', data: { pageTitle: 'Data Jobs' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: DatajobIndexComponent},\n    {path: '', children: (<Routes>datajobRoutes)},\n    {path: '', children: (<Routes>resultRoutes)},\n    ])\n};\n\nconst searchRoute: Route =  { path: 'search',  data: {pageTitle: 'Search'}, children: (<Routes> [\n    { path: '', pathMatch: 'full', redirectTo: '0/' },\n\n    // { path: '', loadChildren: './hub.base.module#HubBaseModule' },\n     { path: ':searchObject/:search', pathMatch: 'full', component: SearchComponent, },\n     { path: ':searchObject/:search', loadChildren: () => import('./hub.base.module').then(m => m.HubBaseModule) }\n  ])\n };\n\nconst routes: Routes = (<Routes>[\n    agentsRoute,\n    connectionsRoute,\n//    publishedRoute,\n    datalinksRoute,\n    tablesRoute,\n    datajobsRoute,\n  // resultsRoute,\n    columnValidationsRoute,\n    customFunctionRoute,\n    fileFormatsRoute,\n    viewRoute,\n    dashboardRoute,\n    lovRoute,\n    apiRoute,\n    hubVariablesRoute,\n    manageRoute,\n    importRoute,\n    exportRoute,\n    sharedDataRoute,\n    filesRoute,\n    datalinkTestsRoute,\n    tagsRoute,\n    searchRoute,\n    { path: '', children : connectionRoutes},\n    { path: '', children : datalinkRoutes},\n    { path: '', children : tableRoutes},\n    { path: '', children : datajobRoutes},\n    { path: '', children : resultRoutes},\n    { path: '', children : customFunctionRoutes},\n    { path: '', children : columnValidationRoutes},\n    { path: '', children : fileFormatRoutes},\n    { path: '', children : viewRoutes},\n    { path: '', children : dashboardRoutes},\n    { path: '', children : lovRoutes},\n    { path: '', children : apiRoutes},\n    { path: '', children : hubVariableRoutes},\n    { path: '', children : filesRoutes},\n    { path: '', children : agentRoutes},\n    { path: '', children : datalinkTestRoutes},\n]);\n\nexport const BaseRouting = RouterModule.forChild(routes);\n","<div class=\"container\">\n\t<dexih-widget \n\ttitle=\"Edit Variable\" \n\ticonClass=\"fa fa-lg fa-fw fa-at\" \n\t[showCloseButton]=\"true\"\n\t[padding]=\"true\"\n\t(close)=\"close()\"\n\t>\n        <ng-template #header>\n            <dexih-button-save *ngIf=\"hubCache.canWrite\" class=\"mr-1\" (click)=\"save()\"></dexih-button-save>\n            <cancel-button [formsService]=\"formsService\"></cancel-button>\n        </ng-template>\n\n\t\t<form *ngIf=\"formsService.currentForm\"  [formGroup]=\"formsService.currentForm\" >\n\t\t\t<!--dummy hidden password to stop chrome/firefox autocompletion password.-->\n\t\t\t<input id=\"fake_user_name\" name=\"fake_user[name]\" style=\"position:absolute; top:-5000px;\" type=\"text\" value=\"Fake Auto-fill\">\n\t\t\t<input id=\"fake_password\" type=\"password\" name=\"fake_password[password]\" style=\"position:absolute; top:-5000px;\" type=\"text\" value=\"Fake Auto-fill\">\n\n\t\t\t<fieldset>\n\n\t\t\t\t\t\t\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Hub Variable Name\" formControlName=\"name\" placeholder=\"Enter the name.\" [autocapitalize]=\"true\" iconClass=\"fa fa-list\" [errors]=\"formsService.formErrors['name']\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input [label]=\"formsService.currentForm.controls.isEnvironmentVariable.value ? 'Environment Variable Name' : 'Hub Variable Value'\" [type]=\"formsService.currentForm.controls.isEncrypted.value ? 'password' : 'text'\" formControlName=\"valueRaw\" placeholder=\"Enter the value.\" iconClass=\"fa fa-list\" [errors]=\"formsService.formErrors['value']\" autocomplete=\"off\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<section >\n\t\t\t\t\t<form-checkbox label=\"Encrypt value\" formControlName=\"isEncrypted\" >\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\n\t\t\t\t<section >\n\t\t\t\t\t<form-checkbox label=\"Use an environment variable on the remote agent\" formControlName=\"isEnvironmentVariable\" >\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\n\t\t\t</fieldset>\n\t\t</form>\n \n\t</dexih-widget>\n\n\t<dexih-help class=\"m-3\"  title=\"Hub Variables\" path=\"/assets/help/reference/hubVariable.md\"></dexih-help>\n\n</div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DexihHubVariable } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n  selector: 'dexih-hubVariable-edit-form',\n  templateUrl: './hubVariable-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class HubVariableEditComponent implements OnInit, OnDestroy {\n\n  private hubVariableKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _isEncryptedSubscription: Subscription;\n  private isLoaded = false;\n\n  private cancelToken = new CancelToken();\n\n  constructor(private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.pageTitle = data['pageTitle'];\n        this.action = data['action'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Edit Variables');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._isEncryptedSubscription) { this._isEncryptedSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  load() {\n    this.isLoaded = true;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.hubVariableKey = + this.params['hubVariableKey'];\n\n      if (!this.hubVariableKey) {\n        this.hubService.addHubErrorMessage('There was no variable specified to edit.');\n        // this.errorMessage = 'There was no validation specified to edit.';\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihHubVariables) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let hubVariable = this.hubCache.hub.dexihHubVariables.find(c => c.key === this.hubVariableKey);\n          this.formsService.hubVariable(hubVariable);\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let hubVariable = new DexihHubVariable();\n      hubVariable.value = '';\n      hubVariable.name = '';\n      this.formsService.hubVariable(hubVariable);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/hubVariable-new', `/hubVariable-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n\n    this._isEncryptedSubscription = this.formsService.currentForm.controls.isEncrypted.valueChanges.subscribe(isEncrypted => {\n      if (!isEncrypted) {\n        this.formsService.currentForm.controls.valueRaw.setValue('');\n      }\n    });\n  }\n\n  async save() {\n    let form = this.formsService.currentForm;\n\n    let isEncrypted = form.controls.isEncrypted.value;\n    if (isEncrypted) {\n      let valueRaw = form.controls.valueRaw.value;\n        if (valueRaw) {\n          let value = await this.hubService.encrypt(valueRaw, this.cancelToken);\n          form.controls.value.setValue(value);\n          form.controls.valueRaw.setValue(null);\n        }\n      } else {\n        let valueRaw = form.controls.valueRaw.value;\n        form.controls.value.setValue(valueRaw);\n      }\n\n    await this.formsService.save();\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n}\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Observable, Subscription, BehaviorSubject, combineLatest} from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { DexihHubVariable, DexihHub, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'hubVariable',\n  templateUrl: './hubVariable-index.component.html',\n  styles: []\n})\nexport class HubVariableIndexComponent implements OnInit, OnDestroy {\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    hubVariables: Array<DexihHubVariable>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', format: '', tags: 'tags'},\n        { name: 'value', title: 'Value', format: ''},\n        { name: 'isEncrypted', title: 'Encrypted?', format: 'Boolean'},\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar'},\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        this._subscription = combineLatest(\n            this.hubService.getHubCacheObservable()\n        ).subscribe(result => {\n          this.hubCache = result[0];\n          this.updateVariables();\n        });\n    } catch (e) {\n        this.hubService.addHubClientErrorMessage(e, 'Hub Variables Index');\n      }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    deleteHubVariables(variables: Array<DexihHubVariable>) {\n        this.hubService.deleteHubVariables(variables);\n    }\n\n    updateVariables() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let variables = this.hubCache.hub.dexihHubVariables.filter(c => c.isValid).map(c => {\n                return {\n                    key: c.key,\n                    name: c.name,\n                    description: c.description,\n                    updateDate: c.updateDate,\n                    value: c.isEncrypted ? '(Encrypted)' : c.value,\n                    isEncrypted: c.isEncrypted,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.HubVariable, c.key)\n                }\n            });\n            this._tableData.next(variables);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(variable: DexihHubVariable) {\n        this.router.navigate(['hubVariable-edit', variable.key], { relativeTo: this.route});\n    }\n\n    export(variables: Array<DexihHubVariable>) {\n        let vars = this.hubCache.hub.dexihHubVariables.filter(c => {\n            return variables.findIndex(d => d.key === c.key) >= 0\n        });\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        hub.dexihHubVariables = vars;\n        let filename = 'hub_variables.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n\n    watchChanges() {\n      // watch the current validation in case it is changed in another session.\n      this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n          if (hubCacheChange.changeClass === eSharedObjectType.HubVariable || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n            this.updateVariables();\n          }\n      });\n  }\n}\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"Hub Variables\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-at\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n \n\n\t\t<dexih-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-hubVariable=\"item\">\n\t\t\t\t\t<dexih-button-edit class=\"mr-1\" [routerLink]=\"['hubVariable-edit', hubVariable.key]\" queryParamsHandling preserveFragment></dexih-button-edit>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<dexih-button-save-local class=\"mr-1\" (click)=\"export(items)\"></dexih-button-save-local>\n\t\t\t\t\t<dexih-button-delete *ngIf=\"hubCache.canWrite\" class=\"mr-1\" (click)=\"deleteHubVariables(items)\"></dexih-button-delete>\n\t\t\t\t\t<tags-update-button class=\"mr-1\" [objectType]=\"eSharedObjectType.HubVariable\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<dexih-button-new *ngIf=\"hubCache.canWrite\" class=\"mr-1\" [routerLink]=\"['hubVariable-new']\"></dexih-button-new>\n\t\t\t\t</ng-template>\n\t\t</dexih-table>\n\n\t</dexih-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Hub Variables\" path=\"/assets/help/reference/hubVariable.md\"></dexih-help>\n\n</div>\n\n\n","export * from './hubVariable-index/hubVariable-index.component';\nexport * from './hubVariable-edit/hubVariable-edit.component';\n","export * from './listOfValues-edit.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { HubCache, eCacheStatus, ConnectionTables } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest, merge, Subject} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DexihListOfValues, DexihDatalink, eLOVObjectType,\n  DexihColumnBase, eLOVObjectTypeItems, SelectQuery, ListOfValuesItem } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { InputOutputColumns } from '../../hub.lineage.models';\nimport { FormGroup, FormArray } from '@angular/forms';\n\n@Component({\n\n  selector: 'dexih-listOfValues-edit-form',\n  templateUrl: './listOfValues-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class ListOfValuesEditComponent implements OnInit, OnDestroy {\n\n  private listOfValuesKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _sourceChangeSubscription: Subscription;\n  private isLoaded = false;\n\n  private refreshDataSubject: Subject<void> = new Subject<void>();\n\n  private cancelToken = new CancelToken();\n\n  public eLOVObjectType = eLOVObjectType;\n  public connectionTables: ConnectionTables[] = [];\n  public datalinks: DexihDatalink[] = [];\n\n  public tableColumns: DexihColumnBase[];\n  public sourceTypes = eLOVObjectTypeItems.filter( c => c.key > 0);\n\n  columns = [\n    { name: 'key', title: 'Key'},\n    { name: 'name', title: 'Name'},\n    { name: 'description', title: 'Description'},\n];\n  public data: Array<any>;\n\n  constructor(private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.pageTitle = data['pageTitle'];\n        this.action = data['action'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Edit List Of Values');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._sourceChangeSubscription) { this._sourceChangeSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  load() {\n    this.isLoaded = true;\n\n    this.connectionTables = this.hubCache.getConnectionTables();\n    this.datalinks = this.hubCache.hub.dexihDatalinks;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.listOfValuesKey = + this.params['listOfValuesKey'];\n\n      if (!this.listOfValuesKey) {\n        this.hubService.addHubErrorMessage('There was no list of values specified to edit.');\n        // this.errorMessage = 'There was no validation specified to edit.';\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihListOfValues) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let listOfValues = this.hubCache.hub.dexihListOfValues.find(c => c.key === this.listOfValuesKey);\n          if (! listOfValues.selectQuery) {\n            listOfValues.selectQuery = new SelectQuery();\n          }\n          this.formsService.listOfValues(listOfValues);\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let listOfValues = new DexihListOfValues();\n      listOfValues.selectQuery = new SelectQuery();\n      this.formsService.listOfValues(listOfValues);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/listOfValues-new', `/listOfValues-edit/${key}`);\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n\n    this.refreshColumns();\n\n    let currentForm = this.formsService.currentForm;\n\n    // if any source table/datalink changed, refresh the columns.\n    this._sourceChangeSubscription = merge(\n      currentForm.controls.sourceType.valueChanges,\n      currentForm.controls.sourceTableKey.valueChanges,\n      currentForm.controls.sourceDatalinkKey.valueChanges).subscribe(() => {\n        this.refreshColumns();\n    });\n  }\n\n  refreshColumns() {\n    let currentForm = this.formsService.currentForm;\n    let sourceType = <eLOVObjectType> currentForm.controls.sourceType.value;\n\n    switch (sourceType) {\n      case eLOVObjectType.Datalink:\n        let datalinkKey = currentForm.controls.sourceDatalinkKey.value;\n        let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === datalinkKey);\n        if (datalink) {\n          // get the outputs from the last transform in the datalink\n          const ioColumns = new InputOutputColumns();\n          ioColumns.buildInputOutput(this.hubCache, datalink);\n          this.tableColumns = ioColumns.getDatalinkOutputColumns(datalink);\n        } else {\n          if (datalinkKey > 0) {\n            this.hubService.addHubErrorMessage(`The datalink with the key ${datalinkKey} could not be found.`);\n          }\n          this.tableColumns = null;\n        }\n        break;\n      case eLOVObjectType.Table:\n        let tableKey = currentForm.controls.sourceTableKey.value;\n        let table = this.hubCache.hub.dexihTables.find(c => c.key === tableKey);\n        if (table) {\n          this.tableColumns = table.dexihTableColumns;\n        } else {\n          if (tableKey > 0) {\n            this.hubService.addHubErrorMessage(`The table with the key ${tableKey} could not be found.`);\n          }\n          this.tableColumns = null;\n        }\n        break;\n      }\n  }\n\n  refreshData() {\n    let form = this.formsService.currentForm;\n\n    let listOfValues = <DexihListOfValues>form.value;\n\n    this.hubService.previewListOfValues(listOfValues, true, this.cancelToken).then((data) => {\n      this.data = data;\n      this.refreshDataSubject.next();\n    }).catch((reason) => {\n      this.hubService.addHubMessage(reason);\n    });\n  }\n\n  hasChanged() {\n\n  }\n\n  add(index: number) {\n    let currentForm = <FormGroup> this.formsService.currentForm;\n    let item = this.formsService.listOfValuesItem(new ListOfValuesItem());\n    let staticData = <FormArray> currentForm.controls.staticData;\n    staticData.insert(index + 1, item);\n  }\n\n  remove(index: number) {\n    let currentForm = <FormGroup> this.formsService.currentForm;\n    let staticData = <FormArray> currentForm.controls.staticData;\n    staticData.removeAt(index);\n  }\n\n  clear() {\n    let currentForm = <FormGroup> this.formsService.currentForm;\n    let staticData = <FormArray> currentForm.controls.staticData;\n    while(staticData.controls.length > 0) {\n      staticData.removeAt(0);\n    }\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n}\n","<div class=\"container\" *ngIf=\"formsService.currentForm\">\n\t<dexih-widget title=\"Edit List of Values\" iconClass=\"fa fa-lg fa-list-alt\" [showCloseButton]=\"true\" [padding]=\"false\"\n\t\t(close)=\"close()\">\n\t\t<ng-template #header>\n\t\t\t<dexih-invalid-form-details [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\" class=\"mr-1\"></dexih-invalid-form-details>\n\t\t\t<save-button *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\" class=\"mr-1\"></save-button>\n\t\t\t<cancel-button [formsService]=\"formsService\"></cancel-button>\n\t\t</ng-template>\n\n\t\t<form [formGroup]=\"formsService.currentForm\" class=\"m-3\">\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\t\t\t\t\t<form-input label=\"List of Values\" formControlName=\"name\"\n\t\t\t\t\t\tplaceholder=\"Enter the list of values name.\" [autocapitalize]=\"on\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\t[errors]=\"formsService.formErrors['name']\">\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\t\t\t\t<section>\n\t\t\t\t\t<form-textarea label=\"Description\" [showMarkdown]=\"true\" formControlName=\"description\"\n\t\t\t\t\t\tplaceholder=\"Enter the description.\">\n\t\t\t\t\t</form-textarea>\n\t\t\t\t</section>\n\t\t\t\t<section>\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t<form-select label=\"Data Source Type\" formControlName=\"sourceType\" [items]=\"sourceTypes\"\n\t\t\t\t\t\t\t\titemKey=\"key\" itemName=\"name\" iconClass=\"fa fa-database\"\n\t\t\t\t\t\t\t\tnote='Specify the source type for this view' [enableFilter]=\"false\">\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class=\"form-group col-md-6\"\n\t\t\t\t\t\t\t*ngIf=\"formsService.currentForm.value.sourceType == eLOVObjectType.Table\">\n\t\t\t\t\t\t\t<form-select label=\"Source Table\" formControlName=\"sourceTableKey\"\n\t\t\t\t\t\t\t\t[errors]=\"errors?.sourceTableKey\" [items]=\"connectionTables\" parentName=\"name\"\n\t\t\t\t\t\t\t\tchildItems=\"dexihTables\" itemKey=\"key\" itemName=\"logicalName\"\n\t\t\t\t\t\t\t\tnote=\"Select the source table\">\n\t\t\t\t\t\t\t\t<table-edit-button [key]=\"formsService.currentForm.controls.sourceTableKey.value\"></table-edit-button>\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class=\"form-group col-md-6\"\n\t\t\t\t\t\t\t*ngIf=\"formsService.currentForm.value.sourceType == eLOVObjectType.Datalink\">\n\t\t\t\t\t\t\t<form-select label=\"Source Datalink\" formControlName=\"sourceDatalinkKey\"\n\t\t\t\t\t\t\t\t[errors]=\"errors?.sourceDatalinkKey\" [items]=\"datalinks\" itemKey=\"key\" itemName=\"name\"\n\t\t\t\t\t\t\t\tnote='Select the source datalink'>\n\t\t\t\t\t\t\t\t<datalink-edit-button [key]=\"formsService.currentForm.controls.sourceDatalinkKey.value\"></datalink-edit-button>\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-row\" *ngIf=\"tableColumns\">\n\t\t\t\t\t\t<section class=\"form-group col-md-4\">\n\t\t\t\t\t\t\t<form-select label=\"Key Column\" formControlName=\"keyColumn\" [items]=\"tableColumns\"\n\t\t\t\t\t\t\t\titemKey=\"name\" itemName=\"name\" iconClass=\"fa fa-key\" [allowNullSelect]=\"true\" [enableFilter]=\"false\">\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class=\"form-group col-md-4\">\n\t\t\t\t\t\t\t<form-select label=\"Name Column\" formControlName=\"nameColumn\" [items]=\"tableColumns\"\n\t\t\t\t\t\t\t\titemKey=\"name\" itemName=\"name\" iconClass=\"fa fa-circle-o\" [allowNullSelect]=\"true\" [enableFilter]=\"false\">\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class=\"form-group col-md-4\">\n\t\t\t\t\t\t\t<form-select label=\"Description Column\" formControlName=\"descriptionColumn\"\n\t\t\t\t\t\t\t\t[items]=\"tableColumns\" itemKey=\"name\" itemName=\"name\" [allowNullSelect]=\"true\" iconClass=\"fa fa-comment-o\"\n\t\t\t\t\t\t\t\t[enableFilter]=\"false\">\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"form-row\" *ngIf=\"tableColumns\">\n\t\t\t\t\t\t<section class=\"form-group col-md-12\">\n\t\t\t\t\t\t\t<div class=\"d-flex flex-wrap pt-1\">\n\t\t\t\t\t\t\t\t<form-checkbox class=\"input-group-prepend\" label=\"Cache Lookup\" formControlName=\"cache\" [border]=\"true\"></form-checkbox>\n\t\t\t\t\t\t\t\t<form-input type=\"number\" class=\"pl-1\" *ngIf=\"formsService.currentForm.controls.cache.value\" labelLeft=\"Cache Seconds\" placeholder=\"seconds\" title=\"Specify the number of seconds to cache the lookup\" formControlName=\"cacheSeconds\"></form-input>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\n\t\t<dexih-widget-section *ngIf=\"formsService.currentForm.value.sourceType == eLOVObjectType.Static\" title=\"Static Values\"\n\t\t\t[showExpandButton]=\"true\">\n\t\t\t<ng-template #header>\n\t\t\t\t<dexih-button class=\"mr-1\" (click)=\"add(-1)\" iconClass=\"fa fa-plus\">Insert Item</dexih-button>\n\t\t\t\t<dexih-button-delete (click)=\"clear()\" text=\"Clear All\"></dexih-button-delete>\n\t\t\t</ng-template>\n\t\t\n\t\t\t<form *ngFor=\"let itemForm of formsService.currentForm.controls.staticData.controls; let i = index;\"\n\t\t\t\t[formGroup]=\"itemForm\" class=\"flex-fill\">\n\t\t\t\t<div class=\"input-group\">\t\t\n\t\t\t\t\t<div class=\"form-control p-0\">\n\t\t\t\t\t\t<form-input [border]=\"false\" formControlName=\"key\" type=\"text\" placeholder=\"Key Value\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-control p-0\">\n\t\t\t\t\t\t<form-input [border]=\"false\" formControlName=\"name\" type=\"text\" placeholder=\"Item name\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-control p-0\">\n\t\t\t\t\t\t<form-input [border]=\"false\" formControlName=\"key\" type=\"text\" placeholder=\"Description\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"input-group-append flex-shrink-1 ml-1 \">\n\t\t\t\t\t\t<button class=\"btn btn-light\" type=\"button\" (click)=\"add(i)\"  value=\"Add\">\n\t\t\t\t\t\t\t<i class=\"fa fa-plus-square-o\"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button class=\"btn btn-light\" type=\"button\" (click)=\"remove(i)\"  value=\"Remove\">\n\t\t\t\t\t\t\t<i class=\"fa fa-minus-square-o\"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\n\t\t</dexih-widget-section>\n\t\t\n\t\t<ng-template [ngIf]=\"formsService.currentForm.value.sourceType !== eLOVObjectType.Static\">\n\t\t\t<dexih-widget-section title=\"Query Configuration\" [showExpandButton]=\"true\">\n\t\t\t\t<query-builder [selectQuery]=\"formsService.currentForm.controls.selectQuery.value\" [columns]=\"tableColumns\"\n\t\t\t\t\t[inputColumns]=\"inputColumns\" [parameters]=\"null\" (hasChanged)=\"hasChanged()\" [refreshEvent]=\"refreshDataSubject.asObservable()\" (onRefreshData)=\"refreshData()\"></query-builder>\n\t\t\t</dexih-widget-section>\n\t\t\n\t\t\t<div *ngIf=\"!data\" class=\"m-3\">\n\t\t\t\t<dexih-button-refresh (click)=\"refreshData()\" text=\"Reload\" [autoCompact]=\"false\"></dexih-button-refresh>\n\t\t\t</div>\n\t\t\n\t\t\t<dexih-table *ngIf=\"data\" [enableMultiSelect]=\"false\" [enableSaveCsv]=\"true\" [columns]=\"columns\" [data]=\"data\">\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<dexih-button-refresh class=\"mr-1\" (click)=\"refreshData()\" text=\"Reload\"></dexih-button-refresh>\n\t\t\t\t</ng-template>\n\t\t\t</dexih-table>\n\t\t</ng-template>\n\t</dexih-widget>\n\n</div>","export * from './listOfValues-index.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Observable, Subscription, BehaviorSubject, combineLatest} from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { DexihListOfValues, eSharedObjectType, eLOVObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'listOfValues',\n  templateUrl: './listOfValues-index.component.html',\n  styles: []\n})\nexport class ListOfValuesIndexComponent implements OnInit, OnDestroy {\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    listOfValues: Array<DexihListOfValues>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', format: '', tags: 'tags'},\n        { name: 'sourceType', title: 'Source Type', format: 'Enum', enum: eLOVObjectType},\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar'},\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        this._subscription = combineLatest(\n            this.hubService.getHubCacheObservable()\n        ).subscribe(result => {\n          this.hubCache = result[0];\n          this.update();\n        });\n    } catch (e) {\n        this.hubService.addHubClientErrorMessage(e, 'Hub List of Values Index');\n      }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    delete(lov: Array<DexihListOfValues>) {\n        this.hubService.deleteListOfValues(lov);\n    }\n\n    update() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let listOfValues = this.hubCache.hub.dexihListOfValues.filter(c => c.isValid).map(c => {\n                return {\n                    key: c.key,\n                    name: c.name,\n                    description: c.description,\n                    updateDate: c.updateDate,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.ListOfValues, c.key)\n                }\n            });\n            this._tableData.next(listOfValues);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(lov: DexihListOfValues) {\n        this.router.navigate(['listOfValues-edit', lov.key], { relativeTo: this.route});\n    }\n\n    export(lov: Array<DexihListOfValues>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(cache.hub.hubKey, '');\n        hub.dexihListOfValues = lov;\n        lov.forEach(lovItem => {\n            cache.getListOfValuesCache(lovItem, hub);\n        });\n        let filename = 'list_of_values.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n\n    watchChanges() {\n      // watch the current validation in case it is changed in another session.\n      this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n          if (hubCacheChange.changeClass === eSharedObjectType.ListOfValues || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n            this.update();\n          }\n      });\n  }\n}\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"List Of Values\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-list-alt\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t<dexih-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t<dexih-button-edit class=\"mr-1\" [routerLink]=\"['listOfValues-edit', item.key]\" queryParamsHandling preserveFragment></dexih-button-edit>\n\t\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.ListOfValues'></dependent-items-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<dexih-button-save-local class=\"mr-1\" (click)=\"export(items)\"></dexih-button-save-local>\n\t\t\t\t\t<dexih-button-delete *ngIf=\"hubCache.canWrite\" class=\"mr-1\" (click)=\"delete(items)\"></dexih-button-delete>\n\t\t\t\t\t<tags-update-button class=\"mr-1\" [objectType]=\"eSharedObjectType.ListOfValues\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<dexih-button-new *ngIf=\"hubCache.canWrite\" class=\"mr-1\" [routerLink]=\"['listOfValues-new']\"></dexih-button-new>\n\t\t\t\t</ng-template>\n\t\t</dexih-table>\n\t</dexih-widget>\n</div>\n\n\n","import { Component, OnInit, OnDestroy, Input, ViewChild } from '@angular/core';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../../hub.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { DexihMessageComponent } from  '../../../shared/ui/dexihMessage/dexih-message.component';\nimport { UserAuthorization } from '../../../+admin/admin.models';\nimport { ePermission, ePermissionItems } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'users',\n  templateUrl: './manage-users-index.component.html',\n  styles: []\n})\nexport class ManageUsersIndexComponent implements OnInit, OnDestroy {\n  @ViewChild('DexihMessage', { static: true }) public dexihMessage: DexihMessageComponent;\n\n    columns = [\n        { name: 'userName', title: 'User Name', format: ''},\n        { name: 'firstName', title: 'First Name', format: ''},\n        { name: 'lastName', title: 'Last Name', format: ''},\n        { name: 'permission', title: 'Permission', enum: ePermission, format: 'Enum'},\n        { name: 'receiveAlerts', title: 'Receives Alert Emails', format: 'Boolean'}\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    ePermission = ePermission;\n    ePermissionItems = ePermissionItems;\n    permission = ePermission.PublishReader;\n    emails: string[] = [];\n    sendInvites = true;\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        this.refreshUsers();\n    }\n\n    ngOnDestroy() {\n    }\n\n    refreshUsers() {\n        this.hubService.getHubUsers().then(result => {\n            this._tableData.next(result);\n        });\n    }\n\n    setPermission(permission: ePermission, users: Array<UserAuthorization>) {\n        const userNames = users.map(c => c.userName);\n\n        this.authService.confirmDialog('Confirm Permission Change',\n            `This action will change the selected user(s) hub permission to ${ePermission[this.permission]}.  Proceed?`).then(confirm => {\n                if (confirm) {\n                    this.hubService.setUserPermissions(userNames, permission, false).then(result => {\n                        this.dexihMessage.addSuccessMessage('The specified user(s) permission have been updated.');\n                        this.refreshUsers();\n                    });\n                }\n            });\n    }\n\n    setUserAlert(alertEmail: boolean, users: Array<UserAuthorization>) {\n        const userIds = users.map(c => c.id);\n\n        this.hubService.setUserAlerts(userIds, alertEmail, false).then(result => {\n            this.dexihMessage.addSuccessMessage('The specified user(s) alert email status have been updated.');\n            this.refreshUsers();\n        });\n    }\n\n    deleteUsers(users: Array<UserAuthorization>) {\n        const emails = users.map(c => c.userName);\n\n        this.authService.confirmDialog('Confirm Delete Users',\n        `This action will delete the selected user(s) from using this hub.  Proceed?`).then(confirm => {\n            if (confirm) {\n                this.hubService.removeUsers(emails).then(result => {\n                    this.dexihMessage.addSuccessMessage('The specified users have been removed from the hub.');\n                    this.refreshUsers();\n                });\n            }\n        });\n    }\n\n    addUsers() {\n        if (this.emails.length > 0 && this.permission) {\n            this.authService.confirmDialog('Add Users',\n            // tslint:disable-next-line:max-line-length\n            `This action will added users with the specified emails to this hub with permission ${ePermission[this.permission]}.  Proceed?`).then(confirm => {\n                if (confirm) {\n                    this.hubService.setUserPermissions(this.emails, this.permission, this.sendInvites).then(result => {\n                        this.emails = [];\n                        this.dexihMessage.addSuccessMessage('The specified users have been added to the hub.');\n                        this.refreshUsers();\n                    });\n                }\n            });\n        }\n    }\n}\n","<dexih-message class=\"p-3\" #DexihMessage></dexih-message>\n\n<div class=\"container-fluid\">\n\t<dexih-widget-vertical>\n\t<dexih-widget title=\"Invite Users\" iconClass=\"fa fa-lg fa-fw fa-birthday-cake\" [padding]=\"true\">\n\t\t\n\t\t<ng-template #subHeader>\n\t\t\t<dexih-button-save [disabled]=\"emails.length == 0\" (click)=\"addUsers()\" text=\"Add User(s)\"></dexih-button-save>\n\t\t</ng-template>\n\n\t\t<form >\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\t\t\t\t\t<form-select label=\"Permission\" [(ngModel)]=\"permission\" name=\"permission\" [items]=\"ePermissionItems\" itemKey=\"key\" itemName=\"name\" note='Permission level to grant to emails' [enableFilter]=\"false\">\n\t\t\t\t\t</form-select>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-tags label=\"Email Addresses / User names\" [(ngModel)]=\"emails\" name=\"emails\" note=\"Provide a list of user names or email addresses of users to join the hub.\">\n\t\t\t\t\t</form-tags>\n\t\t\t\t</section>\n\t\t\t\t<section>\n\t\t\t\t\t<form-checkbox label=\"Send invites\" [(ngModel)]=\"sendInvites\" name=\"sendInvites\" note=\"Emails which are not registered to use the integration hub will be sent an invite to join.\">\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\t</dexih-widget>\n\n\t<dexih-widget title=\"Current Users\" iconClass=\"fa fa-lg fa-fw fa-group\">\n\t\t<dexih-table [enableMultiSelect]=\"true\" [columns]=\"columns\"\n\t\t [dataObservable]=\"tableData\">\n\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t<dexih-button-delete class=\"mr-1\" (click)=\"deleteUsers(items)\"></dexih-button-delete>\n\t\t\t\t<dexih-button-dropdown buttonClass=\"btn-primary\" iconClass=\"fa fa-lock\" text=\"Set Permission\">\n\t\t\t\t\t<a *ngFor=\"let permission of ePermissionItems\" class=\"dropdown-item\" (click)=\"setPermission(permission.key, items)\">{{permission.name}}</a>\n\t\t\t\t</dexih-button-dropdown>\n\t\t\t\t<dexih-button-dropdown buttonClass=\"btn-primary\" iconClass=\"fa fa-bell\" text=\"Set User Alert\" class=\"ml-1\">\n\t\t\t\t\t<a class=\"dropdown-item\" (click)=\"setUserAlert(true, items)\">Receive alert emails</a>\n\t\t\t\t\t<a class=\"dropdown-item\" (click)=\"setUserAlert(false, items)\">Do not receive alert emails.</a>\n\t\t\t\t</dexih-button-dropdown>\n\t\t\t</ng-template>\n\t\t</dexih-table>\n\n\t</dexih-widget>\n\t</dexih-widget-vertical>\n</div>","export * from './remoteAgent-index/remoteAgent-index.component';\nexport * from './remoteAgent-edit/remoteAgent-edit.component';\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { DexihRemoteAgentHub, DexihRemoteAgent } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'remote-agents',\n    templateUrl: './remoteAgent-edit.component.html',\n    providers: [HubFormsService]\n})\nexport class RemoteAgentEditComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n\n    private remoteAgentKey: number;\n    private remoteAgentHubKey: number;\n\n    hubCache: HubCache;\n    name: string;\n\n    remoteAgents: DexihRemoteAgent[];\n    remoteAgentHub: DexihRemoteAgentHub;\n\n    public isNew = false;\n\n    ipAddress: string;\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        public formsService: HubFormsService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n                this.authService.getRemoteAgentsObservable(),\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n                this.remoteAgents = result[3];\n\n                if (!this.hubCache.isLoaded() || !this.remoteAgents) { return; }\n\n                this.remoteAgentKey = +params['remoteAgentKey'];\n                this.remoteAgentHubKey = +params['remoteAgentHubKey'];\n\n                if (!this.remoteAgentKey) {\n                    this.hubService.addHubErrorMessage('There was no remote agent specified to edit.');\n                    // this.errorMessage = 'There was no validation specified to edit.';\n                } else {\n                    let remoteAgent = this.remoteAgents.find(c => c.remoteAgentKey === this.remoteAgentKey);\n                    let activeAgent = remoteAgent['activeAgents'] &&\n                        remoteAgent['activeAgents'].length > 0 ? remoteAgent['activeAgents'][0] : null;\n                    this.name = activeAgent ? activeAgent.name : '';\n                    this.ipAddress = activeAgent ? activeAgent.ipAddress : null;\n                    this.remoteAgentHub = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === this.remoteAgentHubKey);\n\n                    if (!this.remoteAgentHub) {\n                        this.remoteAgentHub = {\n                            hubKey: this.hubCache.hub.hubKey,\n                            remoteAgentHubKey: 0,\n                            remoteAgentKey: remoteAgent.remoteAgentKey,\n                            isAuthorized: true,\n                            isValid: true,\n                            createDate: null,\n                            isDefault: false,\n                            updateDate: null\n                        }\n                        this.remoteAgentHub['allowExternalConnect'] = true;\n                        this.remoteAgentHub['isSelected'] = false;\n                        this.isNew = true;\n                    }\n\n                    this.formsService.remoteAgent(this.remoteAgentHub);\n\n                    if (this.remoteAgentHub.remoteAgentHubKey === 0) {\n                        this.formsService.hasChanged = true;\n                    }\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Remote Agent Edit');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    addCurrentIp() {\n        if (this.ipAddress) {\n            let form = this.formsService.currentForm;\n            let ipAddressesControl = form.controls.ipAddresses;\n            let ipAddresses = <string[]> ipAddressesControl.value;\n\n            if (ipAddresses.findIndex(c => c === this.ipAddress) < 0) {\n                ipAddresses.push(this.ipAddress);\n                ipAddressesControl.setValue(ipAddresses);\n            }\n        }\n    }\n\n    save() {\n        let form = this.formsService.currentForm;\n        let remoteAgentHub = form.value;\n        this.hubService.saveRemoteAgent(remoteAgentHub).then((success) => {\n            if (success) {\n                this.hubService.addHubSuccessMessage('The remote agent updated successfully.');\n                this.authService.navigateUp();\n            }\n        });\n    }\n}\n","<dexih-message #DexihMessage></dexih-message>\n\n<div class=\"container\">\n    <dexih-widget \n\t\ttitle=\"Edit Hub Remote Agent\" \niconClass=\"fa fa-lg fa-fw fa-database\" \n        [padding]=\"true\"\n        [showCloseButton]=\"true\"\n        (close)=\"close()\"\n>\n        <ng-template #header>\n            <dexih-button-edit [routerLink]=\"['/hubs', 'index', 'agents', 'edit', remoteAgentKey]\"></dexih-button-edit>\n            <dexih-button-save [disabled]=\"!formsService.hasChanged\" (click)=\"save()\" class=\"pl-1\"></dexih-button-save>\n            <cancel-button [formsService]=\"formsService\" class=\"pl-1\"></cancel-button>\n        </ng-template>\n\n<ng-template #header>\n\n</ng-template>\n\n        <div *ngIf=\"isNew\" class=\"alert alert-primary\">\n            Creating a new hub -> remote agent authorization\n        </div>\n\n        <form *ngIf=\"formsService.currentForm\"  [formGroup]=\"formsService.currentForm\">\n            <fieldset>\n                <section >\n                    <form-input label=\"Agent name\" [disabled]=\"true\" note=\"This can be changed in the agents appsettings.json config file.\" [(ngModel)]=\"name\" [ngModelOptions]=\"{standalone: true}\" iconClass=\"fa fa-comment\"></form-input>\n                </section>\n\n                <section>\n\t\t\t\t\t<form-checkbox label=\"Is default agent for this Hub\" formControlName=\"isDefault\" >\n\t\t\t\t\t</form-checkbox>\n                </section>\n\n                <section>\n\t\t\t\t\t<form-checkbox label=\"Is Authorized for this Hub.\" formControlName=\"isAuthorized\" >\n\t\t\t\t\t</form-checkbox>\n                </section>\n            </fieldset>\n        </form>\n    </dexih-widget>\n</div>\n","<div class=\"container-fluid\">\n\t<dexih-widget title=\"Hub Remote Agents\"\n\t\ticonClass=\"fa fa-lg fa-fw fa-wifi\"\n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t\t>\n\t\t<ng-template #header>\n\t\t\t<dexih-button-dropdown buttonClass=\"btn btn-sm btn-outline-secondary\" iconClass=\"fa fa-filter\" [text]=\"statusFilter\" title=\"Filter by a status\" [pullRight]=\"true\">\n\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"statusFilter=='All'\" routerLink='.' [queryParams]=\"{statusFilter: 'All'}\" title=\"All Items\">All</a>\n\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"statusFilter=='Ready'\" routerLink='.' [queryParams]=\"{statusFilter: 'Ready'}\" title=\"Ready\">Ready</a>\n\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"statusFilter=='Offline'\" routerLink='.' [queryParams]=\"{statusFilter: 'Offline'}\" title=\"Offline Items\">Offline</a>\n\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"statusFilter=='Unauthorized'\" routerLink='.' [queryParams]=\"{statusFilter: 'Unauthorized'}\" title=\"Unauthorized Items\">Unauthorized</a>\n\t\t\t</dexih-button-dropdown>\n</ng-template>\n\n\t\t<dexih-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<dexih-button-delete class=\"mr-1\" (click)=\"deleteSelected(items)\" title=\"Delete selected remote agents\"></dexih-button-delete>\n\t\t\t\t\t<dexih-button class=\"mr-1\" iconClass=\"fa fa-check\" buttonClass=\"btn-primary\" (click)=\"authorize(items)\" title=\"Authorize the selected agents for this hub\">Authorize</dexih-button>\n\t\t\t\t\t<dexih-button class=\"mr-1\" iconClass=\"fa fa-times\" buttonClass=\"btn-danger\" (click)=\"deAuthorize(items)\" title=\"De-Authorize the selected agents\">De-Authorize</dexih-button>\n\t\t\t\t</ng-template>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-remoteItem=\"item\">\n\t\t\t\t\t<dexih-button-edit [routerLink]=\"['agent-edit', remoteItem.remoteAgentKey, remoteItem.remoteAgentHubKey]\" class=\"mr-1\" ></dexih-button-edit>\n\t\t\t\t</ng-template>\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<dexih-button-download [routerLink]=\"['/hubs/index/agents/download']\" iconClass=\"fa fa-download\" text=\"Download Agent\" class=\"mr-1\" ></dexih-button-download>\n\t\t\t\t</ng-template>\n\t\t</dexih-table>\n\t</dexih-widget>\n</div>","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { DexihRemoteAgent, DexihRemoteAgentHub, eSharedObjectType, eDataPrivacyStatus } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'remoteagents',\n    templateUrl: './remoteAgent-index.component.html',\n    styles: []\n})\nexport class RemoteAgentIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    remoteAgents: Array<DexihRemoteAgent>;\n    hubCache: HubCache;\n\n    statusFilter: string;\n\n    columns = [\n        { name: 'name', title: 'Name', format: '' },\n        { name: 'connected', title: 'Connected', format: 'Boolean' },\n        { name: 'isAuthorized', title: 'Authorized?', format: 'Boolean' },\n        { name: 'user', title: 'User', format: ''},\n        { name: 'dataPrivacyStatus', title: 'Data Privacy', format: 'Enum', enum: eDataPrivacyStatus },\n        { name: 'isEncrypted', title: 'Encrypted?', format: 'Boolean' },\n        { name: 'ipAddress', title: 'Current IP Address', format: '' },\n        { name: 'remoteAgentId', title: 'Id', format: '' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n        { name: 'lastLoginDateTime', title: 'Last Login', format: 'Calendar' },\n        { name: 'lastLoginIpAddress', title: 'Last IP Address', format: '' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(private hubService: HubService, private authService: AuthService, private router: Router, private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n                this.authService.getRemoteAgentsObservable(),\n                this.hubService.getRemoteAgentObservable() // this is included to ensure refresh when active agent changes.\n            ).subscribe(result => {\n                let queryParams = result[0];\n                this.hubCache = result[1];\n                this.remoteAgents = result[2];\n\n                if (!this.hubCache.isLoaded()) { return; }\n\n                this.statusFilter = queryParams['statusFilter'];\n                if (!this.statusFilter) { this.statusFilter = 'All'; }\n\n                this.updateRemoteAgents();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Remote Agent index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    private updateRemoteAgents() {\n        if (!(this.hubCache && this.hubCache.hub)) { return; }\n\n        let data: any[] = this.hubCache.hub.dexihRemoteAgentHubs.map(a => {\n            let remoteAgent = this.remoteAgents ? this.remoteAgents.find(c => c.remoteAgentKey === a.remoteAgentKey) : null;\n            let activeAgent = remoteAgent && remoteAgent['activeAgents'] && remoteAgent['activeAgents'].length > 0\n                ? remoteAgent['activeAgents'][0] : null;\n\n            return {\n                remoteAgentHubKey: a.remoteAgentHubKey,\n                connected: activeAgent !== null,\n                isAuthorized: a.isAuthorized,\n                name: activeAgent ? activeAgent.name : ( remoteAgent ? remoteAgent.name : 'Unknown') ,\n                user: activeAgent ? activeAgent.user : '',\n                dataPrivacyStatus: activeAgent ? activeAgent.dataPrivacyStatus : '',\n                isEncrypted: activeAgent ? activeAgent.isEncrypted : '',\n                ipAddress: activeAgent ? activeAgent.ipAddress : '',\n                remoteAgentKey: a.remoteAgentKey,\n                updateDate: a.updateDate,\n                lastLoginDateTime: remoteAgent ? remoteAgent.lastLoginDateTime : '',\n                lastLoginIpAddress: remoteAgent ? remoteAgent.lastLoginIpAddress : '',\n                remoteAgentId: remoteAgent ? remoteAgent.remoteAgentId : ''\n            };\n        });\n\n        if (this.remoteAgents) {\n            this.remoteAgents.forEach(a => {\n                let activeAgent = a['activeAgents'] && a['activeAgents'].length > 0 ? a['activeAgents'][0] : null;\n\n                if (activeAgent && data.findIndex(d => d.remoteAgentKey === a.remoteAgentKey) < 0) {\n                    data.push({\n                        remoteAgentHubKey: 0,\n                        connected: true,\n                        isAuthorized: false,\n                        name: activeAgent.name,\n                        user:  activeAgent.user,\n                        dataPrivacyStatus: activeAgent.dataPrivacyStatus,\n                        isEncrypted: activeAgent.isEncrypted,\n                        ipAddress: activeAgent.ipAddress,\n                        remoteAgentKey: a.remoteAgentKey,\n                        remoteAgentId: a.remoteAgentId,\n                        updateDate: '',\n                        });\n                }\n            });\n        }\n        this._tableData.next(data);\n    }\n\n    watchChanges() {\n        // watch the current remote hubs\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.RemoteAgent) {\n                this.updateRemoteAgents();\n            }\n        });\n    }\n\n    async authorize(remoteAgents: Array<any>) {\n        for await (const remoteAgent of remoteAgents) {\n            if (!remoteAgent.isAuthorized) {\n                let agentHub: DexihRemoteAgentHub;\n                if (remoteAgent.remoteAgentHubKey) {\n                    agentHub = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === remoteAgent.remoteAgentHubKey);\n                    agentHub.isAuthorized = true;\n                } else {\n                    agentHub = {\n                        hubKey: this.hubCache.hub.hubKey,\n                        remoteAgentHubKey: 0,\n                        remoteAgentKey: remoteAgent.remoteAgentKey,\n                        isAuthorized: true,\n                        isValid: true,\n                        createDate: null,\n                        isDefault: false,\n                        updateDate: null\n                    }\n                    agentHub['allowExternalConnect'] = true;\n                    agentHub['isSelected'] = false;\n                }\n                await this.hubService.saveRemoteAgent(agentHub);\n            }\n        };\n    }\n\n    deAuthorize(remoteAgents: Array<DexihRemoteAgentHub>) {\n        remoteAgents.forEach(remoteAgent => {\n            if (remoteAgent.isAuthorized) {\n                if (remoteAgent.remoteAgentHubKey) {\n                    let agent = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === remoteAgent.remoteAgentHubKey);\n                    if (agent) {\n                        agent.isAuthorized = false;\n                        this.hubService.saveRemoteAgent(agent);\n                    }\n                }\n            }\n        });\n    }\n\n    deleteSelected(remoteAgents: Array<DexihRemoteAgentHub>) {\n        remoteAgents.forEach(remoteAgent => {\n            if (remoteAgent.remoteAgentHubKey) {\n                let agent = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === remoteAgent.remoteAgentHubKey);\n                if (agent) {\n                    agent.isAuthorized = false;\n                    this.hubService.deleteRemoteAgent(agent);\n                }\n            }\n        });\n    }\n\n    edit(remoteAgent: DexihRemoteAgentHub) {\n        this.router.navigate(['agent-edit', remoteAgent.remoteAgentKey, remoteAgent.remoteAgentHubKey], { relativeTo: this.route });\n    }\n}\n","export * from './results-index';\nexport * from './results-view';\n","export * from './results-index.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { TransformWriterResult, eConnectionPurpose } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'results-index',\n    templateUrl: './results-index.component.html',\n    styles: []\n})\nexport class ResultsIndexComponent implements OnInit, OnDestroy {\n    hubCache: HubCache;\n\n    private _subscription: Subscription;\n    private _transformWriterResultChangeSubscription: Subscription;\n\n    public hubPath;\n    public rows = 20;\n    private datalinkStatus: Map<number, TransformWriterResult>;\n\n    private cancelToken = new CancelToken();\n\n    showPage = false;\n    showPageMessage = 'Loading...';\n\n    columns = [\n        { name: 'auditKey', title: '#', format: '' },\n        { name: 'auditType', title: 'Type', format: '' },\n        { name: 'referenceName', title: 'Name', format: '' },\n        { name: 'rowsTotal', title: 'Rows Total', format: '' },\n        { name: 'startTime', title: 'Start Date', format: 'Calendar' },\n        { name: 'startTime', title: 'Time', format: 'Time' },\n        { name: 'endTime', title: 'Finished At', format: 'Time' },\n        { name: 'message', title: 'Message', format: '' },\n    ];\n\n    auditTypes = [ 'Datalink', 'Datajob', 'DatalinkTest' ];\n\n    private _tableData = new BehaviorSubject<Array<TransformWriterResult>>(null);\n    tableData: Observable<Array<TransformWriterResult>> = this._tableData.asObservable();\n\n    datalinks: Array<number> = [];\n    datajobs: Array<number> = [];\n    datalinkTests: Array<number> = [];\n\n    auditType: string = null;\n\n    constructor(private hubService: HubService, private router: Router, private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n                this.hubService.getRemoteAgentObservable()\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                let queryParams = result[2];\n                this.hubCache = result[3];\n                let remoteAgent = result[4];\n\n                this.showPage = false;\n                this.showPageMessage = 'Waiting for an active remote agent...';\n\n                if (this.hubCache.isLoaded() && remoteAgent) {\n                    this.hubPath = this.hubCache.getHubUrl();\n\n                    let datalinkKeysString = queryParams['datalinkKeys'];\n                    let datajobKeysString = queryParams['datajobKeys'];\n                    let datalinkTestsKeysString = queryParams['datalinkTestKeys'];\n\n                    if (datalinkKeysString) {\n                        this.datalinks = (datalinkKeysString + '').split(',').map(c => +c);\n                        this.auditType = 'Datalink';\n                    }\n                    if (datajobKeysString) {\n                        this.datajobs = (datajobKeysString + '').split(',').map(c => +c);\n                        this.auditType = 'Datajob';\n                    }\n                    if (datalinkTestsKeysString) {\n                        this.datalinkTests = (datalinkTestsKeysString + '').split(',').map(c => +c);\n                        this.auditType = 'DatalinkTest';\n                    }\n\n                    this.refresh();\n\n                    this.showPage = true;\n                    this.showPageMessage = '';\n                }\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Results Index');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._transformWriterResultChangeSubscription) { this._transformWriterResultChangeSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    showResult(result: TransformWriterResult) {\n        this.router.navigate(['result-view', result.auditConnectionKey, result.auditKey], { relativeTo: this.route })\n    }\n\n    refresh() {\n        let data = [];\n\n        let keys: number[];\n        let connectionKeys: number[] = [];\n\n        switch (this.auditType) {\n            case 'Datalink':\n                keys = this.datalinks;\n                connectionKeys = this.datalinks.map(c => this.hubCache.hub.dexihDatalinks.find(d => d.key === c).auditConnectionKey);\n                break;\n            case 'Datajob':\n                keys = this.datajobs;\n                connectionKeys = this.datajobs.map(c => this.hubCache.hub.dexihDatajobs.find(d => d.key === c).auditConnectionKey);\n                break;\n            case 'DatalinkTest':\n                keys = this.datalinkTests;\n                connectionKeys = this.datalinkTests.map(c => this.hubCache.hub.dexihDatalinkTests\n                    .find(d => d.key === c).auditConnectionKey);\n                break;\n            default:\n                keys = null;\n                break;\n        }\n\n        let uniqueKeys = connectionKeys.filter(function(item, i, ar) { return ar.indexOf(item) === i; });\n\n        if (uniqueKeys.length === 0) {\n            uniqueKeys = this.hubCache.hub.dexihConnections.filter(c => c.purpose === eConnectionPurpose.Managed).map(c => c.key);\n        }\n\n        this.hubService.getAuditResults(this.auditType, uniqueKeys, keys, true, this.rows, this.cancelToken)\n        .then(results => {\n            this._tableData.next(results);\n            this.watchChanges();\n            return;\n        });\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        if (this._transformWriterResultChangeSubscription) { this._transformWriterResultChangeSubscription.unsubscribe(); }\n        this._transformWriterResultChangeSubscription =\n            this.hubService.getTransformWriterResultChangeObservable().subscribe(writerResult => {\n                let results: TransformWriterResult[] = this._tableData.value;\n\n                if (this.datalinks && this.datalinks.findIndex(c => c === writerResult.referenceKey) >= 0) {\n                    let existingResult = results.find(c => c.auditKey === writerResult.auditKey);\n                    if (existingResult) {\n                        Object.assign(existingResult, writerResult);\n                        this._tableData.next(results);\n                    } else {\n                        this._tableData.next([writerResult].concat(results));\n                    }\n                }\n                if (this.datajobs && this.datajobs.findIndex(c => c === writerResult.referenceKey) >= 0) {\n                    let existingResult = results.find(c => c.auditKey === writerResult.auditKey);\n                    if (existingResult) {\n                        Object.assign(existingResult, writerResult);\n                        this._tableData.next(results);\n                    } else {\n                        this._tableData.next([writerResult].concat(results));\n                    }\n                }\n\n                if (this.datalinkTests && this.datalinkTests.findIndex(c => c === writerResult.referenceKey) >= 0) {\n                    let existingResult = results.find(c => c.auditKey === writerResult.auditKey);\n                    if (existingResult) {\n                        Object.assign(existingResult, writerResult);\n                        this._tableData.next(results);\n                    } else {\n                        this._tableData.next([writerResult].concat(results));\n                    }\n                }\n        });\n    }\n}\n\n\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"Execution Results\" \niconClass=\"fa fa-lg fa-fw fa-exchange\" \n>\n\t\t<dexih-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t[enableSaveCsv]=\"true\" \n\t\t\t(rowClick)=\"showResult($event)\"\n\t\t\t>\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<div class=\"d-flex flex-wrap\">\n\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t<dexih-button-refresh class=\"input-group-prepend\" (click)=\"refresh()\" text=\"Reload\"></dexih-button-refresh>\n\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" placeholder=\"Maximum rows...\"\n\t\t\t\t\t\t\t\ttitle=\"Specify the maximum rows to return\" [(ngModel)]=\"rows\" style=\"width: 100%; max-width: 100px\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t\t<div class=\"flex-fill ml-1\">\n\t\t\t\t\t\t\t<form-select labelLeft=\"Type\" [(ngModel)]=\"auditType\" [border]=\"false\" class=\"form-control p-0\"\n\t\t\t\t\t\t\t\t[items]=\"auditTypes\" [enableTextEntry]=\"false\" [allowNullSelect]=\"true\" selectNullMessage=\"All types\">\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #tableHeader>\n\t\t\t\t\t<div class=\"d-flex flex-wrap pt-1\" *ngIf=\"auditType === 'Datalink'\">\n\t\t\t\t\t\t<form-tags-dropdown labelLeft=\"Datalinks\" [(ngModel)]=\"datalinks\" [items]=\"hubCache.hub.dexihDatalinks\"\n\t\t\t\t\t\t\titemKey=\"key\" itemName=\"name\" [enableAddAll]=\"true\">\n\t\t\t\t\t\t</form-tags-dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"d-flex flex-wrap pt-1\" *ngIf=\"auditType === 'Datajob'\">\n\t\t\t\t\t\t<form-tags-dropdown labelLeft=\"Datajobs\" [(ngModel)]=\"datajobs\" [items]=\"hubCache.hub.dexihDatajobs\"\n\t\t\t\t\t\t\titemKey=\"key\" itemName=\"name\" [enableAddAll]=\"true\">\n\t\t\t\t\t\t</form-tags-dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"d-flex flex-wrap pt-1\" *ngIf=\"auditType === 'DatalinkTest'\">\n\t\t\t\t\t\t<form-tags-dropdown labelLeft=\"DatalinkTests\" [(ngModel)]=\"datalinkTests\"\n\t\t\t\t\t\t\t[items]=\"hubCache.hub.dexihDatalinkTests\" itemKey=\"key\" itemName=\"name\" [enableAddAll]=\"true\">\n\t\t\t\t\t\t</form-tags-dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-result=\"item\">\n\t\t\t\t\t<dexih-button-edit class=\"mr-1\" [routerLink]=\"[hubPath, 'datalink-edit', 'edit', result.referenceKey]\" text='Edit Datalink'></dexih-button-edit>\n\t\t\t\t\t<dexih-button-view [routerLink]=\"['result-view', result.auditConnectionKey, result.auditKey]\" queryParamsHandling=\"merge\"></dexih-button-view>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-result=\"item\">\n\t\t\t\t\t<datalink-status [writerResult]=\"result\"></datalink-status>\n\t\t\t\t</ng-template>\n\n\t\t</dexih-table>\n    </dexih-widget>\n</div>\n\n\n","export * from './results-view.component';","import { Component, Input, OnInit, OnDestroy } from '@angular/core';\nimport { PreviewResults, HubCache } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { Subscription, Subject} from 'rxjs';\nimport { PromiseWithCancel, CancelToken } from '../../../+auth/auth.models';\nimport { TransformWriterResult, DexihDatalink, DexihTable, SelectQuery, eDeltaType, Filter, eCompare,\n    eAndOr, eTypeCode, DownloadObject, eSourceType, eDownloadFormat, DexihDatalinkColumn,\n    TableColumn, eDataObjectType, DexihTableColumn } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'preview-results',\n    templateUrl: './preview-results.component.html'\n})\n\nexport class PreviewResultsComponent implements OnInit, OnDestroy {\n    @Input() auditResult: TransformWriterResult;\n\n    _hubCacheSubscription: Subscription;\n\n    private cache: HubCache;\n\n    public targetTable: DexihTable;\n    public columns: Array<any>;\n    public data: Array<any>;\n    public selectQuery = new SelectQuery();\n\n    private refreshDataSubject: Subject<void> = new Subject<void>();\n\n    private runningQuery: PromiseWithCancel<PreviewResults>;\n    private cancelToken = new CancelToken();\n\n    constructor(\n        private hubService: HubService\n    ) {\n    }\n\n    ngOnInit() {\n        this._hubCacheSubscription = this.hubService.getHubCacheObservable().subscribe(cache => {\n            this.cache = cache;\n\n            switch (this.auditResult.auditType) {\n                case 'Table':\n                    this.targetTable = this.cache.getTable(this.auditResult.referenceKey);\n                    this.refresh();\n                    break;\n                case 'Datalink':\n                case 'DatalinkStep':\n                    let datalink = this.cache.hub.dexihDatalinks.find(c => c.key === this.auditResult.referenceKey);\n\n                    if (!datalink) {\n                        this.hubService.addHubErrorMessage(`The datalink with the key ${this.auditResult.referenceKey} cannot be found.`)\n                        return;\n                    }\n\n                    if (datalink.dexihDatalinkTargets.length >= 1) {\n                        this.targetTable = this.cache.getTable(datalink.dexihDatalinkTargets[0].tableKey);\n                    } else {\n                        this.hubService.addHubErrorMessage(`There is no target table for this datalink.`)\n                        return;\n                    }\n                    this.refresh();\n                    break;\n                case 'DatalinkTestStep':\n                    let testStep = this.cache.getDatalinkTestStep(this.auditResult.referenceKey);\n\n                    if (!testStep) {\n                        this.hubService.addHubErrorMessage(`The test step with the key ${this.auditResult.referenceKey} cannot be found.`)\n                        return;\n                    }\n\n                    let testDatalink = this.cache.hub.dexihDatalinks.find(c => c.key === testStep.datalinkKey);\n\n                    if (testDatalink.dexihDatalinkTargets.length >= 1) {\n                        let table = this.cache.getTable(testDatalink.dexihDatalinkTargets[0].tableKey);\n                        let testTable = JSON.parse(JSON.stringify(table));\n                        testTable.name = testStep.errorTableName;\n                        testTable.schema = testStep.errorSchema;\n                        testTable.connectionKey = testStep.errorConnectionKey;\n\n                        for (let column of testTable.dexihTableColumns) {\n                            column.deltaType = eDeltaType.NonTrackingField;\n                        }\n                        let auditCol = new DexihTableColumn();\n                        auditCol.name = 'error_audit_key';\n                        auditCol.dataType = eTypeCode.Int64;\n                        auditCol.deltaType = eDeltaType.CreateAuditKey;\n\n                        let opCol = new DexihTableColumn();\n                        opCol.name = 'error_operation';\n                        opCol.dataType = eTypeCode.CharArray;\n                        opCol.maxLength = 1;\n                        opCol.deltaType = eDeltaType.DatabaseOperation;\n\n\n                        let reasonCol = new DexihTableColumn();\n                        reasonCol.name = 'mismatch_reason';\n                        reasonCol.dataType = eTypeCode.String;\n                        reasonCol.deltaType = eDeltaType.UpdateReason;\n\n                        testTable.dexihTableColumns.push(auditCol);\n                        testTable.dexihTableColumns.push(opCol);\n                        testTable.dexihTableColumns.push(reasonCol);\n\n                        this.targetTable = testTable;\n                    } else {\n                        this.hubService.addHubErrorMessage(`There is no target table for this datalink.`)\n                        return;\n                    }\n                    this.refresh();\n                    break;\n                case 'datajob':\n                break;\n            }\n\n        });\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheSubscription ) { this._hubCacheSubscription.unsubscribe(); }\n        if (this.runningQuery) { this.runningQuery.cancel(); }\n        this.cancelToken.cancel();\n    }\n\n    createSelectQuery(): SelectQuery {\n        const createAuditColumn = this.targetTable.dexihTableColumns.find(c => c.deltaType === eDeltaType.CreateAuditKey);\n        const updateAuditColumn = this.targetTable.dexihTableColumns.find(c => c.deltaType === eDeltaType.UpdateAuditKey);\n\n        if (!createAuditColumn && !updateAuditColumn) {\n            this.hubService.addHubErrorMessage(\n            // tslint:disable-next-line:max-line-length\n            `The table ${this.targetTable.name} does not contain a create or update audit column which is required to connect to an audit.`);\n            return;\n        }\n\n        // clone the query, and add the audit filter columns\n        let selectQuery = JSON.parse(JSON.stringify(this.selectQuery));\n\n        if (createAuditColumn) {\n            let filter = new Filter();\n            filter.column1 = new TableColumn();\n            Object.assign(filter.column1, createAuditColumn);\n            filter.operator = eCompare.IsEqual;\n            filter.value2 = this.auditResult.auditKey;\n            filter.andOr = eAndOr.Or\n            filter.compareDataType = eTypeCode.Int64;\n            selectQuery.filters.push(filter);\n        }\n\n        if (updateAuditColumn) {\n            let filter = new Filter();\n            filter.column1 = new TableColumn();\n            Object.assign(filter.column1, updateAuditColumn);\n            filter.operator = eCompare.IsEqual;\n            filter.value2 = this.auditResult.auditKey;\n            filter.andOr = eAndOr.Or\n            filter.compareDataType = eTypeCode.Int64;\n            selectQuery.filters.push(filter);\n        }\n\n        selectQuery.rows = 100;\n\n        return selectQuery;\n    }\n\n    refresh() {\n        let selectQuery = this.createSelectQuery();\n\n        let query = this.hubService.previewTableDataQuery(this.targetTable, false, selectQuery, null, null, this.cancelToken);\n\n        query.then(result => {\n            this.refreshDataSubject.next();\n            this.columns = result.columns;\n            this.data = result.data;\n        }).catch(() => {\n            // this.hubService.addHubErrorMessage(reason);\n        });\n\n        this.runningQuery = query;\n    }\n\n    download() {\n        let selectQuery = this.createSelectQuery();\n        let downloadObject = new DownloadObject();\n        downloadObject.objectKey = this.targetTable.key;\n        downloadObject.objectType = eDataObjectType.Table;\n        downloadObject.query = selectQuery;\n        this.hubService.downloadData([downloadObject], false, eDownloadFormat.Csv, this.cancelToken)\n    }\n}\n","<dexih-table [enableMultiSelect]=\"false\" [columns]=\"columns\" [data]=\"data\">\n\n    <ng-template #actions let-items=\"items\">\n        <dexih-button-refresh (click)=\"refresh()\" text=\"Reload\"></dexih-button-refresh>\n        <dexih-button-download class=\"ml-1\" (click)=\"download()\"></dexih-button-download>\n    </ng-template>\n    <ng-template #tableHeader>\n        <query-builder [selectQuery]=\"selectQuery\" [columns]=\"targetTable.dexihTableColumns\" [inputColumns]=\"inputColumns\" [refreshEvent]=\"refreshDataSubject.asObservable()\" (onRefreshData)=\"refresh()\"></query-builder>\n    </ng-template>\n</dexih-table>","import { Component, Input, OnInit, OnDestroy } from '@angular/core';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../../hub.service';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { TransformWriterResult } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'profile-results',\n    templateUrl: './profile-results.component.html'\n})\n\nexport class ProfileResultsComponent implements OnInit, OnDestroy {\n    @Input() auditResult: TransformWriterResult;\n\n    columns: Array<any>;\n    data: Array<any>;\n\n    showDetailed = false;\n\n    private cancelToken = new CancelToken();\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService\n    ) {\n\n    }\n\n    ngOnInit() {\n        this.refresh();\n    }\n\n    ngOnDestroy(): void {\n        this.cancelToken.cancel();\n    }\n\n    refresh() {\n        this.hubService.previewProfileData(this.auditResult, !this.showDetailed, this.cancelToken).then(result => {\n            this.columns = result.columns;\n            this.data = result.data;\n        }).catch(reason => {\n          // this.hubService.addHubMessage(reason);\n        });\n    }\n\n    download() {\n        this.hubService.downloadProfileData(this.auditResult, this.cancelToken);\n    }\n}\n","<dexih-table [enableMultiSelect]=\"false\" [columns]=\"columns\" [data]=\"data\">\n\n    <ng-template #actions let-items=\"items\">\n        <dexih-button-refresh (click)=\"refresh()\" text=\"Reload\"></dexih-button-refresh>\n        <dexih-button-download class=\"ml-1\" (click)=\"download()\"></dexih-button-download>\n\n        <div class=\"d-flex flex-wrap\">\n            <div class=\"flex-fill pl-1\" >\n                <form-checkbox label=\"Show Detailed Results\" [(ngModel)]=\"showDetailed\" [border]=\"true\" (change)=\"refresh()\"></form-checkbox>\n            </div>\n        </div>\n    </ng-template>\n</dexih-table>","import { Component, OnInit, Input } from '@angular/core';\nimport { TransformWriterResult } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'result-progress',\n    templateUrl: './progress.component.html'\n})\n\nexport class ProgressComponent implements OnInit {\n    @Input() public value: number;\n    @Input() public total: number;\n    @Input() public caption: string;\n    @Input() public color: string;\n\n    percent = '0%';\n\n    constructor() {\n\n    }\n\n    ngOnInit() {\n        if (this.value === 0) {\n            this.percent = '0%';\n        } else if (this.total === 0) {\n            this.percent = '100%';\n        } else {\n            let percent = 100 * this.value / this.total;\n            if (percent < 0) { percent = 0; }\n            if (percent > 100) { percent = 100; }\n            this.percent = percent.toString() + '%';\n        }\n    }\n}\n","<div class=\"\">\n    <span class=\"text\">  {{caption}}\n        <span class=\"float-right\">{{value}}/{{total}}</span> \n    </span>\n    <div class=\"progress\" style=\"width:100%\">\n        <div [ngClass]=\"['progress-bar', color]\" [ngStyle]=\"{width: percent}\">&nbsp;</div>\n    </div>\n</div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable, Subscription, combineLatest} from 'rxjs';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { TransformWriterResult, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'results-view',\n    templateUrl: './results-view.component.html',\n    styles: []\n})\nexport class ResultsViewComponent implements OnInit, OnDestroy {\n    hubCache: HubCache;\n    referenceKeys: Array<number>;\n\n    private _subscription: Subscription;\n    private _transformWriterResultChangeSubscription: Subscription;\n\n    public auditResult: TransformWriterResult;\n\n    showPage = false;\n    showPageMessage = 'Loading...';\n    view: string;\n\n    resultChartData: Array<any>;\n\n    private cancelToken = new CancelToken();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(true),\n                this.hubService.getRemoteAgentObservable(true)\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                let queryParams = result[2];\n                this.hubCache = result[3];\n                let remoteAgent = result[4]\n\n                let auditConnectionKey = +params['auditConnectionKey'];\n                let auditKey = +params['auditKey'];\n\n                this.showPage = false;\n                this.showPageMessage = 'Waiting for an active remote agent...';\n\n                this.view = queryParams['view'];\n                if (!this.view) { this.view = 'Stats'; }\n\n                if (remoteAgent) {\n                    this.showPage = true;\n                    this.showPageMessage = '';\n                    this.hubService.getResultDetail(auditConnectionKey, auditKey, this.cancelToken).then(r => {\n                        this.auditResult = r[0];\n                    });\n                }\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Results View');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._transformWriterResultChangeSubscription) { this._transformWriterResultChangeSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        if (this._transformWriterResultChangeSubscription) { this._transformWriterResultChangeSubscription.unsubscribe(); }\n        this._transformWriterResultChangeSubscription = this.hubService.getTransformWriterResultChangeObservable()\n        .subscribe(writerResult => {\n            if (this.auditResult && writerResult.auditConnectionKey === this.auditResult.auditConnectionKey &&\n                    writerResult.auditKey === this.auditResult.auditKey) {\n                this.auditResult = writerResult;\n            }\n        });\n    }\n\n}\n\n\n","<div class=\"container-fluid\">\n\t<dexih-widget *ngIf=\"auditResult\" [title]=\"auditResult?.referenceName\"iconClass=\"fa fa-lg fa-fw fa-trophy\"\n\t[showCloseButton]=\"true\" (close)=\"close()\">\n\n\t\t<ng-template #header>\n\t\t\t\t<ul class=\"nav nav-tabs card-header-tabs\">\n\t\t\t\t<li class=\"nav-item\" >\n\t\t\t\t\t<a class=\"nav-link\" [class.active]=\"view=='Stats'\" routerLink=\".\" [queryParams]=\"{view: 'Stats'}\"><i class=\"fa fa-clock-o\"></i> <span class=\"ml-1 d-none d-md-inline\">Execution Stats</span></a>\n\t\t\t\t</li>\n\n\t\t\t\t<li class=\"nav-item\" *ngIf=\"auditResult.profileTableName && ( auditResult?.auditType == 'DatalinkStep' || auditResult?.auditType == 'Datalink')\" >\n\t\t\t\t\t<a class=\"nav-link\" [class.active]=\"view=='Profile'\" routerLink=\".\" [queryParams]=\"{view: 'Profile'}\"><i class=\"fa fa-tachometer\" ></i> <span class=\"ml-1 d-none d-md-inline\">Profile Data</span></a>\n\t\t\t\t</li>\n\n\t\t\t\t<li class=\"nav-item\" *ngIf=\"auditResult?.auditType == 'DatalinkStep' || auditResult?.auditType == 'Datalink' || auditResult?.auditType == 'Table' || auditResult?.auditType == 'DatalinkTestStep'\" >\n\t\t\t\t\t<a class=\"nav-link\" [class.active]=\"view=='Preview'\" routerLink=\".\" [queryParams]=\"{view: 'Preview'}\"><i class=\"fa fa-table\" ></i> <span class=\"ml-1 d-none d-md-inline\">Preview</span></a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</ng-template>\n\t\t<div [ngSwitch]=\"view\">\n\t\t\t<div *ngSwitchCase=\"'Stats'\">\n\t\t\t\t<stats [auditResult]=\"auditResult\"></stats>\n\t\t\t</div>\n\t\t\t<div *ngSwitchCase=\"'Profile'\">\n\t\t\t\t<profile-results [auditResult]=\"auditResult\"></profile-results>\n\t\t\t</div>\n\t\t\t<div *ngSwitchCase=\"'Preview'\">\n\t\t\t\t<preview-results [auditResult]=\"auditResult\"></preview-results>\n\t\t\t</div>\n\t\t</div>\n\t</dexih-widget>\n</div>","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../../../shared/shared.module';\n\nimport { ResultsViewComponent } from './results-view.component';\nimport { StatsComponent } from './stats.component';\nimport { ProgressComponent } from './progress.component';\nimport { ProfileResultsComponent } from './profile-results.component';\nimport { PreviewResultsComponent } from './preview-results.component';\nimport { HubSharedModule } from '../../hub.shared.module';\n\n\n@NgModule({\n    imports: [SharedModule, HubSharedModule],\n    exports: [\n        ResultsViewComponent\n    ],\n    declarations: [\n        ResultsViewComponent,\n        ProgressComponent,\n        StatsComponent,\n        ProfileResultsComponent,\n        PreviewResultsComponent\n    ],\n    providers: [],\n})\nexport class ResultsViewModule { }\n","import { Component, Input, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TransformWriterResult, eRunStatus, eTriggerMethod } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'stats',\n    templateUrl: './stats.component.html'\n})\n\nexport class StatsComponent implements OnInit {\n    @Input() auditResult: TransformWriterResult;\n\n    exceptionHidden = true;\n\n    columns: Array<any>;\n\n    public barChartData: any[];\n\n    public runTime: number;\n\n    public fail = false;\n    public success = false;\n    eRunStatus = eRunStatus;\n    eTriggerMethod = eTriggerMethod;\n\n\n    constructor(public route: ActivatedRoute, public router: Router\n    ) {\n\n    }\n\n    ngOnInit() {\n\n        if (this.auditResult.endTime) {\n            this.runTime = ( (new Date(this.auditResult.endTime)).valueOf() - (new Date(this.auditResult.startTime)).valueOf()) / 1000;\n        } else {\n            if (this.auditResult.runStatus === eRunStatus.Running ||\n                this.auditResult.runStatus === eRunStatus.RunningErrors ||\n                this.auditResult.runStatus === eRunStatus.Started) {\n                    this.runTime = ( (new Date()).valueOf() -\n                        (new Date(this.auditResult.startTime)).valueOf()) / 1000;\n                } else {\n                this.runTime = null;\n            }\n        }\n\n        switch (this.auditResult.runStatus) {\n            case eRunStatus.Abended:\n            case eRunStatus.Cancelled:\n            case eRunStatus.Failed:\n            case eRunStatus.FinishedErrors:\n                this.fail = true;\n                break;\n            case eRunStatus.Finished:\n            case eRunStatus.Passed:\n                this.success = true;\n\n        }\n\n        this.barChartData = [\n            {\n                name: 'Reading',\n                value: this.rowsPerSecond(this.auditResult.rowsReadPrimary + this.auditResult.rowsReadReference, this.auditResult.readTicks)\n            },\n            {\n                name: 'Processing',\n                value: this.rowsPerSecond(this.auditResult.rowsTotal, this.auditResult.processingTicks)\n            },\n            {\n                name: 'Writing',\n                value: this.rowsPerSecond(this.auditResult.rowsTotal, this.auditResult.writeTicks)\n            }\n        ];\n\n    }\n\n    numberWithCommas(x) {\n        const parts = x.toString().split('.');\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n        return parts.join('.');\n    }\n\n    rowsPerSecond(rows, ticks) {\n        if (ticks === 0) {\n            return 0;\n        }\n        return rows / (ticks / 10000000);\n    }\n\n    openResult(auditKey) {\n        this.router.navigate(['..', auditKey], { relativeTo: this.route });\n    }\n\n}\n","<ul class=\"list-group\">\n    <li class=\"list-group-item list-group-item-danger\" *ngIf=\"fail\">\n        <h5>Error encountered!</h5>\n    </li>\n    <li class=\"list-group-item list-group-item-success\" *ngIf=\"success\">\n        <h5>Finished Successfully</h5>\n    </li>\n    <li class=\"list-group-item\" *ngIf=\"auditResult?.message\">\n        <div class=\"d-flex mb-2\">\n            {{auditResult.message}}\n            <div class=\"ml-auto\">\n                <dexih-button *ngIf=\"auditResult.exceptionDetails\" (click)='exceptionHidden = !exceptionHidden'>Details</dexih-button>\n            </div>\n        </div>\n        <div>\n            <pre *ngIf=\"!exceptionHidden && auditResult.exceptionDetails\">{{auditResult.exceptionDetails}}</pre>\n        </div>\n    </li>\n    <li class=\"list-group-item list-group-item-info rounded-0\">\n        <h5>Running Time</h5>\n    </li>\n    <li class=\"list-group-item \">\n            <div class=\"container\">\n                <div class=\"row rounded text-white bg-secondary\">\n                    <ng-template [ngIf]=\"auditResult.targetTableName\">\n                            <div class=\"col border border-white\">Target Table</div>\n                            <div class=\"col border border-white\">{{auditResult.targetTableName}}</div>\n                            <div class=\"w-100\"></div>\n                    </ng-template>                    \n                    <div class=\"col border border-white\">Run Status</div>\n                    <div class=\"col border border-white\">{{eRunStatus[auditResult.runStatus]}}</div>\n                    <div class=\"w-100\"></div>                    \n                    <div class=\"col border border-white\">Start Date</div>\n                    <div class=\"col border border-white\">{{auditResult.initializeTime | calendar}}</div>\n                    <div class=\"w-100\"></div>\n                    <ng-template [ngIf]=\"auditResult.scheduledTime\">\n                        <div class=\"col border border-white\">Scheduled Time</div>\n                        <div class=\"col border border-white\">{{auditResult.scheduledTime | calendar}}</div>\n                        <div class=\"w-100\"></div>\n                    </ng-template>\n\n                    <div class=\"col border border-white\">Initialized</div>\n                    <div class=\"col border border-white\">{{auditResult.initializeTime | calendar}}</div>\n                    <div class=\"w-100\"></div>\n                    <div class=\"col border border-white\">Started</div>\n                    <div class=\"col border border-white\">{{auditResult.startTime | calendar}}</div>\n                    <div class=\"w-100\"></div>\n                    <div class=\"col border border-white\">Finished</div>\n                    <div class=\"col border border-white\">{{auditResult.endTime | calendar}}</div>\n                    <div class=\"w-100\"></div>\n                    <div class=\"col border border-white\">Run Time</div>\n                    <div class=\"col border border-white\">{{runTime | number: '1.2-2'}} seconds</div>\n                    <div class=\"w-100\"></div>\n                    <div class=\"col border border-white\">Triggered By</div>\n                    <div class=\"col border border-white\">{{eTriggerMethod[auditResult.triggerMethod]}}</div>\n                </div>\n            </div>\n    </li>\n    <li *ngIf=\"auditResult.childResults?.length > 0\" class=\"list-group-item list-group-item-info\">\n        <h5>Child Results</h5>\n    </li>\n    <li *ngIf=\"auditResult.childResults?.length > 0\" class=\"list-group-item \">\n        <div *ngFor=\"let result of auditResult.childResults\">\n            <div class=\"\">\n                <span class=\"text\">  {{result.auditType ==='Table' ? result.targetTableName : result.referenceName}}\n                </span>\n                <datalink-status [writerResult]=\"result\"></datalink-status>\n            </div>\n        </div>\n    </li>\n    <li class=\"list-group-item list-group-item-info\">\n        <h5>Row Distribution</h5>\n    </li>\n    <li class=\"list-group-item \">\n            <result-progress *ngIf=\"auditResult.rowsReadPrimary > 0\" [value]=\"auditResult.rowsReadPrimary\" [total]=\"auditResult.rowsReadPrimary + auditResult.rowsReadReference\"\n                caption=\"Source Rows\" color=\"bg-color-blueDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsReadReference > 0\" [value]=\"auditResult.rowsReadReference\" [total]=\"auditResult.rowsReadPrimary + auditResult.rowsReadReference\"\n                caption=\"Joined Rows\" color=\"bg-color-blueLight\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsCreated > 0\" [value]=\"auditResult.rowsCreated\" [total]=\"auditResult.rowsTotal\" caption=\"Created\"\n                color=\"bg-color-greenDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsUpdated > 0\" [value]=\"auditResult.rowsUpdated\" [total]=\"auditResult.rowsTotal\" caption=\"Updated\"\n                color=\"bg-color-blueDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsDeleted > 0\" [value]=\"auditResult.rowsDeleted\" [total]=\"auditResult.rowsTotal\" caption=\"Deleted\"\n                color=\"bg-color-magenta\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsRejected > 0\" [value]=\"auditResult.rowsRejected\" [total]=\"auditResult.rowsTotal\"\n                caption=\"Rejected\" color=\"bg-color-red\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsPreserved > 0\" [value]=\"auditResult.rowsPreserved\" [total]=\"auditResult.rowsTotal\"\n                caption=\"Preserved\" color=\"bg-color-pinkDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsIgnored > 0\" [value]=\"auditResult.rowsIgnored\" [total]=\"auditResult.rowsTotal\" caption=\"Ignored\"\n                color=\"bg-color-grayDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.passed > 0\" [value]=\"auditResult.passed\" [total]=\"auditResult.rowsTotal\" caption=\"Passed\"\n                color=\"bg-color-greenDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.failed > 0\" [value]=\"auditResult.failed\" [total]=\"auditResult.rowsTotal\" caption=\"Failed\"\n                color=\"bg-color-magenta\"></result-progress>\n        </li>\n    <li class=\"list-group-item list-group-item-info\">\n        <h5>Performance Estimates (rows/second)</h5>\n    </li>\n    <li class=\"list-group-item \">\n            <div class=\"row rounded text-white bg-secondary\">\n                <ng-template ngFor let-item [ngForOf]=\"auditResult.performanceSummary\">\n                        <div class=\"col border border-white\">{{item.transformName}}</div>\n                        <div class=\"col border border-white\">{{item.seconds == 0 ? 'N/A' : ((item.rows / item.seconds) | number: '1.2-2')}} rows/second</div>\n                        <div class=\"w-100\"></div>\n                </ng-template>                    \n            </div>\n        <div style=\"display: grid\">\n            <ngx-charts-bar-vertical\n                scheme=\"natural\"\n                [results]=\"barChartData\" \n                [gradient]=\"true\" \n                [xAxis]=\"true\" \n                [yAxis]=\"true\"\n                [legend]=\"false\" \n                [showGridLines]=\"true\" \n                [showXAxisLabel]=\"true\"\n                [showYAxisLabel]=\"true\" \n                yAxisLabel=\"rows/second\" \n                xAxisLabel=\"operation\">\n            </ngx-charts-bar-vertical>\n        </div>\n    </li>\n</ul>","\nexport {SearchComponent} from './search.component';\nexport {SearchModule} from './search.module';\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { eSearchObjectType, SearchObjectTypes } from '../hub.models';\n\n@Pipe({\n  name: 'objectTypeName'\n})\nexport class ObjectTypePipe implements PipeTransform {\n\n  transform(value: eSearchObjectType): any {\n    return SearchObjectTypes.find(c => c.key === value).name;\n  }\n}\n","import { HostListener, Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { HubService } from '../hub.service';\nimport { AuthService } from '../../+auth/auth.service';\nimport { HubCache, SearchResult, eSearchObjectType, SearchObjectTypes } from '../hub.models';\nimport { Observable, Subscription, combineLatest} from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\n@Component({\n    selector: 'search',\n    templateUrl: './search.component.html',\n})\n\nexport class SearchComponent implements OnInit, OnDestroy {\n\n    private _subscription: Subscription;\n    private _searchSubscription: Subscription;\n    public hubCache: HubCache;\n\n    public searchForm: FormGroup;\n\n    searchObjectTypes = SearchObjectTypes;\n    eSearchObjectType = eSearchObjectType;\n\n    private isFirst = false;\n\n    searchResults: Array<SearchResult>;\n\n    constructor(public hubService: HubService,\n        private authService: AuthService,\n        private route: ActivatedRoute,\n        private router: Router,\n        private fb: FormBuilder\n    ) { }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let params = result[0];\n                this.hubCache = result[1];\n\n                if (!this.isFirst) {\n                    this.isFirst = false;\n                    let searchObject = +params['searchObject'];\n                    if (!searchObject) {\n                        searchObject = 0;\n                    }\n\n                    this.searchForm = this.fb.group({\n                        'searchString': [params['search'], [\n                        ]],\n                        'searchObject': [searchObject, [\n                        ]],\n                    });\n\n                    this.updateSearch();\n\n                    if (this._searchSubscription) { this._searchSubscription.unsubscribe(); }\n                    this._searchSubscription = this.searchForm.valueChanges\n                        .pipe(debounceTime(500))\n                        .subscribe(newValue => {\n                            this.updateSearch();\n                        });\n                }\n\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Search');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._searchSubscription) { this._searchSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    updateSearch() {\n        if (!this.hubCache.isLoaded()) { return; }\n\n        this.searchResults = this.hubCache.search(this.searchForm.value.searchString, this.searchForm.value.searchObject);\n\n        if (history.pushState) {\n            let newUrl = this.hubCache.getHubUrl() + '/search';\n            let searchString = this.searchForm.value.searchString;\n            let searchObject = this.searchForm.value.searchObject;\n            if (searchString) {\n                newUrl += '/' + searchObject + '/' + searchString;\n            }\n            this.router.navigateByUrl(newUrl);\n        }\n    }\n}\n\n\n","<div class=\"container-fluid\">\n\t<dexih-widget title=\"Search Results\" iconClass=\"fa fa-lg fa-fw fa-search\" [showCloseButton]=\"true\" [padding]=\"true\" (close)=\"close()\">\n\t\t<form *ngIf=\"searchForm\" [formGroup]=\"searchForm\">\n\t\t\t<fieldset>\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Search Term\" formControlName=\"searchString\" placeholder=\"Search...\" iconClass=\"fa fa-search\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Restrict to\" formControlName=\"searchObject\" [items]=\"searchObjectTypes\" itemKey=\"key\" itemName=\"name\">\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\t\t</form>\n\n\t\t<div role=\"content\">\n\t\t\t<div class=\"well\" *ngIf=\"!searchResults || searchResults?.length == 0\">\n\t\t\t\t<h5>No search results available.</h5>\n\t\t\t</div>\n\n\t\t\t<div class=\"well\">\n\t\t\t\t<ul class=\"list-group \">\n\t\t\t\t\t<li *ngFor=\"let searchResult of searchResults\" class=\"list-group-item\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h5>{{searchResult.objectType | objectTypeName }}</h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col-xs-9\" [ngSwitch]=\"searchResult.objectType\">\n\t\t\t\t\t\t\t<datajob-view *ngSwitchCase=\"eSearchObjectType.Datajob\" [datajob]=\"searchResult.object\"></datajob-view>\n\t\t\t\t\t\t\t<datalink-view *ngSwitchCase=\"eSearchObjectType.Datalink\" [datalink]=\"searchResult.object\"></datalink-view>\n\t\t\t\t\t\t\t<connection-view *ngSwitchCase=\"eSearchObjectType.Connection\" [connection]=\"searchResult.object\"></connection-view>\n\t\t\t\t\t\t\t<table-view *ngSwitchCase=\"eSearchObjectType.Table\" [connection]=\"searchResult.objectParent\" [table]=\"searchResult.object\"></table-view>\n\t\t\t\t\t\t\t<table-column-view *ngSwitchCase=\"eSearchObjectType.TableColumn\" [table]=\"searchResult.objectParent\" [column]=\"searchResult.object\"></table-column-view>\n\t\t\t\t\t\t\t<columnValidation-view *ngSwitchCase=\"eSearchObjectType.ColumnValidation\" [columnValidation]=\"searchResult.object\"></columnValidation-view>\n\t\t\t\t\t\t\t<fileFormat-view *ngSwitchCase=\"eSearchObjectType.FileFormat\" [fileFormat]=\"searchResult.object\"></fileFormat-view>\n\t\t\t\t\t\t\t<view-view *ngSwitchCase=\"eSearchObjectType.View\" [view]=\"searchResult.object\"></view-view>\n\t\t\t\t\t\t\t<api-view *ngSwitchCase=\"eSearchObjectType.Api\" [api]=\"searchResult.object\"></api-view>\n\t\t\t\t\t\t\t<dashboard-view *ngSwitchCase=\"eSearchObjectType.Dashboard\" [dashboard]=\"searchResult.object\"></dashboard-view>\n\t\t\t\t\t\t\t<listOfValues-view *ngSwitchCase=\"eSearchObjectType.ListOfValues\" [listOfValues]=\"searchResult.object\"></listOfValues-view>\n\t\t\t\t\t\t\t<datalinkTest-view *ngSwitchCase=\"eSearchObjectType.DatalinkTest\" [datalinkTest]=\"searchResult.object\"></datalinkTest-view>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</dexih-widget>\n</div>","import { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { SharedModule } from '../../shared/shared.module';\nimport { SearchComponent } from './search.component';\nimport { ObjectTypePipe } from './object-type.pipe';\nimport { HubSharedModule} from '../hub.shared.module';\n\n@NgModule({\n    imports: [\n        SharedModule,\n        HubSharedModule,\n        ReactiveFormsModule\n    ],\n    exports: [],\n    declarations: [SearchComponent, ObjectTypePipe],\n    providers: [],\n})\nexport class SearchModule { }\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../hub.service';\nimport { HubCache } from '../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { AuthService } from '../../+auth/auth.service';\nimport { DexihDatalink, eSourceType, eDownloadFormat, DownloadObject,\n    eDataObjectType, eSharedObjectType } from '../../shared/shared.models';\nimport { CancelToken } from '../../+auth/auth.models';\n\n@Component({\n    selector: 'sharedData-index',\n    templateUrl: './sharedData-index.component.html',\n    styles: []\n})\nexport class SharedDataIndexComponent implements OnInit, OnDestroy {\n    hubCache: HubCache;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n    private cancelToken: CancelToken = new CancelToken();\n\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'objectTypeName', title: 'Type', format: '' },\n        { name: 'name', title: 'Name', format: '', tags: 'tags' },\n        { name: 'description', title: 'Description', format: 'Md' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    typeFilter: string;\n\n    private _tableData = new BehaviorSubject<Array<DexihDatalink>>(null);\n    tableData: Observable<Array<DexihDatalink>> = this._tableData.asObservable();\n\n    constructor(private hubService: HubService, private authService: AuthService, private router: Router, private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let queryParams = result[2];\n                this.hubCache = result[3];\n\n                this.watchChanges();\n\n                this.typeFilter = queryParams['typeFilter'];\n                if (!this.typeFilter) {\n                    this.typeFilter = 'All';\n                }\n\n                this.route.snapshot.data['pageTitle'] =  this.typeFilter;\n\n                this.updateSharedData();\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Shared Data Index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    private updateSharedData() {\n        let objects = new Array<any>();\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            if (!this.hubCache.hub.dexihDatalinks && !this.hubCache.hub.dexihConnections) {\n                this._tableData.next(new Array<DexihDatalink>());\n            } else {\n                if (this.typeFilter === 'All' || this.typeFilter === 'Datalink') {\n                    this.hubCache.hub.dexihDatalinks.filter(d => d.isShared).forEach(datalink => {\n                        objects.push({\n                            objectKey: datalink.key,\n                            objectTypeName: eDataObjectType[eDataObjectType.Datalink],\n                            objectType: eDataObjectType.Datalink,\n                            name: datalink.name,\n                            description: datalink.description,\n                            updateDate: datalink.updateDate,\n                            tags: this.hubCache.getObjectTags(eSharedObjectType.Datalink, datalink.key)\n                        });\n                    });\n                }\n\n                if (this.typeFilter === 'All' || this.typeFilter === 'Table') {\n                    this.hubCache.hub.dexihTables.filter(c => c.isShared).forEach(table => {\n                        objects.push({\n                            objectKey: table.key,\n                            objectTypeName: eDataObjectType[eDataObjectType.Table],\n                            objectType: eDataObjectType.Table,\n                            name: table.logicalName + ' (' + table.name + ')',\n                            description: table.description,\n                            updateDate: table.updateDate,\n                            tags: this.hubCache.getObjectTags(eSharedObjectType.TagObjects, table.key)\n                        });\n                    });\n                }\n\n                if (this.typeFilter === 'All' || this.typeFilter === 'View') {\n                    this.hubCache.hub.dexihViews.filter(c => c.isShared).forEach(view => {\n                        objects.push({\n                            objectKey: view.key,\n                            objectTypeName: eDataObjectType[eDataObjectType.View],\n                            objectType: eDataObjectType.View,\n                            name: view.name,\n                            description: view.description,\n                            updateDate: view.updateDate,\n                            tags: this.hubCache.getObjectTags(eSharedObjectType.View, view.key)\n                        });\n                    });\n                }\n\n                if (this.typeFilter === 'All' || this.typeFilter === 'Dashboard') {\n                    this.hubCache.hub.dexihDashboards.filter(c => c.isShared).forEach(dashboard => {\n                        objects.push({\n                            objectKey: dashboard.key,\n                            objectTypeName: eDataObjectType[eDataObjectType.Dashboard],\n                            objectType: eDataObjectType.Dashboard,\n                            name: dashboard.name,\n                            description: dashboard.description,\n                            updateDate: dashboard.updateDate,\n                            tags: this.hubCache.getObjectTags(eSharedObjectType.Dashboard, dashboard.key)\n                        });\n                    });\n                }\n\n                if (this.typeFilter === 'All' || this.typeFilter === 'Api') {\n                    this.hubCache.hub.dexihApis.filter(c => c.isShared).forEach(api => {\n                        objects.push({\n                            objectKey: api.key,\n                            objectTypeName: eDataObjectType[eDataObjectType.Api],\n                            objectType: eDataObjectType.Api,\n                            name: api.name,\n                            description: api.description,\n                            updateDate: api.updateDate,\n                            tags: this.hubCache.getObjectTags(eSharedObjectType.Api, api.key)\n                        });\n                    });\n                }\n\n                this._tableData.next(objects);\n            }\n        }\n\n    }\n\n    public downloadData(dataObjects: Array<any>) {\n        this.hubService.downloadData(dataObjects, true, eDownloadFormat.Csv, this.cancelToken).then(() => {\n            this.hubService.addHubSuccessMessage('The specified data is being downloaded.');\n        }).catch(() => {\n            //            this.hubService.addHubErrorMessage(reason);\n        });\n    }\n\n    public preview(dataObject: DownloadObject) {\n        if (dataObject.objectType === eDataObjectType.Table) {\n            this.router.navigate(['table-preview', dataObject.objectKey], { relativeTo: this.route });\n        }\n        if (dataObject.objectType === eDataObjectType.Datalink) {\n            this.router.navigate(['datalink-preview', dataObject.objectKey], { relativeTo: this.route });\n        }\n        if (dataObject.objectType === eDataObjectType.View) {\n            this.router.navigate(['view-preview', dataObject.objectKey], { relativeTo: this.route });\n        }\n        if (dataObject.objectType === eDataObjectType.Dashboard) {\n            this.router.navigate(['dashboard-preview', dataObject.objectKey], { relativeTo: this.route });\n        }\n        if (dataObject.objectType === eDataObjectType.Api) {\n            this.router.navigate(['api-preview', dataObject.objectKey], { relativeTo: this.route });\n        }\n    }\n\n    public unshareSelectedTables(dataObjects: Array<DownloadObject>) {\n        let datalinkKeys = dataObjects.filter(c => c.objectType === eDataObjectType.Datalink).map(c => c.objectKey);\n        if (datalinkKeys.length > 0) {\n            this.hubService.shareItems(datalinkKeys, eDataObjectType.Datalink, false);\n        }\n\n        let tableKeys = dataObjects.filter(c => c.objectType === eDataObjectType.Table).map(c => c.objectKey);\n        if (tableKeys.length > 0) {\n            this.hubService.shareItems(tableKeys, eDataObjectType.Table, false);\n        }\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Datalink || hubCacheChange.changeClass === eSharedObjectType.Table) {\n                this.updateSharedData();\n            }\n        });\n\n    }\n}\n\n\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"Shared Data\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-newspaper-o\" \n\t\t[showCloseButton]=\"true\"\n\t\t[padding]=\"false\"\n\t\t(close)=\"close()\"\n\t>\n\n\t<dexih-table \n\t\t[enableMultiSelect]=\"true\"\n\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t[columns]=\"columns\"\n\t\t[dataObservable]=\"tableData\"\n\t\t(rowClick)=\"preview($event)\"\n\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t>\n\n\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t<dexih-button-preview (click)=\"preview(item)\"></dexih-button-preview>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-objects=\"items\">\n\t\t\t\t<dexih-button-download class=\"mr-1\" (click)=\"downloadData(objects)\"></dexih-button-download>\n\t\t\t\t<dexih-button-private *ngIf=\"hubCache.canWrite\"  (click)=\"unshareSelectedTables(objects)\"></dexih-button-private>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #filter select=\"filter\" let-items=\"items\">\n\t\t\t\t<dexih-button-dropdown buttonClass=\"btn-primary mr-1\" iconClass=\"fa fa-filter\" [text]=\"typeFilter\" title=\"Filter by a purpose\" [pullRight]=\"true\">\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='All'\" routerLink='.' [queryParams]=\"{typeFilter: 'All'}\" title=\"All Items\">All</a>\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='Datalink'\" routerLink='.' [queryParams]=\"{typeFilter: 'Datalink'}\" title=\"Datalinks\">Datalinks</a>\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='Table'\" routerLink='.' [queryParams]=\"{typeFilter: 'Table'}\" title=\"Tables\">Tables</a>\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='View'\" routerLink='.' [queryParams]=\"{typeFilter: 'View'}\" title=\"Views\">Views</a>\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='Dashboard'\" routerLink='.' [queryParams]=\"{typeFilter: 'Dashboard'}\" title=\"Dashboards\">Dashboards</a>\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='Api'\" routerLink='.' [queryParams]=\"{typeFilter: 'Api'}\" title=\"Apis\">Apis</a>\n\t\t\t\t</dexih-button-dropdown>\n\t\t\t</ng-template>\n\t</dexih-table>\n\n    </dexih-widget>\n</div>\n\n","export * from './table-index.component';\n","<div class=\"container-fluid\">\n    <dexih-widget [title]=\"title\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-table\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t\t[showIf]=\"hubCache?.hub\"\n\t>\n\n\t\t<ng-template #header>\n\n\n\t\t</ng-template>\n\n\t\t<dexih-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"editTable($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t>\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<actions-table-button [tables]=\"items\" [refreshTables]=\"true\" ></actions-table-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-table=\"item\">\n\t\t\t\t\t<datalink-status [tableKey]='table?.key'></datalink-status>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #filter select=\"filter\" let-items=\"items\">\n\t\t\t\t\t<dexih-button-dropdown *ngIf=\"hubCache?.hub\" class=\"mr-1\"[autoCompact]=\"false\" buttonClass=\"btn btn-primary\" iconClass=\"fa fa-database\" [text]=\"connectionName\" title=\"Filter by a connection\" [pullRight]=\"true\">\n\t\t\t\t\t\t<a *ngFor=\"let connection of (hubCache.hub.dexihConnections | equalFilter :'isValid':true )\" class=\"dropdown-item\" routerLink=\".\" [queryParams]=\"{connectionKey: connection.key}\">{{connection.name}}</a>\n\t\t\t\t\t</dexih-button-dropdown>\n\t\t\n\t\t\t\t\t<dexih-button-dropdown class=\"mr-1\" [autoCompact]=\"false\" buttonClass=\"btn btn-primary\" iconClass=\"fa fa-filter\" [text]=\"eConnectionPurpose[purposeFilter]\" title=\"Filter by a purpose\" [pullRight]=\"true\">\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"purposeFilter=='0'\" routerLink='.' [queryParams]=\"{purposeFilter: 'All'}\" title=\"All Connections\">All</a>\n\t\t\t\t\t\t<a *ngFor=\"let purpose of eConnectionPurposeItems | gtFilter:'key':0\" [class.active]=\"purposeFilter==purpose.key\" class=\"dropdown-item\" routerLink='.' [queryParams]=\"{purposeFilter: purpose.key}\" [title]=\"purpose.name\">{{purpose.name}}</a>\n\t\t\t\t\t</dexih-button-dropdown>\n\t\t\t\t</ng-template>\n\t\t\t\t\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.Table\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.Table'></dependent-items-button>\n\t\t\t\t</ng-template>\n\n\n\n\t\t</dexih-table>\n\n\t</dexih-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Datalinks\" path=\"/assets/help/reference/table.md\"></dexih-help>\n\n</div>\n\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubCache } from '../../hub.models';\nimport { DexihTable, eConnectionCategory, eSharedObjectType, eConnectionPurposeItems, eConnectionPurpose, eTableType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'table-index',\n    templateUrl: './table-index.component.html',\n    styles: []\n})\nexport class TableIndexComponent implements OnInit, OnDestroy {\n    private _hubCacheChangeSubscription: Subscription;\n    private _subscription: Subscription;\n\n    hubCache: HubCache;\n    purposeFilter: string;\n    connectionKey: number;\n    connectionName: string;\n    eConnectionPurposeItems = eConnectionPurposeItems;\n    eConnectionPurpose = eConnectionPurpose;\n    eSharedObjectType = eSharedObjectType;\n\n    title: string;\n\n    columns = [\n        { name: 'logicalName', title: 'Logical Name', format: 'Md', footer: 'description', tags: 'tags' },\n        { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },\n        { name: 'tableType', title: 'Table Type', format: 'Enum', enum: eTableType },\n        { name: 'connectionName', title: 'Connection', footer: 'connectionType', format: '' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<DexihTable>>(null);\n    tableData: Observable<Array<DexihTable>> = this._tableData.asObservable();\n\n\n    constructor(private hubService: HubService, private authService: AuthService, private router: Router, private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(async result => {\n                let data = result[0];\n                let params = result[1];\n                let queryParams = result[2];\n                this.hubCache = result[3];\n\n                if (!this.hubCache.isLoaded()) { return; }\n                this.purposeFilter = queryParams['purposeFilter'];\n                if (!this.purposeFilter) { this.purposeFilter = 'All' }\n\n                this.connectionKey = +queryParams['connectionKey'];\n                if (this.connectionKey) {\n                    let connection = this.hubCache.hub.dexihConnections.find(c => c.key === this.connectionKey);\n                    if (connection) {\n                        this.connectionName = connection.name;\n                    }\n                } else {\n                    this.connectionName = 'All';\n                }\n\n                await this.updateTableData();\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Table Index');\n        }\n\n        // watch for any changes in the connections.\n        this.watchChanges();\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    async updateTableData() {\n        this.title = 'Tables ';\n        this.connectionName = 'All';\n\n        if (this.purposeFilter && this.purposeFilter !== 'All') {\n            this.title += ': ' + eConnectionPurpose[this.purposeFilter];\n        }\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let tableData = [];\n            for await (const table of this.hubCache.hub.dexihTables) {\n                let connection = this.hubCache.hub.dexihConnections.find(c => c.key === table.connectionKey);\n                let connectionReference = await this.hubService.GetConnectionReference(connection);\n\n                if (\n                    ((this.purposeFilter === 'All' || !this.purposeFilter) ||\n                        (connection && connection.purpose.toString() === this.purposeFilter)) &&\n                    (!this.connectionKey || table.connectionKey === this.connectionKey)\n                ) {\n                    let name: string;\n                    if (table.tableType === eTableType.Query) {\n                        name = '(Sql Query)';\n                    } else {\n                        if (table.schema) {\n                            name = table.schema + '.' + table.name;\n                        } else {\n                            name = table.name;\n                        }\n                    }\n\n                    let tableName;\n                    if (this.hubCache.defaultTableLogicalName(table.schema, table.name) === table.logicalName) {\n                        tableName = table.logicalName\n                    } else {\n                        tableName = `${table.logicalName} (${table.name})`\n                    }\n\n                    let description = '';\n                    if ( table.logicalName !== table.name) { description = `Name: ${table.name}`}\n                    if (description) { description += '<br>' }\n                    if (table.description ) { description += table.description; }\n\n                    tableData.push({\n                        key: table.key,\n                        connectionType: connection ? eConnectionPurpose[connection.purpose] : 'undefined',\n                        connectionName: connection ? connection.name : 'undefined',\n                        description: description,\n                        tableType: table.tableType,\n                        name: name,\n                        logicalName: table.logicalName,\n                        tags: this.hubCache.getObjectTags(eSharedObjectType.Table, table.key),\n                        updateDate: table.updateDate,\n                        connectionKey: connection ? connection.key : '',\n                        isFile: connectionReference ? connectionReference.connectionCategory === eConnectionCategory.File : false,\n                        sharedIcon: table.isShared ? 'fa fa-group' : 'fa fa-user-secret',\n                        sharedToolTip: table.isShared ? 'Table is shared' : 'Table is private'\n                    });\n                }\n            };\n\n            if (this.connectionKey) {\n                let connection = this.hubCache.hub.dexihConnections.find(c => c.key === this.connectionKey);\n                if (connection) {\n                    this.connectionName = connection.name;\n                    this.title += ' for connection - ' + connection.name;\n                }\n            }\n\n            this._tableData.next(tableData);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    routeSibling(path) {\n        this.router.navigate(['..', path]);\n    }\n\n\n    editTable(table: DexihTable) {\n        this.router.navigate(['table-edit', table.key], { queryParamsHandling: 'merge', relativeTo: this.route.parent });\n    }\n\n\n    getConnection(connectionKey: number) {\n        return this.hubCache.hub.dexihConnections.find(c => c.key === connectionKey);\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Table || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateTableData();\n            }\n        });\n    }\n\n\n}\n","export { TablePreviewDataComponent } from './table-preview-data.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subscription, BehaviorSubject, Observable, combineLatest } from 'rxjs';\nimport { HubCache } from '../hub.models';\nimport { DexihTag, eSharedObjectType } from '../../shared/shared.models';\nimport { HubService } from '..';\nimport { AuthService } from '../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HubFormsService } from '../hub.forms.service';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\n\n@Component({\n    selector: 'tags',\n    templateUrl: 'tags.component.html',\n    providers: [HubFormsService],\n    animations: [\n        // trigger name for attaching this animation to an element using the [@triggerName] syntax\n        trigger('slideDown', [\n            state('hide', style({ height: 0, overflow: 'hidden' })),\n            state('show', style({ height: '*', overflow: 'unset' })),\n            transition('hide <=> show', animate('200ms ease-in')),\n        ])\n        ]\n})\nexport class TagsComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    tags: Array<DexihTag>;\n    state = 'hide';\n\n    colors = [\n        { name: 'primary', color: '#3a5f8d' },\n        { name: 'secondary', color : '#89B3BF'},\n        { name: 'success', color : '#479762'},\n        { name: 'warning', color : '#c4872a' },\n        { name: 'danger', color : '#f44336' },\n        { name: 'yellow', color : 'yellow'},\n        { name: 'pink', color : 'pink'},\n        { name: 'purple', color : 'purple'},\n        { name: 'dark', color : '#1F2624'},\n    ]\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        public formsService: HubFormsService,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let params = result[0];\n                this.hubCache = result[1];\n\n                if (params['key']) {\n                    let tag = this.hubCache.hub.dexihTags.find(c => c.key === +params['key']);\n                    if (tag) {\n                        let editTag = this.hubCache.hub.dexihTags.find(c => c.key === tag.key);\n                        this.formsService.tag(editTag);\n                        this.state = 'show';\n                    }\n                }\n\n                this.update();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'View Index');\n        }\n\n\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n\n    update() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let tags: Array<DexihTag>;\n            tags = this.hubCache.hub.dexihTags.filter(c => c.isValid);\n            let tableData = tags.map(tag => {\n                return {\n                    key: tag.key,\n                    name: tag.name,\n                    description: tag.description,\n                    color: tag.color,\n                    updateDate: tag.updateDate,\n                };\n            });\n            this._tableData.next(tableData);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    new() {\n        let tag = new DexihTag();\n        this.formsService.tag(tag);\n        this.state = 'show';\n    }\n\n    edit(tag: DexihTag) {\n        let editTag = this.hubCache.hub.dexihTags.find(c => c.key === tag.key);\n        this.formsService.tag(editTag);\n        this.state = 'show';\n        if (history.pushState) {\n            this.router.navigateByUrl(window.location.pathname + `?key=${tag.key}`);\n        }\n        document.body.scrollTop = 0; // For Safari\n        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera\n    }\n\n    delete(tags: DexihTag[]) {\n        this.hubService.deleteTags(tags);\n    }\n\n    save() {\n        this.formsService.save(false).then(() => {\n            this.hide();\n        }).catch();\n    }\n\n    cancel() {\n        this.hide();\n    }\n\n    hide() {\n        this.state = 'hide';\n        if (history.pushState) {\n            if (window.location.search) {\n                this.router.navigateByUrl(window.location.pathname);\n            }\n          }\n    }\n\n    selectColor(color) {\n        this.formsService.currentForm.controls.color.setValue(color.color);\n    }\n\n    export(items: Array<DexihTag>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(cache.hub.hubKey, '');\n        items.forEach(item => { cache.cacheAddTag(item.key, hub); });\n\n        let filename = items.length === 1 ? 'Tag - ' + items[0].name + '.json' : 'tags.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    watchChanges() {\n        // watch the current validation in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Tags) {\n                this.update();\n            }\n        });\n    }\n}\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"Tags\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-tags\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t\t<dexih-table \n\t\t\t\t[enableMultiSelect]=\"true\"\n                [enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n                [columns]=\"columns\"\n\t\t\t\t[dataObservable]=\"tableData\"\n                (rowClick)=\"edit($event)\"\n                rowStatusHeading=\"Color\"\n\t\t\t\t>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-hubVariable=\"item\">\n\t\t\t\t\t<dexih-button-edit class=\"mr-1\" (click)=\"edit(item)\"></dexih-button-edit>\n\t\t\t\t</ng-template>\n\n                    <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n                        <dexih-button-save-local class=\"mr-1\" (click)=\"export(items)\"></dexih-button-save-local>\n                        <dexih-button-delete class=\"mr-1\" *ngIf=\"hubCache.canWrite\" (click)=\"delete(items)\"></dexih-button-delete>\n                    </ng-template>\n    \n                    <ng-template #actions let-items=\"items\">\n                        <dexih-button-new class=\"mr-1\" *ngIf=\"hubCache.canWrite\" (click)=\"new()\"></dexih-button-new>\n                    </ng-template>\n\n                    <ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n\t\t\t\t\t\t<div (click)=\"edit(item)\" class=\"alert p-1 text-center\" [ngStyle]=\"{'background-color': item.color, 'margin-bottom': '0' }\">\n                            <span class=\"blend-text  font-weight-bold\">{{item.name}}</span>\n                        </div>\n\t\t\t\t\t</ng-template>\n    \n                    <ng-template #tableHeader>\n                        <div [@slideDown]='state' class=\"card mt-2\" style=\"width: 100%;\">\n                            <div class=\"card-header text-white bg-primary\">\n                                <b>Add/Edit Tag</b>\n                            </div>\n                            <div class=\"card-body\">\n                                <form *ngIf=\"formsService.currentForm\" [formGroup]=\"formsService.currentForm\">\n                                    <div class=\"form-row\">\n                                        <section class=\"form-group col-md-3\">\n                                            <form-input label=\"Tag Name\" formControlName=\"name\" placeholder=\"Enter the name.\"\n                                                [autocapitalize]=\"true\" iconClass=\"fa fa-list\" [errors]=\"formsService.formErrors['name']\">\n                                            </form-input>\n                                        </section>\n                                        <section class=\"form-group col-md-9\">\n                                            <div>\n                                                <label class=\"mt-1\">Color</label>\n                        \n                                                <div class=\"input-group m-0\">\n                                                    <label class=\"btn mr-1\" style=\"height: '38px'; width: '76px'\" [style.background-color]=\"formsService.currentForm.controls.color.value\">\n                                                        <input formControlName=\"color\" hidden type=\"color\">\n                                                    </label>\n                                                    <form-input class=\"mr-3\" style=\"height: '38px'; width: '90px'\" formControlName=\"color\" placeholder=\"color\"></form-input>\n                                                    <div class=\"btn-group-toggle\" data-toggle=\"buttons\">\n                                                        <button *ngFor=\"let color of colors\" class=\"btn mr-1\" (click)=\"selectColor(color)\" [style.background-color]=\"color.color\" style=\"height: '38px'; width: '38px'\"></button>\n                                                    </div>\n                                                </div>\n                        \n                                            </div>\n                                        </section>\n                                    </div>\n                                    <div class=\"form-row\">\n                                        <section class=\"col-md-12\">\n                                            <form-textarea label=\"Description\" [showMarkdown]=\"true\" formControlName=\"description\" placeholder=\"Enter the description.\" >\n                                            </form-textarea>\n                                        </section>\n                                    </div>\n                        \n                                </form>\n                            </div>\n                            <div class=\"card-footer\">\n                                <dexih-button-save class=\"mr-1\" (click)=\"save()\"></dexih-button-save>\n                                <dexih-button-cancel class=\"mr-1\" (click)=\"cancel()\"></dexih-button-cancel>\n                            </div>\n                        </div>\n                    </ng-template>\n    \n\t\t\t</dexih-table>\n\n\t</dexih-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Views\" path=\"/assets/help/reference/tag.md\"></dexih-help>\n\n</div>\n\n\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Observable, Subscription, BehaviorSubject, combineLatest} from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HubCache } from '../../hub.models';\nimport { DexihDatalinkTest, DexihHub, eSharedObjectType } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n  selector: 'datalink-test',\n  templateUrl: './datalinkTest-index.component.html',\n  styles: []\n})\nexport class DatalinkTestIndexComponent implements OnInit, OnDestroy {\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n    private cancelToken: CancelToken = new CancelToken();\n\n    datalinkTests: Array<DexihDatalinkTest>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', format: '', tags: 'tags'},\n        { name: 'description', title: 'Description', format: ''},\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar'},\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        this._subscription = combineLatest(\n            this.hubService.getHubCacheObservable()\n        ).subscribe(result => {\n          this.hubCache = result[0];\n          this.update();\n        });\n    } catch (e) {\n        this.hubService.addHubClientErrorMessage(e, 'Datalink Tests Index');\n      }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    delete(items: Array<DexihDatalinkTest>) {\n        this.hubService.deleteDatalinkTests(items);\n    }\n\n    snapshot(items: Array<DexihDatalinkTest>) {\n        this.hubService.runDatalinkTestSnapshot(items, this.cancelToken);\n    }\n\n    run(items: Array<DexihDatalinkTest>) {\n        let keys = items.map(c => c.key);\n        this.hubService.runDatalinkTests(keys, this.cancelToken);\n    }\n\n    update() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let items = this.hubCache.hub.dexihDatalinkTests.filter(c => c.isValid).map(c => {\n                return {\n                    key: c.key,\n                    name: c.name,\n                    description: c.description,\n                    updateDate: c.updateDate,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.DatalinkTest, c.key)\n                }\n            });\n            this._tableData.next(items);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(item: DexihDatalinkTest) {\n        this.router.navigate(['datalinkTest-edit', item.key], { relativeTo: this.route});\n    }\n\n    export(tests: Array<DexihDatalinkTest>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        hub.dexihDatalinkTests = tests;\n        let filename = 'datalink_tests.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n\n    watchChanges() {\n      // watch the current validation in case it is changed in another session.\n      this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n          if (hubCacheChange.changeClass === eSharedObjectType.DatalinkTest ||\n            hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n            this.update();\n          }\n      });\n  }\n}\n","<div class=\"container-fluid\">\n    <dexih-widget title=\"Datalink Tests\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-flag-checkered\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n \n\n\t\t<dexih-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.DatalinkTest'></dependent-items-button>\n\t\t\t</ng-template>\n\n\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.DatalinkTest\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<actions-datalinkTest-button [datalinkTests]=\"items\"></actions-datalinkTest-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n\t\t\t\t\t<datalink-status [datalinkTestKey]='item?.key'></datalink-status>\n\t\t\t\t</ng-template>\n\t\n\t\t</dexih-table>\n\n\t</dexih-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Datalink Test\" path=\"/assets/help/reference/datalinkTest.md\"></dexih-help>\n\n</div>\n\n\n","<div class=\"container\">\n\t<dexih-widget title=\"New Datalink Test(s)\"  iconClass=\"fa fa-lg fa-fw fa-exchange\" [showCloseButton]=\"true\" (close)=\"!saving && cancel()\"\n\t [padding]=\"true\">\n\t\t<ng-template #header>\n\t\t\t<dexih-button-save class=\"mr-1\" (click)=\"!saving && save()\" [busy]=\"saving\"></dexih-button-save>\n\t\t\t<dexih-button-cancel (click)=\"!saving && cancel()\" [busy]=\"saving\"></dexih-button-cancel>\n\t\t</ng-template>\n\n\t\t<ng-template #subHeader>\n\t\t\t<label class=\"label\">Create automatic tests for the following datalink(s):</label>\n\t\t\t<div>\n\t\t\t\t<div class=\"list-group d-inline-block\">\n\t\t\t\t\t<span class=\"list-group-item\" *ngFor=\"let datalink of sourceDatalinks\">\n\t\t\t\t\t\t{{datalink.name}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\n\t\t<form *ngIf=\"sourceDatalinkKeys\" [formGroup]=\"mainForm\">\n\n\t\t\t<fieldset>\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input *ngIf=\"sourceDatalinks.length == 1\" label=\"Test Name\" formControlName=\"name\" placeholder=\"Test name (leave blank for auto naming)\"\n\t\t\t\t\t\t iconClass=\"fa fa-comment\" [errors]=\"formErrors.name\"></form-input>\n\t\t\t\t\t\t<form-input *ngIf=\"sourceDatalinks.length > 1\" disabled label=\"Test Name\" placeholder=\"Test name can not be specified when creating multiple tests.\"\n\t\t\t\t\t\t iconClass=\"fa fa-comment\"></form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Audit Connection\" formControlName=\"auditConnectionKey\" [items]=\"hubCache.hub.dexihConnections\"\n\t\t\t\t\t\t\titemKey=\"key\" itemName=\"name\" [errors]=\"formErrors.auditConnectionKey\" iconClass=\"fa fa-database\"\n\t\t\t\t\t\t\tnote=\"Connection where test results are stored.\">\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select formControlName=\"sourceConnectionKey\" label=\"Input Connection\" [items]=\"managedConnections\" itemKey=\"key\"\n\t\t\t\t\t\t itemName=\"name\" note=\"Specify the connection to use for any datalink source data.\" [errors]=\"formErrors.sourceConnectionKey\"\n\t\t\t\t\t\t [allowNullSelect]=\"true\" selectNullMessage=\"No source table\"></form-select>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select formControlName=\"targetConnectionKey\" label=\"Target Connection\" [items]=\"managedConnections\" itemKey=\"key\"\n\t\t\t\t\t\t itemName=\"name\" note=\"Specify the connection for target data.\" [errors]=\"formErrors.targetConnectionKey\"\n\t\t\t\t\t\t [allowNullSelect]=\"true\" selectNullMessage=\"No target table\"></form-select>\n\t\t\t\t\t</section>\n\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"col col-11\">\n\t\t\t\t\t\t\t<form-checkbox label=\"Snapshot and copy current source/target data into the test connections.\" formControlName=\"snapshotData\"\n\t\t\t\t\t\t\t name=\"snapshotData\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\n\t</dexih-widget>\n</div>","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators, ValidatorFn, AbstractControl } from '@angular/forms';\nimport { HubService } from '../../hub.service';\nimport { Observable, Subscription, combineLatest } from 'rxjs';\nimport { Location } from '@angular/common';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { DexihConnection, DexihDatalink, eConnectionPurpose } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n  selector: 'dexih-datalinkTest-new-form',\n  templateUrl: './datalinkTest-new.component.html'\n})\nexport class DatalinkTestNewComponent implements OnInit, OnDestroy {\n\n  private _subscription: Subscription;\n  private _valueChangesSubscription: Subscription;\n  private cancelToken: CancelToken = new CancelToken();\n\n  private hubCache: HubCache;\n\n  public pageTitle: string;\n\n  hasChanged = false;\n  showAllErrors = false;\n\n  public name: string;\n  public auditConnectionKey: number;\n  public sourceConnectionKey: number;\n  public targetConnectionKey: number;\n\n  public managedConnections: Array<DexihConnection>;\n\n  public sourceDatalinkKeys: Array<number>;\n  public sourceDatalinks: Array<DexihDatalink>;\n\n  public saving = false;\n\n  mainForm: FormGroup;\n\n  formErrors = {\n    'name': '',\n    'auditConnectionKey': '',\n    'sourceConnectionKey': '',\n    'targetConnectionKey': '',\n    'snapshotData': '',\n  };\n\n  validationMessages = {\n    'name': {\n      'required': 'Name is required.',\n      'minlength': 'Name must be at least 4 characters long.',\n      'maxlength': 'Name cannot be more than 50 characters long.',\n    },\n    'auditConnectionKey': {\n    },\n    'targetConnectionKey': {\n    },\n    'sourceConnectionKey': {\n    },\n    'snapshotData': {\n    },\n  };\n\n\n  constructor(\n    private hubService: HubService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private fb: FormBuilder) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        let params = result[1];\n        this.hubCache = result[2];\n\n        this.managedConnections = this.hubCache.hub.dexihConnections\n          .filter(c => c.purpose === eConnectionPurpose.Managed)\n\n        if (this.hubCache.status === eCacheStatus.Loaded) {\n          let datalinkKeys: string = params['datalinkKeys'];\n          this.sourceDatalinkKeys = new Array<number>();\n          this.sourceDatalinks = new Array<DexihDatalink>();\n\n          if (datalinkKeys && this.hubCache.hub.dexihConnections) {\n            let datalinkKeyArray = datalinkKeys.split('|');\n            this.hubCache.hub.dexihDatalinks.forEach(datalink => {\n              if (datalinkKeyArray.findIndex(t => t === datalink.key.toString()) >= 0) {\n                this.sourceDatalinkKeys.push(datalink.key);\n                this.sourceDatalinks.push(datalink);\n              }\n            });\n          }\n\n          let targetConnection = this.hubCache.hub.dexihConnections.find(c => c.purpose === eConnectionPurpose.Managed);\n          if (targetConnection) {\n            this.targetConnectionKey = targetConnection.key;\n          }\n          this.sourceConnectionKey = this.targetConnectionKey;\n          this.auditConnectionKey = this.targetConnectionKey;\n\n          this.buildForm();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Datalink New');\n    }\n\n\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._valueChangesSubscription) { this._valueChangesSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  buildForm(): void {\n    this.mainForm = this.fb.group({\n      'name': [this.name, [\n      ]],\n      'auditConnectionKey': [this.auditConnectionKey > 0 ? this.auditConnectionKey : null, [\n        // Validators.required,\n      ]],\n      'targetConnectionKey': [this.targetConnectionKey > 0 ? this.targetConnectionKey : null, [\n        // Validators.required,\n      ]],\n      'sourceConnectionKey': [this.sourceConnectionKey > 0 ? this.sourceConnectionKey : null, [\n        // Validators.required,\n      ]],\n      'snapshotData': [true, [\n        // Validators.required,\n      ]],\n    });\n\n    if (this._valueChangesSubscription) { this._valueChangesSubscription.unsubscribe(); }\n    this._valueChangesSubscription = this.mainForm.valueChanges.subscribe(data => this.onValueChanged(data));\n    this.onValueChanged(); // (re)set validation messages now\n    this.hasChanged = false;\n  }\n\n  onValueChanged(data?: any) {\n    if (!this.mainForm) { return; }\n    const form = this.mainForm;\n\n    this.hasChanged = true;\n\n    for (const field of Object.keys(this.formErrors)) {\n      // clear previous error message (if any)\n      this.formErrors[field] = '';\n      const control = form.get(field);\n\n      if (control && (control.dirty || this.showAllErrors) && !control.valid) {\n        const messages = this.validationMessages[field];\n        for (const key of Object.keys(control.errors)) {\n          this.formErrors[field] += messages[key] + ' ';\n        }\n      }\n    }\n  }\n\n  save() {\n    if (this.mainForm.valid) {\n      let value = this.mainForm.value;\n      this.saving = true;\n      this.hubService.newDatalinkTest(\n        this.name,\n        this.sourceDatalinkKeys,\n        value.auditConnectionKey,\n        value.targetConnectionKey,\n        value.sourceConnectionKey\n      ).then(async result => {\n        if (value.snapshotData) {\n          await this.hubService.runDatalinkTestSnapshot([result], this.cancelToken);\n        }\n          this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinkTests', 'datalinkTest-edit', result.key],\n            { relativeTo: this.route.root });\n      }).catch(reason => {\n        this.saving = false;\n      });\n    } else {\n      this.showAllErrors = true;\n      this.onValueChanged();\n    }\n  }\n\n  cancel() {\n    this.location.back();\n  }\n}\n","export * from './datalinkTest-index/datalinkTest-index.component';\nexport * from './datalinkTest-new/datalinkTest-new.component';\n","export * from './view-edit.component';\n","export * from './view-index.component';\n"]}