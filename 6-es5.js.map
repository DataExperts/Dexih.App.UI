{"version":3,"sources":["webpack:///src/app/+hub/api/api-edit/api-edit.component.ts","webpack:///src/app/+hub/api/api-edit/api-edit.component.html","webpack:///src/app/+hub/api/api-edit/index.ts","webpack:///src/app/+hub/api/api-index/api-index.component.ts","webpack:///src/app/+hub/api/api-index/api-index.component.html","webpack:///src/app/+hub/api/api-index/index.ts","webpack:///src/app/+hub/columnValidation/columnValidation-edit/columnValidation-edit.component.ts","webpack:///src/app/+hub/columnValidation/columnValidation-edit/columnValidation-edit.component.html","webpack:///src/app/+hub/columnValidation/columnValidation-index/columnValidation-index.component.ts","webpack:///src/app/+hub/columnValidation/columnValidation-index/columnValidation-index.component.html","webpack:///src/app/+hub/columnValidation/index.ts","webpack:///src/app/+hub/connection/connection-edit/connection-edit.component.html","webpack:///src/app/+hub/connection/connection-edit/connection-edit.component.ts","webpack:///src/app/+hub/connection/connection-edit/index.ts","webpack:///src/app/+hub/connection/connection-import/connection-import.component.html","webpack:///src/app/+hub/connection/connection-import/connection-import.component.ts","webpack:///src/app/+hub/connection/connection-import/index.ts","webpack:///src/app/+hub/connection/connection-index/connection-index.component.html","webpack:///src/app/+hub/connection/connection-index/connection-index.component.ts","webpack:///src/app/+hub/connection/connection-index/index.ts","webpack:///src/app/+hub/connection/index.ts","webpack:///src/app/+hub/copy/export/export.component.ts","webpack:///src/app/+hub/copy/export/export.component.html","webpack:///src/app/+hub/copy/import/import.component.ts","webpack:///src/app/+hub/copy/import/import.component.html","webpack:///src/app/+hub/copy/index.ts","webpack:///src/app/+hub/customFunction/customFunction-edit/customFunction-edit.component.ts","webpack:///src/app/+hub/customFunction/customFunction-edit/customFunction-edit.component.html","webpack:///src/app/+hub/customFunction/customFunction-edit/customFunction-parameter.component.ts","webpack:///src/app/+hub/customFunction/customFunction-edit/customFunction-parameter.component.html","webpack:///src/app/+hub/customFunction/customFunction-edit/index.ts","webpack:///src/app/+hub/customFunction/customFunction-index/customFunction-index.component.ts","webpack:///src/app/+hub/customFunction/customFunction-index/customFunction-index.component.html","webpack:///src/app/+hub/customFunction/index.ts","webpack:///src/app/+hub/dashboard/dashboard-edit/dashboard-edit.component.ts","webpack:///src/app/+hub/dashboard/dashboard-edit/dashboard-edit.component.html","webpack:///src/app/+hub/dashboard/dashboard-edit/index.ts","webpack:///src/app/+hub/dashboard/dashboard-edit/item/dashboard-item.component.ts","webpack:///src/app/+hub/dashboard/dashboard-edit/item/dashboard-item.component.html","webpack:///src/app/+hub/dashboard/dashboard-index/dashboard-index.component.ts","webpack:///src/app/+hub/dashboard/dashboard-index/dashboard-index.component.html","webpack:///src/app/+hub/dashboard/dashboard-index/index.ts","webpack:///src/app/+hub/dashboard/index.ts","webpack:///src/app/+hub/datajob/datajob-edit/datajob-edit.component.ts","webpack:///src/app/+hub/datajob/datajob-edit/datajob-edit.component.html","webpack:///src/app/+hub/datajob/datajob-index/datajob-index.component.ts","webpack:///src/app/+hub/datajob/datajob-index/datajob-index.component.html","webpack:///src/app/+hub/datajob/datajob-index/index.ts","webpack:///src/app/+hub/datajob/datajob-run/datajob-run.component.ts","webpack:///src/app/+hub/datajob/datajob-run/datajob-run.component.html","webpack:///src/app/+hub/datajob/index.ts","webpack:///src/app/+hub/datalink/datalink-index/datalink-index.component.ts","webpack:///src/app/+hub/datalink/datalink-index/datalink-index.component.html","webpack:///src/app/+hub/datalink/datalink-index/index.ts","webpack:///src/app/+hub/datalink/datalink-new/datalink-new.component.ts","webpack:///src/app/+hub/datalink/datalink-new/datalink-new.component.html","webpack:///src/app/+hub/datalink/datalink-new/index.ts","webpack:///src/app/+hub/datalink/datalink-preview-data/datalink-preview-data.component.ts","webpack:///src/app/+hub/datalink/datalink-preview-data/datalink-preview-data.component.html","webpack:///src/app/+hub/datalink/datalink-preview-data/index.ts","webpack:///src/app/+hub/datalink/datalink-run/datalink-run.component.ts","webpack:///src/app/+hub/datalink/datalink-run/datalink-run.component.html","webpack:///src/app/+hub/datalink/index.ts","webpack:///src/app/+hub/files/files-bulk-load/files-bulk-load.component.html","webpack:///src/app/+hub/files/files-bulk-load/files-bulk-load.component.ts","webpack:///src/app/+hub/files/files-manage/files-manage.component.ts","webpack:///src/app/+hub/files/files-manage/files-manage.component.html","webpack:///src/app/+hub/files/index.ts","webpack:///src/app/+hub/hub.base.module.ts","webpack:///src/app/+hub/hub.base.routing.ts","webpack:///src/app/+hub/hubVariable/hubVariable-edit/hubVariable-edit.component.html","webpack:///src/app/+hub/hubVariable/hubVariable-edit/hubVariable-edit.component.ts","webpack:///src/app/+hub/hubVariable/hubVariable-index/hubVariable-index.component.ts","webpack:///src/app/+hub/hubVariable/hubVariable-index/hubVariable-index.component.html","webpack:///src/app/+hub/hubVariable/index.ts","webpack:///src/app/+hub/listOfValues/listOfValues-edit/index.ts","webpack:///src/app/+hub/listOfValues/listOfValues-edit/listOfValues-edit.component.ts","webpack:///src/app/+hub/listOfValues/listOfValues-edit/listOfValues-edit.component.html","webpack:///src/app/+hub/listOfValues/listOfValues-index/index.ts","webpack:///src/app/+hub/listOfValues/listOfValues-index/listOfValues-index.component.ts","webpack:///src/app/+hub/listOfValues/listOfValues-index/listOfValues-index.component.html","webpack:///src/app/+hub/manage/manage-users-index/manage-users-index.component.ts","webpack:///src/app/+hub/manage/manage-users-index/manage-users-index.component.html","webpack:///src/app/+hub/remoteAgent/index.ts","webpack:///src/app/+hub/remoteAgent/remoteAgent-edit/remoteAgent-edit.component.ts","webpack:///src/app/+hub/remoteAgent/remoteAgent-edit/remoteAgent-edit.component.html","webpack:///src/app/+hub/remoteAgent/remoteAgent-index/remoteAgent-index.component.html","webpack:///src/app/+hub/remoteAgent/remoteAgent-index/remoteAgent-index.component.ts","webpack:///src/app/+hub/results/index.ts","webpack:///src/app/+hub/results/results-index/index.ts","webpack:///src/app/+hub/results/results-index/results-index.component.ts","webpack:///src/app/+hub/results/results-index/results-index.component.html","webpack:///src/app/+hub/results/results-view/index.ts","webpack:///src/app/+hub/results/results-view/preview-results.component.ts","webpack:///src/app/+hub/results/results-view/preview-results.component.html","webpack:///src/app/+hub/results/results-view/profile-results.component.ts","webpack:///src/app/+hub/results/results-view/profile-results.component.html","webpack:///src/app/+hub/results/results-view/progress.component.ts","webpack:///src/app/+hub/results/results-view/progress.component.html","webpack:///src/app/+hub/results/results-view/results-view.component.ts","webpack:///src/app/+hub/results/results-view/results-view.component.html","webpack:///src/app/+hub/results/results-view/results-view.module.ts","webpack:///src/app/+hub/results/results-view/stats.component.ts","webpack:///src/app/+hub/results/results-view/stats.component.html","webpack:///src/app/+hub/search/index.ts","webpack:///src/app/+hub/search/object-type.pipe.ts","webpack:///src/app/+hub/search/search.component.ts","webpack:///src/app/+hub/search/search.component.html","webpack:///src/app/+hub/search/search.module.ts","webpack:///src/app/+hub/sharedData/sharedData-index.component.ts","webpack:///src/app/+hub/sharedData/sharedData-index.component.html","webpack:///src/app/+hub/table/table-index/index.ts","webpack:///src/app/+hub/table/table-index/table-index.component.html","webpack:///src/app/+hub/table/table-index/table-index.component.ts","webpack:///src/app/+hub/table/table-preview-data/index.ts","webpack:///src/app/+hub/tags/tags.component.ts","webpack:///src/app/+hub/tags/tags.component.html","webpack:///src/app/+hub/test/datalinkTest-index/datalinkTest-index.component.ts","webpack:///src/app/+hub/test/datalinkTest-index/datalinkTest-index.component.html","webpack:///src/app/+hub/test/datalinkTest-new/datalinkTest-new.component.html","webpack:///src/app/+hub/test/datalinkTest-new/datalinkTest-new.component.ts","webpack:///src/app/+hub/test/index.ts","webpack:///src/app/+hub/view/view-edit/index.ts","webpack:///src/app/+hub/view/view-index/index.ts"],"names":["formsService","ApiEditComponent","hubService","authService","route","router","refreshDataSubject","sourceTypes","key","Datalink","name","Table","eSourceType","connectionTables","datalinks","selectQuery","data","isLoaded","cancelToken","_subscription","params","getHubCacheObservable","subscribe","result","hubCache","action","pageTitle","status","Loaded","getConnectionTables","hub","dexihDatalinks","hasChanged","confirmDialog","then","confirm","load","reason","e","addHubClientErrorMessage","apiKey","addHubErrorMessage","dexihApis","api","find","c","watchChanges","getColumns","_formChangeSubscription","getCurrentFormObservable","form","controls","value","history","pushState","newUrl","window","location","pathname","replace","navigateByUrl","unsubscribe","_changesSubscription","currentForm","sourceDatalinkKey","valueChanges","sourceTableKey","reset","cancel","navigateUp","apiForm","sourceType","table","getTable","tableColumns","dexihTableColumns","inputColumns","getInputColumns","datalink","ioColumns","buildInputOutput","getDatalinkOutputColumns","sourceDatalinkTable","dexihDatalinkColumns","columns","filter","isInput","map","logicalName","dataType","rank","defaultValue","previewDatalinkKeyData","parameters","next","previewTableKeyData","format","downloadObject","objectKey","objectType","query","downloadData","Promise","resolve","$event","returnValue","close","refresh","selector","templateUrl","providers","ApiIndexComponent","eSharedObjectType","iconClass","tooltip","width","align","title","footer","tags","_tableData","tableData","asObservable","updateApis","_hubCacheChangeSubscription","navigate","relativeTo","apis","isValid","apiSource","getSourceDetails","updateDate","sharedIcon","isShared","sharedToolTip","getObjectTags","ColumnValidation","getHubCacheChangeObservable","hubCacheChange","changeClass","Api","TagObjects","editApi","styles","ColumnValidationEditComponent","eInvalidAction","eCleanAction","eTypeCode","InvalidActions","CleanActions","typeCodes","invalidActions","cleanActions","lookupColumnValue","eCacheStatus","_lookupColumnSubscription","connections","columnValidationKey","dexihColumnValidations","validation","getValidationLookupColumn","lookupColumnKey","column","getColumn","tableKey","testColumnValidation","testValue","testResult","ColumnValidationIndexComponent","updateValidations","validations","deleteColumnValidations","description","items","cache","createHub","hubKey","forEach","item","cacheAddColumnValidation","filename","length","exportHub","edit","ConnectionEditComponent","savingConnection","refreshingConnection","revealingConnectionString","creatingDatabase","databases","eConnectionPurposeItems","eConnectionPurpose","eConnectionCategory","variables","logger","LogC","Trace","getRemoteLibrariesObservable","remoteLibraries","dexihHubVariables","_purposeSubscription","connectionKey","dexihConnections","connection","Warning","updateDatabaseTypes","purpose","GetConnectionReference","connectionReference","defaultDatabase","updateUrl","previousConnectionKey","previousConnection","Object","assign","url","index","indexOf","substr","connectionTypes","d","Source","allowsSourceConnection","Managed","allowsManagedConnection","Target","allowsTargetConnection","connectionClassName","setValue","connectionAssemblyName","connectionCategory","Hub","server","uri","protocol","hostname","port","username","user","getUser","email","connectionString","connectionStringDisplay","decrypt","addHubMessage","password","passwordDisplay","encryptConnection","refreshConnection","addHubSuccessMessage","promptDialog","createDatabase","passwordRaw","encrypt","connectionStringRaw","save","event","getRoute","ConnectionImportComponent","showPage","showPageMessage","tableFilter","viewFilter","getRemoteAgentObservable","remoteAgent","getTables","updateFilter","tables","tableType","View","getDatabaseTableNames","cacheTables","dexihTables","i","cacheTable","t","schema","defaultSchema","entityStatus","importTables","importResult","mergeTables","isBusy","lastStatus","Error","message","deleteTables","selected","selectedTables","findIndex","informationDialog","parent","tableKeys","join","changeType","Replace","New","Delete","deletedTable","previousTable","createDate","editTable","ConnectionIndexComponent","queryParams","purposeFilter","updateConnections","deleteConnections","push","type","Connection","cacheAddConnection","editConnection","ExportComponent","getSharedObjects","cacheAddObject","label","ImportComponent","hubFormsService","automaticUpload","importActions","importOptions","_hubCacheSubscription","file","FormData","append","toString","postForm","refreshImport","files","srcElement","doImport","objects","o","property","importAction","newImport","importPackage","CustomFunctionEditComponent","eParameterDirection","outputParameters","inputParameters","outputParameterValues","inputParameterValues","functionTypes","eFunctionType","_functionTypeSubscription","customFunctionKey","dexihCustomFunctions","customFunction","functionType","getNextSequence","Condition","JoinCondition","Validate","returnType","Boolean","updateParameters","pristine","dexihCustomFunctionParameters","parametersArray","sort","a","b","position","direction","Input","Output","parameter","newParameter","oldParameter","newParameterForm","customFunctionParametersFormGroup","p","valueIndex","Array","isArray","splice","removeAt","tmpTransform","createDataTransformItem","downloadCustomFunction","testCustomFunction","syntaxMessage","returnParameterValue","converted","stack","selectedCustomFunction","functionCode","methodCode","functionResultCode","resultCode","transformItemType","CustomFunction","param","datalinkTransformItemKey","returnParam","ReturnValue","dexihFunctionParameters","CustomFunctionParameterComponent","customFunctionParameterForm","addParameter","removeParameter","eBasicType","ignoreChanges","emit","add","remove","CustomFunctionIndexComponent","updateCustomFunctions","functions","deleteCustomFunctions","cacheAddCustomFunction","DashboardEditComponent","isRefreshing","refreshComplete","views","dexihViews","dashboardKey","dashboard","dexihDashboards","JSON","parse","stringify","minCols","maxCols","minRows","maxRows","autoRefresh","runTime","showEdit","previewDashboard","keys","dexihDashboardItems","dashboardItemKey","getRemoteResponse","dataKey","constructDataTableColumns","lock","viewKey","view","cols","rows","x","y","found","row","col","occupied","currentItem","formGroup","dashboardItem","updateDashboardItemView","downloadObjects","DashboardItemComponent","showPreview","isMaximized","onRemove","onMaximize","eViewType","firstLoad","dialogOpen","dataRows","isHubCacheLoaded","_refreshDataSubscription","dataResult","viewConfig","animateConfig","parentParameters","_parametersSubscription","_viewKeySubscription","changes","itemChange","newItem","currentValue","preview","previewViewKey","results","preventDefault","stopPropagation","removeItem","styleUrls","DashboardIndexComponent","updateDashboards","deleteDashboards","dashboards","Dashboard","cacheAddDashboard","DatajobEditComponent","ngOnDestroy","datajobKey","dexihDatajobs","datajob","newDatajob","createDefaultDatajob","DatajobIndexComponent","updateDatajobs","datajobs","Datajob","editDatajob","DatajobRunComponent","truncateTable","resetIncremental","resetValue","datajobKeys","datajobKeyArray","split","runDatajobs","activateDatajobs","DatalinkIndexComponent","eDatalinkType","eDatalinkTypeItems","typeFilter","updateDatalinks","newDatalinks","datalinkType","datalinkData","sourceName","targetName","sourceTable","sourceDatalink","Rows","isQuery","dexihDatalinkTargets","queryParamsHandling","editDatalink","DatalinkNewComponent","fb","showAllErrors","addSourceColumns","auditColumnTypes","AutoIncrement","IsCurrentField","Version","ValidFromDate","ValidToDate","CreateDate","UpdateDate","CreateAuditKey","UpdateAuditKey","allAuditColumns","savingDatalink","formErrors","validationMessages","managedTargetConnections","managedConnections","updateTables","targetConnectionKey","targetConnection","auditConnectionKey","General","buildForm","_valueChangesSubscription","sourceTableKeys","sourceTables","mainForm","group","required","onValueChanged","field","control","get","dirty","valid","messages","errors","auditColumns","createDatalinks","openDatalink","root","back","iteration","setTimeout","DatalinkPreviewDataComponent","eDataObjectType","previewUpdates","DatalinkRunComponent","datalinkKeys","datalinkKeyArray","datalinkKey","datalinkName","runDatalinks","FilesBulkLoadComponent","entityType","canEdit","formatTypes","eFileStatus","uploadedFiles","reference","currentTable","uploadColumns","fileConnections","ref","con","File","bulkLoadForm","Text","updateConnection","_connectionKeySubscription","_flatFilesSubscription","getFlatFilesObservable","flatFileReady","getConnection","doUpload","prototype","call","bulkLoad","bulkUploadFiles","fileFormatKey","formatType","includeFileName","includeFileDate","includeFileRowNumber","fileHandler","concat","upload","success","newTables","saveTables","savedTable","id","FilesManageComponent","updateStrategy","Reload","updateStrategies","path","None","eFlatFilePath","eFlatFilePathItems","fc","Incoming","refreshFiles","allowsFlatFiles","getFileList","fileName","deleteFiles","toPath","moveFiles","downloadFiles","uploadFile","HubBaseModule","ngModule","imports","declarations","exports","resultViewRoute","children","pathMatch","component","tableRoutes","loadChildren","m","TableEditModule","datalinkRoutes","DatalinkEditModule","tablesRoute","connectionRoutes","canDeactivate","connectionsRoute","agentRoutes","agentsRoute","resultRoutes","manageRoute","importRoute","exportRoute","sharedDataRoute","DashboardEditModule","customFunctionRoutes","customFunctionRoute","columnValidationRoutes","columnValidationsRoute","fileFormatRoutes","fileFormatsRoute","viewRoutes","viewRoute","dashboardRoutes","dashboardRoute","lovRoutes","lovRoute","apiRoutes","apiRoute","hubVariableRoutes","hubVariablesRoute","tagsRoute","datalinkTestRoutes","DatalinkTestEditModule","datalinkTestsRoute","filesRoutes","FilesBulkLoadModule","filesRoute","datalinksRoute","datajobRoutes","DatajobEditModule","datajobsRoute","searchRoute","redirectTo","routes","BaseRouting","forChild","HubVariableEditComponent","_isEncryptedSubscription","hubVariableKey","hubVariable","isEncrypted","valueRaw","HubVariableIndexComponent","updateVariables","deleteHubVariables","HubVariable","variable","vars","ListOfValuesEditComponent","eLOVObjectType","_sourceChangeSubscription","listOfValuesKey","dexihListOfValues","listOfValues","refreshColumns","previewListOfValues","listOfValuesItem","staticData","insert","ListOfValuesIndexComponent","update","lov","deleteListOfValues","ListOfValues","lovItem","getListOfValuesCache","ManageUsersIndexComponent","ePermission","ePermissionItems","permission","PublishReader","emails","sendInvites","refreshUsers","getHubUsers","users","userNames","userName","setUserPermissions","dexihMessage","addSuccessMessage","alertEmail","userIds","setUserAlerts","removeUsers","RemoteAgentEditComponent","isNew","getRemoteAgentsObservable","remoteAgents","remoteAgentKey","remoteAgentHubKey","activeAgent","ipAddress","remoteAgentHub","dexihRemoteAgentHubs","isAuthorized","isDefault","ipAddressesControl","ipAddresses","saveRemoteAgent","RemoteAgentIndexComponent","statusFilter","updateRemoteAgents","connected","dataPrivacyStatus","lastLoginDateTime","lastLoginIpAddress","remoteAgentId","RemoteAgent","agentHub","agent","deleteRemoteAgent","ResultsIndexComponent","auditTypes","datalinkTests","auditType","hubPath","getHubUrl","datalinkKeysString","datajobKeysString","datalinkTestsKeysString","_transformWriterResultChangeSubscription","auditKey","connectionKeys","dexihDatalinkTests","uniqueKeys","ar","getAuditResults","getTransformWriterResultChangeObservable","writerResult","referenceKey","existingResult","showResult","PreviewResultsComponent","auditResult","targetTable","testStep","getDatalinkTestStep","testDatalink","testTable","errorTableName","errorSchema","errorConnectionKey","deltaType","NonTrackingField","auditCol","Int64","opCol","CharArray","maxLength","DatabaseOperation","reasonCol","String","UpdateReason","runningQuery","createAuditColumn","updateAuditColumn","column1","operator","IsEqual","value2","andOr","Or","compareDataType","filters","createSelectQuery","previewTableDataQuery","Csv","ProfileResultsComponent","showDetailed","previewProfileData","downloadProfileData","ProgressComponent","percent","total","ResultsViewComponent","getResultDetail","r","ResultsViewModule","StatsComponent","exceptionHidden","fail","eRunStatus","eTriggerMethod","endTime","Date","valueOf","startTime","runStatus","Running","RunningErrors","Started","Abended","Cancelled","Failed","FinishedErrors","Finished","Passed","barChartData","rowsPerSecond","rowsReadPrimary","rowsReadReference","readTicks","rowsTotal","processingTicks","writeTicks","parts","ticks","ObjectTypePipe","SearchComponent","searchObjectTypes","eSearchObjectType","isFirst","searchObject","searchForm","updateSearch","_searchSubscription","pipe","newValue","searchResults","search","searchString","SearchModule","SharedDataIndexComponent","snapshot","updateSharedData","objectTypeName","dataObjects","dataObject","shareItems","TableIndexComponent","connectionName","updateTableData","Query","defaultTableLogicalName","tableName","connectionType","isFile","TagsComponent","state","colors","color","tag","dexihTags","editTag","document","body","scrollTop","documentElement","deleteTags","hide","cacheAddTag","Tags","height","overflow","animations","DatalinkTestIndexComponent","deleteDatalinkTests","runDatalinkTestSnapshot","runDatalinkTests","DatalinkTest","tests","DatalinkTestNewComponent","saving","sourceDatalinkKeys","sourceDatalinks","sourceConnectionKey","newDatalinkTest","snapshotData"],"mappings":"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","file":"6-es5.js","sourcesContent":["import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { HubCache, eCacheStatus, ConnectionTables } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { Subscription, combineLatest, merge, Subject} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { InputOutputColumns } from '../../hub.lineage.models';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { eSourceType, DexihDatalink, InputColumn, DexihColumnBase, SelectQuery, DexihApi, DownloadObject, eDataObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'dexih-api-edit-form',\n  templateUrl: './api-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class ApiEditComponent implements OnInit, OnDestroy {\n  public apiKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _changesSubscription: Subscription;\n\n  public refreshDataSubject: Subject<void> = new Subject<void>();\n\n  sourceTypes = [\n    { key: eSourceType.Datalink, name: 'Datalink' },\n    { key: eSourceType.Table, name: 'Table' }\n  ];\n\n  eSourceType = eSourceType;\n\n  public connectionTables: ConnectionTables[] = [];\n  public datalinks: DexihDatalink[] = [];\n\n  public inputColumns: InputColumn[];\n  public tableColumns: DexihColumnBase[];\n  selectQuery: SelectQuery = new SelectQuery();\n\n  columns: Array<any>;\n  public data: Array<any> = [];\n  private isLoaded = false;\n\n  private cancelToken = new CancelToken();\n\n  constructor(\n    private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.hubCache && this.hubCache.isLoaded()) {\n          this.connectionTables = this.hubCache.getConnectionTables();\n          this.datalinks = this.hubCache.hub.dexihDatalinks;\n        }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n        if (this.hubCache.isLoaded()) {\n          if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded || this.isLoaded) { return; }\n          this.isLoaded = true;\n        }\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Api Edit');\n    }\n  }\n\n  load() {\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.apiKey = + this.params['apiKey'];\n\n      if (!this.apiKey) {\n        this.hubService.addHubErrorMessage('There was no api specified to edit.');\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihApis) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n\n          let api = this.hubCache.hub.dexihApis.find(c => c.key === this.apiKey);\n\n          this.selectQuery = api.selectQuery;\n          if (!this.selectQuery) { this.selectQuery = new SelectQuery(); }\n\n          this.formsService.api(api);\n          this.watchChanges();\n\n          this.getColumns();\n          // this.refresh();\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let api = new DexihApi();\n      this.formsService.api(api);\n      this.watchChanges();\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/api-new', `/api-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n  }\n\n  watchChanges() {\n    if (this._changesSubscription) { this._changesSubscription.unsubscribe(); }\n    this._changesSubscription = merge(\n      this.formsService.currentForm.controls.sourceDatalinkKey.valueChanges,\n      this.formsService.currentForm.controls.sourceTableKey.valueChanges\n    ).subscribe(() => {\n      this.reset();\n      this.selectQuery = new SelectQuery();\n      this.getColumns();\n  //    this.refresh();\n  });\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._changesSubscription) { this._changesSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n  getColumns() {\n    let apiForm = this.formsService.currentForm;\n\n    if (apiForm.controls.sourceType.value === eSourceType.Table && apiForm.controls.sourceTableKey.value > 0) {\n      let table = this.hubCache.getTable(apiForm.controls.sourceTableKey.value);\n      if (table) {\n        this.tableColumns = table.dexihTableColumns;\n        this.inputColumns = this.getInputColumns(table.dexihTableColumns);\n        return;\n      } else {\n        this.reset();\n      }\n    } else {\n      this.reset();\n    }\n\n    if (apiForm.controls.sourceType.value === eSourceType.Datalink && apiForm.controls.sourceDatalinkKey.value > 0) {\n      let datalink = this.datalinks.find(c => c.key === apiForm.controls.sourceDatalinkKey.value);\n      if (datalink) {\n        const ioColumns = new InputOutputColumns();\n        ioColumns.buildInputOutput(this.hubCache, datalink);\n        this.tableColumns = ioColumns.getDatalinkOutputColumns(datalink);\n        this.inputColumns = this.getInputColumns(datalink.sourceDatalinkTable.dexihDatalinkColumns);\n      } else {\n        this.reset();\n      }\n    } else {\n      this.reset();\n    }\n  }\n\n  getInputColumns(columns: DexihColumnBase[]): InputColumn[] {\n    let inputColumns = columns.filter(c => c.isInput).map(c => {\n      return <InputColumn>  {\n          name: c.name, logicalName: c.logicalName, dataType: c.dataType, rank: c.rank, value: c.defaultValue};\n    });\n\n    return inputColumns;\n  }\n\n  reset() {\n    this.tableColumns = [];\n    this.inputColumns = [];\n    this.columns = null;\n    this.data = null;\n  }\n\n  refresh() {\n    let apiForm = this.formsService.currentForm;\n    if (apiForm.controls.sourceType.value === eSourceType.Datalink) {\n      this.hubService.previewDatalinkKeyData(apiForm.controls.sourceDatalinkKey.value, false,\n        this.selectQuery, this.inputColumns, apiForm.controls.parameters.value, this.cancelToken).then((result) => {\n        this.refreshDataSubject.next();\n        this.columns = result.columns;\n        this.data = result.data;\n      }).catch(() => {\n      });\n\n    }\n    if (apiForm.controls.sourceType.value === eSourceType.Table) {\n      this.hubService.previewTableKeyData(apiForm.controls.sourceTableKey.value,\n          false, this.selectQuery, this.inputColumns, apiForm.controls.parameters.value, this.cancelToken).then((result) => {\n        this.columns = result.columns;\n        this.data = result.data;\n      }).catch(() => {\n      });\n    }\n  }\n\n  download(format) {\n    let api = <DexihApi>this.formsService.currentForm.value;\n    let downloadObject = new DownloadObject();\n    if (api.sourceType === eSourceType.Table) {\n      downloadObject.objectKey = api.sourceDatalinkKey;\n      downloadObject.objectType = eDataObjectType.Datalink;\n    }\n    if (api.sourceType === eSourceType.Table) {\n      downloadObject.objectKey = api.sourceTableKey;\n      downloadObject.objectType = eDataObjectType.Table;\n    }\n\n    downloadObject.query = this.selectQuery;\n    this.hubService.downloadData([downloadObject], false, format, this.cancelToken)\n  }\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The api has not been saved',\n          'The api changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The api changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","<div class=\"container\">\n\t<d-widget title=\"Edit API\" iconClass=\"fa fa-lg fa-fw fa-feed\" [showCloseButton]=\"true\" [padding]=\"false\"\n\t\t(close)=\"close()\">\n\t\t<ng-template #header>\n\t\t\t<dexih-invalid-form-details [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\"\n\t\t\t\tclass=\"mr-1\"></dexih-invalid-form-details>\n\t\t\t<download-button class=\"mr-1\" (download)=\"download($event)\"></download-button>\n\t\t\t<save-button *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\" class=\"mr-1\"></save-button>\n\t\t\t<cancel-button [formsService]=\"formsService\"></cancel-button>\n\t\t</ng-template>\n\n\t\t<d-widget-section title=\"Properties\" [showExpandButton]=\"true\">\n\t\t\t<form *ngIf=\"formsService.currentForm\" [formGroup]=\"formsService.currentForm\">\n\t\t\t\t<fieldset>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<form-input label=\"Api Name\" formControlName=\"name\" placeholder=\"Enter the api name.\"\n\t\t\t\t\t\t\t[autocapitalize]=\"true\" iconClass=\"fa fa-list\" [errors]=\"formsService.formErrors['name']\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<form-textarea label=\"Description\" [showMarkdown]=\"true\" formControlName=\"description\"\n\t\t\t\t\t\t\tplaceholder=\"Enter the description.\">\n\t\t\t\t\t\t</form-textarea>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-checkbox label=\"Auto Start\" formControlName=\"autoStart\"\n\t\t\t\t\t\t\t\t\tnote=\"Re-start the API when the remote agent is restarted.\">\n\t\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-input label=\"Log Directory\" formControlName=\"logDirectory\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter a directory to log api updates.\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\t\t\t\t[errors]=\"formsService.formErrors['logDirectory']\"\n\t\t\t\t\t\t\t\t\tnote=\"Directory to create detailed logs of API calls.  Leave blank to exclude file logging.\">\n\t\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-checkbox label=\"Cache Queries\" formControlName=\"cacheQueries\"\n\t\t\t\t\t\t\t\t\tnote=\"Cache API called to improve performance\">\n\t\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-time label=\"Reset Cache Interval\" formControlName=\"cacheResetInterval\"\n\t\t\t\t\t\t\t\t\t[errors]=\"formsService.formErrors['resetCacheInterval']\"\n\t\t\t\t\t\t\t\t\tnote=\"The interval to reset the cache (forcing a reload of new data).\">\n\t\t\t\t\t\t\t\t</form-time>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-select label=\"Data Source Type\" formControlName=\"sourceType\" [items]=\"sourceTypes\"\n\t\t\t\t\t\t\t\t\titemKey=\"key\" itemName=\"name\" iconClass=\"fa fa-database\"\n\t\t\t\t\t\t\t\t\tnote='Specify the source type for this view' [enableFilter]=\"false\">\n\t\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\"\n\t\t\t\t\t\t\t\t*ngIf=\"formsService.currentForm.value.sourceType == eSourceType.Table\">\n\t\t\t\t\t\t\t\t<form-select label=\"Source Table\" formControlName=\"sourceTableKey\"\n\t\t\t\t\t\t\t\t\t[errors]=\"errors?.sourceTableKey\" [items]=\"connectionTables\" parentName=\"name\"\n\t\t\t\t\t\t\t\t\tchildItems=\"dexihTables\" itemKey=\"key\" itemName=\"logicalName\"\n\t\t\t\t\t\t\t\t\tnote=\"Select the source table\">\n\t\t\t\t\t\t\t\t\t<table-edit-button [key]=\"formsService.currentForm.controls.sourceTableKey.value\"></table-edit-button>\n\t\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\"\n\t\t\t\t\t\t\t\t*ngIf=\"formsService.currentForm.value.sourceType == eSourceType.Datalink\">\n\t\t\t\t\t\t\t\t<form-select label=\"Source Datalink\" formControlName=\"sourceDatalinkKey\"\n\t\t\t\t\t\t\t\t\t[errors]=\"errors?.sourceDatalinkKey\" [items]=\"datalinks\" itemKey=\"key\"\n\t\t\t\t\t\t\t\t\titemName=\"name\" note='Select the source datalink'>\n\t\t\t\t\t\t\t\t\t<datalink-edit-button [key]=\"formsService.currentForm.controls.sourceDatalinkKey.value\"></datalink-edit-button>\n\t\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</fieldset>\n\t\t\t</form>\n\t\t</d-widget-section>\n\n\t\t<d-widget-section *ngIf=\"formsService.currentForm\"  title=\"Parameters\" [showExpandButton]=\"true\" [padding]=\"true\">\n\t\t\t<input-parameters [showEdit]=\"true\" [parameters]=\"formsService.currentForm.controls.parameters\"\n\t\t\t\t[formsService]=\"formsService\">\n\t\t\t</input-parameters>\n\t\t</d-widget-section>\n\n\t\t<d-widget-section title=\"Data\" [showExpandButton]=\"true\">\n\n\t\t\t<div class=\"d-flex flex-wrap pt-1\" *ngIf=\"inputColumns && inputColumns.length > 0\">\n\t\t\t\t<span *ngFor=\"let column of inputColumns; let i = index\" class=\"input-group\">\n\t\t\t\t\t<div class=\"input-group-prepend\">\n\t\t\t\t\t\t<div class=\"input-group-text\">\n\t\t\t\t\t\t\t{{column.logicalName}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<form-input name=\"column{{i}}\" class=\"form-control p-0\"\n\t\t\t\t\t\t[placeholder]=\"'Enter ' + column.logicalName\" [(ngModel)]=\"column.value\"></form-input>\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<section>\n\t\t\t\t<h5>Data Configuration</h5>\n\t\t\t\t<query-builder [selectQuery]=\"selectQuery\" [columns]=\"tableColumns\" [inputColumns]=\"inputColumns\" [parameters]=\"formsService?.currentForm?.controls.parameters.value\" [refreshEvent]=\"refreshDataSubject.asObservable()\" (onRefreshData)=\"refresh()\">\n\t\t\t\t</query-builder>\n\t\t\t</section>\n\n\t\t\t<d-table [enableMultiSelect]=\"false\" [enableSaveCsv]=\"true\" [columns]=\"columns\" [data]=\"data\">\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<d-button-refresh class=\"mr-1\" (click)=\"refresh()\" text=\"Reload\"></d-button-refresh>\n\t\t\t\t</ng-template>\n\t\t\t</d-table>\n\t\t</d-widget-section>\n\t</d-widget>\n\n\t<dexih-help class=\"m-3\" title=\"Connections\" path=\"/assets/help/reference/api.md\"></dexih-help>\n</div>","export * from './api-edit.component';\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { DexihApi, eSourceType, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'apis',\n    templateUrl: './api-index.component.html',\n    styles: []\n})\nexport class ApiIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    apis: Array<DexihApi>;\n\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },\n        { name: 'apiSource', title: 'Api Source' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n\n                this.updateApis();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'View Index');\n        }\n\n\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    editApi(api: DexihApi) {\n        this.router.navigate(['api-edit', api.key], { relativeTo: this.route });\n    }\n\n    updateApis() {\n        if (this.hubCache.isLoaded()) {\n            let apis: Array<DexihApi>;\n            apis = this.hubCache.hub.dexihApis.filter(c => c.isValid);\n\n            let tableData = apis.map(api => {\n                return {\n                    key: api.key,\n                    name: api.name,\n                    apiSource: this.getSourceDetails(api),\n                    updateDate: api.updateDate,\n                    sharedIcon: api.isShared ? 'fa fa-group' : 'fa fa-user-secret',\n                    sharedToolTip: api.isShared ? 'Table is shared' : 'Table is private',\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.ColumnValidation, api.key)\n                };\n            });\n            this._tableData.next(tableData);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    getSourceDetails(api: DexihApi): string {\n        if (api.sourceType === eSourceType.Table) {\n            let table = this.hubCache.getTable(api.sourceTableKey);\n            if (table) {\n                return 'Table: ' + table.name;\n            } else {\n                return 'Error: Table not found';\n            }\n        } else {\n            let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === api.sourceDatalinkKey);\n            if (datalink) {\n                return 'Datalink: ' + datalink.name;\n            } else {\n                return 'Error: Datalink not found';\n            }\n        }\n\n        return 'Error: Source not configured';\n    }\n\n\n\n    watchChanges() {\n        // watch the current validation in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Api || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateApis();\n            }\n        });\n    }\n}\n","<div class=\"container-fluid\">\n    <d-widget title=\"Api's\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-feed\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t\t<d-table \n\t\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t\t[columns]=\"columns\"\n\t\t\t\t[dataObservable]=\"tableData\"\n\t\t\t\t(rowClick)=\"editApi($event)\"\n\t\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t\t>\n\t\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.ColumnValidation\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.Api'></dependent-items-button>\n\t\t\t\t\t</ng-template>\n\t\n\n\t\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t\t<actions-api-button [apis]=\"items\"></actions-api-button>\n\t\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n\t\t\t\t\t\t<api-status [apiKey]='item?.key'></api-status>\n\t\t\t\t\t</ng-template>\n\t\t\t</d-table>\n\n\t\t</d-widget>\n\t\t\n\t\t<dexih-help class=\"m-3\"  title=\"Connections\" path=\"/assets/help/reference/api.md\"></dexih-help>\n</div>\n\n\n","export * from './api-index.component';\n","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { HubCache, InvalidActions, CleanActions, eCacheStatus } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { TypeCodes } from '../../hub.remote.models';\nimport { eInvalidAction, eCleanAction, eTypeCode, DexihConnection, DexihColumnValidation } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n  selector: 'dexih-columnValidation-edit-form',\n  templateUrl: './columnValidation-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class ColumnValidationEditComponent implements OnInit, OnDestroy {\n\n  private columnValidationKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public params: Params;\n  public pageTitle: string;\n\n  eInvalidAction = eInvalidAction;\n  eCleanAction = eCleanAction;\n  eTypeCode = eTypeCode;\n  InvalidActions = InvalidActions;\n  CleanActions = CleanActions;\n\n  typeCodes = TypeCodes;\n  invalidActions = InvalidActions;\n  cleanActions = CleanActions;\n\n  public testValue: string;\n  public testResult: any;\n\n  public lookupColumnValue = '';\n\n  public connections: Array<DexihConnection>;\n  private isLoaded = false;\n\n  public eCacheStatus = eCacheStatus;\n  public cancelToken: CancelToken = new CancelToken();\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n  private _lookupColumnSubscription: Subscription;\n\n  constructor(private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Column Validation');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._lookupColumnSubscription) { this._lookupColumnSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  private load() {\n    this.connections = this.hubCache.getConnectionTables();\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.columnValidationKey = +this.params['validationKey'];\n\n      if (!this.columnValidationKey) {\n        this.hubService.addHubErrorMessage('There was no validation specified to edit.');\n        // this.errorMessage = 'There was no validation specified to edit.';\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihColumnValidations) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let validation = this.hubCache.hub.dexihColumnValidations.find(c => c.key === this.columnValidationKey);\n          this.formsService.validation(validation);\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let validation = new DexihColumnValidation();\n      this.formsService.validation(validation);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/columnValidation-new', `/columnValidation-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n\n    this.isLoaded = true;\n\n    this.getValidationLookupColumn();\n    if (this._lookupColumnSubscription) { this._lookupColumnSubscription.unsubscribe(); }\n    this._lookupColumnSubscription = this.formsService.currentForm.controls.lookupColumnKey.valueChanges.subscribe(() => {\n      this.getValidationLookupColumn();\n    });\n  }\n\n  getValidationLookupColumn() {\n    let lookupColumnKey = this.formsService.currentForm.controls.lookupColumnKey.value;\n    if (lookupColumnKey) {\n      let column = this.hubCache.getColumn(lookupColumnKey);\n      if (column) {\n        let table = this.hubCache.getTable(column.tableKey);\n        this.lookupColumnValue = 'Exists in table:' + table.name + ', column:' + column.name;\n      } else {\n        this.lookupColumnValue = 'Column not found.  Re-select a valid column.';\n      }\n    } else {\n      this.lookupColumnValue = '';\n    }\n  }\n\n  test() {\n    this.hubService.testColumnValidation(this.formsService.currentForm.value, this.testValue, this.cancelToken).then(result => {\n      this.testResult = result;\n    });\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The view has not been saved',\n          'The column validation changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The column validation changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","\t<div class=\"container\">\n\t<d-widget \n\ttitle=\"Edit Validation\" \n\ticonClass=\"fa fa-lg fa-fw fa-check-square-o\" \n\t[showCloseButton]=\"true\"\n\t(close)=\"close()\"\n\t[padding]=\"true\"\n\t>\n        <ng-template #header>\n\t\t\t<div class=\"d-inline-flex\">\n\t\t\t\t<ng-template [ngIf]=\"hubCache && hubCache.status === eCacheStatus.Loaded\">\n\t\t\t\t\t<dexih-invalid-form-details class=\"mr-1\" [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\"></dexih-invalid-form-details>\n\t\t\t\t\t<div *ngIf=\"hubCache.canWrite\" >\n\t\t\t\t\t\t<div class=\"input-group mr-1\">\n\t\t\t\t\t\t\t<div class=\"input-group-prepend\">\n\t\t\t\t\t\t\t\t<button class=\"btn btn-primary\" type=\"button\" (click)=\"test()\"><i\tclass=\"fa fa-check-circle-o\"></i></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" placeholder=\"Test value\" [(ngModel)]=\"testValue\" style=\"max-width: 100px\" aria-label=\"\" aria-describedby=\"basic-addon1\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<save-button class=\"mr-1\" *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\"></save-button>\n\t\t\t\t</ng-template>\n\t\t\t\t<cancel-button class=\"mr-1\" [formsService]=\"formsService\"></cancel-button>\n\t\t\t</div>\n        </ng-template>\n\n\t\t<form *ngIf=\"formsService.currentForm\"  [formGroup]=\"formsService.currentForm\">\n\t\t\t<fieldset>\n\t\t\t\t<section *ngIf=\"testResult\">\n\t\t\t\t\t<div class=\"alert \" [class.alert-danger]=\"testResult.success == false\" [class.alert-success]=\"testResult.success == true\">\n\t\t\t\t\t\tTest Result = {{testResult.success}} \n\t\t\t\t\t\t<div *ngIf=\"testResult.cleanedValue\">Cleaned Value = {{testResult.cleanedValue}} </div>\n\t\t\t\t\t\t<div *ngIf=\"testResult.rejectReason\">Reject Reason = {{testResult.rejectReason}} </div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Column Validation Name\" formControlName=\"name\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\" [autocapitalize]=\"true\" [errors]=\"formsService.formErrors['name']\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Data Type\" formControlName=\"dataType\" [items]=\"typeCodes\" itemKey=\"key\" itemName=\"name\">\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t<section>\n\t\t\t\t<form-textarea label=\"Description\" [showMarkdown]=\"true\"  formControlName=\"description\" placeholder=\"Enter the description.\" >\n\t\t\t\t</form-textarea>\n\t\t\t</section>\n\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Validation Fail Action\" formControlName=\"invalidAction\" [items]=\"InvalidActions\" itemKey=\"key\" itemName=\"name\"\n\t\t\t\t\t\t\tnote='Action to take when the validation fails.'>\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section *ngIf=\"formsService.currentForm.value.invalidAction==eInvalidAction.Clean || formsService.currentForm.value.invalidAction==eInvalidAction.RejectClean\" class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Clean Action\" formControlName=\"cleanAction\" [items]=\"cleanActions\" itemKey=\"key\" itemName=\"name\"\n\t\t\t\t\t\t\tnote='Clean Action to apply'>\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<section *ngIf=\"(formsService.currentForm.value.invalidAction == eInvalidAction.RejectClean || formsService.currentForm.value.invalidAction == eInvalidAction.Clean) && formsService.currentForm.value.cleanAction == eCleanAction.CleanValue\" >\n\t\t\t\t\t<form-input label=\"Clean Value\" formControlName=\"cleanValue\" placeholder=\"Enter the clean value.\" iconClass=\"fa fa-list\" >\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\n\t\t\t\t<section >\n\t\t\t\t\t<form-checkbox label=\"Ignore null values.\" formControlName=\"allowDbNull\" >\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\n\t\t\t\t<div class=\"form-row\" *ngIf=\"formsService.currentForm.value.dataType==eTypeCode.String || formsService.currentForm.value.dataType==eTypeCode.Char\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Minimum String Length\" formControlName=\"minLength\" placeholder=\"Enter the minimum string length\" type=\"number\" iconClass=\"fa fa-list\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Maximum String Length\" formControlName=\"maxLength\" placeholder=\"Enter the maximum string length\" type=\"number\" iconClass=\"fa fa-list\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<section *ngIf=\"formsService.currentForm.value.dataType==eTypeCode.String || formsService.currentForm.value.dataType==eTypeCode.Char\" >\n\t\t\t\t\t\t<form-input label=\"Simple Pattern Match\" formControlName=\"patternMatch\" placeholder=\"Provide a match string\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\tnote=\"Simple pattern match, use the format - A=Upper, a=Lower, Z=Any Character, 9=numeric.  (For example: AA999 matches AS123)\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\t\t\t\t<section *ngIf=\"formsService.currentForm.value.dataType==eTypeCode.String || formsService.currentForm.value.dataType==eTypeCode.Char\" >\n\t\t\t\t\t\t<form-input label=\"Regular Expression Match\" formControlName=\"regexMatch\" placeholder=\"Provide a regular expression\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\tnote=\"Use a standard regular expression to validate.  For example [A-Za-z0-9] will ensure string only contains characters and numbers.\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\n\n\t\t\t\t<div class=\"form-row\" *ngIf=\"formsService.currentForm.value.dataType!=eTypeCode.String && formsService.currentForm.value.dataType!=eTypeCode.Char\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Minimum Value\" formControlName=\"minValue\" placeholder=\"Enter the minimum value\" type=\"number\" iconClass=\"fa fa-list\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Maximum Value\" formControlName=\"maxValue\" placeholder=\"Enter the maximum value\" type=\"number\" iconClass=\"fa fa-list\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-tags label=\"Restrict to list of values\" formControlName=\"listOfValues\" placeholder=\"Provide a list of values which are valid.\" >\n\t\t\t\t\t</form-tags>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-tags label=\"Excluded list of values\" formControlName=\"listOfNotValues\" placeholder=\"Provide a list of values which are valid.\" >\n\t\t\t\t\t</form-tags>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-select label=\"Restrict to values that exist in a lookup table column\" \n\t\t\t\t\t\tformControlName=\"lookupColumnKey\" \n\t\t\t\t\t\t[items]=\"connections\" \n\t\t\t\t\t\tgrandParentName=\"name\"\n\t\t\t\t\t\tparentName=\"name\"\n\t\t\t\t\t\titemKey=\"key\"\n\t\t\t\t\t\titemName=\"name\"\n\t\t\t\t\t\tchildItems=\"dexihTables\"\n\t\t\t\t\t\tgrandChildItems=\"dexihTableColumns\"\n\t\t\t\t\t\t[allowNullSelect]=\"true\"\n\t\t\t\t\t\tnote='Checks the selected table column, and ensures the value contains at least one match.'>\n\t\t\t\t\t</form-select>\n\t\t\t\t</section>\n\n\t\t\t\t<section >\n\t\t\t\t\t<form-checkbox label=\"Only lookup values where the 'is current' column is true.\" formControlName=\"lookupIsValid\" >\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\n\t\t\t\t<section >\n\t\t\t\t\t<form-checkbox label=\"Allow valid when lookup returns multiple rows.\" formControlName=\"lookupMultipleRecords\" >\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\t\t\t\t\n\t\t\t</fieldset>\n\t\t</form>\n \n    </d-widget>\n\n</div>","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { DexihColumnValidation, DexihHub, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'columnValidations',\n  templateUrl: './columnValidation-index.component.html',\n  styles: []\n})\nexport class ColumnValidationIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    validations: Array<DexihColumnValidation>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar'},\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                this.hubCache = result[0];\n                this.updateValidations();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Column Validation Index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    deleteValidations(validations: Array<DexihColumnValidation>) {\n        this.hubService.deleteColumnValidations(validations);\n    }\n\n    updateValidations() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let validations = this.hubCache.hub.dexihColumnValidations.filter(c => c.isValid)\n                .map(c => {\n                    return {\n                        key: c.key,\n                        name: c.name,\n                        description: c.description,\n                        updateDate: c.updateDate,\n                        tags: this.hubCache.getObjectTags(eSharedObjectType.ColumnValidation, c.key)\n                    }\n                });\n            this._tableData.next(validations);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(validation: DexihColumnValidation) {\n        this.router.navigate(['columnValidation-edit', validation.key], { relativeTo: this.route});\n    }\n\n    export(items: Array<DexihColumnValidation>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        items.forEach(item => { this.hubCache.cacheAddColumnValidation(item.key, hub); });\n\n        let filename = items.length === 1 ? 'ColumnValidation - ' + items[0].name + '.json' : 'columnValidations.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    watchChanges() {\n      // watch the current validation in case it is changed in another session.\n      this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n          if (hubCacheChange.changeClass === eSharedObjectType.ColumnValidation\n            || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n            this.updateValidations();\n          }\n      });\n  }\n}\n","<div class=\"container-fluid\">\n    <d-widget title=\"Validation Rules\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-check-square-o\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t<d-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t<actions-columnValidation-button [columnValidation]=\"item\" class=\"mr-1\"></actions-columnValidation-button>\n\t\t\t\t\t<dependent-items-button class=\"mr-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.ColumnValidation'></dependent-items-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<d-button-save-local class=\"mr-1\" (click)=\"export(items)\"></d-button-save-local>\n\t\t\t\t\t<d-button-delete class=\"mr-1\" *ngIf=\"hubCache.canWrite\" (click)=\"deleteValidations(items)\"></d-button-delete>\n\t\t\t\t\t<tags-update-button class=\"mr-1\" [objectType]=\"eSharedObjectType.ColumnValidation\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\t\t\t\t\n\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<d-button-new *ngIf=\"hubCache.canWrite\" [routerLink]=\"['columnValidation-new']\" class=\"mr-1\"></d-button-new>\n\t\t\t\t</ng-template>\n\t\t</d-table>\n\n    </d-widget>\n</div>\n\n\n","export * from './columnValidation-index/columnValidation-index.component';\nexport * from './columnValidation-edit/columnValidation-edit.component';\n","<div class=\"container\">\n\t<d-widget \n\t\ttitle=\"Edit Connection\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-database\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t\t[padding]=\"true\"\n\t\t>\n        <ng-template #header>\n\t\t\t<dexih-invalid-form-details class=\"mr-1\" [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\"></dexih-invalid-form-details>\n\t\t\t<d-button class=\"mr-1\" *ngIf=\"hubCache.canWrite\" buttonClass=\"btn btn-success\" [busy]=\"refreshingConnection\" iconClass=\"fa fa-thumbs-o-up\" (click)=\"!refreshingConnection && refreshConnection()\" title=\"Test the connection against the source.\">Test</d-button>\n\t\t\t<save-button *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\" class=\"mr-1\"></save-button>\n\n\t\t\t<ng-template [ngIf]=\"hubCache.canWrite && connectionReference\">\n\t\t\t\t<ng-template [ngIf]=\"connectionReference.connectionCategory == eConnectionCategory.SqlDatabase || connectionReference.connectionCategory == eConnectionCategory.DatabaseFile || connectionReference.connectionCategory == eConnectionCategory.NoSqlDatabase || connectionReference.connectionCategory == eConnectionCategory.Hub\">\n\t\t\t\t\t<d-button class=\"mr-1\" *ngIf=\"formsService.currentForm.controls.key.value\" [routerLink]=\"['../../connection-import', formsService.currentForm.controls.key.value]\" iconClass=\"fa fa-plus\">Import Tables</d-button>\n\t\t\t\t</ng-template>\n\t\t\t\t<ng-template [ngIf]=\"connectionReference.connectionCategory == eConnectionCategory.File\">\n\t\t\t\t\t<d-button class=\"mr-1\" *ngIf=\"formsService.currentForm.controls.key.value\" [routerLink]=\"['../../../tables', 'table-new', formsService.currentForm.controls.key.value]\" iconClass=\"fa fa-plus\">New File</d-button>\n\t\t\t\t</ng-template>\n\t\t\t\t<ng-template [ngIf]=\"connectionReference.connectionCategory == eConnectionCategory.WebService\">\n\t\t\t\t\t<d-button class=\"mr-1\" *ngIf=\"formsService.currentForm.controls.key.value\" [routerLink]=\"['../../../tables', 'table-new', formsService.currentForm.controls.key.value]\"  iconClass=\"fa fa-plus\">New WebService</d-button>\n\t\t\t\t</ng-template>\n\t\t\t</ng-template>\n\n\t\t\t<cancel-button [formsService]=\"formsService\"></cancel-button>\n        </ng-template>\n\n\t\t<form *ngIf=\"formsService.currentForm\"  [formGroup]=\"formsService.currentForm\">\n\t\t\t<!--dummy hidden password to stop chrome/firefox/safari autocompletion password.-->\n\t\t\t<input id=\"fake_user_name\" name=\"fake_user[name]\" style=\"position:absolute; top:-5000px;\" type=\"text\" value=\"Fake Auto-fill\">\n\t\t\t<input id=\"fake_password\" type=\"password\" name=\"fake_password[password]\" style=\"position:absolute; top:-5000px;\" type=\"text\" value=\"Fake Auto-fill\">\n\n\t\t\t<fieldset>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<form-select label=\"Purpose\" formControlName=\"purpose\" placeholder=\"Connection purpose\" iconClass=\"fa fa-database\"\n\t\t\t\t\t\t\t[items]=\"eConnectionPurposeItems\" itemName=\"name\" itemKey=\"key\" [enableFilter]=\"false\"\n\t\t\t\t\t\t\t[errors]=\"formsService.formErrors.purpose\">\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\n\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Name\" formControlName=\"name\" placeholder=\"Enter a name for the connection\" [autocapitalize]=\"true\" iconClass=\"fa fa-database\"\n\t\t\t\t\t\t\t[errors]=\"formsService.formErrors.name\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Database Type\" [(ngModel)]=\"connectionReference\" [ngModelOptions]=\"{standalone: true}\" (ngModelChange)=\"selectDatabaseType($event)\" \n\t\t\t\t\t\t\t[items]=\"connectionTypes\" itemName=\"name\" itemKey=\"name\" [enableKeySelect]=\"false\"\n\t\t\t\t\t\t\ticonClass=\"fa fa-database\" [sortItems]=\"true\">\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<section>\n                    <form-textarea label=\"Description\" formControlName=\"description\" [showMarkdown]=\"true\" placeholder=\"Enter the description.\"  [errors]=\"formsService.formErrors.description\">\n                    </form-textarea>\n                </section>\n\n\t\t\t\t<span *ngIf=\"connectionReference\">\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<markdown [data]=\"connectionReference.description\" (click)=\"getRoute($event)\"></markdown>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<span *ngIf=\"connectionReference.allowsConnectionString == true\">\n\t\t\t\t\t\t<section >\n\t\t\t\t\t\t\t<form-checkbox label=\"Use a connection string\" formControlName=\"useConnectionString\" >\n\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t</section>\n\n\t\t\t\t\t\t<section *ngIf=\"formsService.currentForm.controls.useConnectionString.value == true\">\n\t\t\t\t\t\t\t<form-input *ngIf=\"!formsService.currentForm.controls.useConnectionStringVariable.value\"\n\t\t\t\t\t\t\t\tlabel=\"Connection String\" (keydown)=\"connectionStringChanged()\" formControlName=\"connectionStringDisplay\" placeholder=\"Enter a the connection string\" iconClass=\"fa fa-database\" [errors]=\"formsService.formErrors.connectionStringDisplay\">\n\t\t\t\t\t\t\t\t<span *ngIf=\"!formsService.formErrors.connectionStringRaw\"> (<a href=\"javascript:void(0)\" *ngIf=\"revealingConnectionString == false\" (click)=\"revealConnectionString()\"> <i class=\"fa fa-refresh\"></i> Reveal </a>\n\t\t\t\t\t\t\t\t<span *ngIf=\"revealingConnectionString == true\" > <i class=\"fa fa-spin fa-refresh\"></i> Revealing... please wait </span>)</span>\n\t\t\t\t\t\t\t</form-input>\n\n\t\t\t\t\t\t\t<form-select *ngIf=\"formsService.currentForm.controls.useConnectionStringVariable.value\"\n\t\t\t\t\t\t\t\tlabel=\"Connection String\" \n\t\t\t\t\t\t\t\tformControlName=\"connectionString\" \n\t\t\t\t\t\t\t\t[items]=\"variables\" \n\t\t\t\t\t\t\t\ticonClass=\"fa fa-at\" \n\t\t\t\t\t\t\t\t[sortItems]=\"true\" \n\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\"\n\t\t\t\t\t\t\t\ttextEntryNote=\"Enter the variable name surrounded by {}\">\n\t\t\t\t\t\t\t</form-select>\n\n\t\t\t\t\t\t\t<form-checkbox label=\"Use a variable for connection string\" formControlName=\"useConnectionStringVariable\" (click)=\"clearConnectionString()\" >\n\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t</section>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span *ngIf=\"formsService.currentForm.controls.useConnectionString.value == false\">\n\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t<form-select \n\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\" \n\t\t\t\t\t\t\t\t[label]=\"connectionReference.serverDescription\" \n\t\t\t\t\t\t\t\tformControlName=\"server\" \n\t\t\t\t\t\t\t\tplaceholder=\"Enter the details.\" \n\t\t\t\t\t\t\t\ticonClass=\"fa fa-server\" \n\t\t\t\t\t\t\t\t[errors]=\"formsService.formErrors.server\"\n\t\t\t\t\t\t\t\t[items]=\"variables\" \n\t\t\t\t\t\t\t\t[enableFilter]=\"true\"\n\t\t\t\t\t\t\t\t[note]=\"connectionReference.serverHelp\"\n\t\t\t\t\t\t\t></form-select> \n\t\t\t\t\t\t</section>\n\n\t\t\t\t\t\t<section *ngIf=\"connectionReference.allowsWindowsAuth == true\">\n\t\t\t\t\t\t\t<form-checkbox label=\"Use windows authentication\" formControlName=\"useWindowsAuth\">\n\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t</section>\n\n\t\t\t\t\t\t<div *ngIf=\"connectionReference.allowsUserPassword && (formsService.currentForm.controls.useWindowsAuth.value == false || connectionReference.allowsWindowsAuth == false)\" class=\"form-row\">\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-select \n\t\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\" \n\t\t\t\t\t\t\t\t\tlabel=\"User Name\" \n\t\t\t\t\t\t\t\t\tformControlName=\"username\" \n\t\t\t\t\t\t\t\t\tplaceholder=\"Enter user name\" \n\t\t\t\t\t\t\t\t\ticonClass=\"fa fa-user\" \n\t\t\t\t\t\t\t\t\t[errors]=\"formsService.formErrors.username\"\n\t\t\t\t\t\t\t\t\t[items]=\"variables\" \n\t\t\t\t\t\t\t\t\t[enableFilter]=\"true\"\n\t\t\t\t\t\t\t\t></form-select> \n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-input *ngIf=\"formsService.currentForm.controls.usePasswordVariable.value == false\" label=\"Password\" (keydown)=\"passwordChanged()\" formControlName=\"passwordDisplay\" type=\"password\" placeholder=\"Enter a password\"  iconClass=\"fa fa-lock\" [errors]=\"formsService.formErrors.password\">\n\t\t\t\t\t\t\t\t</form-input>\n\n\t\t\t\t\t\t\t\t<form-select *ngIf=\"formsService.currentForm.controls.usePasswordVariable.value\"\n\t\t\t\t\t\t\t\t\tlabel=\"Password\" \n\t\t\t\t\t\t\t\t\tformControlName=\"password\" \n\t\t\t\t\t\t\t\t\t[items]=\"variables\" \n\t\t\t\t\t\t\t\t\ticonClass=\"fa fa-at\" \n\t\t\t\t\t\t\t\t\t[sortItems]=\"true\" \n\t\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</form-select>\n\n\t\t\t\t\t\t\t\t<form-checkbox label=\"Use a variable for password\" formControlName=\"usePasswordVariable\" (click)=\"clearPassword()\" >\n\t\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div *ngIf=\"connectionReference.allowsToken && (formsService.currentForm.controls.useWindowsAuth.value == false || connectionReference.allowsWindowsAuth == false)\" class=\"form-row\">\n\t\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t\t<form-input *ngIf=\"formsService.currentForm.controls.usePasswordVariable.value == false\" label=\"Secure Token\" (keydown)=\"passwordChanged()\" formControlName=\"passwordDisplay\" type=\"password\" placeholder=\"Enter secure token\"  iconClass=\"fa fa-lock\" [errors]=\"formsService.formErrors.password\">\n\t\t\t\t\t\t\t\t</form-input>\n\n\t\t\t\t\t\t\t\t<form-select *ngIf=\"formsService.currentForm.controls.usePasswordVariable.value\"\n\t\t\t\t\t\t\t\t\tlabel=\"Secure Token\" \n\t\t\t\t\t\t\t\t\tformControlName=\"password\" \n\t\t\t\t\t\t\t\t\t[items]=\"variables\" \n\t\t\t\t\t\t\t\t\ticonClass=\"fa fa-at\" \n\t\t\t\t\t\t\t\t\t[sortItems]=\"true\" \n\t\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</form-select>\n\n\t\t\t\t\t\t\t\t<form-checkbox label=\"Use a variable for token\" formControlName=\"usePasswordVariable\" (click)=\"clearPassword()\" >\n\t\t\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<section *ngIf=\"connectionReference.requiresDatabase\" ng-disabled=\"refreshingConnection || creatingDatabase\" >\n\t\t\t\t\t\t\t<form-select \n\t\t\t\t\t\t\t\t[label]=\"connectionReference.databaseDescription\" \n\t\t\t\t\t\t\t\tformControlName=\"defaultDatabase\" \n\t\t\t\t\t\t\t\t[items]=\"databases\" \n\t\t\t\t\t\t\t\t[defaultItem]=\"formsService.currentForm.value.defaultDatabase\" \n\t\t\t\t\t\t\t\ticonClass=\"fa fa-database\" \n\t\t\t\t\t\t\t\t[sortItems]=\"true\" \n\t\t\t\t\t\t\t\t[enableTextEntry]=\"true\"\n\t\t\t\t\t\t\t\ttextEntryNote=\"Enter the database name\"\n\t\t\t\t\t\t\t\t(textValueChange)=\"newDatabaseName($event)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t(<a href=\"javascript:void(0)\" *ngIf=\"refreshingConnection == false\" (click)=\"refreshConnection()\"> <i class=\"fa fa-refresh\"></i> Refresh </a>\n\t\t\t\t\t\t\t<span *ngIf=\"refreshingConnection == true\" > <i class=\"fa fa-spin fa-refresh\"></i> Refreshing... please wait </span>) (\n\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" *ngIf=\"creatingDatabase == false\" (click)=\"createDatabase()\"> <i class=\"fa fa-edit\"></i> New Database </a>\n\t\t\t\t\t\t\t\t<span *ngIf=\"creatingDatabase == true\"> <i class=\"fa fa-spin fa-refresh\"></i> Creating database... please wait </span>)\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t<form-input  type=\"number\" label=\"Connection Timeout\" formControlName=\"connectionTimeout\" iconClass=\"fa fa-clock-o\"\t[errors]=\"formsService.formErrors.connectionTimeout\"\n\t\t\t\t\t\t\tnote=\"The duration in seconds the remote agent will wait to establish a connection.\">\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t<form-input type=\"number\" label=\"Command Timeout\" formControlName=\"commandTimeout\" iconClass=\"fa fa-clock-o\"\t[errors]=\"formsService.formErrors.commandTimeout\"\n\t\t\t\t\t\t\tnote=\"The duration in seconds the remote agent will for a command to start returning a result.\">\n\t\t\t\t\t\t\t</form-input>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<section *ngIf=\"formsService.currentForm.controls.purpose.value == 'Managed'\">\n\t\t\t\t\t\t<form-checkbox label=\"Multi-use Managed Database (table keys will be added to table names to allow multiple hubs to use same database)\"\n\t\t\t\t\t\t\tformControlName=\"embedTableKey\" [errors]=\"formsService.formErrors.embedTableKey\">\n\t\t\t\t\t\t</form-checkbox>\n\t\t\t\t\t</section>\n\n\t\t\t\t</span>\n\t\t\t</fieldset>\n\n\t\t</form>\n\t</d-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Connections\" path=\"/assets/help/reference/connection.md\"></dexih-help>\n\n</div>","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { LogFactory, eLogLevel } from '../../../../logging';\nimport { eConnectionPurpose, eConnectionCategory, ConnectionReference, DexihConnection, RemoteLibraries, eConnectionPurposeItems } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n  selector: 'dexih-connection-edit-form',\n  templateUrl: './connection-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class ConnectionEditComponent implements OnInit, OnDestroy {\n\n  public connectionKey: number;\n  private connectionTypes: Array<ConnectionReference>;\n  private hubCache: HubCache;\n  private remoteLibraries: RemoteLibraries;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _purposeSubscription: Subscription;\n\n  public savingConnection = false;\n  public refreshingConnection = false;\n  public revealingConnectionString = false;\n  public creatingDatabase = false;\n\n  public databases: Array<string> = [];\n\n  public eConnectionPurposeItems = eConnectionPurposeItems.filter( c => c.key > 0);\n  public eConnectionPurpose = eConnectionPurpose;\n  public eConnectionCategory = eConnectionCategory;\n\n  public cancelToken: CancelToken = new CancelToken();\n\n  public connectionReference: ConnectionReference;\n  private isLoaded = false;\n\n  public variables = [];\n\n  private logger = new LogFactory('connection-edit');\n\n  constructor(private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {\n  }\n\n  ngOnInit() {\n    this.logger.LogC(() => `OnInit`, eLogLevel.Trace);\n\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n        this.hubService.getRemoteLibrariesObservable()\n      ).subscribe(async result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n        this.remoteLibraries = result[3];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        this.variables = this.hubCache.hub.dexihHubVariables.map(c => '{' + c.name + '}');\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(async confirm => {\n                if (confirm) {\n                    await this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            await this.load();\n        }\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Connection Edit');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._purposeSubscription) { this._purposeSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  private async load() {\n    this.isLoaded = true;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.connectionKey = + this.params['connectionKey'];\n\n      this.logger.LogC(() => `edit connection key ${this.connectionKey}.`, eLogLevel.Trace);\n\n      if (!this.connectionKey) {\n        this.hubService.addHubErrorMessage('There was no connection specified to edit.');\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihConnections) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let connection = this.hubCache.hub.dexihConnections.find(c => c.key === this.connectionKey);\n          if (!connection) {\n            this.hubService.addHubErrorMessage('The specified connection could not be found.');\n            this.logger.LogC(() => `edit connection with key ${this.connectionKey} not found.`, eLogLevel.Warning);\n          } else {\n            this.updateDatabaseTypes(connection.purpose);\n            this.connectionReference = await this.hubService.GetConnectionReference(connection);\n            this.formsService.connection(connection);\n            if (connection.defaultDatabase) {\n              this.databases = [connection.defaultDatabase];\n            }\n            this.logger.LogC(() => `edit connection, form loaded.`, eLogLevel.Trace);\n          }\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let connection = new DexihConnection();\n      connection.purpose = +this.params['purpose'];\n\n      this.logger.LogC(() => `new connection, purpose ${connection.purpose}.`, eLogLevel.Trace);\n\n      this.updateDatabaseTypes(connection.purpose);\n      this.formsService.connection(connection);\n\n      this.updateUrl();\n\n      this.logger.LogC(() => `new connection, form loaded.`, eLogLevel.Trace);\n    }\n\n    if (this.action === 'copy') {\n\n      let connection = new DexihConnection();\n\n      let previousConnectionKey = + this.params['connectionKey'];\n      let previousConnection = this.hubCache.hub.dexihConnections.find(c => c.key === previousConnectionKey);\n      Object.assign(connection, previousConnection);\n      connection.name += ' (copy)';\n      connection.key = null;\n      this.connectionReference = await this.hubService.GetConnectionReference(connection);\n\n      this.logger.LogC(() => `copy connection, connectionKey ${previousConnectionKey}.`, eLogLevel.Trace);\n      this.updateDatabaseTypes(connection.purpose);\n      this.formsService.connection(connection);\n\n      this.updateUrl();\n\n      this.logger.LogC(() => `new connection, form loaded.`, eLogLevel.Trace);\n    }\n\n    if (this._purposeSubscription) { this._purposeSubscription.unsubscribe(); }\n    this._purposeSubscription = this.formsService.currentForm.controls.purpose.valueChanges.subscribe(purpose => {\n        this.updateDatabaseTypes(purpose);\n    });\n  }\n\n  private updateUrl() {\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let url = window.location.pathname;\n            let index = url.indexOf('/connection-new');\n            if (index > 0) {\n              let newUrl = url.substr(0, index) + `/connection-edit/${key}`;\n              this.router.navigateByUrl(newUrl);\n            }\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n  }\n\n  private updateDatabaseTypes(purpose: eConnectionPurpose) {\n    this.connectionTypes = this.remoteLibraries.connections.filter(d =>\n      (purpose === eConnectionPurpose.Source && d.allowsSourceConnection) ||\n      (purpose === eConnectionPurpose.Managed && d.allowsManagedConnection) ||\n      (purpose === eConnectionPurpose.Target && d.allowsTargetConnection));\n  }\n\n  async selectDatabaseType(connectionReference: ConnectionReference) {\n    this.formsService.currentForm.controls.connectionClassName.setValue(connectionReference.connectionClassName);\n    this.formsService.currentForm.controls.connectionAssemblyName.setValue(connectionReference.connectionAssemblyName);\n\n    // For integration hub connections, pre-fill some information.\n    if (this.connectionReference.connectionCategory === eConnectionCategory.Hub) {\n      if (!this.formsService.currentForm.controls.server.value) {\n        const uri = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');\n        this.formsService.currentForm.controls.server.setValue(uri);\n      }\n      if (!this.formsService.currentForm.controls.username.value) {\n        const user = this.authService.getUser()\n        if (user) {\n          this.formsService.currentForm.controls.username.setValue(user.email);\n        }\n      }\n    }\n  }\n\n  connectionStringChanged() {\n    this.logger.LogC(() => `connectionStringChanged.`, eLogLevel.Trace);\n    if (this.formsService.currentForm.controls.connectionString.value) {\n      this.formsService.currentForm.controls.connectionString.setValue(null);\n      this.formsService.currentForm.controls.connectionStringDisplay.setValue('');\n    }\n  }\n\n  clearConnectionString() {\n    this.formsService.currentForm.controls.connectionString.setValue(null);\n    this.formsService.currentForm.controls.connectionStringDisplay.setValue('');\n  }\n\n  revealConnectionString() {\n    this.logger.LogC(() => `revealConnectionString.`, eLogLevel.Trace);\n    this.revealingConnectionString = true;\n\n    this.hubService.decrypt(this.formsService.currentForm.controls.connectionString.value, this.cancelToken)\n      .then(result => {\n        this.formsService.currentForm.controls.connectionStringDisplay.setValue(result);\n        this.revealingConnectionString = false;\n      }).catch(reason => {\n        this.hubService.addHubMessage(reason);\n        this.revealingConnectionString = false;\n      });\n  }\n\n  passwordChanged() {\n    this.logger.LogC(() => `passwordChanged.`, eLogLevel.Trace);\n\n    if (this.formsService.currentForm.controls.password.value) {\n      this.formsService.currentForm.controls.password.setValue(null);\n      this.formsService.currentForm.controls.passwordDisplay.setValue('');\n    }\n  }\n\n  clearPassword() {\n    this.formsService.currentForm.controls.password.setValue(null);\n    this.formsService.currentForm.controls.passwordDisplay.setValue('');\n  }\n\n  async refreshConnection() {\n    this.logger.LogC(() => `refreshConnection.`, eLogLevel.Trace);\n\n    await this.encryptConnection();\n\n    this.refreshingConnection = true;\n    this.hubService.refreshConnection(this.formsService.currentForm.value, this.cancelToken)\n      .then(result => {\n        this.hubService.addHubSuccessMessage('The connection was successful.');\n        this.databases = result;\n        this.refreshingConnection = false;\n      }).catch(reason => {\n        this.hubService.addHubMessage(reason);\n        this.refreshingConnection = false;\n      });\n  }\n\n  newDatabaseName(value: string) {\n    this.formsService.currentForm.controls.defaultDatabase.setValue(value);\n  }\n\n  createDatabase() {\n    this.creatingDatabase = true;\n\n    this.authService.promptDialog('Create Database', 'Enter the name for the new database?').then(async result => {\n      if (result) {\n        await this.encryptConnection();\n\n        let connection = Object.assign({}, this.formsService.currentForm.value);\n        connection.defaultDatabase = result;\n\n        this.hubService.createDatabase(connection, this.cancelToken)\n          .then(() => {\n            this.hubService.addHubSuccessMessage('The database was created successfully.');\n            this.databases = [result];\n            this.formsService.currentForm.controls.defaultDatabase.setValue(result);\n            this.creatingDatabase = false;\n          }).catch(reason => {\n            this.hubService.addHubMessage(reason);\n            this.creatingDatabase = false;\n          });\n      } else {\n        this.creatingDatabase = false;\n      }\n    }).catch(() => {\n      this.creatingDatabase = false;\n    });\n  }\n\n  async encryptConnection() {\n    let form = this.formsService.currentForm;\n\n    let passwordRaw = form.controls.passwordRaw.value;\n    if (passwordRaw) {\n      let password = await this.hubService.encrypt(passwordRaw, this.cancelToken);\n      form.controls.password.setValue(password);\n      form.controls.passwordRaw.setValue(null);\n    }\n\n    let connectionStringRaw = form.controls.connectionStringRaw.value;\n    if (connectionStringRaw) {\n      let connectionString = await this.hubService.encrypt(connectionStringRaw, this.cancelToken);\n      form.controls.connectionString.setValue(connectionString);\n      form.controls.connectionStringRaw.setValue(null);\n    }\n  }\n\n  async save() {\n    await this.encryptConnection();\n    await this.formsService.save();\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The connection has not been saved',\n          'The connection changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  public getRoute(event) {\n    this.authService.getRoute(event);\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The connection changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","export * from './connection-edit.component';\n","<div class=\"container-fluid\">\n    <d-widget [title]=\"'Import Tables for ' + connection?.name\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-database\" \n\t\t[showIf]=\"showPage\"\n\t\t[loadingMessage]=\"showPageMessage\"\n\t\t[showCloseButton] = \"true\"\n\t\t(close)=\"close()\"\n\t\t[padding]=\"false\"\n\t>\n\t\t<ng-template #header>\n\n\t\t</ng-template>\n\n\t\t<d-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"editTable($event)\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<d-button-splitdropdown class=\"mr-1\" *ngIf=\"hubCache.canWrite\" text=\"Import\" buttonClass=\"btn btn-success\" iconClass=\"fa fa-cloud-download\" (buttonClick)=\"importSelected(items)\" title=\"Import selected tables\" >\n\t\t\t\t\t\t<a class=\"dropdown-item\" (click)=\"newDatalinks(items)\" title=\"Import tables and create default staging datalinks\">Import &amp; Create Datalinks</a>\n\t\t\t\t\t</d-button-splitdropdown>\n\t\t\t\t\t\t\t\n\t\t\t\t\t<d-button-delete (click)=\"deleteSelected(items)\" title=\"Delete selected tables\"></d-button-delete>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-table=\"item\">\n\t\t\t\t\t<d-button-edit class=\"mr-1\"  *ngIf=\"table.key\" [routerLink]=\"['table-edit', table.key]\" queryParamsHandling preserveFragment (click)=\"deleteSelected(items)\" title=\"Edit this table\"></d-button-edit>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #filter select=\"filter\" let-items=\"items\">\n\t\t\t\t\t<d-button-dropdown class=\"mr-1\" buttonClass=\"btn-primary\" iconClass=\"fa fa-download\" [text]=\"tableFilter\" title=\"Filter by import status\" [pullRight]=\"true\">\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"tableFilter=='All'\" (click)=\"setTableFilter('All')\">All</a>\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"tableFilter=='Imported'\" (click)=\"setTableFilter('Imported')\">Imported</a>\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"tableFilter=='NonImported'\" (click)=\"setTableFilter('NonImported')\">Non Imported</a>\n\t\t\t\t\t</d-button-dropdown>\n\t\n\t\t\t\t\t<d-button-dropdown class=\"mr-1\" buttonClass=\"btn-primary\" iconClass=\"fa fa-table\" [text]=\"viewFilter\" title=\"Filter by tables/views\" [pullRight]=\"true\">\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"viewFilter=='All'\" (click)=\"setViewFilter('All')\">All</a>\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"viewFilter=='Imported'\" (click)=\"setViewFilter('Tables')\">Tables</a>\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"viewFilter=='NonImported'\" (click)=\"setViewFilter('Views')\">Views</a>\n\t\t\t\t\t</d-button-dropdown>\n\t\t\t\t</ng-template>\n\t\t</d-table>\n\n    </d-widget>\n</div>\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache, EntityStatus } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { DexihConnection, DexihTable, eTableType, eStatus, eImportAction, eSharedObjectType, ConnectionReference } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n    selector: 'connections',\n    templateUrl: './connection-import.component.html',\n    styles: []\n})\nexport class ConnectionImportComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n    connectionKey: number;\n    connection: DexihConnection;\n    connectionReference: ConnectionReference;\n    names: Array<string>;\n    tables: Array<DexihTable>;\n\n    showPage = false;\n    showPageMessage = 'Loading...';\n\n    tableFilter: string;\n    viewFilter: string;\n\n    private cancelToken = new CancelToken();\n\n    columns = [\n        { name: 'schema', title: 'Schema', format: '' },\n        { name: 'name', title: 'Name', format: '' },\n        { name: 'tableType', title: 'Type', enum: eTableType, format: 'Enum' },\n        { name: 'entityStatus.message', title: 'Latest Status' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<DexihTable>> = this._tableData.asObservable();\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        private router: Router,\n        private route: ActivatedRoute\n    ) {\n        this.tableFilter = 'All';\n        this.viewFilter = 'Tables';\n    }\n\n    ngOnInit() {\n        this.showPageMessage = 'Querying source database tables.  Please wait...';\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n                this.hubService.getRemoteAgentObservable()\n            ).subscribe(async result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n                let remoteAgent = result[3];\n\n                this.connectionKey = + params['connectionKey'];\n\n                if (!this.connectionKey) {\n                    this.hubService.addHubErrorMessage('There was no connection specified to import tables.');\n                    this.close();\n                } else {\n                    if (this.hubCache.isLoaded()) {\n                        this.connection = this.hubCache.hub.dexihConnections\n                            .find(connection => connection.key === this.connectionKey);\n\n                        this.connectionReference = await this.hubService.GetConnectionReference(this.connection);\n\n                        this.showPage = false;\n\n                        if (remoteAgent) {\n                            if (this.connection) {\n                                this.getTables(this.connection);\n                            } else {\n                                this.hubService.addHubErrorMessage('The connection could not be found.');\n                                this.close();\n                            }\n                        } else {\n                            this.showPageMessage = 'Waiting for an active remote agent...';\n                        }\n                    }\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Connection Import');\n        }\n\n        // watch for any changes in the connections.\n        this.watchChanges();\n    }\n\n    setTableFilter(tableFilter) {\n        this.tableFilter = tableFilter;\n        this.updateFilter();\n    }\n\n    setViewFilter(viewFilter) {\n        this.viewFilter = viewFilter;\n        this.updateFilter();\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    updateFilter() {\n        let tables;\n        switch (this.tableFilter) {\n            case 'Imported':\n                tables = this.tables.filter(c => c.key > 0);\n                break;\n            case 'NonImported':\n                tables = this.tables.filter(c => c.key === 0 || !c.key);\n                break;\n            default:\n                tables = this.tables;\n                break;\n        }\n\n        switch (this.viewFilter) {\n            case 'Views':\n                tables = tables.filter(c => c.tableType === eTableType.View);\n                break;\n            case 'Tables':\n                tables = tables.filter(c => c.tableType === eTableType.Table);\n                break;\n        }\n\n        this._tableData.next(tables);\n    }\n\n    getTables(connection: DexihConnection) {\n        this.showPage = false;\n        this.showPageMessage = 'Importing tables from remote database...';\n\n        this.hubService.getDatabaseTableNames(connection, this.cancelToken)\n            .then(tables => {\n                this.tables = tables;\n\n                let cacheTables = this.hubCache.hub.dexihTables.filter(c => c.connectionKey === connection.key);\n\n                for (let i = 0; i < tables.length; i++) {\n                    let cacheTable = null;\n                    let table = tables[i];\n\n                    if (cacheTables) {\n                        cacheTable = cacheTables.find(t => t.name === table.name && t.schema === table.schema);\n\n                        if (!cacheTable && this.connectionReference && this.connectionReference.defaultSchema === table.schema) {\n                            cacheTable = cacheTables.find(t => t.name === table.name && !t.schema)\n                        }\n                    }\n\n                    if (cacheTable) {\n                        this.tables[i] = cacheTable;\n                    } else {\n                        table.connectionKey = connection.key;\n                        table.tableType = <eTableType>table.tableType;\n                        table.entityStatus = new EntityStatus();\n                    }\n                }\n\n                this.showPage = true;\n                this.showPageMessage = '';\n\n                this.updateFilter();\n\n\n            }).catch(reason => {\n                this.hubService.addHubMessage(reason);\n            });\n    }\n\n\n    import(table: DexihTable) {\n        this.hubService.importTables([table], true, this.cancelToken).then(importResult => {\n            this.mergeTables(importResult);\n            // if (importResult) {\n            //     importResult[0].entityStatus.isBusy = false;\n            // }\n        }).catch(reason => {\n            table.entityStatus.isBusy = false;\n            table.entityStatus.lastStatus = eStatus.Error;\n            table.entityStatus.message = reason.message;\n        });\n    }\n\n    deleteTable(table: DexihTable) {\n        this.hubService.deleteTables([table]).then(result => {\n            table.entityStatus.isBusy = false;\n        }).catch(reason => {\n            table.entityStatus.isBusy = false;\n            table.entityStatus.lastStatus = eStatus.Error;\n            table.entityStatus.message = reason.message;\n        });\n    }\n\n    importSelected(selected: Array<DexihTable>) {\n        let selectedTables = selected.filter(t => !t.entityStatus.isBusy);\n        selectedTables.forEach(t => t.entityStatus.isBusy = true);\n        this.hubService.importTables(selectedTables, true, this.cancelToken).then(result => {\n            this.mergeTables(result);\n            // selectedTables.forEach(t => t.entityStatus.isBusy = false);\n        }).catch(reason => {\n            selectedTables.forEach(t => t.entityStatus.isBusy = false);\n        });\n    }\n\n    mergeTables(tables: Array<DexihTable>) {\n        if (!tables) { return; }\n        tables.forEach(table => {\n            let index = this.tables.findIndex(t => t.name === table.name && t.schema === table.schema);\n\n            if (index >= 0) {\n                this.tables[index] = table;\n            }\n        });\n\n        this.updateFilter();\n    }\n\n    deleteSelected(selected: Array<DexihTable>) {\n        let selectedTables = selected.filter(t => !t.entityStatus.isBusy && t.key > 0);\n\n        if (selectedTables.length === 0) {\n            this.authService.informationDialog(\n                'Can not delete', 'None of the selected tables can be deleted, as they are either busy, or have not been imported.');\n        }\n        selectedTables.forEach(t => t.entityStatus.isBusy = true);\n        this.hubService.deleteTables(selectedTables).then(result => {\n            selectedTables.forEach(t => t.entityStatus.isBusy = false);\n        }).catch(reason => {\n            selectedTables.forEach(t => t.entityStatus.isBusy = false);\n        });\n    }\n\n    editTable(table: DexihTable) {\n        if (table && table.key) {\n            this.router.navigate(['table-edit', table.key], { relativeTo: this.route.parent });\n        }\n    }\n\n    newDatalinks(items: Array<DexihTable>) {\n        let selectedTables = items.filter(t => !t.entityStatus.isBusy);\n        selectedTables.forEach(t => t.entityStatus.isBusy = true);\n        this.hubService.importTables(selectedTables, true, this.cancelToken).then(result => {\n            this.mergeTables(result);\n\n            let tableKeys = result.map(c => c.key).join('|');\n            this.router.navigate(['datalink-new', tableKeys, 0], { relativeTo: this.route.parent });\n\n        }).catch(reason => {\n            selectedTables.forEach(t => t.entityStatus.isBusy = false);\n        });\n\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Table) {\n                if (hubCacheChange.changeType === eImportAction.Replace || hubCacheChange.changeType === eImportAction.New) {\n                    let table: DexihTable = hubCacheChange.data;\n\n                    if (table.connectionKey === this.connectionKey) {\n                        let index = this.tables.findIndex(t => t.name === table.name && t.schema === table.schema);\n                        if (index >= 0) {\n                            this.tables[index] = table;\n                            this.updateFilter();\n                        }\n                    }\n                }\n                if (hubCacheChange.changeType === eImportAction.Delete) {\n                    let deletedTable: DexihTable = hubCacheChange.data;\n                    if (deletedTable.connectionKey === this.connectionKey) {\n                        let previousTable = this.tables.find(t => t.key === deletedTable.key);\n                        if (previousTable) {\n                            // table has been delete, so clear key attributes so it appears deleted.\n                            previousTable.key = null;\n                            previousTable.entityStatus.isBusy = false;\n                            previousTable.updateDate = null;\n                            previousTable.createDate = null;\n                            this.updateFilter();\n                        }\n                    }\n                }\n            }\n        });\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n}\n","export * from './connection-import.component';\n","<div class=\"container-fluid\">\n\t<d-widget title=\"Connections\" iconClass=\"fa fa-lg fa-fw fa-database\" [showCloseButton]=\"true\" (close)=\"close()\">\n\t\t<d-table \n\t\t\t[enableMultiSelect]=\"true\" \n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\" \n\t\t\t[dataObservable]=\"tableData\" \n\t\t\t(rowClick)=\"editConnection($event)\" \t\t\t\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t>\n\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t<actions-connection-button [connections]=\"items\"></actions-connection-button>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.Connection\" [objects]=\"items\" ></tags-update-button>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #filter select=\"filter\" let-items=\"items\">\n\t\t\t\t<d-button-dropdown class=\"mr-1\" [autoCompact]=\"false\" buttonClass=\"btn-primary\" iconClass=\"fa fa-filter\" [text]=\"eConnectionPurpose[purposeFilter]\" title=\"Filter by a purpose\"\n\t\t\t\t[pullRight]=\"true\">\n\t\t\t\t   <a class=\"dropdown-item\" [class.active]=\"purposeFilter=='All'\" routerLink='.' [queryParams]=\"{purposeFilter: 'All'}\" title=\"All Connections\">All</a>\n\t\t\t\t   <a *ngFor=\"let purpose of eConnectionPurposeItems | gtFilter:'key':0\" [class.active]=\"purposeFilter==purpose.key\" class=\"dropdown-item\" routerLink='.'\n\t\t\t\t\t[queryParams]=\"{purposeFilter: purpose.key}\" [title]=\"purpose.name\">{{purpose.name}}</a>\n\t\t\t   </d-button-dropdown>\t\t\t</ng-template>\n\n\t\t</d-table>\n\n\t</d-widget>\n\n\t<dexih-help class=\"m-3\"  title=\"Connections\" path=\"/assets/help/reference/connection.md\"></dexih-help>\n\n</div>","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { DexihConnection, eConnectionPurpose, DexihHub, eSharedObjectType, eConnectionPurposeItems } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'connections',\n    templateUrl: './connection-index.component.html',\n    styles: []\n})\nexport class ConnectionIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    pageTitle: string;\n\n    hubCache: HubCache;\n    purposeFilter: eConnectionPurpose;\n    eConnectionPurpose = eConnectionPurpose;\n    eConnectionPurposeItems = eConnectionPurposeItems;\n    public eSharedObjectType = eSharedObjectType;\n    connections: Array<DexihConnection>;\n\n    columns = [\n        { name: 'name', title: 'Name', format: 'Md', footer: 'description', tags: 'tags' },\n        { name: 'purpose', title: 'Purpose', format: '' },\n        { name: 'type', title: 'Type', format: '' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the connections.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                let queryParams = result[2];\n                this.hubCache = result[3];\n\n                this.purposeFilter = + queryParams['purposeFilter'];\n                if (!this.purposeFilter) { this.purposeFilter = 0; }\n\n                this.pageTitle = eConnectionPurpose[this.purposeFilter] + ' Connections';\n                this.updateConnections();\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Connection Index');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    deleteConnection(connection: DexihConnection) {\n        this.hubService.deleteConnections([connection]).catch(reason => {\n        });\n    }\n\n    deleteConnections(connections: Array<DexihConnection>) {\n        this.hubService.deleteConnections(connections);\n    }\n\n    editConnection(connection) {\n        this.router.navigate(['connection-edit', connection.key], { relativeTo: this.route });\n    }\n\n    async updateConnections() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let connections: Array<DexihConnection>;\n            if (this.purposeFilter === 0 || !this.purposeFilter) {\n                connections = this.hubCache.hub.dexihConnections;\n            } else {\n                connections = this.hubCache.hub.dexihConnections\n                    .filter(c => c.purpose === this.purposeFilter);\n            }\n\n            let tableData = []\n            for await (const connection of connections)  {\n                let connectionReference = await this.hubService.GetConnectionReference(connection);\n                tableData.push({\n                    key: connection.key,\n                    connectionAssemblyName: connection.connectionAssemblyName,\n                    connectionClassName: connection.connectionClassName,\n                    purpose: eConnectionPurpose[connection.purpose],\n                    type: connectionReference ? connectionReference.name : 'Unknown (' + connection.connectionClassName + ')',\n                    name: connection.name,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.Connection, connection.key),\n                    description: connection.description,\n                    updateDate: connection.updateDate\n                });\n            };\n            this._tableData.next(tableData);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    export(connections: Array<DexihConnection>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        connections.forEach(connection => { this.hubCache.cacheAddConnection(connection.key, hub); });\n\n        let filename = connections.length === 1 ? 'Connection - ' + connections[0].name + '.json' : 'connections.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Connection\n                || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateConnections();\n            }\n        });\n    }\n}\n","export * from './connection-index.component';\n","export * from './connection-index/connection-index.component';\nexport * from './connection-edit/connection-edit.component';\nexport * from './connection-import/connection-import.component';\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache, SharedObject } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { DexihApi, DexihHub } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'export',\n    templateUrl: './export.component.html',\n    styles: []\n})\nexport class ExportComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },\n        { name: 'label', title: 'Item Type'},\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    public data: Array<SharedObject>;\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService) {\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                this.hubCache = result[0];\n\n                if (!this.hubCache.isLoaded()) { return; }\n\n\n                let data: SharedObject[] = this.hubCache.getSharedObjects();\n                this.data = data;\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'View Index');\n        }\n    }\n\n    exportAll() {\n        this.export(this.data);\n    }\n\n    export(items: Array<SharedObject>) {\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        items.forEach(item => {\n            this.hubCache.cacheAddObject(item.type, item.item, hub);\n        });\n\n        let filename = items.length === 1 ? `${items[0].label}-${items[0].type}.json` : `hub-${this.hubCache.hub.name}.json`;\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n}\n","<div class=\"container-fluid\">\n    <d-widget title=\"Export\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-feed\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t\t<d-table \n\t\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t\t[columns]=\"columns\"\n\t\t\t\t[data]=\"data\"\n\t\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t\t>\n\t\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t\t\t<d-button-save-local class=\"mr-1\" text=\"Export Selected\" (click)=\"export(items)\"></d-button-save-local>\n\t\t\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-api=\"item\">\n\t\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t\t\t<d-button-save-local class=\"mr-1\" text=\"Export All\" (click)=\"exportAll()\"></d-button-save-local>\n\t\t\t\t\t</ng-template>\n\n\t\t\t</d-table>\n\n\t\t</d-widget>\n\t\t\n</div>\n\n\n","import { Component, OnInit, OnDestroy, ViewChild, ElementRef } from '@angular/core';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../../hub.service';\nimport { Observable, BehaviorSubject, Subscription} from 'rxjs';\nimport { importActions, HubCache, sharedObjectProperties } from '../../hub.models';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { Import, eImportAction, ImportAction, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'import',\n    templateUrl: './import.component.html',\n    providers: [HubFormsService]\n})\n\nexport class ImportComponent implements OnInit, OnDestroy {\n    @ViewChild('fileInput', { static: true }) fileInput: ElementRef;\n\n    private _hubCacheSubscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    private hubCache: HubCache;\n\n    public automaticUpload = true;\n\n    pageTitle = 'Import Objects';\n    showPage = false;\n    showPageMessage = 'Loading...';\n    messageId: string;\n\n    importActions = importActions;\n\n    public import: Import;\n    public importOptions: ImportAction[];\n    eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', format: 'Md', description: 'description' },\n        { name: 'objectType', title: 'Type', format: '' },\n        { name: 'importAction', title: 'Action', format: 'Enum', enum: eImportAction },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        public hubFormsService: HubFormsService\n    ) { }\n\n    ngOnInit() {\n        this.importOptions = sharedObjectProperties.map(c => <ImportAction> { action: eImportAction.Replace, objectType: c.type })\n\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheObservable().subscribe(hubCache => {\n            this.hubCache = hubCache;\n        });\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheSubscription) { this._hubCacheSubscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    public doImport(file: File) {\n\n        const form: FormData = new FormData();\n        form.append('file', file, file.name);\n        form.append('hubKey', this.hubCache.hub.hubKey.toString());\n\n        for (let i = 0; i < this.importOptions.length; i++) {\n            form.append(`ImportActions[${i}].Action`, this.importOptions[i].action.toString());\n            form.append(`ImportActions[${i}].ObjectType`, this.importOptions[i].objectType.toString());\n        }\n\n        this.authService.postForm('/api/Hub/ImportPlan', form).then(result => {\n            this.import = result;\n            this.refreshImport();\n        });\n    }\n\n    public uploadFile(event) {\n        let files = event.srcElement.files;\n        this.doImport(files[0]);\n        // this.fileInput.nativeElement.value = '';\n    }\n\n    public filesDrop(files: any) {\n        this.doImport(files[0]);\n    }\n\n    public refreshImport() {\n        let objects = [];\n\n        sharedObjectProperties.forEach(o => {\n            let items = this.import[o.property];\n\n            items.forEach(item => {\n                objects.push({\n                    objectType: o.property,\n                    name: item.item.name,\n                    importAction: item.importAction,\n                    item: item,\n                })\n            });\n        });\n\n        this._tableData.next(objects);\n    }\n\n    public reset() {\n        this._tableData.next(null);\n    }\n\n    public importSelected(items) {\n        let newImport = new Import();\n\n        items.forEach(item => {\n            if (!newImport[item.objectType]) {\n                newImport[item.objectType] = [];\n            }\n            newImport[item.objectType].push(item.item);\n        });\n\n        this.hubService.importPackage(newImport).then(() => {\n            this.authService.navigateUp();\n        });\n    }\n\n    public importAll() {\n        this.hubService.importPackage(this.import).then(() => {\n            this.authService.navigateUp();\n        });\n    }\n\n}\n","<div class=\"container\">\n    <d-widget *ngIf=\"!(tableData | async)?.length\" title=\"Import Objects\" iconClass=\"fa fa-lg fa-fw fa-level-down\" [showCloseButton]=\"true\"\n        (close)=\"close()\" >\n        <ul class=\"list-group\">\n            <li class=\"list-group-item list-group-item-info rounded-0\">\n                <h5>Drop Export Files</h5>\n            </li>\n            <li class=\"list-group-item \">\n                <div class=\"well my-drop-zone\" dropZone [requireFiles]=\"true\" (dropFiles)=\"filesDrop($event)\" dropAllowedClass=\"nv-file-over\">\n                    <div class=\"form-row\">\n                        <section class=\"form-group col-md-6\">\n                            Drop import files\n                        </section>\n                        <section class=\"form-group col-md-6\">\n                            <div class=\"custom-file w-auto pull-right\">\n                                <input #fileInput type=\"file\" class=\"custom-file-input \" (change)=\"uploadFile($event)\">\n                                <label class=\"custom-file-label\" for=\"inputGroupFile01\">Choose file</label>\n                            </div>\n                        </section>\n                    </div>\n                </div>\n            </li>\n            <li class=\"list-group-item list-group-item-info\">\n                <h5>Import Options</h5>\n            </li>\n            <li class=\"list-group-item \">\n                    <fieldset>\n                        <div class=\"form-row\">\n                            <section *ngFor=\"let action of importOptions\" class=\"form-group col-md-6\">\n                                <form-select label=\"{{eSharedObjectType[action.objectType]}} Action\" [(ngModel)]=\"action.action\" [items]=\"importActions\" itemKey=\"key\" itemName=\"name\"\n                                    note='Action when importing {{eSharedObjectType[action.objectType]}}'>\n                                </form-select>\n                            </section>\n                        </div>\n                    </fieldset>\n            </li>\n        </ul>\n\n    </d-widget>\n\n    <d-widget *ngIf=\"(tableData | async)?.length > 0\" title=\"Import Package\" iconClass=\"fa fa-lg fa-fw fa-level-down\" [showCloseButton]=\"true\" (close)=\"reset()\">\n        <div *ngIf=\"import?.warnings?.length > 0\" class=\"alert alert-warning\" >\n            <ul *ngFor=\"let warning of import.warnings\" class=\"list-item\">\n                Warning: {{warning}}\n            </ul>\n        </div>\n\n        <d-table [enableMultiSelect]=\"true\" [columns]=\"columns\" [dataObservable]=\"tableData\">\n            <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n                <d-button iconClass=\"fa fa-upload\" buttonClass=\"btn-primary\" (click)=\"importSelected(items)\" text=\"Import Selected\" class=\"ml-1\"></d-button>\n            </ng-template>\n            \n            <ng-template #actions let-items=\"items\">\n                    <d-button iconClass=\"fa fa-cloud-upload\" buttonClass=\"btn-primary\" (click)=\"importAll()\" text=\"Import All\"></d-button>\n                    <d-button-close class=\"ml-1\" (click)=\"reset()\"></d-button-close>\n                </ng-template>\n            </d-table>\n\n    </d-widget>\n\n</div>","export { ImportComponent } from './import/import.component';\nexport { ExportComponent } from './export/export.component';\n","import { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { HubCache, eCacheStatus} from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Observable ,  Subscription, combineLatest} from 'rxjs';\nimport { Location } from '@angular/common';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { TypeCodes, functionTypes } from '../../hub.remote.models';\nimport { FormGroup, FormArray } from '@angular/forms';\nimport { Message, CancelToken } from '../../../+auth/auth.models';\nimport { eParameterDirection, eFunctionType, DexihCustomFunction, eTypeCode,\n  DexihCustomFunctionParameter, DexihDatalinkTransformItem, eTransformItemType, DexihFunctionParameter } from '../../../shared/shared.models';\n\n@Component({\n\n  selector: 'dexih-customFunction-edit-form',\n  templateUrl: './customFunction-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class CustomFunctionEditComponent implements OnInit, OnDestroy {\n\n  private customFunctionKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  typeCodes = TypeCodes;\n  eParameterDirection = eParameterDirection;\n\n  outputParameters = [];\n  inputParameters = [];\n\n  outputParameterValues = [];\n  inputParameterValues = [];\n  returnParameterValue;\n\n  functionType: eFunctionType;\n  functionTypes = functionTypes;\n  eFunctionType = eFunctionType;\n\n  syntaxMessage: Message;\n\n  public testValue: string;\n  public testResult: any;\n\n  public lookupColumnValue = '';\n  private isLoaded = false;\n\n  public cancelToken: CancelToken = new CancelToken();\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _functionTypeSubscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n  constructor(private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Column Validation');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._functionTypeSubscription) { this._functionTypeSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  private load() {\n    this.isLoaded = true;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.customFunctionKey = + this.params['customFunctionKey'];\n\n      if (!this.customFunctionKey) {\n        this.hubService.addHubErrorMessage('There was no custom function specified to edit.');\n        // this.errorMessage = 'There was no validation specified to edit.';\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihCustomFunctions) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let customFunction = this.hubCache.hub.dexihCustomFunctions.find(c => c.key === this.customFunctionKey);\n          this.formsService.customFunction(customFunction);\n          this.functionType = this.formsService.currentForm.controls.functionType.value;\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let customFunction = new DexihCustomFunction();\n      customFunction.key = this.hubCache.getNextSequence();\n      this.formsService.customFunction(customFunction);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key >= 0) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/customFunction-new', `/customFunction-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n\n      this.functionType = this.formsService.currentForm.controls.functionType.value;\n    }\n\n    this._functionTypeSubscription = this.formsService.currentForm.controls.functionType.valueChanges.subscribe(functionType => {\n      this.functionType = functionType;\n      if (this.functionType === eFunctionType.Condition\n        || this.functionType === eFunctionType.JoinCondition || this.functionType === eFunctionType.Validate) {\n        this.formsService.currentForm.controls.returnType.setValue(eTypeCode.Boolean);\n        this.updateParameters();\n      }\n    });\n\n    this.updateParameters();\n  }\n\n  canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>(resolve => {\n      if (this.formsService.currentForm && !this.formsService.currentForm.pristine) {\n        this.authService.confirmDialog('Function has changed',\n        'The function has changed.  Would you like to discard the changes and return to the previous screen?'\n        ).then(confirm => {\n          resolve(confirm);\n        }).catch(reason => {\n          resolve(false);\n        });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  parametersArray(): FormArray {\n    return <FormArray> this.formsService.currentForm.controls.dexihCustomFunctionParameters;\n  }\n\n  private updateParameters() {\n    let parameters = this.parametersArray();\n    this.inputParameters = parameters.controls.sort((a, b) => a.value.position - b.value.position)\n      .filter(c => c.value.direction === eParameterDirection.Input);\n\n  this.outputParameters = parameters.controls.sort((a, b) => a.value.position - b.value.position)\n    .filter(c => c.value.direction === eParameterDirection.Output);\n\n    this.inputParameterValues.length = this.inputParameters.length;\n    this.outputParameterValues.length = this.outputParameters.length;\n  }\n\n  addParameter(parameter: FormGroup, direction: eParameterDirection) {\n    try {\n      let newParameter = new DexihCustomFunctionParameter();\n      if (parameter) {\n        let oldParameter = parameter.value;\n        newParameter.dataType = oldParameter.dataType;\n        newParameter.name = oldParameter.name;\n        newParameter.position = oldParameter.position + 1;\n      }\n\n      newParameter.key = this.hubCache.getNextSequence();\n      newParameter.name = '';\n      newParameter.direction = direction;\n      newParameter.rank = 0;\n      newParameter.isValid = true;\n\n      let parameters = this.parametersArray();\n      let newParameterForm = this.formsService.customFunctionParametersFormGroup(newParameter);\n      parameters.push(newParameterForm);\n\n      // reset the positions\n      parameters.controls.sort((a, b) => a.value.position - b.value.position).forEach((p, index) => {\n        (<FormGroup>p).controls.position.setValue(index * 10);\n      });\n\n      this.updateParameters();\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Edit Custom Function, add parameter');\n    }\n\n  }\n\n  addParameterValue(index: number, valueIndex: number) {\n    if (Array.isArray(this.inputParameterValues[index])) {\n      this.inputParameterValues[index].splice(valueIndex + 1, 0, '');\n    } else {\n      this.inputParameterValues[index] = new Array(1);\n    }\n  }\n\n  removeParameterValue(index: number, valueIndex: number) {\n    this.inputParameterValues[index].splice(valueIndex, 1);\n  }\n\n  removeParameter(parameter: FormGroup) {\n    try {\n      let inputParameters = this.parametersArray();\n      let index: number = inputParameters.controls.indexOf(parameter);\n      if (index > -1) {\n        inputParameters.removeAt(index);\n      }\n\n      this.updateParameters();\n\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Edit Custom Function, remove parameter');\n    }\n  }\n\n  downloadCode(parameters = null) {\n    let tmpTransform = this.createDataTransformItem();\n\n    this.hubService.downloadCustomFunction(tmpTransform, parameters);\n  }\n\n  test(parameters = null) {\n    let tmpTransform = this.createDataTransformItem();\n\n    this.hubService.testCustomFunction(tmpTransform, parameters, this.cancelToken).then(result => {\n      this.syntaxMessage = new Message(true, 'The function has successfully compiled.', null, null);\n\n      if (result && result.length > 0) {\n        result.forEach((value, index) => {\n          if (index === 0) {\n            this.returnParameterValue = value;\n          } else {\n            this.outputParameterValues[index - 1] = value;\n          }\n        });\n      } else {\n        this.returnParameterValue = null;\n        this.outputParameterValues.forEach(c => c = null );\n     }\n    }).catch(reason => {\n      let converted = reason;\n      if (reason.stack) {\n          converted = new Message(false, 'Client Error: ' + reason.message, reason.stack, '');\n      }\n      this.syntaxMessage = converted;\n      this.returnParameterValue = null;\n      this.outputParameterValues.forEach(c => c = null );\n    });\n  }\n\n  createDataTransformItem(): DexihDatalinkTransformItem {\n    let selectedCustomFunction: DexihCustomFunction = this.formsService.currentForm.value;\n\n    let item = new DexihDatalinkTransformItem();\n    item.functionCode = selectedCustomFunction.methodCode;\n    item.functionResultCode = selectedCustomFunction.resultCode;\n    item.transformItemType = eTransformItemType.CustomFunction;\n\n    let parameters: DexihFunctionParameter[] = [];\n\n      selectedCustomFunction.dexihCustomFunctionParameters.sort((a, b) => a.position - b.position)\n        .forEach((param: DexihCustomFunctionParameter, index: number) => {\n        if (param) {\n          let newParameter = new DexihFunctionParameter();\n          newParameter.key = 0;\n          newParameter.datalinkTransformItemKey = 0;\n          newParameter.name = param.name;\n          newParameter.rank = param.rank;\n          newParameter.direction = param.direction;\n          newParameter.dataType = param.dataType;\n          newParameter.position = index;\n          newParameter.isValid = true;\n\n          parameters.push(newParameter);\n        }\n      });\n\n      let returnParam = new DexihFunctionParameter();\n      returnParam.key = 0;\n      returnParam.datalinkTransformItemKey = 0;\n      returnParam.name = 'Return';\n      returnParam.rank = 0;\n      returnParam.direction = eParameterDirection.ReturnValue;\n      returnParam.dataType = selectedCustomFunction.returnType;\n      returnParam.position = 0;\n      returnParam.isValid = true;\n      parameters.push(returnParam);\n\n      // item.returnType = selectedCustomFunction.returnType;\n      item.dexihFunctionParameters = parameters;\n\n      return item;\n\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n}\n","<div class=\"container\">\n\t<d-widget-vertical>\n\t<d-widget \n\t\ttitle=\"Edit Function\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-code\" \n\t\t[showCloseButton]=\"true\"\n\t\t[padding]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t<ng-template #header>\n\t\t\t<dexih-invalid-form-details [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\" class=\"mr-1\"></dexih-invalid-form-details>\n\t\t\t<save-button *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\" class=\"mr-1\"></save-button>\n\t\t\t<cancel-button [formsService]=\"formsService\"></cancel-button>\n\t\t</ng-template>\n\n\t\t<form *ngIf=\"formsService.currentForm\"  [formGroup]=\"formsService.currentForm\">\n\t\t\t<fieldset>\n\t\t\t\t<section *ngIf=\"testResult\">\n\t\t\t\t\t<div class=\"alert \" [class.alert-danger]=\"testResult.success == false\" [class.alert-success]=\"testResult.success == true\">\n\t\t\t\t\t\tTest Result = {{testResult.success}}\n\t\t\t\t\t\t<div *ngIf=\"testResult.cleanedValue\">Cleaned Value = {{testResult.cleanedValue}} </div>\n\t\t\t\t\t\t<div *ngIf=\"testResult.rejectReason\">Reject Reason = {{testResult.rejectReason}} </div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-select label=\"Function Type\" formControlName=\"functionType\" [items]=\"functionTypes\" itemKey=\"key\" itemName=\"name\" iconClass=\"fa fa-question\">\n\t\t\t\t\t</form-select>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-input label=\"Custom Function Name\" formControlName=\"name\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\" [autocapitalize]=\"true\" [errors]=\"formsService.formErrors['name']\">\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-textarea label=\"Description\" [showMarkdown]=\"true\" formControlName=\"description\" placeholder=\"Enter the description.\">\n\t\t\t\t\t</form-textarea>\n\t\t\t\t</section>\n\n\t\t\t\t<ng-template [ngIf]=\"functionType\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class=\"label mb-1\">\n\t\t\t\t\t\t\tInput Parameters\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngIf=\"inputParameters.length === 0\" class=\"mb-1\">\n\t\t\t\t\t\t\t<d-button\n\t\t\t\t\t\t\t\t(click)=\"addParameter(null, eParameterDirection.Input)\"\n\t\t\t\t\t\t\t\ticonClass=\"fa fa-plus-square-o\"\n\t\t\t\t\t\t\t\ttitle=\"Click to add a parameter\" >Add Parameter\n\t\t\t\t\t\t\t</d-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngFor=\"let parameter of inputParameters; let i = index\" [ngStyle]=\"{'z-index': 200-i, 'position': 'relative'}\">\n\t\t\t\t\t\t\t<customFunction-parameter [customFunctionParameterForm]=\"parameter\" (addParameter)=\"addParameter($event, eParameterDirection.Input)\"\n\t\t\t\t\t\t\t (removeParameter)=\"removeParameter($event)\"></customFunction-parameter>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngIf=\"functionType != eFunctionType.Condition\">\n\t\t\t\t\t\t<div class=\"label mb-1\">\n\t\t\t\t\t\t\tOutput Parameters\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div [ngStyle]=\"{'z-index': 101, 'position': 'relative'}\">\n\t\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t\t<div class=\"input-group mb-1\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<input class=\"form-control\" readonly value=\"Return Data Type\" />\n\t\t\t\t\t\t\t\t\t<form-select [border]=\"false\" class=\"form-control p-0\"  formControlName=\"returnType\" [items]=\"typeCodes\" itemKey=\"key\" itemName=\"name\">\n\t\t\t\t\t\t\t\t\t\t</form-select>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</section>\n\n\t\t\t\t\t\t\t<div *ngIf=\"outputParameters.length === 0\">\n\t\t\t\t\t\t\t\t\t<d-button\n\t\t\t\t\t\t\t\t\t(click)=\"addParameter(null, eParameterDirection.Output)\"\n\t\t\t\t\t\t\t\t\ticonClass=\"fa fa-plus-square-o\"\n\t\t\t\t\t\t\t\t\ttitle=\"Click to add a parameter\" >Add Parameter</d-button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div *ngFor=\"let parameter of outputParameters; let i = index\" [ngStyle]=\"{'z-index': 100-i, 'position': 'relative'}\">\n\t\t\t\t\t\t\t\t<customFunction-parameter [customFunctionParameterForm]=\"parameter\" (addParameter)=\"addParameter($event, eParameterDirection.Output)\"\n\t\t\t\t\t\t\t\t (removeParameter)=\"removeParameter($event)\"></customFunction-parameter>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<br>\n\t\t\t\t\t</div>\n\t\t\t\t\tFunction Code\n\t\t\t\t\t<textarea class='form-control' rows=\"20\" width=\"100%\" spellcheck=\"false\" formControlName=\"methodCode\"></textarea>\n\t\t\t</ng-template>\n\t\t\t</fieldset>\n\t\t</form>\n\t\t</d-widget>\n\t\t<d-widget title=\"Test Function\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-code\" [padding]=\"true\" >\n\n\t\t<ng-template #header>\n\t\t\t<d-button class=\"mr-1\" buttonClass=\"btn btn-success\" (click)=\"test()\">Syntax Check</d-button>\n\t\t\t<d-button class=\"mr-1\" buttonClass=\"btn btn-success\" (click)=\"test(inputParameterValues)\">Run</d-button>\n\t\t\t<d-button-save-local (click)=\"downloadCode(inputParameterValues)\" text=\"Sample Code\"></d-button-save-local>\n\t\t</ng-template>\n\n\t\t<dexih-message [message]=\"syntaxMessage\"></dexih-message>\n\n\t\t<form>\n\t\t\t<fieldset>\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"label\" *ngIf=\"inputParameters.length > 0\">\n\t\t\t\t\t\tInput Parameters\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngFor=\"let inputParameter of inputParameters; let i = index\" [ngStyle]=\"{'z-index': 200-i, 'position': 'relative'}\">\n\t\t\t\t\t\t<div *ngIf=\"inputParameter.controls.rank.value > 0; else showValue\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<d-button\n\t\t\t\t\t\t\t\t\t(click)=\"addParameterValue(i)\"\n\t\t\t\t\t\t\t\t\ticonClass=\"fa fa-plus-square-o\"\n\t\t\t\t\t\t\t\t\ttitle=\"Click to add a parameter\" >\n\t\t\t\t\t\t\t\t\tAdd {{inputParameter.controls.name.value}} value\n\t\t\t\t\t\t\t\t</d-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div *ngFor=\"let value of inputParameterValues[i]; let j = index\">\n\n\t\t\t\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"form-control\">\n\t\t\t\t\t\t\t\t\t\t\t{{inputParameter.controls.name.value + '[' + j + ']'}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<form-input [border]=\"false\" class=\"form-control p-0\" [(ngModel)]=\"inputParameterValues[i][j]\" [name]=\"'inputParameterValues-' + i + '-' + j\" type=\"text\" placeholder=\"Enter a test value for the parameter\"></form-input>\n\n\t\t\t\t\t\t\t\t\t\t<div class=\"input-group-text p-0\">\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" (click)=\"addParameterValue(i, j)\" class=\"btn btn-sm border-0 bg-transparent\" value=\"Add\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-plus-square-o\"></i>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"input-group-text p-0\">\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" (click)=\"removeParameterValue(i, j)\" class=\"btn btn-sm border-0 bg-transparent\" value=\"Remove\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-minus-square-o\"></i>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ng-template #showValue>\n\t\t\t\t\t\t\t<form-input [label]=\"inputParameter.controls.name.value\" [(ngModel)]=\"inputParameterValues[i]\" [name]=\"'inputParameterValues' + i\"\n\t\t\t\t\t\t\t type=\"text\" placeholder=\"Enter a test value for the parameter\"></form-input>\n\t\t\t\t\t\t</ng-template>\n\t\t\t\t\t</div>\n\t\t\t\t\t<form-input label=\"Return Value\" [disabled]=\"true\" [(ngModel)]=\"returnParameterValue\" name=\"returnParameterValue\" type=\"text\"></form-input>\n\t\t\t\t\t<div class=\"label\" *ngIf=\"outputParameters.length > 0\">\n\t\t\t\t\t\tOutputs Parameters\n\t\t\t\t\t</div>\n\t\t\t\t\t<div *ngFor=\"let outputParameter of outputParameters; let i = index\" [ngStyle]=\"{'z-index': 200-i, 'position': 'relative'}\">\n\t\t\t\t\t\t<form-input [disabled]=\"true\" [label]=\"outputParameter.controls.name.value\" [(ngModel)]=\"outputParameterValues[i]\"\n\t\t\t\t\t\t [name]=\"'outputParameterValues' + i\" type=\"text\"></form-input>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\t\t</form>\n\t</d-widget>\n\n\t<dexih-help class=\"m-3\" title=\"Custom Functions\" path=\"/assets/help/reference/function.md\"></dexih-help>\n\n</d-widget-vertical>\n</div>","import { Component, Input, Output, ViewChild, OnInit, OnDestroy, EventEmitter } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { TypeFunctions, TypeCodes, eBasicType } from '../../hub.remote.models';\n\n@Component({\n\n    selector: 'customFunction-parameter',\n    templateUrl: './customFunction-parameter.component.html'\n})\nexport class CustomFunctionParameterComponent implements OnInit, OnDestroy {\n\n    @Input() public customFunctionParameterForm: FormGroup = null;\n\n    @Output() public addParameter: EventEmitter<FormGroup> = new EventEmitter<FormGroup>();\n    @Output() public removeParameter: EventEmitter<FormGroup> = new EventEmitter<FormGroup>();\n\n\n    private type: TypeFunctions;\n    eBasicType = eBasicType;\n    typeCodes = TypeCodes;\n\n    public staticValue: string;\n\n    ignoreChanges = false;\n\n    constructor() {\n    }\n\n    ngOnInit() {\n    }\n\n    ngOnDestroy() {\n    }\n\n    add() {\n        this.addParameter.emit(this.customFunctionParameterForm);\n    }\n\n    remove() {\n        this.removeParameter.emit(this.customFunctionParameterForm);\n    }\n\n}\n","<form [formGroup]=\"customFunctionParameterForm\" class=\"mb-1\">\n        <div class=\"input-group\">\n            <input type=\"text\" class=\"form-control\" formControlName=\"name\" placeholder=\"Enter a name for the parameter\">\n\n            <!-- <form-input [border]=\"false\" class=\"form-control p-0\" formControlName=\"name\" type=\"text\" placeholder=\"Enter a name for the parameter\"></form-input> -->\n\n            <form-select [border]=\"false\" class=\"form-control p-0\" formControlName=\"dataType\" [items]=\"typeCodes\" itemKey=\"key\" itemName=\"name\">\n            </form-select>\n\n            <div class=\"input-group-append\">\n                <div class=\"input-group-text p-0\">\n                    <span class=\"p-1\">Array Dimensions (0-non array)</span>\n                    <input class=\" mx-1\" type=\"number\" formControlName=\"rank\">\n                </div>\n                <div class=\"input-group-text p-0\">\n                    <button type=\"button\" (click)=\"add()\" class=\"btn btn-sm border-0 bg-transparent\" value=\"Add\">\n                        <i class=\"fa fa-plus-square-o\"></i>\n                    </button>\n                </div>\n                <div class=\"input-group-text p-0\">\n                    <button type=\"button\" (click)=\"remove()\" class=\"btn btn-sm border-0 bg-transparent\" value=\"Remove\">\n                        <i class=\"fa fa-minus-square-o\"></i>\n                    </button>\n                </div>\n            </div>\n        </div>\n</form>","export {CustomFunctionEditComponent} from './customFunction-edit.component';\nexport {CustomFunctionParameterComponent} from './customFunction-parameter.component';\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { HubCache } from '../../hub.models';\nimport { DexihCustomFunction, DexihHub, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'customFunction',\n  templateUrl: './customFunction-index.component.html',\n  styles: []\n})\nexport class CustomFunctionIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    customFunctions: Array<DexihCustomFunction>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags'},\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar'},\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                this.hubCache = result[0];\n                this.updateCustomFunctions();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Column Validation Index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    deleteCustomFunctions(functions: Array<DexihCustomFunction>) {\n        this.hubService.deleteCustomFunctions(functions);\n    }\n\n    updateCustomFunctions() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let functions = this.hubCache.hub.dexihCustomFunctions.filter(c => c.isValid)\n                .map(c => {\n                    return {\n                        key: c.key,\n                        name: c.name,\n                        description: c.description,\n                        updateDate: c.updateDate,\n                        tags: this.hubCache.getObjectTags(eSharedObjectType.CustomFunction, c.key)\n                    }\n                });\n            this._tableData.next(functions);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(customFunction: DexihCustomFunction) {\n        this.router.navigate(['customFunction-edit', customFunction.key], { relativeTo: this.route});\n    }\n\n    export(items: Array<DexihCustomFunction>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        items.forEach(item => { this.hubCache.cacheAddCustomFunction(item.key, hub); });\n\n        let filename = items.length === 1 ? 'CustomFunction - ' + items[0].name + '.json' : 'customFunctions.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    watchChanges() {\n      // watch the current validation in case it is changed in another session.\n      this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n          if (hubCacheChange.changeClass === eSharedObjectType.CustomFunction ||\n            hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n            this.updateCustomFunctions();\n          }\n      });\n  }\n}\n","<div class=\"container-fluid\">\n    <d-widget title=\"Custom Functions\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-code\" \n\t\t[showCloseButton]=\"true\"\n\t\t[padding]=\"false\"\n\t\t(close)=\"close()\"\n\t>\n\t\t<d-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<d-button-save-local class=\"mr-1\" (click)=\"export(items)\"></d-button-save-local>\n\t\t\t\t\t<d-button-delete class=\"mr-1\" *ngIf=\"hubCache.canWrite\" (click)=\"deleteCustomFunctions(items)\"></d-button-delete>\n\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.CustomFunction\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<d-button-new *ngIf=\"hubCache.canWrite\" class=\"mr-1\" [routerLink]=\"['customFunction-new']\"></d-button-new>\n\t\t\t\t</ng-template>\n\t\t</d-table>\n\n\t</d-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Custom Functions\" path=\"/assets/help/reference/function.md\"></dexih-help>\n\n</div>\n\n\n","export * from './customFunction-index/customFunction-index.component';\nexport {CustomFunctionEditComponent, CustomFunctionParameterComponent} from './customFunction-edit';\n","import { Component, OnInit, OnDestroy, HostListener, QueryList, ViewChildren } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { HubService } from '../../hub.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { FormArray, FormGroup } from '@angular/forms';\nimport { DashboardItemComponent } from './item/dashboard-item.component';\nimport { EventEmitter } from 'selenium-webdriver';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { HubCache, eCacheStatus, DataCache, PreviewResults } from '../../hub.models';\nimport { DexihView, DexihDashboard, DexihDashboardItem, DexihActiveAgent, DownloadObject, eDataObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'dexih-dashboard-edit-form',\n  templateUrl: './dashboard-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class DashboardEditComponent implements OnInit, OnDestroy {\n  @ViewChildren('dashboardItem') dashboardItems: QueryList<DashboardItemComponent>;\n\n  public dashboardKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n  public remoteAgent: DexihActiveAgent;\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private isLoaded = false;\n\n  public isRefreshing = false;\n  private refreshComplete = false;\n  private cancelToken = new CancelToken();\n\n  views: DexihView[];\n\n  constructor(\n    private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router\n  ) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n        this.hubService.getRemoteAgentObservable()\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n        this.remoteAgent = result[3];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        this.views = this.hubCache.hub.dexihViews;\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Dashboard Edit');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n  load() {\n    this.isLoaded = true;\n\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.dashboardKey = +this.params['dashboardKey'];\n\n      if (!this.dashboardKey) {\n        this.hubService.addHubErrorMessage('There was no dashboard specified to edit.');\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihColumnValidations) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let dashboard = this.hubCache.hub.dexihDashboards.find(c => c.key === this.dashboardKey);\n\n          // create a copy of the dashboard to avoid changes to the hub cache.\n          dashboard = JSON.parse(JSON.stringify(dashboard));\n          this.formsService.dashboard(dashboard);\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      this.refreshComplete = true;\n      let dashboard = new DexihDashboard();\n      dashboard.minCols = 4;\n      dashboard.maxCols = 100;\n      dashboard.minRows = 4;\n      dashboard.maxRows = 100;\n      dashboard.autoRefresh = true;\n\n      this.formsService.dashboard(dashboard);\n      let runTime = this.formsService.currentForm.controls.runTime.value;\n      runTime.showEdit = true;\n      // this.formsService.currentForm.controls.runTime.setValue(runTime);\n      // this.add();\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/dashboard-new', `/dashboard-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n\n    if (this.formsService.currentForm.controls.autoRefresh.value && this.remoteAgent && !this.refreshComplete) {\n      this.refreshComplete = true;\n      this.refresh();\n    }\n  }\n\n  // add() {\n  //   let form = this.formsService.currentForm;\n  //   let items = <FormArray> form.controls.dexihDashboardItems;\n  //   let item = new DexihDashboardItem();\n  //   item.cols = 1;\n  //   item.rows = 1;\n  //   item.x = 0;\n  //   item.y = 0;\n  //   let control = this.formsService.dashboardItem(item);\n  //   items.push(control);\n  // }\n\n  refresh() {\n    this.hubService.previewDashboard(this.formsService.currentForm.value,\n      this.formsService.currentForm.value.parameters, this.cancelToken).then(keys => {\n      let items = <FormArray> this.formsService.currentForm.controls.dexihDashboardItems;\n\n      keys.forEach(url => {\n        let item = <FormGroup> items.controls.find((form: FormGroup) => form.controls.key.value === url.dashboardItemKey);\n        if (item) {\n          let data = <DataCache> item.controls.runTime.value.data;\n          data.isRefreshing = true;\n          this.hubService.getRemoteResponse<PreviewResults>(url.dataKey, this.cancelToken).then(result => {\n            result.columns = this.authService.constructDataTableColumns(result.columns);\n            data.data.next(result);\n            data.isRefreshing = false;\n          }).catch();\n        }\n      });\n    });\n  }\n\n  public toggleEdit() {\n    let runTime = this.formsService.currentForm.controls.runTime.value;\n    runTime.showEdit = !runTime.showEdit;\n    this.formsService.currentForm.controls.runTime.setValue(runTime);\n  }\n\n  public toggleLock() {\n    let runTime = this.formsService.currentForm.controls.runTime.value;\n    runTime.lock = !runTime.lock;\n    this.formsService.currentForm.controls.runTime.setValue(runTime);\n  }\n\n  add(viewKey) {\n    let view = this.hubCache.hub.dexihViews.find(c => c.key === viewKey);\n    if (!view) { return; }\n    let form = this.formsService.currentForm;\n    let items = <FormArray> form.controls.dexihDashboardItems;\n    let item = new DexihDashboardItem();\n    item.key = this.hubCache.getNextSequence();\n\n    item.cols = 1;\n    item.rows = 1;\n    item.x = -1;\n    item.y = -1;\n\n    // look for an empty cell\n    found:\n    for (let row = 0; row < form.controls.maxRows.value; row++) {\n      for (let col = 0; col < form.controls.maxCols.value; col++) {\n        let occupied = false;\n        for (let i = 0; i < items.controls.length; i++) {\n          let currentItem = <DexihDashboardItem> items.controls[i].value;\n          if (currentItem.x <= col && (currentItem.x + currentItem.cols) > col &&\n            currentItem.y <= row && (currentItem.y + currentItem.rows) > row) {\n              occupied = true;\n              break;\n          }\n        }\n\n        if (!occupied) {\n          item.x = col;\n          item.y = row;\n\n          break found;\n        }\n      }\n    }\n    item.viewKey = viewKey;\n    item.name = view.name;\n    let formGroup = this.formsService.dashboardItem(item);\n    this.formsService.updateDashboardItemView(formGroup);\n    items.push(formGroup);\n  }\n\n  public newView() {\n    this.router.navigate(['view-new'], { relativeTo: this.route } )\n  }\n\n  download(format) {\n    let items = <DexihDashboardItem[]> this.formsService.currentForm.controls.dexihDashboardItems.value;\n\n    let downloadObjects = items.filter(c => c.viewKey).map(item => {\n      let view = this.hubCache.hub.dexihViews.find(c => c.key === item.viewKey);\n\n      let downloadObject = new DownloadObject();\n      if (view.sourceType === eDataObjectType.Datalink) {\n        downloadObject.objectKey = view.sourceDatalinkKey;\n        downloadObject.objectType = eDataObjectType.Datalink;\n      }\n      if (view.sourceType === eDataObjectType.Table) {\n        downloadObject.objectKey = view.sourceTableKey;\n        downloadObject.objectType = eDataObjectType.Table;\n      }\n      downloadObject.query = view.selectQuery;\n\n      return downloadObject;\n    })\n\n    this.hubService.downloadData(downloadObjects, false, format, this.cancelToken)\n  }\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The dashboard has not been saved',\n          'The dashboard changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The dashboard changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","<div class=\"container-fluid\" >\n\t<d-widget title=\"Dashboard - {{formsService?.currentForm?.controls.name.value}}\" iconClass=\"fa fa-lg fa-fw fa-pie-chart\" [showCloseButton]=\"true\" [padding]=\"false\"\n\t (close)=\"close()\">\n\t\t<ng-template #header>\n\t\t\t<dexih-invalid-form-details [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\" class=\"mr-1\"></dexih-invalid-form-details>\n\t\t\t<d-button-edit class=\"mr-1\" (click)=\"toggleEdit()\" [text]=\"formsService.currentForm?.controls.runTime.value.showEdit ? 'Hide Edit' : 'Edit'\"></d-button-edit>\n\t\t\t<d-button [iconClass]=\"formsService.currentForm?.controls.runTime.value.lock ? 'fa fa-lock' : 'fa fa-unlock'\" class=\"mr-1\" (click)=\"toggleLock()\" [text]=\"formsService.currentForm?.controls.runTime.value.lock ? 'Unlock' : 'Lock'\"></d-button>\n\t\t\t<d-button-refresh class=\"mr-1\"  (click)=\"refresh()\"></d-button-refresh>\n\t\t\t<d-button-dropdown class=\"mr-1\" iconClass=\"fa fa-plus\" text=\"Add\">\n\t\t\t\t<a class=\"dropdown-item\" (click)=\"newView()\">(New View)</a>\n\t\t\t\t<li *ngFor=\"let view of views\"><a class=\"dropdown-item\" (click)=\"add(view.key)\">{{view.name}}</a></li>\n\t\t\t</d-button-dropdown>\n\t\t\t<download-button class=\"mr-1\" (download)=\"download($event)\"></download-button>\n\t\t\t<save-button *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\" class=\"mr-1\"></save-button>\n\t\t\t<cancel-button [formsService]=\"formsService\"></cancel-button>\n\t\t</ng-template>\n\n\t\t<router-outlet></router-outlet>\n\n\t</d-widget>\n</div>","export {DashboardEditComponent} from './dashboard-edit.component';\nexport {DashboardItemComponent} from './item/dashboard-item.component';\n","import { Component, OnInit, Input, OnDestroy, Output, EventEmitter,\n    ViewChild, OnChanges, SimpleChanges } from '@angular/core';\nimport { FormGroup, FormArray } from '@angular/forms';\nimport { HubService } from '../../..';\nimport { Subscription, combineLatest, Subject } from 'rxjs';\nimport { HubCache, DexihInputParameter, DataCache, PreviewResults } from '../../../hub.models';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { DWidgetComponent } from 'ngx-d-components';\nimport { CancelToken } from '../../../../+auth/auth.models';\nimport { DexihView, InputParameterBase, InputParameter, eDataObjectType, eViewType, DexihActiveAgent } from '../../../../shared/shared.models';\nimport { AuthService } from '../../../../+auth/auth.service';\n\n@Component({\n    selector: 'dashboard-item',\n    templateUrl: 'dashboard-item.component.html',\n    styleUrls: ['./dashboard-item.component.scss']\n})\n\nexport class DashboardItemComponent implements OnInit, OnChanges, OnDestroy {\n    @Input() item: FormGroup;\n    @Input() showEdit = true;\n    @Input() showPreview = false;\n    @Input() refreshData: EventEmitter<string>;\n    @Input() isMaximized = false;\n\n    @Output() onRemove = new EventEmitter();\n    @Output() onMaximize = new EventEmitter<FormGroup>();\n\n    @ViewChild('widget', {static: true}) public widget: DWidgetComponent;\n\n    private _subscription: Subscription;\n    private _viewKeySubscription: Subscription;\n    private _refreshDataSubscription: Subscription;\n    private _parametersSubscription: Subscription;\n\n    hubCache: HubCache;\n    remoteAgent: DexihActiveAgent;\n\n    eViewType = eViewType;\n\n    views: DexihView[];\n    view: DexihView;\n    parameters: DexihInputParameter[];\n\n    private firstLoad = true;\n    private dialogOpen = false;\n\n    data: DataCache;\n    dataResult: PreviewResults;\n    public dataRows = [];\n\n    private refreshDataSubject: Subject<void> = new Subject<void>();\n\n    private cancelToken = new CancelToken();\n\n    public parentParameters;\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        private formsService: HubFormsService) {\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.hubService.getHubCacheObservable(),\n                this.hubService.getRemoteAgentObservable()\n            ).subscribe(result => {\n                this.hubCache = result[0];\n                this.remoteAgent = result[1];\n\n                if (this.hubService.isHubCacheLoaded) {\n                    this.views = this.hubCache.hub.dexihViews;\n                    if (this.item?.controls.viewKey) {\n                        this.view = this.hubCache.hub.dexihViews.find(c => c.key === this.item.controls.viewKey.value);\n\n                        this.data = <DataCache> this.item.controls.runTime.value.data;\n\n                        if (this.data) {\n                            this._refreshDataSubscription = this.data.data.subscribe(dataResult => {\n                                if (!dataResult) {\n                                    return;\n                                }\n\n                                this.dataResult = dataResult;\n\n                                if (!dataResult.viewConfig.animateConfig) {\n                                    this.dataRows = this.dataResult.data;\n                                }\n\n                                if (dataResult.status) {\n                                    this.hubService.addHubMessage(dataResult.status, false, this.view.name);\n                                }\n                            });\n\n                        } else if (this.remoteAgent) {\n                            if (!this.firstLoad) {\n                                if (!this.dialogOpen) {\n                                    this.dialogOpen = true;\n                                    this.authService.confirmDialog('Remote Agent Available',\n                                        'A remote agent is available, would you like to refresh the data?').then(confirm => {\n                                            if (confirm) {\n                                                this.refresh();\n                                            }\n                                            this.dialogOpen = false;\n                                        });\n                                }\n                            } else {\n                                this.refresh();\n                            }\n\n                            this.firstLoad = false;\n                        }\n                    }\n\n                    this.parentParameters = this.formsService.currentForm.controls.parameters.value;\n                    if (this._parametersSubscription) { this._parametersSubscription.unsubscribe(); }\n                    this._parametersSubscription = this.formsService.currentForm.controls.parameters.valueChanges.subscribe(value => {\n                        this.parentParameters = value;\n                    });\n                }\n            });\n\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'View Index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._viewKeySubscription) { this._viewKeySubscription.unsubscribe(); }\n        if (this._refreshDataSubscription) { this._refreshDataSubscription.unsubscribe(); }\n        if (this._parametersSubscription) { this._parametersSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        let itemChange = changes['item'];\n        if (itemChange) {\n            let newItem = <FormGroup> itemChange.currentValue;\n\n            if (this.views && newItem.value) {\n                this.view = this.hubCache.hub.dexihViews.find(c => c.key === newItem.value);\n            }\n            if (this._viewKeySubscription) { this._viewKeySubscription.unsubscribe(); }\n            this._viewKeySubscription = newItem.controls.viewKey.valueChanges.subscribe(viewKey => {\n                this.formsService.updateDashboardItemView(newItem);\n            });\n        }\n    }\n\n    // public updateView(viewKey) {\n    //     if (this.views && viewKey) {\n    //         this.view = this.hubCache.hub.dexihViews.find(c => c.key === viewKey);\n    //         if (this.view) {\n    //             this.item.controls.name.setValue(this.view.name);\n    //             this.item.controls.runTime.value.data = new DataCache();\n\n    //             // reset parameters.\n    //             let formParameters = <FormArray> this.item.controls.parameters;\n    //             let currentParameters = <DexihInputParameter[]> formParameters.value;\n\n    //             formParameters.clear();\n\n    //             let parameters = <InputParameterBase[]> this.view.parameters;\n    //             if (this.view.sourceType === eDataObjectType.Datalink) {\n    //                 let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === this.view.sourceDatalinkKey);\n    //                 if (datalink && datalink.parameters) {\n    //                     parameters = parameters.concat(datalink.parameters);\n    //                 }\n    //             }\n\n    //             parameters.forEach(parameter => {\n    //                 let currentParameter = currentParameters.find( c => c.name === parameter.name);\n    //                 let newParameter = new InputParameterBase();\n    //                 if (currentParameter) {\n    //                     newParameter.name = currentParameter.name;\n    //                     newParameter.value = currentParameter.value;\n    //                 } else {\n    //                     newParameter.name = parameter.name;\n    //                     newParameter.value = parameter.value;\n    //                 }\n    //                 let newFormParameter = this.formsService.parameter(newParameter);\n    //                 formParameters.push(newFormParameter);\n    //             });\n    //         }\n    //     }\n    // }\n\n    public refresh() {\n        let preview = this.hubService.previewViewKey(this.item.controls.viewKey.value, null,\n            this.formsService.currentForm.controls.parameters.value,\n        this.item.controls.parameters.value, this.cancelToken);\n        this.data = <DataCache> this.item.controls.runTime.value.data;\n        this.data.refresh(preview);\n        preview.then(results => {\n            this.refreshDataSubject.next();\n            this.dataResult = results;\n            if (!this.dataResult.viewConfig.animateConfig) {\n                this.dataRows = this.dataResult.data;\n            }\n        }).catch(reason => {\n            this.hubService.addHubMessage(reason);\n        });\n    }\n\n    parameterChange() {\n        this.refresh();\n    }\n\n    public toggleEdit() {\n        this.showEdit = !this.showEdit;\n    }\n\n    removeItem($event) {\n        $event.preventDefault();\n        $event.stopPropagation();\n        this.onRemove.emit();\n    }\n\n    public maximise() {\n        this.onMaximize.emit(this.item);\n    }\n}\n","<div class=\"side-menu\">\n    <div class=\"side-menu-content\">\n        <div class=\"spin-icon\">\n            <i class=\"fa fa-cog fa-spin\"></i>\n        </div>\n        <div class=\"side-menu-box\">\n            <div class=\"bg-light rounded p-1\">\n                <div>\n                    <d-button-refresh [compact]=\"true\" (click)=\"refresh()\"></d-button-refresh>\n                    <d-button-edit *ngIf=\"!this.showEdit\" class=\"ml-1\" [compact]=\"true\" (click)=\"toggleEdit()\">\n                    </d-button-edit>\n                    <d-button-preview *ngIf=\"this.showEdit\" class=\"ml-1\" [compact]=\"true\" (click)=\"toggleEdit()\">\n                    </d-button-preview>\n                    <d-button *ngIf=\"!isMaximized\" class=\"ml-1\" buttonClass=\"btn btn-primary\"\n                        iconClass=\"fa fa-window-maximize text-white\" (click)=\"maximise()\" tooltip=\"Maximize window\">\n                    </d-button>\n                    <d-button *ngIf=\"isMaximized\" class=\"ml-1\" buttonClass=\"btn btn-primary\"\n                        iconClass=\"fa fa-window-minimize text-white\" (click)=\"maximise()\" tooltip=\"Minimize window\">\n                    </d-button>\n                    <d-button-delete class=\"ml-1\" (click)=\"removeItem($event)\" [compact]=\"true\">\n                    </d-button-delete>\n                </div>\n\n                <div *ngIf=\"!showEdit && !showPreview && view\">\n\n                    <div class=\"m-1\" *ngIf=\"inputColumns && inputColumns.length > 0\">\n                        <span *ngFor=\"let column of inputColumns; let i = index\" class=\"input-group\">\n                            <div class=\"input-group-prepend\">\n                                <div class=\"input-group-text\">\n                                    {{column.logicalName}}\n                                </div>\n                            </div>\n                            <form-input name=\"column{{i}}\" class=\"form-control p-0\"\n                                [placeholder]=\"'Enter ' + column.logicalName\" [(ngModel)]=\"column.value\"></form-input>\n                        </span>\n                    </div>\n\n                    <div class=\"m-1\" *ngIf=\"item.controls.parameters.length > 0\">\n                        <input-parameters [showEdit]=\"false\" [parameters]=\"item.controls.parameters\"\n                            [formsService]=\"formsService\" [parentParameters]=\"parentParameters\"\n                            (onRefreshData)=\"refresh()\" [refreshEvent]=\"refreshDataSubject.asObservable()\">\n                        </input-parameters>\n                    </div>\n\n                    <div *ngIf=\"!data?.isRefreshing && dataResult?.columns?.length > 0 && dataResult?.viewConfig && dataResult?.data\"\n                        class=\"m-1\" style=\"z-index: 99999;\">\n                        <series-animate [showEdit]=\"false\" [showFrame]=\"false\"\n                            [animateConfig]=\"dataResult?.viewConfig.animateConfig\" [columns]=\"dataResult?.columns\"\n                            (hasChanged)=\"hasChanged()\" [baseData]=\"dataResult?.data\" [(data)]=\"dataRows\">\n                        </series-animate>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div *ngIf=\"showEdit\" class=\"p-3 gridster-item-content\">\n    <form [formGroup]=\"item\">\n        <section>\n            <form-input label=\"Item Name\" formControlName=\"name\" placeholder=\"Enter the dashboard item name.\"\n                [autocapitalize]=\"on\" iconClass=\"fa fa-list\">\n            </form-input>\n        </section>\n        <section>\n            <form-textarea label=\"Description\" [showMarkdown]=\"true\" formControlName=\"description\"\n                placeholder=\"Enter the description.\">\n            </form-textarea>\n        </section>\n        <section>\n            <form-select label=\"Select View\" formControlName=\"viewKey\" [items]=\"views\" itemKey=\"key\" itemName=\"name\">\n                <view-edit-button [key]=\"item.controls.viewKey.value\"></view-edit-button>\n            </form-select>\n        </section>\n        <section>\n            <form-checkbox label=\"Show Header\" formControlName=\"header\">\n            </form-checkbox>\n            <form-checkbox label=\"Allow Scrolling\" formControlName=\"scrollable\">\n            </form-checkbox>\n        </section>\n    </form>\n\n    <input-parameters [showEdit]=\"showEdit\" [allowAddRemove]=\"false\" [parameters]=\"item.controls.parameters\" [formsService]=\"formsService\"\n        [parentParameters]=\"parentParameters\" (onRefreshData)=\"refresh()\" [refreshEvent]=\"refreshDataSubject.asObservable()\">\n    </input-parameters>\n\n</div>\n\n<ng-template [ngIf]=\"!showEdit\">\n\n    <div *ngIf=\"!showPreview && view\" class=\"box\" [ngStyle]=\"{'overflow': item.controls.scrollable.value ? 'scroll' : 'hidden'}\">\n        <div *ngIf=\"data?.isRefreshing; else notRefreshing\" class=\"p-3\">\n            <div class=\"dexih-loader\"></div> Refreshing, please wait...\n        </div>\n        \n        <ng-template #notRefreshing>\n\n            <div *ngIf=\"item.controls.header.value\" class=\"box-header bg-secondary text-white\">\n                <div class=\"m-3\">\n                    <b>{{item.controls.name.value}}</b>\n                </div>\n            </div>\n        \n            <div *ngIf=\"item.controls.description.value\" class=\"box-header\">\n                <div class=\"m-1\">\n                    <markdown [data]=\"item.controls.description.value\"></markdown>\n                </div>\n            </div>\n    \n\n            <div class=\"box-content\"\n                *ngIf=\"!data?.isRefreshing && dataResult?.columns?.length > 0 && dataResult?.data?.length > 0; else elseBlock\">\n\n                <d-table *ngIf=\"view.viewType == eViewType.Table\" [enableMultiSelect]=\"false\" [enableResponsive]=\"false\"\n                    [enableSaveCsv]=\"false\" [enableFilter]=\"false\" [columns]=\"dataResult.columns\" [data]=\"dataRows\">\n                </d-table>\n\n                <div class=\"h-100\">\n                <chart-view [responsive]=\"true\" *ngIf=\"view.viewType == eViewType.Chart\" [columns]=\"dataResult.columns\"\n                    [data]=\"dataRows\" [config]=\"view.chartConfig\">\n                </chart-view>\n            </div>\n            </div>\n            <ng-template #elseBlock>\n                <div class=\"alert alert-info\" (click)=\"refresh()\">\n                    <i class=\"fa fa-warning\"></i>\n                    Select to refresh the view.\n                </div>\n            </ng-template>\n        </ng-template>\n    </div>\n</ng-template>","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { HubCache } from '../../hub.models';\nimport { DexihDashboard, DexihHub, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'dashboards',\n    templateUrl: './dashboard-index.component.html',\n    styles: []\n})\nexport class DashboardIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    dashboards: Array<DexihDashboard>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },\n        { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n\n                this.updateDashboards();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Dashboard Index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    delete(dashboard: Array<DexihDashboard>) {\n        // TDB\n        this.hubService.deleteDashboards(dashboard);\n    }\n\n    updateDashboards() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let dashboards: Array<DexihDashboard>;\n            dashboards = this.hubCache.hub.dexihDashboards.filter(c => c.isValid);\n            let tableData = dashboards.map(dashboard => {\n                return {\n                    key: dashboard.key,\n                    name: dashboard.name,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.Dashboard, dashboard.key),\n                    updateDate: dashboard.updateDate,\n                    sharedIcon: dashboard.isShared ? 'fa fa-group' : 'fa fa-user-secret',\n                    sharedToolTip: dashboard.isShared ? 'Table is shared' : 'Table is private'\n                };\n            });\n            this._tableData.next(tableData);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(dashboard: DexihDashboard) {\n        this.router.navigate(['dashboard-edit', dashboard.key], { relativeTo: this.route });\n    }\n\n    // TBD\n    export(items: Array<DexihDashboard>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(cache.hub.hubKey, '');\n        items.forEach(item => { cache.cacheAddDashboard(item.key, hub); });\n\n        let filename = items.length === 1 ? 'Dashboard - ' + items[0].name + '.json' : 'dashboards.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    // TBD\n    watchChanges() {\n        // watch the current validation in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Dashboard || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateDashboards();\n            }\n        });\n    }\n}\n","<div class=\"container-fluid\">\n    <d-widget title=\"Dashboards\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-pie-chart\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t\t<d-table \n\t\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t\t[columns]=\"columns\"\n\t\t\t\t[dataObservable]=\"tableData\"\n\t\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t\t>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.Dashboard'></dependent-items-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.Dashboard\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t\t</ng-template>\n\n\t\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t\t<actions-dashboard-button [dashboards]=\"items\"></actions-dashboard-button>\n\t\t\t\t\t</ng-template>\n\t\t\t</d-table>\n\n\t</d-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Dashboards\" path=\"/assets/help/reference/dashboard.md\"></dexih-help>\n</div>\n\n\n","export * from './dashboard-index.component';\n","export * from './dashboard-index/';\nexport {DashboardEditComponent, DashboardItemComponent} from './dashboard-edit/';\n","import { HostListener, Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Route, Router, Params } from '@angular/router';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DexihDatajob } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'dexih-datajob-edit-form',\n  templateUrl: './datajob-edit.component.html'\n})\nexport class DatajobEditComponent implements OnInit, OnDestroy {\n  public datajobKey: number;\n\n  public hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n  private isLoaded = false;\n\n\n  constructor(private hubService: HubService,\n    public formsService: HubFormsService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(true),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Datajob Edit');\n    }\n\n\n  }\n\n  ngOnDestroy() {\n    if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n\n    this.formsService.ngOnDestroy();\n  }\n\n  load() {\n    this.isLoaded = true;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.datajobKey = + this.params['datajobKey'];\n\n      if (!this.datajobKey) {\n        this.hubService.addHubErrorMessage('There was no datajob specified to edit.');\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihDatajobs) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n\n          let datajob = this.hubCache.hub.dexihDatajobs.find(c => c.key === this.datajobKey);\n          if (!datajob) {\n            this.hubService.addHubErrorMessage('The specified datajob could not be found.');\n          } else {\n            this.formsService.datajob(datajob);\n          }\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let datajob: DexihDatajob;\n      if (this.hubService.newDatajob) {\n        datajob = this.hubService.newDatajob;\n        this.hubService.newDatajob = null;\n      } else {\n        datajob = this.hubService.createDefaultDatajob();\n        datajob.key = 0;\n      }\n\n      this.formsService.datajob(datajob);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/datajob-new', `/datajob-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n  }\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The data job has not been saved',\n          'The datajob changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The datajob changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","<div class=\"container\">\n    <d-widget title=\"Edit Job\" iconClass=\"fa fa-lg fa-fw fa-cog\">\n\n        <ng-template #header>\n            <dexih-invalid-form-details class=\"mr-1\" [control]=\"formsService.currentForm\"\n                (click)=\"formsService.showErrors()\"></dexih-invalid-form-details>\n            <save-button *ngIf=\"hubCache?.canWrite\" class=\"mr-1\" [formsService]=\"formsService\"></save-button>\n            <cancel-button class=\"mr-1\" [formsService]=\"formsService\"></cancel-button>\n        </ng-template>\n\n        <div>\n            <router-outlet></router-outlet>\n        </div>\n    </d-widget>\n</div>\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { HubCache } from '../../hub.models';\nimport { DexihDatajob, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'datajobs',\n    templateUrl: './datajob-index.component.html',\n    styles: []\n})\nexport class DatajobIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    datajobs: Array<DexihDatajob>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the datajobs.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n\n                this.updateDatajobs();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datajob Index');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    // deleteDatajob(datajob: DexihDatajob) {\n    //     this.hubService.deleteDatajobs([datajob]).catch(reason => {\n    //     });\n    // }\n\n    // deleteDatajobs(datajobs: Array<DexihDatajob>) {\n    //     this.hubService.deleteDatajobs(datajobs);\n    // }\n\n    updateDatajobs() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let datajobs = this.hubCache.hub.dexihDatajobs\n            .filter(c => c.isValid)\n            .map(c => {\n                return {\n                    key: c.key,\n                    name: c.name,\n                    description: c.description,\n                    updateDate: c.updateDate,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.Datajob, c.key)\n                }\n            });\n            this._tableData.next(datajobs);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    // runDatajobs(datajobs, truncateTarget, resetIncremental) {\n    //     this.hubService.runDatajobs(datajobs, truncateTarget, resetIncremental, null);\n    // }\n\n    // activateDatajobs(datajobs) {\n    //     this.hubService.activateDatajobs(datajobs);\n    // }\n\n    // cancelDatajobs(datajobs: Array<DexihDatajob>) {\n    //     this.hubService.deactivateDatajobs(datajobs.map(c => c.key));\n    // }\n\n    editDatajob(datajob: DexihDatajob) {\n        this.router.navigate(['datajob-edit', datajob.key], { relativeTo: this.route });\n    }\n\n    // exportDatajobs(datajobs: Array<DexihDatajob>) {\n    //     const cache = this.hubCache;\n    //     const hub = new DexihHub(this.hubCache.hub.hubKey, '');\n    //     datajobs.forEach(datajob => { this.hubCache.cacheAddDatajob(datajob.key, hub); });\n\n    //     let filename = datajobs.length === 1 ? 'Datajob - ' + datajobs[0].name + '.json' : 'datajobs.json';\n\n    //     this.hubService.exportHub(hub, filename);\n    // }\n\n    watchChanges() {\n        // watch the current datajob in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Datajob || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateDatajobs();\n            }\n        });\n    }\n}\n","<div class=\"container-fluid\">\n\t<d-widget title=\"Data Jobs\" iconClass=\"fa fa-lg fa-fw fa-calendar\"\n\t[showCloseButton]=\"true\"\n\t(close)=\"close()\"\n\t>\n\n\n\t\t<d-table \n\t\t\t[enableMultiSelect]=\"true\" \n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\" \n\t\t\t[dataObservable]=\"tableData\" \n\t\t\t(rowClick)=\"editDatajob($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t>\n\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.Datajob'></dependent-items-button>\n\t\t</ng-template>\n\n\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-datajob=\"item\">\n\t\t\t\t<datalink-status [datajobKey]='datajob?.key'></datalink-status>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.Datajob\" [objects]=\"items\" ></tags-update-button>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t<actions-datajob-button [datajobs]=\"items\"></actions-datajob-button>\n\t\t\t</ng-template>\n\t\t</d-table>\n\n\t</d-widget>\n\n\t<dexih-help class=\"m-3\" title=\"Datalinks\" path=\"/assets/help/reference/datajob.md\"></dexih-help>\n\n</div>","export * from './datajob-index.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { ActivatedRoute } from '@angular/router';\nimport { DexihDatajob, InputParameter } from '../../../shared/shared.models';\nimport { HubCache } from '../../hub.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n    selector: 'datajob-run',\n    templateUrl: './datajob-run.component.html'\n})\nexport class DatajobRunComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n    private cancelToken: CancelToken = new CancelToken();\n\n    private datajobs: DexihDatajob[];\n    private hubCache: HubCache;\n\n    public action: string; // new or edit\n    public pageTitle: string;\n    public message: string;\n\n\n    public truncateTable = false;\n    public resetIncremental = false;\n    public resetValue = '';\n\n    parameters: InputParameter[];\n\n    isRefreshing = false;\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private route: ActivatedRoute) {\n\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n                this.hubService.getRemoteAgentObservable()\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n\n                this.action = data['action'];\n                this.pageTitle = data['pageTitle'];\n\n                if (this.hubCache.isLoaded()) {\n                    let datajobKeys: string = params['datajobKeys'];\n                    this.datajobs = new Array<DexihDatajob>();\n\n                    if (datajobKeys) {\n                        this.parameters = [];\n                        let datajobKeyArray = datajobKeys.split('|').map(c => +c);\n                        datajobKeyArray.forEach(datajobKey => {\n                            let datajob = this.hubCache.hub.dexihDatajobs.find(c => c.key === datajobKey);\n                            this.datajobs.push(datajob);\n                            datajob.parameters.forEach(c => {\n                                if (this.parameters.findIndex(p => c.name === p.name) < 0) {\n                                    this.parameters.push({name: c.name, value: c.value, rank: c.rank});\n                                }\n                            });\n                        });\n                    }\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datajob Run');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    run() {\n        this.hubService.runDatajobs(this.datajobs, this.truncateTable,\n            this.resetIncremental, this.resetValue, this.parameters, this.cancelToken);\n        this.authService.navigateUp();\n    }\n\n    activate() {\n        this.hubService.activateDatajobs(this.datajobs, this.parameters, this.cancelToken);\n        this.authService.navigateUp();\n    }\n\n}\n","<div class=\"container\">\n    <d-widget title=\"Datajob Options\" iconClass=\"fa fa-lg fa-fw fa-exchange\"  [showCloseButton]=\"true\" (close)=\"close()\" [padding]=\"true\">\n            <ng-template #header>\n                <d-button-refresh class=\"mr-1\" (click)=\"run()\" text=\"Run Now\"></d-button-refresh>\n                <d-button-refresh class=\"mr-1\" (click)=\"activate()\" text=\"Activate Triggers\"></d-button-refresh>\n                <d-button-cancel (click)=\"cancel()\"></d-button-cancel>\n            </ng-template>\n\n        <ng-template #subHeader>\n            <label class=\"label\">Run the following datajobs(s):</label>\n            <div>\n                <div class=\"row\">\n                    <span class=\"col alert alert-primary m-1\" *ngFor=\"let datajob of datajobs | fieldSort: 'name'\">\n                        {{datajob.name}}\n                    </span>\n                </div>\n            </div>\n        </ng-template>\n            \n\t\t<form>\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"col\">\n\t\t\t\t\t\t\t<form-checkbox label=\"Truncate all target tables before execution.\" [(ngModel)]=\"truncateTable\" [ngModelOptions]=\"{standalone: true}\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\n                    <div class=\"form-row\">\n                        <section class=\"col\">\n                                <form-checkbox label=\"Reset the source incremental value, and load all source rows.\" [(ngModel)]=\"resetIncremental\" [ngModelOptions]=\"{standalone: true}\"></form-checkbox>\n                            </section>\n                        </div>\n\n                    <div class=\"form-row\">\n                        <section class=\"col\">\n                            <form-input label=\"Incremental Value\" [(ngModel)]=\"resetValue\" [ngModelOptions]=\"{standalone: true}\" placeholder=\"\" iconClass=\"fa fa-list\" note=\"Use a specific incremental value to start loading source rows from (leave empty for null value)\" >\n                                </form-input>\n                        </section>\n                    </div>\n    \n    \n                    <div class=\"d-flex flex-wrap pt-1\" *ngIf=\"parameters && parameters.length > 0\" >\n                        <div class=\"input-group-text\">\n                            Input Parameters\n                        </div>\n                \n                        <input-parameters-view [parameters]=\"parameters\"></input-parameters-view>\n                    </div>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\n    </d-widget>\n</div>","export * from './datajob-index/datajob-index.component';\nexport * from './datajob-edit/datajob-edit.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { eDatalinkType, DexihDatalink, eSourceType, eSharedObjectType, eDatalinkTypeItems, DexihTag } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'datalink-index',\n    templateUrl: './datalink-index.component.html',\n    styles: []\n})\nexport class DatalinkIndexComponent implements OnInit, OnDestroy {\n    hubCache: HubCache;\n    typeFilter: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    public eSharedObjectType = eSharedObjectType;\n    public eDatalinkType = eDatalinkType;\n    public eDatalinkTypeItems = eDatalinkTypeItems;\n\n    columns = [\n        { name: 'name', title: 'Name', format: 'Md', footer: 'description', tags: 'tags' },\n        { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },\n        { name: 'datalinkType', title: 'Datalink Type', format: '' },\n        { name: 'sourceName', title: 'Source', format: '' },\n        { name: 'targetName', title: 'Target', format: '' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<DexihDatalink>>(null);\n    tableData: Observable<Array<DexihDatalink>> = this._tableData.asObservable();\n\n    constructor(private hubService: HubService, private authService: AuthService, private router: Router, private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let queryParams = result[2];\n                this.hubCache = result[3];\n\n                if (!this.hubCache.isLoaded()) { return; }\n\n                this.typeFilter = + queryParams['typeFilter'];\n                if (!this.typeFilter) {\n                    this.typeFilter = 0;\n                }\n                this.updateDatalinks();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datalink Index');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    private updateDatalinks() {\n        let newDatalinks: Array<DexihDatalink>;\n        if (this.hubCache.isLoaded()) {\n            if (!this.hubCache.hub.dexihDatalinks) {\n                this._tableData.next(new Array<DexihDatalink>());\n            } else {\n\n                if (this.typeFilter === 0 || !this.typeFilter) {\n                    newDatalinks = this.hubCache.hub.dexihDatalinks;\n                } else {\n                    newDatalinks = this.hubCache.hub.dexihDatalinks.filter(d => d.datalinkType === this.typeFilter);\n                }\n\n                let datalinkData = new Array<any>();\n\n                newDatalinks.forEach(d => {\n                    let sourceName = '';\n                    let targetName = '';\n\n                    switch (d.sourceDatalinkTable.sourceType) {\n                        case eSourceType.Table:\n                            let sourceTable = this.hubCache.getTable(d.sourceDatalinkTable.sourceTableKey);\n                            sourceName = sourceTable ? sourceTable.logicalName : 'Error, not found';\n                            break;\n                        case eSourceType.Datalink:\n                            let sourceDatalink = this.hubCache.hub.dexihDatalinks\n                                .find(c => c.key === d.sourceDatalinkTable.sourceDatalinkKey);\n                            sourceName = sourceDatalink ? 'Datalink: ' + sourceDatalink.name : 'Error, not found';\n                            break;\n                        case eSourceType.Rows:\n                            sourceName = 'Static Rows';\n                            break;\n                    }\n\n                    if (d.isQuery) {\n                        targetName = 'None specified.';\n                    } else {\n                        targetName = d.dexihDatalinkTargets.filter(t => t.isValid).map(c => {\n                            let table = this.hubCache.getTable(c.tableKey);\n                            return table && table.logicalName || 'Error, not found';\n                        }).join(', ');\n                    }\n\n                    datalinkData.push({\n                        key: d.key,\n                        datalinkType: this.eDatalinkType[d.datalinkType],\n                        name: d.name,\n                        tags: this.hubCache.getObjectTags(eSharedObjectType.Datalink, d.key),\n                        description: d.description,\n                        sourceName: sourceName,\n                        targetName: targetName,\n                        updateDate: d.updateDate,\n                        sharedIcon: d.isShared ? 'fa fa-group' : 'fa fa-user-secret',\n                        sharedToolTip: d.isShared ? 'Table is shared' : 'Table is private'\n                    });\n                });\n\n                this._tableData.next(datalinkData);\n            }\n        }\n\n    }\n\n    // ngOnDestroy() {\n    //    this.hubSubscription.unsubscribe();\n    // }\n\n    editDatalink(datalink: DexihDatalink) {\n        this.router.navigate(['datalink-edit', 'edit', datalink.key],\n            { queryParamsHandling: 'merge', relativeTo: this.route.parent });\n    }\n\n    watchChanges() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n\n        // watch the current connection in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Datalink || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateDatalinks();\n            }\n        });\n    }\n}\n\n\n","<div class=\"container-fluid\">\n    <d-widget title=\"Datalinks\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-exchange\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t<d-table \n\t\t\ttableClass=\"table table-striped table-hover m-0\"\n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\" [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"editDatalink($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<actions-datalink-button [datalinks]=\"items\" ></actions-datalink-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #filter select=\"filter\" let-items=\"items\">\n\t\t\t\t\t<d-button-dropdown class=\"mr-1\" [autoCompact]=\"false\" buttonClass=\"btn btn-primary\" iconClass=\"fa fa-filter\" [text]=\"eDatalinkType[typeFilter]\" title=\"Filter by a purpose\" [pullRight]=\"true\">\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='All'\" routerLink='.' [queryParams]=\"{typeFilter: 'All'}\" title=\"All Datalinks\">All</a>\n\t\t\t\t\t\t<a *ngFor=\"let datalinkType of eDatalinkTypeItems | gtFilter: 'key': 0\" [class.active]=\"typeFilter==datalinkType.key\" class=\"dropdown-item\" routerLink='.' [queryParams]=\"{typeFilter: datalinkType.key}\" [title]=\"datalinkType.name\">{{datalinkType.name}}</a>\n\t\t\t\t\t</d-button-dropdown>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.Datalink\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n\t\t\t\t\t<datalink-status [datalinkKey]='item?.key'></datalink-status>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.Datalink'></dependent-items-button>\n\t\t\t\t</ng-template>\n\t\t</d-table>\n\n\t</d-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Datalinks\" path=\"/assets/help/reference/datalink.md\"></dexih-help>\n</div>\n\n","export * from './datalink-index.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { HubService } from '../../hub.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { Location } from '@angular/common';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { eDatalinkType, DexihConnection, DexihTable, eConnectionPurpose, eDeltaType, eSharedObjectType, eDatalinkTypeItems } from '../../../shared/shared.models';\n\n@Component({\n\n  selector: 'dexih-datalink-new-form',\n  templateUrl: './datalink-new.component.html'\n})\nexport class DatalinkNewComponent implements OnInit, OnDestroy {\n\n  private _subscription: Subscription;\n  private _valueChangesSubscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n  private hubCache: HubCache;\n\n  public pageTitle: string;\n\n  hasChanged = false;\n  showAllErrors = false;\n\n  private tableKeys: Array<number>;\n\n  public sourceTableKeys: Array<number>;\n  public name: string;\n  public datalinkType: eDatalinkType;\n  public targetConnectionKey: number;\n  public auditConnectionKey: number;\n  public addSourceColumns = true;\n\n  public managedTargetConnections: Array<DexihConnection>;\n  public managedConnections: Array<DexihConnection>;\n\n  public sourceTables: Array<DexihTable>;\n\n  public eConnectionPurpose = eConnectionPurpose;\n\n  public auditColumnTypes = [\n    { key: eDeltaType.AutoIncrement, name: 'Auto Incrementing Key', value: false },\n    { key: eDeltaType.IsCurrentField, name: 'Is Current Flag', value: false },\n    { key: eDeltaType.Version, name: 'Record Version', value: false },\n    { key: eDeltaType.ValidFromDate, name: 'Valid From Date', value: false },\n    { key: eDeltaType.ValidToDate, name: 'Valid To Date', value: false },\n    { key: eDeltaType.CreateDate, name: 'Created Date', value: false },\n    { key: eDeltaType.UpdateDate, name: 'Updated Date', value: false },\n    { key: eDeltaType.CreateAuditKey, name: 'Created by AuditKey Reference', value: false },\n    { key: eDeltaType.UpdateAuditKey, name: 'Updated by AuditKey Reference', value: false }\n  ];\n\n  public allAuditColumns = false;\n\n  eDatalinkTypeItems = eDatalinkTypeItems;\n\n  public savingDatalink = false;\n\n  mainForm: FormGroup;\n\n  formErrors = {\n    'name': '',\n    'targetConnectionKey': '',\n    'auditConnectionKey': '',\n    'datalinkType': ''\n  };\n\n  validationMessages = {\n    'name': {\n      'required': 'Name is required.',\n      'minlength': 'Name must be at least 4 characters long.',\n      'maxlength': 'Name cannot be more than 50 characters long.',\n    },\n    'targetConnectionKey': {\n    },\n    'auditConnectionKey': {\n    },\n    'datalinkType': {\n      'required': 'Datalink Type is required.',\n    },\n  };\n\n\n  constructor(\n    private hubService: HubService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private fb: FormBuilder) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let params = result[1];\n        this.hubCache = result[2];\n\n        this.managedTargetConnections = this.hubCache.hub.dexihConnections\n          .filter(c => c.purpose === eConnectionPurpose.Managed || c.purpose === eConnectionPurpose.Target)\n\n        this.managedConnections = this.hubCache.hub.dexihConnections\n          .filter(c => c.purpose === eConnectionPurpose.Managed)\n\n        let tableKeys: string = params['sourceTableKeys'];\n        this.tableKeys = tableKeys.split('|').map(c => +c);\n\n        if (this.hubCache.status === eCacheStatus.Loaded) {\n          this.updateTables();\n\n          this.targetConnectionKey = +params['targetConnectionKey'];\n\n          if (!this.targetConnectionKey) {\n            let targetConnection = this.hubCache.hub.dexihConnections.find(c => c.purpose === eConnectionPurpose.Managed);\n            if (targetConnection) {\n              this.targetConnectionKey = targetConnection.key;\n            }\n          }\n          this.auditConnectionKey = this.targetConnectionKey;\n          this.datalinkType = eDatalinkType.General;\n\n          this.buildForm();\n\n          this.watchChanges();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Datalink New');\n    }\n\n\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._valueChangesSubscription) { this._valueChangesSubscription.unsubscribe(); }\n    if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n  }\n\n  updateTables() {\n\n    this.sourceTableKeys = new Array<number>();\n    this.sourceTables = new Array<DexihTable>();\n\n    if (this.tableKeys && this.hubCache.hub.dexihConnections) {\n      this.hubCache.hub.dexihTables.forEach(table => {\n        if (this.tableKeys.findIndex(t => t === table.key) >= 0) {\n          this.sourceTableKeys.push(table.key);\n          this.sourceTables.push(table);\n        }\n      });\n    }\n  }\n\n  buildForm(): void {\n    this.mainForm = this.fb.group({\n      'name': [this.name, [\n      ]],\n      'targetConnectionKey': [this.targetConnectionKey > 0 ? this.targetConnectionKey : null, [\n        // Validators.required,\n      ]],\n      'auditConnectionKey': [this.auditConnectionKey > 0 ? this.auditConnectionKey : null, [\n        // Validators.required,\n      ]],\n      'datalinkType': [this.datalinkType, [\n        Validators.required,\n      ]],\n    });\n\n    if (this._valueChangesSubscription) { this._valueChangesSubscription.unsubscribe(); }\n    this._valueChangesSubscription = this.mainForm.valueChanges.subscribe(data => this.onValueChanged());\n    this.onValueChanged(); // (re)set validation messages now\n\n\n    this.hasChanged = false;\n  }\n\n  onValueChanged() {\n    if (!this.mainForm) { return; }\n    const form = this.mainForm;\n\n    this.hasChanged = true;\n\n    for (const field of Object.keys(this.formErrors)) {\n      // clear previous error message (if any)\n      this.formErrors[field] = '';\n      const control = form.get(field);\n\n      if (control && (control.dirty || this.showAllErrors) && !control.valid) {\n        const messages = this.validationMessages[field];\n        for (const key of Object.keys(control.errors)) {\n          this.formErrors[field] += messages[key] + ' ';\n        }\n      }\n    }\n  }\n\n  selectAllAuditColumns() {\n    this.allAuditColumns = !this.allAuditColumns;\n    this.auditColumnTypes.forEach(c => c.value = this.allAuditColumns);\n  }\n\n  saveDatalink() {\n    if (this.mainForm.valid) {\n\n      let value = this.mainForm.value;\n      this.savingDatalink = true;\n      let auditColumns = this.auditColumnTypes.filter(c => c.value).map(c => c.key);\n      this.hubService.createDatalinks(\n        this.sourceTableKeys,\n        value.name,\n        value.datalinkType,\n        value.targetConnectionKey,\n        null,\n        null,\n        value.auditConnectionKey,\n        this.addSourceColumns,\n        auditColumns).then(result => {\n          this.savingDatalink = false;\n          if (result.length === 1) {\n            this.openDatalink(result[0].key);\n          } else {\n            this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinks'], { relativeTo: this.route.root });\n          }\n        }).catch(() => {\n          this.savingDatalink = false;\n        });\n    } else {\n      this.showAllErrors = true;\n      this.onValueChanged();\n    }\n  }\n\n  cancel() {\n    this.location.back();\n  }\n\n  // delay the open datalink until the hub cache is updated with the new datalink.\n  openDatalink(key: number, iteration = 0) {\n    if (iteration >= 10 ) {\n      this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinks'], { relativeTo: this.route.root });\n    }\n    setTimeout(() => {\n      if (this.hubCache.hub.dexihDatalinks.findIndex(c => c.key === key) >= 0) {\n        this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinks', 'datalink-edit', 'edit', key],\n        { relativeTo: this.route.root });\n      } else {\n        this.openDatalink(key, iteration++);\n      }\n    }, 500);\n  }\n\n  watchChanges() {\n    // watch the current connection in case it is changed in another session.\n    this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n        if (hubCacheChange.changeClass === eSharedObjectType.Table) {\n            this.updateTables();\n        }\n    });\n}\n}\n","<div class=\"container\">\n\t<d-widget title=\"New Datalink(s)\"\n\t\ticonClass=\"fa fa-lg fa-fw fa-exchange\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"!savingDatalink && cancel()\"\n\t\t[padding]=\"true\"\n\t\t>\n\t\t<ng-template #header>\n\t\t\t<d-button-save class=\"mr-1\" (click)=\"!savingDatalink && saveDatalink()\" [busy]=\"savingDatalink\"></d-button-save>\n\t\t\t<d-button-cancel (click)=\"!savingDatalink && cancel()\" [busy]=\"savingDatalink\"></d-button-cancel>\n\t\t</ng-template>\n\n\t\t<ng-template #subHeader>\n\t\t\t<label class=\"label\">Create datalinks for the following source table(s):</label>\n\t\t\t<div>\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<span class=\"col alert alert-primary m-1\" *ngFor=\"let sourceTable of sourceTables | fieldSort: 'name'\">\n\t\t\t\t\t\t{{sourceTable.name}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\n\t\t<form *ngIf=\"sourceTableKeys\"  [formGroup]=\"mainForm\">\n\n\t\t\t<fieldset>\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input *ngIf=\"sourceTables.length == 1\" label=\"Datalink Name\" formControlName=\"name\" placeholder=\"Datalink name (leave blank for auto naming)\" [autocapitalize]=\"true\"\n\t\t\t\t\t\t iconClass=\"fa fa-comment\" [errors]=\"formErrors.name\"></form-input>\n\t\t\t\t\t\t<form-input *ngIf=\"sourceTables.length > 1\" disabled label=\"Datalink Name\" placeholder=\"Datalink name can not be specified when creating multiple datalinks.\"\n\t\t\t\t\t\t iconClass=\"fa fa-comment\"></form-input>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select formControlName=\"datalinkType\" label=\"Type\" [items]=\"eDatalinkTypeItems\" itemKey=\"key\" itemName=\"description\" [errors]=\"formErrors.datalinkType\"></form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select formControlName=\"targetConnectionKey\" label=\"Target Connection\" [items]=\"managedConnections\" itemKey=\"key\"\n\t\t\t\t\t\t itemName=\"name\" note=\"Specify the connection for the target table.\" [errors]=\"formErrors.targetConnectionKey\" [allowNullSelect]=\"true\" selectNullMessage=\"No target table\"></form-select>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select formControlName=\"auditConnectionKey\" label=\"Audit Connection\" [items]=\"managedConnections\" itemKey=\"key\"\n\t\t\t\t\t\t itemName=\"name\" note=\"Specify the connection to store execution results.\" [errors]=\"formErrors.auditConnectionKey\"\n\t\t\t\t\t\t [allowNullSelect]=\"true\" selectNullMessage=\"No datalink auditing\"></form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\t\t</form>\n\n\t\t<form *ngIf=\"sourceTableKeys\" >\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"col col-11\">\n\t\t\t\t\t\t\t<form-checkbox label=\"Include source columns in target table\" [ngModel]=\"addSourceColumns\" name=\"addSourceColumns\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"col col-11\">\n\t\t\t\t\t\t\t<label class=\"label\">\n\t\t\t\t\t\t\t\tSpecify the audit columns (in addition to source columns) to be included in the target table.\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<form-checkbox label=\"Select All/None\" (ngModelChange)=\"selectAllAuditColumns()\" [ngModel]=\"allAuditColumns\" name=\"selectAllAuditColumns\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section *ngFor=\"let auditColumnType of auditColumnTypes\" class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t<form-checkbox [label]=\"auditColumnType.name\" [(ngModel)]=\"auditColumnType.value\" [ngModelOptions]=\"{standalone: true}\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\t</d-widget>\n</div>","export * from './datalink-new.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { ActivatedRoute } from '@angular/router';\nimport { eDataObjectType } from '../../../shared/shared.models';\n\n@Component({\n\n    selector: 'datalink-preview-data',\n    templateUrl: './datalink-preview-data.component.html'\n})\nexport class DatalinkPreviewDataComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n\n    public key: number;\n    public previewUpdates: boolean;\n\n    public action: string; // new or edit\n    public pageTitle: string;\n    public message: string;\n\n    public eDataObjectType = eDataObjectType;\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private route: ActivatedRoute) {\n\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n\n                this.action = data['action'];\n                this.pageTitle = data['pageTitle'];\n                this.key = +params['datalinkKey'];\n                this.previewUpdates = params['previewUpdates'] === 'true';\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datalink Preview');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n}\n","<div class=\"container-fluid\">\n\n    <d-widget title=\"Preview Datalink\" iconClass=\"fa fa-lg fa-fw fa-exchange\" [showCloseButton]=\"true\"\n        (close)=\"close()\">\n        <preview-data [key]='key' [previewUpdates]='previewUpdates' [viewSource]='eDataObjectType.Datalink'></preview-data>\n    </d-widget>\n</div>","export { DatalinkPreviewDataComponent } from './datalink-preview-data.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubCache } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { ActivatedRoute } from '@angular/router';\nimport { DexihDatalink, InputColumn, InputParameter, InputParameterBase } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n    selector: 'datalink-run',\n    templateUrl: './datalink-run.component.html'\n})\nexport class DatalinkRunComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n    private cancelToken: CancelToken = new CancelToken();\n\n    private datalinks: DexihDatalink[];\n    private hubCache: HubCache;\n\n    public action: string; // new or edit\n    public pageTitle: string;\n    public message: string;\n\n    public inputColumns: InputColumn[];\n    public parameters: InputParameterBase[];\n\n    public truncateTable = false;\n    public resetIncremental = false;\n    public resetValue = '';\n\n    isRefreshing = false;\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private route: ActivatedRoute) {\n\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n                this.hubService.getRemoteAgentObservable()\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n\n                this.action = data['action'];\n                this.pageTitle = data['pageTitle'];\n\n                if (this.hubCache.isLoaded()) {\n                    let datalinkKeys: string = params['datalinkKeys'];\n                    this.datalinks = new Array<DexihDatalink>();\n\n                    if (datalinkKeys) {\n                        this.inputColumns = [];\n                        this.parameters = [];\n                        let datalinkKeyArray = datalinkKeys.split('|').map(c => +c);\n                        datalinkKeyArray.forEach(datalinkKey => {\n                            let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === datalinkKey);\n                            this.datalinks.push(datalink);\n                            datalink.sourceDatalinkTable.dexihDatalinkColumns.filter(c => c.isInput).forEach(c => {\n                                this.inputColumns.push({datalinkKey: datalinkKey, datalinkName: datalink.name,\n                                    name: c.name, logicalName: c.logicalName,\n                                    dataType: c.dataType, rank: c.rank, value: c.defaultValue, defaultValue: c.defaultValue });\n                            });\n                            datalink.parameters.forEach( c => {\n                                if (this.parameters.findIndex( p => p.name === c.name ) < 0) {\n                                    this.parameters.push(c);\n                                }\n                            });\n                        });\n                    }\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datalink Preview');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    runDatalinks() {\n        this.hubService.runDatalinks(this.datalinks.map(c => c.key), this.truncateTable,\n            this.resetIncremental, this.resetValue, this.inputColumns, this.parameters, this.cancelToken);\n        this.authService.navigateUp();\n    }\n}\n","<div class=\"container\">\n    <d-widget title=\"Datalink Options\" iconClass=\"fa fa-lg fa-fw fa-exchange\"  [showCloseButton]=\"true\" (close)=\"close()\" [padding]=\"true\">\n            <ng-template #header>\n                <d-button-refresh class=\"mr-1\" (click)=\"runDatalinks()\" text=\"Run Now\"></d-button-refresh>\n                <d-button-cancel (click)=\"cancel()\"></d-button-cancel>\n            </ng-template>\n\n        <ng-template #subHeader>\n            <label class=\"label\">Run the following datalink(s):</label>\n            <div class=\"d-flex flex-wrap\">\n                <div class=\"alert alert-primary m-1\" *ngFor=\"let datalink of datalinks | fieldSort: 'name'\">\n                    {{datalink.name}}\n                </div>\n            </div>\n        </ng-template>\n            \n\t\t<form>\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"col\">\n\t\t\t\t\t\t\t<form-checkbox label=\"Truncate all target tables before execution.\" [(ngModel)]=\"truncateTable\" [ngModelOptions]=\"{standalone: true}\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\n                    <div class=\"form-row\">\n                        <section class=\"col\">\n                                <form-checkbox label=\"Reset the source incremental value, and load all source rows.\" [(ngModel)]=\"resetIncremental\" [ngModelOptions]=\"{standalone: true}\"></form-checkbox>\n                            </section>\n                        </div>\n\n                    <div class=\"form-row\">\n                        <section class=\"col\">\n                            <form-input label=\"Incremental Value\" [(ngModel)]=\"resetValue\" [ngModelOptions]=\"{standalone: true}\" placeholder=\"\" iconClass=\"fa fa-list\" note=\"Use a specific incremental value to start loading source rows from (leave empty for null value)\" >\n                                </form-input>\n                        </section>\n                    </div>\n    \n    \n                    <div class=\"d-flex flex-wrap pt-1\" *ngIf=\"inputColumns && inputColumns.length > 0\" >\n                        <div class=\"input-group-text\">\n                            Input Values\n                        </div>\n                \n                        <span *ngFor=\"let column of inputColumns; let i = index\" class=\"input-group\">\n                            <div class=\"input-group-prepend\">\n                                <div class=\"input-group-text\">\n                                    {{column.logicalName}}\n                                </div>\n                            </div>\n                            <form-input name=\"column{{i}}\" class=\"form-control p-0\" [placeholder]=\"column.logicalName\" [(ngModel)]=\"column.value\"></form-input>\n                        </span>\n                    </div>\n\n                    <div *ngIf=\"parameters && parameters.length > 0\" >\n                        <label class=\"label\">Parameters:</label>\n                        <input-parameters-view [parameters]=\"parameters\"></input-parameters-view>\n                    </div>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\n    </d-widget>\n</div>","export { DatalinkIndexComponent } from './datalink-index';\nexport { DatalinkNewComponent } from './datalink-new/datalink-new.component';\nexport { DatalinkPreviewDataComponent } from './datalink-preview-data';\n\n","<section *ngIf=\"hubCache?.hub && (!fileConnections || fileConnections.length === 0)\">\n    <div class=\"alert alert-danger m-3\">\n        There are no files configured.  Create a file based connection, and add at least one file definition.\n        <hr>\n        <div>\n            <a class=\"btn btn-sm btn-primary text-white\" routerLink=\"/hub/{{hubCache.hub.hubKey}}/connections/connection-new/Source\" [title]=\"\">New Connection</a>\n        </div>\n    </div>\n</section>\n\n<div *ngIf=\"fileConnections && fileConnections.length > 0\" class=\"container\">\n    <d-widget *ngIf=\"!currentTable\" [title]=\"'Bulk Load: ' + connection?.name\" iconClass=\"fa fa-lg fa-fw fa-files-o\" [showCloseButton]=\"true\" (close)=\"close()\">\n        <form *ngIf=\"bulkLoadForm\" [formGroup]=\"bulkLoadForm\">\n        <div class=\"m-3\">\n            <section>\n                <form-select label=\"Connection\" formControlName=\"connectionKey\" [items]=\"fileConnections\" itemKey=\"key\"\n                    itemName=\"name\" iconClass=\"fa fa-database\" note='The connection where the files will be uploaded to.'>\n                    <a routerLink=\"//hub/{{hubCache.hub.hubKey}}/connections/connection-new/Source\">(<i class=\"fa fa-sticky-note-o\"></i> New )</a>\n                </form-select>\n            </section>\n\n            <div class=\"form-row\">\n                <section class=\"col-md-6\">\n                    <form-select label=\"Format Type\" formControlName=\"formatType\" [items]=\"formatTypes\" itemKey=\"key\"\n                        itemName=\"name\" iconClass=\"fa fa-text\" note='The format of data.'>\n                    </form-select>\n                </section>\n\n                <section class=\"col-md-6\" *ngIf=\"bulkLoadForm.controls.formatType.value == eTypeCode.Text\">\n                    <form-select label=\"File Format\" formControlName=\"fileFormatKey\" placeholder=\"File Format\"\n                        [items]=\"hubCache.hub.dexihFileFormats\" itemKey=\"key\" itemName=\"name\" [enableFilter]=\"false\"\n                        note=\"Specify the file format to use, if not specified, a csv (command separated) format will be used.\"\n                        [allowNullSelect]=\"true\" selectNullMessage=\"Use default (csv) format\">\n                        <a routerLink=\"/hub/{{hubCache.hub.hubKey}}/fileFormats/fileFormat-new\">(<i class=\"fa fa-sticky-note-o\"></i> New )</a>\n                    </form-select>\n                </section>\n            </div>\n\n            <section >\n                <form-checkbox label=\"Include file name field\" formControlName=\"includeFileName\"></form-checkbox>\n                <form-checkbox label=\"Include file date field\" formControlName=\"includeFileDate\"></form-checkbox>\n                <form-checkbox label=\"Include file row field\" formControlName=\"includeFileRowNumber\"></form-checkbox>\n            </section>\n        </div>\n    </form>\n\n        <ul *ngIf=\"connection\" class=\"list-group\">\n            <d-widget-section title='Drop Files to Load' [showExpandButton]=\"true\">\n                <div class=\"well my-drop-zone\" dropZone [requireFiles]=\"true\" (dropFiles)=\"filesDrop($event)\" dropAllowedClass=\"nv-file-over\">\n                    Drop Files to Load Here\n                    <div class=\"custom-file w-25 float-right\">\n                        <input type=\"file\" class=\"custom-file-input\" onclick=\"this.value=null\" (change)=\"uploadFile($event)\">\n                        <label class=\"custom-file-label\" for=\"inputGroupFile01\">Choose files</label>\n                    </div>\n                </div>\n            </d-widget-section>\n\n            <d-widget-section title='Upload Queues' [showExpandButton]=\"true\" [padding]=\"false\">\n                <d-table [enableMultiSelect]=\"true\" [columns]=\"uploadColumns\" [data]=\"uploadedFiles\">\n\n                    <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n                        <d-button class=\"mr-1\" iconClass=\"fa fa-upload\" buttonClass='btn-primary' (click)=\"uploadSelected(items)\">Upload</d-button>\n                        <d-button-cancel class=\"mr-1\" (click)=\"cancelSelected(items)\"></d-button-cancel>\n                        <d-button-delete (click)=\"removeSelected(items)\" text=\"Remove\"></d-button-delete>\n                    </ng-template>\n\n                    <ng-template #actions let-items=\"items\">\n                        <div class=\"d-flex align-items-center h-100\">\n                        <form-checkbox [(ngModel)]=\"automaticUpload\" label=\"Automatically upload files when added to the queue.\"></form-checkbox>\n                        </div>\n                    </ng-template>\n\n                    <ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n                        <div *ngIf=\"item.isRunning()\" class=\"progress\" style=\"margin-bottom: 0;\">\n                            <div class=\"progress-bar\" role=\"progressbar\" [ngStyle]=\"{ 'width': item.progress + '%' }\"></div>\n                        </div>\n                        <span>\n                            <i class='fa' [ngClass]=\"{\n                                'fa-check': item.status === eFileStatus.Complete, \n                                'fa-exclamation-circle': item.status === eFileStatus.Error,\n                                'fa-ban': item.status === eFileStatus.Cancelled}\"></i>{{item.status}}</span>\n                    </ng-template>\n                </d-table>            \n            </d-widget-section>\n    \n            <d-widget-section title='Tables Created' [showExpandButton]=\"true\" [padding]=\"false\">\n                <d-table [enableMultiSelect]=\"true\" [columns]=\"tableColumns\" [data]=\"tables\" (rowClick)=\"editTable($event)\">\n\n                    <ng-template select=\"selectedItemsAction\" #selectedItemsAction let-items=\"items\">\n                        <d-button class=\"ml-1\" (click)=\"saveTables(items)\" iconClass=\"fa fa-table\" title=\"Save the selected tables.\">Create Tables</d-button>\n                        <d-button class=\"ml-1\" (click)=\"createDatalinks(items)\" iconClass=\"fa fa-exchange\" title=\"Save the selected tables, and create datalinks to load them into a staging area.\">Create Datalinks</d-button>\n                        <d-button-delete class=\"ml-1\"  (click)=\"discardTables(items)\" title=\"Discard the selected tables.\" text=\"Discard\"></d-button-delete>\n                    </ng-template>\n    \n                </d-table>\n            </d-widget-section>\n        </ul>\n    </d-widget>\n\n    <d-widget *ngIf=\"currentTable\" [title]=\"'Edit table: ' + formsService.currentForm.controls.name.value\" [showCloseButton]=\"true\" (close)=\"closeTable()\">\n        <ng-template #header>\n            <d-button-apply (click)=\"applyChanges()\"></d-button-apply>\n            <d-button-cancel class=\"ml-1\" (click)=\"cancel()\"></d-button-cancel>\n        </ng-template>\n        <router-outlet></router-outlet>\n    </d-widget>\n</div>","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { FileHandler, eFileStatus, CancelToken } from '../../../+auth/auth.models';\nimport { Subscription, combineLatest } from 'rxjs';\nimport { HubCache, eCacheStatus, formatTypes } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../..';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DexihConnection, eTypeCode, DexihTable, eConnectionCategory, eConnectionPurpose } from '../../../shared/shared.models';\nimport { FormBuilder, FormGroup } from '@angular/forms';\n\n@Component({\n    selector: 'files-bulk-load',\n    templateUrl: 'files-bulk-load.component.html'\n})\n\nexport class FilesBulkLoadComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n    private _connectionKeySubscription: Subscription;\n    private _flatFilesSubscription: Subscription;\n\n    public entityType = 'Table';\n\n    public canEdit = false;\n    public connection: DexihConnection;\n\n    public bulkLoadForm: FormGroup;\n\n    public formatTypes = formatTypes;\n    public eTypeCode = eTypeCode;\n    public eFileStatus = eFileStatus;\n\n    public hubCache: HubCache;\n\n    public automaticUpload = true;\n\n    public uploadedFiles: FileHandler[] = [];\n\n    private reference: string = null;\n    public tables: DexihTable[] = []\n\n    public currentTable: DexihTable = null;\n\n    private cancelToken = new CancelToken();\n\n    pageTitle = 'Manage Files';\n    showPage = false;\n    showPageMessage = 'Loading...';\n\n    tableColumns = [\n        { name: 'logicalName', title: 'Logical Name', format: 'Md', footer: 'description' },\n        { name: 'name', title: 'Table Name'  },\n    ];\n\n    uploadColumns = [\n        { name: 'file.name', title: 'File Name', format: '' },\n        { name: 'file.size', title: 'Size', format: '' },\n    ];\n\n    public fileConnections: DexihConnection[];\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        private route: ActivatedRoute,\n        private router: Router,\n        public formsService: HubFormsService,\n        private fb: FormBuilder) { }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(true),\n                this.hubService.getRemoteLibrariesObservable()\n            ).subscribe(result => {\n                let queryParams = result[0];\n                this.hubCache = result[1];\n                let remoteLibraries = result[2];\n\n                this.fileConnections = this.hubCache.hub.dexihConnections\n                    .filter(c => {\n                        let ref = remoteLibraries.connections.find(con =>\n                            c.connectionAssemblyName === con.connectionAssemblyName\n                            && c.connectionClassName === con.connectionClassName);\n\n                        if (ref) {\n                            return (ref.connectionCategory === eConnectionCategory.File || c.purpose !== eConnectionPurpose.Source);\n                        } else {\n                            return false;\n                        }\n                    });\n\n                let connectionKey = +queryParams['connectionKey'];\n                if (!connectionKey) {\n                    if (this.fileConnections.length > 0) {\n                        connectionKey = this.fileConnections[0].key;\n                    }\n                }\n\n                this.bulkLoadForm = this.fb.group({\n                    'connectionKey': [connectionKey],\n                    'formatType': [eTypeCode.Text],\n                    'fileFormatKey': [],\n                    'includeFileName': [false],\n                    'includeFileDate': [false],\n                    'includeFileRowNumber': [false]\n                  });\n\n                this.updateConnection(connectionKey);\n\n                if (this._connectionKeySubscription) { this._connectionKeySubscription.unsubscribe(); }\n                this._connectionKeySubscription = this.bulkLoadForm.controls.connectionKey.valueChanges.subscribe(key => {\n                    this.updateConnection(key);\n                });\n            });\n\n            if (this._flatFilesSubscription) { this._flatFilesSubscription.unsubscribe(); }\n            this._flatFilesSubscription = this.hubService.getFlatFilesObservable().subscribe(flatFileReady => {\n                if (flatFileReady.reference === this.reference) {\n                    this.tables = flatFileReady.tables;\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Files Manage');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._flatFilesSubscription) { this._flatFilesSubscription.unsubscribe(); }\n        if (this._connectionKeySubscription) { this._connectionKeySubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    public close() {\n        this.authService.navigateUp();\n    }\n\n    private updateConnection(connectionKey) {\n        this.connection = this.hubCache.getConnection(connectionKey);\n\n        if (!this.connection && connectionKey) {\n            this.hubService.addHubErrorMessage(`The connection with the key ${connectionKey} could not be found.`);\n        } else if (this.connection) {\n            this.pageTitle = 'Load files for ' + this.connection.name;\n            this.showPage = true;\n        }\n    }\n\n    public uploadFile(event) {\n        let files = event.srcElement.files;\n        this.doUpload(files);\n        return false;\n    }\n\n    public filesDrop(files: any) {\n        this.doUpload(files);\n    }\n\n    public doUpload(files) {\n        Array.prototype.forEach.call(files, file => {\n            let bulkLoad = this.bulkLoadForm.value;\n            this.hubService.bulkUploadFiles(bulkLoad.connectionKey, bulkLoad.fileFormatKey, bulkLoad.formatType,\n                bulkLoad.includeFileName, bulkLoad.includeFileDate, bulkLoad.includeFileRowNumber, file.name,\n                this.cancelToken).then(result => {\n                let url = result.url;\n                this.reference = result.reference;\n\n                let fileHandler = new FileHandler(file, url);\n                this.uploadedFiles = this.uploadedFiles.concat(fileHandler);\n                // this.uploadedFiles.push(fileHandler);\n\n                if (this.automaticUpload) {\n                    this.authService.upload(fileHandler).then(status => {\n                        if (status.success) {\n                            this.hubService.addHubSuccessMessage(file.name + ' uploaded.');\n                        } else {\n                            this.hubService.addHubMessage(status);\n                        }\n                    }).catch(reason => {\n                        this.hubService.addHubMessage(reason);\n                    });\n                }\n            }).catch(reason => {\n                this.hubService.addHubMessage(reason);\n            });\n        });\n    }\n\n    public editTable(table: DexihTable) {\n        this.currentTable = table;\n        this.formsService.table(table);\n        this.router.navigate(['table-edit'], { relativeTo: this.route });\n    }\n\n    public applyChanges() {\n        if (this.formsService.hasChanged) {\n            let table = this.formsService.currentForm.value;\n            Object.assign(this.currentTable, table);\n        }\n        this.currentTable = null;\n        this.authService.navigateUp();\n    }\n\n    public cancel() {\n        this.currentTable = null;\n        this.authService.navigateUp();\n    }\n\n    public async saveTables(items: DexihTable[]): Promise<number[]> {\n        let newTables = Object.assign([], this.tables);\n        let keys: number[] = [];\n        for (let i = 0; i < items.length; i++ ) {\n            let table = items[i];\n            let savedTable = await this.hubService.saveTables([table]);\n\n            keys.push(savedTable[0].key);\n\n            // after table is saved, remove from unsaved list.\n            let index = this.tables.findIndex(t => table.key === t.key);\n            newTables.splice(index, 1);\n        };\n\n        this.tables = newTables;\n        return keys;\n    }\n\n    public async createDatalinks(items: DexihTable[]) {\n        let keys = await this.saveTables(items);\n        let tableKeys = keys.join('|');\n        this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'tables', 'datalink-new', tableKeys, 0],\n            { relativeTo: this.route.root });\n    }\n\n    public discardTables(items: DexihTable[]) {\n        let newTables = Object.assign([], this.tables);\n        for (let i = 0; i < items.length; i++ ) {\n            let table = items[i];\n            let index = this.tables.findIndex(t => table.key === t.key);\n            newTables.splice(index, 1);\n        };\n        this.tables = newTables;\n    }\n\n\n    public uploadSelected(items: Array<FileHandler>) {\n        items.forEach(item => {\n            this.authService.upload(item).then(status => {\n                this.hubService.addHubMessage(status);\n            }).catch(reason => {\n                this.hubService.addHubMessage(reason);\n            });\n        });\n    }\n\n    public removeSelected(items: Array<FileHandler>) {\n        items.forEach(item => {\n            let index = this.uploadedFiles.findIndex(c => c.id === item.id);\n            if (index >= 0) {\n                this.uploadedFiles.splice(index, 1);\n            }\n        });\n    }\n\n    public cancelSelected(items: Array<FileHandler>) {\n        items.forEach(item => item.cancel());\n    }\n\n    public canDeactivate(): Promise<boolean> {\n        return new Promise<boolean>((resolve) => {\n            if (this.tables.length > 0) {\n                this.authService.confirmDialog('Unsaved tables!',\n              'Table(s) have not been saved, this action will discard unsaved tables.  Do you want to discard the changes and exit?')\n              .then((confirm) => {\n                  resolve(confirm);\n                }).catch(() => {\n                  resolve(false);\n                });\n          } else {\n            resolve(true);\n          }\n        });\n      }\n\n      // @HostListener allows is to guard against browser refresh, close, etc.\n      @HostListener('window:beforeunload', ['$event'])\n      unloadNotification($event: any) {\n        if (this.tables.length > 0) {\n          $event.returnValue =\n            'Table(s) have not been saved, this action will discard unsaved tables.  Do you want to discard the changes and exit?';\n        }\n      }\n}\n","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../../hub.service';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { HubCache, FileProperties, eCacheStatus, ConnectionTables, updateStrategies } from '../../hub.models';\nimport { Message, FileHandler, eFileStatus, CancelToken } from '../../../+auth/auth.models';\nimport { DexihTable, eFlatFilePath, DexihConnection, eConnectionCategory, eFlatFilePathItems, eConnectionPurpose,\n    ConnectionReference, RemoteLibraries, eUpdateStrategy, eUpdateStrategyItems } from '../../../shared/shared.models';\n\n\n@Component({\n    selector: 'files-manage',\n    templateUrl: './files-manage.component.html'\n})\nexport class FilesManageComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n\n    public entityType = 'Table';\n\n    public canEdit = false;\n    public tableKey: number;\n    public table: DexihTable;\n    public connectionReference: ConnectionReference;\n    public updateStrategy: eUpdateStrategy = eUpdateStrategy.Reload;\n\n    public updateStrategies = updateStrategies;\n\n    public path = eFlatFilePath.None;\n    public localPath: string;\n    public eFlatFilePath = eFlatFilePath;\n    public eFlatFilePathItems = eFlatFilePathItems.filter(c => c.key > 0);\n    public eFileStatus = eFileStatus;\n\n    public connectionTables: ConnectionTables[];\n\n    public remoteLibraries: RemoteLibraries;\n\n    public hubCache: HubCache;\n\n    public automaticUpload = true;\n\n    public uploadedFiles: FileHandler[] = [];\n    public cancelToken: CancelToken = new CancelToken();\n\n    pageTitle = 'Manage Files';\n    showPage = false;\n    showPageMessage = 'Loading...';\n\n    columns = [\n        { name: 'fileName', title: 'File Name', format: '' },\n        { name: 'length', title: 'Size', format: '' },\n        { name: 'lastModified', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<FileProperties>>(null);\n    tableData: Observable<Array<FileProperties>> = this._tableData.asObservable();\n\n    uploadColumns = [\n        { name: 'file.name', title: 'File Name', format: '' },\n        { name: 'file.size', title: 'Size', format: '' },\n    ];\n\n    public fileConnections: DexihConnection[];\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        private route: ActivatedRoute,\n        private router: Router) { }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(true),\n                this.hubService.getRemoteLibrariesObservable(),\n            ).subscribe(result => {\n                let params = result[0];\n                let queryParams = result[1];\n                this.hubCache = result[2];\n                this.remoteLibraries = result[3];\n\n                // if (this.hubCache.status !== eCacheStatus.Loaded) { return; }\n\n                // if the connection is a file connection or not a source connection\n                this.fileConnections = this.hubCache.hub.dexihConnections\n                    .filter(c => {\n                        let ref = this.remoteLibraries.connections.find(con =>\n                            c.connectionAssemblyName === con.connectionAssemblyName\n                            && c.connectionClassName === con.connectionClassName);\n                        if (ref) {\n                            return (ref.connectionCategory === eConnectionCategory.File || c.purpose !== eConnectionPurpose.Source);\n                        } else {\n                            return false;\n                        }\n                    });\n\n                let connectionTables = this.hubCache.getConnectionTables();\n\n                this.connectionTables = connectionTables.filter(c => {\n                    if (c.dexihTables.length > 0) {\n                        return this.fileConnections.find(fc => c.key === fc.key) == null ? false : true;\n                    }\n                });\n\n                let hasChanged = false;\n                this.tableKey = +queryParams['tableKey'];\n                if (!this.tableKey) {\n                    if (this.connectionTables.length > 0 && this.connectionTables[0].dexihTables.length > 0) {\n                        this.tableKey = this.connectionTables[0].dexihTables[0].key;\n                        hasChanged = true;\n                    }\n                }\n\n                this.path = +queryParams['path'];\n                if (!this.path) {\n                    this.path = eFlatFilePath.Incoming;\n                    hasChanged = true;\n                }\n\n                if (hasChanged) {\n                    this.router.navigate(\n                        [],\n                        {\n                          relativeTo: this.route,\n                          queryParams: { tableKey: this.tableKey, path: this.path},\n                          queryParamsHandling: 'merge', // remove to replace all query params by provided\n                        });\n                        return;\n                }\n\n                this.table = this.hubCache.getTable(this.tableKey);\n                let connection = this.hubCache.getConnection(this.table.connectionKey);\n                this.connectionReference = this.remoteLibraries.connections.find(con =>\n                    connection.connectionAssemblyName === con.connectionAssemblyName\n                    && connection.connectionClassName === con.connectionClassName);\n\n                if (!this.table && this.tableKey) {\n                    this.hubService.addHubErrorMessage(`The table with the key ${this.tableKey} could not be found.`);\n                } else if (this.table) {\n                    this.pageTitle = 'Manage files for ' + this.table.name;\n                    this.showPage = true;\n                    this.refreshFiles();\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Files Manage');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    updateTable(tableKey: number) {\n        this.router.navigate(\n            [],\n            {\n              relativeTo: this.route,\n              queryParams: { tableKey: tableKey, path: 'incoming'},\n              queryParamsHandling: 'merge', // remove to replace all query params by provided\n            });\n    }\n\n    refreshFiles() {\n        if (this.connectionReference.allowsFlatFiles) {\n            this.hubService.getFileList(this.table, this.path, this.cancelToken).then(result => {\n                this._tableData.next(result);\n            }).catch(reason => {\n                this._tableData.next([]);\n            });\n        }\n    }\n\n    public uploadSelected(items: Array<FileHandler>) {\n        items.forEach(item => {\n            this.authService.upload(item).then(status => {\n                if (status.success) {\n                    this.hubService.addHubSuccessMessage(`File ${item.file.name} uploaded successfully.`)\n                    this.refreshFiles();\n                } else {\n                    this.hubService.addHubMessage(status);\n                }\n            }).catch(reason => {\n                this.hubService.addHubMessage(reason);\n            });\n        });\n    }\n\n    public removeSelected(items: Array<FileHandler>) {\n        items.forEach(item => {\n            let index = this.uploadedFiles.findIndex(c => c.id === item.id);\n            if (index >= 0) {\n                this.uploadedFiles.splice(index, 1);\n            }\n        });\n    }\n\n    public cancelSelected(items: Array<FileHandler>) {\n        items.forEach(item => item.cancel());\n    }\n\n    public deleteSelected(items: Array<FileProperties>) {\n        let files = items.map(c => c.fileName);\n        this.hubService.deleteFiles(this.table, this.path, files, this.cancelToken).then(c => {\n            if (c) {\n                this.refreshFiles();\n            }\n        }).catch();\n    }\n\n    public moveSelected(items: Array<FileProperties>, toPath: eFlatFilePath) {\n        let files = items.map(c => c.fileName);\n        this.hubService.moveFiles(this.table, this.path, toPath, files, this.cancelToken).then(c => {\n            if (c) {\n                this.refreshFiles();\n            }\n        }).catch(reason => {\n            this.hubService.addHubMessage(status);\n        });\n}\n\n    public downloadSelected(items: Array<FileProperties>) {\n        let files = items.map(c => c.fileName);\n        this.hubService.downloadFiles(this.table, this.path, files, this.cancelToken).then(c => {\n            if (c) {\n                this.refreshFiles();\n            }\n        }).catch();\n    }\n\n    public preview(item: FileProperties) {\n        this.router.navigate(['hub', this.hubCache.hub.hubKey, 'summary', 'files', 'manage', this.tableKey, this.path, item.fileName]);\n    }\n\n    public close() {\n        this.authService.navigateUp();\n    }\n\n    public uploadFile(event) {\n        let files = event.srcElement.files;\n        this.doUpload(files);\n        return false;\n    }\n\n    public doUpload(files) {\n        Array.prototype.forEach.call(files, file => {\n            this.hubService.uploadFile(this.table, this.path, this.updateStrategy, file.name, this.cancelToken).then(url => {\n                let fileHandler = new FileHandler(file, url);\n                if (this.automaticUpload) {\n                    this.authService.upload(fileHandler).then(status => {\n                        if (status.success) {\n                            this.hubService.addHubSuccessMessage(`File ${file.name} uploaded successfully.`)\n                            this.refreshFiles();\n                        } else {\n                            this.hubService.addHubMessage(status);\n                        }\n                    }).catch(reason => {\n                        this.hubService.addHubMessage(reason);\n                    });\n\n                }\n                this.uploadedFiles.push(fileHandler);\n                this.uploadedFiles = [...this.uploadedFiles];\n            }).catch(reason => {\n                this.hubService.addHubMessage(reason);\n            });\n        });\n    }\n\n    public filesDrop(files: any) {\n        this.doUpload(files);\n    }\n}\n","<div *ngIf=\"!connectionTables || connectionTables.length === 0\" class=\"alert alert-danger m-3\">\n    There are no files configured.  Create a file based connection, and add at least one file definition.\n    <hr>\n    <div>\n        <d-button-new routerLink=\"/hub/{{hubCache?.hub.hubKey}}/connections/connection-new/Source\" text=\"New Connection\" [autoCompact]=\"false\"></d-button-new>\n        <d-button *ngFor=\"let connection of fileConnections\" routerLink=\"/hub/{{hubCache?.hub.hubKey}}/connections/tables/table-new/{{connection.key}}\" [autoCompact]=\"false\" [title]=\"\">New Table ({{connection.name}})</d-button>\n    </div>\n</div>\n\n<div *ngIf=\"connectionTables && connectionTables.length > 0\" class=\"container\">\n    <d-widget [title]=\"'Manage Files: ' + table?.name\" iconClass=\"fa fa-lg fa-fw fa-table\" [showCloseButton]=\"true\"\n        (close)=\"close()\" >\n        <ng-template #header>\n            <d-button-dropdown class=\"mr-1\" iconClass=\"fa fa-file-o\" text=\"New File\">\n                    <a *ngFor=\"let connection of fileConnections\" class=\"dropdown-item\" routerLink=\"/hub/{{hubCache?.hub.hubKey}}/connections/tables/table-new/{{connection.key}}\" [title]=\"\">{{connection.name}}</a>\n            </d-button-dropdown>\n            <d-button-dropdown *ngIf=\"connectionReference?.allowFlatFiles && table?.autoManageFiles\" iconClass=\"fa fa-filter\" [text]=\"eFlatFilePath[path]\" title=\"Select the file location\" [pullRight]=\"true\">\n                    <a *ngFor=\"let item of eFlatFilePathItems\" class=\"dropdown-item\" [class.active]=\"path=='item.name'\" routerLinkActive=\"active\" data-toggle=\"tab\" routerLink=\".\" [queryParams]=\"{tableKey: tableKey, path: item.key}\">\n                            <i class=\"fa fa-elipsis-h\"></i>{{item.name}}</a>\n            </d-button-dropdown>\n        </ng-template>\n\n        <ul *ngIf=\"table\" class=\"list-group\">\n            <li class=\"list-group-item\">\n                <section>\n                    <form-select label=\"Flat File\" [(ngModel)]=\"tableKey\" [ngModelOptions]=\"{standalone: true}\"\n                        (ngModelChange)=\"updateTable($event)\" [items]=\"connectionTables\" parentName=\"name\" childItems=\"dexihTables\"\n                        itemKey=\"key\" itemName=\"logicalName\" note=\"Select the flat file to manage\">\n                    </form-select>\n                </section>\n                <section *ngIf=\"!connectionReference?.allowFlatFiles\">\n                    <form-select label=\"Update Strategy\" [(ngModel)]=\"updateStrategy\" [ngModelOptions]=\"{standalone: true}\"\n                        [items]=\"updateStrategies\" itemKey=\"key\" itemName=\"description\" iconClass=\"fa fa-database\"\n                        note='Specify how records should be inserted/updated in the target table.'\n                        >\n                    </form-select>\n                </section>\n            </li>\n            <li class=\"list-group-item list-group-item-info rounded-0\">\n                <h5>Drop Files to Upload</h5>\n            </li>\n            <li class=\"list-group-item \">\n                <div class=\"well my-drop-zone\" dropZone [requireFiles]=\"true\" (dropFiles)=\"filesDrop($event)\" dropAllowedClass=\"nv-file-over\">\n                    Drop Files to Upload Here\n                    <div class=\"custom-file w-25 float-right\">\n                        <input type=\"file\" class=\"custom-file-input\" onclick=\"this.value=null\" (change)=\"uploadFile($event)\">\n                        <label class=\"custom-file-label\" for=\"inputGroupFile01\">Choose files</label>\n                    </div>\n                </div>\n            </li>\n            <li class=\"list-group-item list-group-item-info  rounded-0\">\n                <h5>Upload Queue</h5>\n            </li>\n            <li class=\"list-group-item p-0\">\n                <d-table [enableMultiSelect]=\"true\" [columns]=\"uploadColumns\" [data]=\"uploadedFiles\">\n\n                    <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n                        <d-button class=\"mr-1\" iconClass=\"fa fa-upload\" buttonClass='btn-primary' (click)=\"uploadSelected(items)\">Upload</d-button>\n                        <d-button-cancel class=\"mr-1\" (click)=\"cancelSelected(items)\"></d-button-cancel>\n                        <d-button-delete (click)=\"removeSelected(items)\" text=\"Remove\"></d-button-delete>\n                    </ng-template>\n\n                    <ng-template #actions let-items=\"items\">\n                        <section>\n                            <form-checkbox [(ngModel)]=\"automaticUpload\" label=\"Automatically upload files when added to the queue.\"></form-checkbox>\n                        </section>\n                    </ng-template>\n\n                    <ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n                        <div *ngIf=\"item.isRunning()\" class=\"progress\" style=\"margin-bottom: 0;\">\n                            <div class=\"progress-bar\" role=\"progressbar\" [ngStyle]=\"{ 'width': item.progress + '%' }\"></div>\n                        </div>\n                        <span >\n                            <i class='fa' [ngClass]=\"{\n                                'fa-check': item.status === eFileStatus.Complete, \n                                'fa-exclamation-circle': item.status === eFileStatus.Error,\n                                'fa-ban': item.status === eFileStatus.Cancelled}\"></i>{{item.status}}</span>\n                    </ng-template>\n                </d-table>\n            </li>\n            <ng-template [ngIf]=\"connectionReference?.allowFlatFiles\">\n            <li class=\"list-group-item list-group-item-info rounded-0\">\n                <h5>Files (Local directory:\n                    <a href='file://///{{localPath}}'>{{localPath}}</a>)</h5>\n\n            </li>\n            <li class=\"list-group-item p-0\">\n                <d-table [enableMultiSelect]=\"true\" [columns]=\"columns\" [dataObservable]=\"tableData\">\n\n                    <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n                        <d-button-delete class=\"mr-1\" (click)=\"deleteSelected(items)\"></d-button-delete>\n                        <d-button-download class=\"mr-1\" (click)=\"downloadSelected(items)\"></d-button-download>\n                        <d-button-dropdown class=\"mr-1\" iconClass=\"fa fa-mail-forward\" text=\"Move\" [pullRight]=\"true\">\n                            <a class=\"dropdown-item\" *ngIf=\"path != eFlatFilePath.Incoming\" (click)=\"moveSelected(items, eFlatFilePath.Incoming)\">To Incoming</a>\n                            <a class=\"dropdown-item\" *ngIf=\"path != eFlatFilePath.Outgoing\" (click)=\"moveSelected(items, eFlatFilePath.Outgoing)\">To Processed</a>\n                            <a class=\"dropdown-item\" *ngIf=\"path != eFlatFilePath.Processed\" (click)=\"moveSelected(items, eFlatFilePath.Processed)\">To Processed</a>\n                            <a class=\"dropdown-item\" *ngIf=\"path != eFlatFilePath.Rejected\" (click)=\"moveSelected(items, eFlatFilePath.Rejected)\">To Rejected</a>\n                        </d-button-dropdown>\n                    </ng-template>\n\n                    <ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n                        <d-button-preview [routerLink]=\"['/hub', hubCache?.hub.hubKey, 'summary', 'files', 'manage', tableKey, 'file-preview', path, item.fileName]\"></d-button-preview>\n                    </ng-template>\n\n                    <ng-template #actions let-items=\"items\">\n                        <d-button-dropdown *ngIf=\"table?.autoManageFiles\" class=\"mr-1\" buttonClass=\"btn-primary\" iconClass=\"fa fa-filter\" [text]=\"eFlatFilePath[path]\"\n                            title=\"Select the file location\" [pullRight]=\"true\">\n                            <a *ngFor=\"let item of eFlatFilePathItems\" class=\"dropdown-item\" [class.active]=\"path=='item.name'\" routerLinkActive=\"active\" data-toggle=\"tab\" routerLink=\".\" [queryParams]=\"{tableKey: tableKey, path: item.key}\">\n                                <i class=\"fa fa-elipsis-h\"></i>{{item.name}}</a>\n                        </d-button-dropdown>\n                        <d-button-refresh (click)=\"refreshFiles()\"></d-button-refresh>\n                    </ng-template>\n                </d-table>\n            </li>\n        </ng-template>\n        </ul>\n    </d-widget>\n</div>","export { FilesManageComponent } from './files-manage/files-manage.component';\nexport { FilesBulkLoadComponent } from './files-bulk-load/files-bulk-load.component';\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { SharedModule } from '../shared/shared.module';\nimport { ColumnValidationEditComponent, ColumnValidationIndexComponent } from './columnValidation';\nimport { ConnectionEditComponent, ConnectionImportComponent, ConnectionIndexComponent } from './connection';\nimport { ImportComponent, ExportComponent } from './copy';\nimport { DatajobIndexComponent } from './datajob';\nimport { DatalinkIndexComponent, DatalinkNewComponent } from './datalink';\nimport { DatalinkPreviewDataComponent } from './datalink/datalink-preview-data';\nimport { FileFormatIndexComponent } from './fileFormat';\nimport { FilesManageComponent, FilesBulkLoadComponent } from './files';\nimport { BaseRouting } from './hub.base.routing';\nimport { HubService } from './hub.service';\nimport { HubSharedModule } from './hub.shared.module';\nimport { HubVariableEditComponent, HubVariableIndexComponent } from './hubVariable';\nimport { ItemEditGuard } from './item-edit.guard';\nimport { ManageUsersIndexComponent } from './manage/manage-users-index/manage-users-index.component';\nimport { RemoteAgentEditComponent, RemoteAgentIndexComponent } from './remoteAgent';\nimport { ResultsIndexComponent } from './results';\nimport { ResultsViewModule } from './results/results-view/results-view.module';\nimport { SharedDataIndexComponent } from './sharedData/sharedData-index.component';\nimport { TableIndexComponent } from './table/table-index';\nimport { CustomFunctionIndexComponent, CustomFunctionEditComponent, CustomFunctionParameterComponent } from './customFunction';\nimport { DatalinkTestIndexComponent, DatalinkTestNewComponent } from './test'\nimport { ViewIndexComponent } from './view/view-index';\nimport { ViewEditComponent } from './view/view-edit';\nimport { DashboardIndexComponent } from './dashboard';\nimport { ApiIndexComponent } from './api/api-index';\nimport { ApiEditComponent } from './api/api-edit';\nimport { DatalinkRunComponent } from './datalink/datalink-run/datalink-run.component';\nimport { SearchModule} from './search';\nimport { DatajobRunComponent } from './datajob/datajob-run/datajob-run.component';\nimport { ListOfValuesEditComponent } from './listOfValues/listOfValues-edit';\nimport { ListOfValuesIndexComponent } from './listOfValues/listOfValues-index';\nimport { TagsComponent } from './tags/tags.component';\n\n@NgModule({\n    imports: [\n        SharedModule,\n        BaseRouting,\n        ReactiveFormsModule,\n        HubSharedModule,\n        ResultsViewModule,\n        SearchModule,\n    ],\n    declarations: [\n        ConnectionIndexComponent,\n        ConnectionEditComponent,\n        ConnectionImportComponent,\n        DatalinkIndexComponent,\n        DatalinkPreviewDataComponent,\n        DatalinkRunComponent,\n        DatajobRunComponent,\n        TableIndexComponent,\n        DatalinkNewComponent,\n        RemoteAgentIndexComponent,\n        RemoteAgentEditComponent,\n        ResultsIndexComponent,\n        DatajobIndexComponent,\n        ColumnValidationIndexComponent, ColumnValidationEditComponent,\n        FileFormatIndexComponent,\n        ViewIndexComponent,\n        ApiIndexComponent, ApiEditComponent,\n        HubVariableEditComponent, HubVariableIndexComponent,\n        ImportComponent, ExportComponent,\n        FilesManageComponent,\n        ManageUsersIndexComponent,\n        SharedDataIndexComponent,\n        CustomFunctionIndexComponent, CustomFunctionEditComponent, CustomFunctionParameterComponent,\n        DatalinkTestIndexComponent, DatalinkTestNewComponent,\n        DashboardIndexComponent,\n        ListOfValuesEditComponent, ListOfValuesIndexComponent,\n        TagsComponent\n    ],\n    providers: [ ItemEditGuard ],\n    exports: [ ]\n})\nexport class HubBaseModule {\n\n    static forRoot(): ModuleWithProviders<HubBaseModule> {\n        return {\n            ngModule: HubBaseModule,\n            providers: [HubService, ItemEditGuard]\n        };\n    }\n}\n","import { Route, RouterModule, Routes } from '@angular/router';\n\nimport { ColumnValidationEditComponent, ColumnValidationIndexComponent } from './columnValidation';\nimport { ConnectionEditComponent } from './connection/connection-edit';\nimport { ConnectionImportComponent } from './connection/connection-import';\nimport { ConnectionIndexComponent } from './connection/connection-index';\nimport { ImportComponent, ExportComponent } from './copy';\nimport { DatajobIndexComponent } from './datajob/datajob-index';\nimport { DatalinkIndexComponent } from './datalink/datalink-index';\nimport { DatalinkNewComponent } from './datalink/datalink-new';\nimport { DatalinkPreviewDataComponent } from './datalink/datalink-preview-data';\nimport { FileFormatEditComponent, FileFormatIndexComponent } from './fileFormat';\nimport { FilesManageComponent, FilesBulkLoadComponent } from './files';\nimport { HubVariableEditComponent, HubVariableIndexComponent } from './hubVariable';\nimport { ManageUsersIndexComponent } from './manage/manage-users-index/manage-users-index.component';\nimport { RemoteAgentEditComponent, RemoteAgentIndexComponent } from './remoteAgent';\nimport { ResultsIndexComponent, ResultsViewComponent } from './results';\nimport { SharedDataIndexComponent } from './sharedData/sharedData-index.component';\nimport { TableIndexComponent } from './table/table-index';\nimport { TablePreviewDataComponent } from './table/table-preview-data';\nimport { CustomFunctionIndexComponent, CustomFunctionEditComponent } from './customFunction';\nimport { ItemEditGuard } from './item-edit.guard';\nimport { DatalinkTestIndexComponent, DatalinkTestNewComponent } from './test'\nimport { ViewEditComponent } from './view/view-edit';\nimport { ViewIndexComponent } from './view/view-index';\nimport { ApiEditComponent } from './api/api-edit';\nimport { ApiIndexComponent } from './api/api-index';\nimport { DatalinkRunComponent } from './datalink/datalink-run/datalink-run.component';\nimport { SearchComponent } from './search';\nimport { DashboardEditComponent, DashboardIndexComponent } from './dashboard';\nimport { DatajobRunComponent } from './datajob/datajob-run/datajob-run.component';\nimport { DexihDashboard, DexihView, DexihApi } from '../shared/shared.models';\nimport { ListOfValuesEditComponent } from './listOfValues/listOfValues-edit';\nimport { ListOfValuesIndexComponent } from './listOfValues/listOfValues-index';\nimport { TagsComponent } from './tags/tags.component';\n\nconst resultViewRoute: Route = { path: 'result-view/:auditConnectionKey/:auditKey', children: [\n        {path: '', pathMatch: 'full', component: ResultsViewComponent, data: { pageTitle: 'Detailed Result' }},\n        { path: 'result-view/:auditConnectionKey/:auditKey', children: [\n            {path: '', pathMatch: 'full', component: ResultsViewComponent, data: { pageTitle: 'Child Result' }},\n            { path: 'result-view/:auditConnectionKey/:auditKey', children: [\n                {path: '', pathMatch: 'full', component: ResultsViewComponent, data: { pageTitle: 'GrandChild Result' }},\n            ]\n        }\n        ]\n    }\n    ]\n};\n\nconst tableRoutes: Routes = [\n    { path: 'table-edit/:tableKey', data: { pageTitle: 'Edit Table', action: 'edit'},\n        loadChildren: () => import('./table/table-edit/table-edit.module').then(m => m.TableEditModule)},\n    { path: 'table-new',  data: {  pageTitle: 'New Table', action: 'new'},\n        loadChildren: () => import('./table/table-edit/table-edit.module').then(m => m.TableEditModule)},\n    { path: 'table-new/:connectionKey',  data: {  pageTitle: 'New Table', action: 'new'},\n        loadChildren: () => import('./table/table-edit/table-edit.module').then(m => m.TableEditModule)},\n    { path: 'datalink-new/:sourceTableKeys/:targetConnectionKey',\n        component: DatalinkNewComponent, data: { action: 'new', pageTitle: 'New Datalink' } },\n    { path: 'table-preview/:tableKey', component: TablePreviewDataComponent, data: { pageTitle: 'Preview Table' } },\n];\n\nconst datalinkRoutes: Routes = [\n    { path: 'datalink-edit', loadChildren: () => import('./datalink/datalink-edit/datalink-edit.module').then(m => m.DatalinkEditModule)},\n    { path: 'datalink-preview/:datalinkKey/:previewUpdates', component: DatalinkPreviewDataComponent,\n        data: { pageTitle: 'Preview Datalink' } },\n    { path: 'table-preview/:tableKey', component: TablePreviewDataComponent, data: { pageTitle: 'Preview Table' } },\n    { path: 'datalink-run/:datalinkKeys', component: DatalinkRunComponent, data: { pageTitle: 'Run Datalink' } },\n    resultViewRoute\n];\n\nconst tablesRoute: Route = { path: 'tables', data: { pageTitle: 'Tables' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: TableIndexComponent, data: { pageTitle: 'Tables' }},\n    {path: '', children: (<Routes>tableRoutes)},\n    {path: '', children: (<Routes>datalinkRoutes)},\n    ])\n};\n\nconst connectionRoutes: Routes = [\n    { path: 'connection-edit/:connectionKey', component: ConnectionEditComponent, canDeactivate: [ItemEditGuard],\n        data: {action: 'edit', pageTitle: 'Edit Connection' }},\n    { path: 'connection-import/:connectionKey', data: { pageTitle: 'Import Tables'}, children: [\n        {path: '', pathMatch: 'full', component: ConnectionImportComponent, data: { pageTitle: 'Import Tables' }} ,\n        { path: 'table-edit/:tableKey', data: { pageTitle: 'Edit Table', action: 'edit'},\n                loadChildren: () => import('./table/table-edit/table-edit.module').then(m => m.TableEditModule)},\n        { path: 'datalink-new/:sourceTableKeys/:targetConnectionKey',\n        component: DatalinkNewComponent, data: { action: 'new', pageTitle: 'New Datalink' } },\n    ]},\n    { path: 'connection-new/:purpose', component: ConnectionEditComponent, data: {action: 'new', pageTitle: 'New Connection' }},\n    { path: 'connection-copy/:connectionKey', component: ConnectionEditComponent, data: {action: 'copy', pageTitle: 'New Connection' }}\n];\n\nconst connectionsRoute: Route =  { path: 'connections', data: {pageTitle: 'Connections' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: ConnectionIndexComponent, data: {pageTitle: 'Connections' }},\n    {path: '', children: (<Routes>connectionRoutes)},\n    tablesRoute\n    ])\n};\n\nconst agentRoutes: Routes = [\n    { path: '', pathMatch: 'full', component: RemoteAgentIndexComponent, data: { pageTitle: 'Remote Agents' }},\n    { path: 'agent-edit/:remoteAgentKey/:remoteAgentHubKey', component: RemoteAgentEditComponent, data: { pageTitle: 'Edit Agent' }}\n];\n\nconst agentsRoute: Route = { path: 'agents', data: { pageTitle: 'Remote Agents' }, children: agentRoutes\n};\n\nconst resultRoutes: Routes = [\n    { path: 'results', data: { pageTitle: 'Execution Results' }, children: [\n        {path: '', pathMatch: 'full', component: ResultsIndexComponent, data: { pageTitle: 'Execution Results' } },\n        resultViewRoute\n    ] },\n    resultViewRoute\n];\n\nconst manageRoute: Route = { path: 'manage', children: (<Routes>[\n    { path: 'manage-users', component: ManageUsersIndexComponent, data: {pageTitle: 'Manage Users'}}\n    ])\n};\n\nconst importRoute: Route = { path: 'import', children: (<Routes>[\n    { path: '', pathMatch: 'full', component: ImportComponent, data: {pageTitle: 'Import Objects'}}\n    ])\n};\n\nconst exportRoute: Route = { path: 'export', children: (<Routes>[\n    { path: '', pathMatch: 'full', component: ExportComponent, data: {pageTitle: 'Export Objects'}}\n    ])\n};\n\nconst sharedDataRoute: Route = { path: 'sharedData', data: { pageTitle: 'Shared Data' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: SharedDataIndexComponent},\n    {path: '', children: [\n        { path: 'table-preview/:tableKey', component: TablePreviewDataComponent, data: { pageTitle: 'Preview Table' } },\n        { path: 'datalink-preview/:datalinkKey', component: DatalinkPreviewDataComponent, data: { pageTitle: 'Preview Datalink' } },\n        { path: 'dashboard-preview/:dashboardKey', data: { pageTitle: 'Preview Dashboard', action: 'edit'},\n        loadChildren: () => import('./dashboard/dashboard-edit/dashboard-edit.module').then(m => m.DashboardEditModule)},\n        { path: 'view-preview/:viewKey', component: ViewEditComponent, data: { pageTitle: 'Preview View', action: 'edit' } },\n        { path: 'api-preview/:apiKey', component: ApiEditComponent, data: { pageTitle: 'Preview Api', action: 'edit' } }\n    ]}])\n};\n\nconst customFunctionRoutes: Routes = [\n    { path: 'customFunction-edit/:customFunctionKey', component: CustomFunctionEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit Custom Function'}},\n    { path: 'customFunction-new', component: CustomFunctionEditComponent, data: { action: 'new', pageTitle: 'New Custom Function'}},\n];\n\nconst customFunctionRoute: Route = { path: 'customFunctions', data: { pageTitle: 'Custom Functions' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: CustomFunctionIndexComponent},\n    {path: '', children: (<Routes>customFunctionRoutes)},\n    ])\n};\n\nconst columnValidationRoutes: Routes = [\n    { path: 'columnValidation-edit/:validationKey', component: ColumnValidationEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit Validation'}},\n    { path: 'columnValidation-new', component: ColumnValidationEditComponent, data: { action: 'new', pageTitle: 'New Validation'}},\n];\n\nconst columnValidationsRoute: Route = { path: 'columnValidations', data: { pageTitle: 'Column Validations' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: ColumnValidationIndexComponent},\n    {path: '', children: (<Routes>columnValidationRoutes)},\n    ])\n};\n\nconst fileFormatRoutes: Routes = [\n    { path: 'fileFormat-edit/:fileFormatKey', component: FileFormatEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit FileFormat'}},\n    { path: 'fileFormat-new', component: FileFormatEditComponent, data: { action: 'new', pageTitle: 'New FileFormat'}},\n];\n\nconst fileFormatsRoute: Route = { path: 'fileFormats', data: { pageTitle: 'File Formats' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: FileFormatIndexComponent},\n    {path: '', children: (<Routes>fileFormatRoutes)}\n    ])\n};\n\nconst viewRoutes: Routes = [\n    { path: 'view-edit/:viewKey', component: ViewEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit View'}},\n    { path: 'view-new', component: ViewEditComponent, data: { action: 'new', pageTitle: 'New View'}},\n];\n\nconst viewRoute: Route = { path: 'views', data: { pageTitle: 'Views' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: ViewIndexComponent},\n    {path: '', children: (<Routes>viewRoutes)}\n    ])\n};\n\nconst dashboardRoutes: Routes = [\n    { path: 'dashboard-edit/:dashboardKey', data: { pageTitle: 'Edit Dashboard', action: 'edit'},\n        loadChildren: () => import('./dashboard/dashboard-edit/dashboard-edit.module').then(m => m.DashboardEditModule)},\n    { path: 'dashboard-new',  data: {  pageTitle: 'New Dashboard', action: 'new'},\n        loadChildren: () => import('./dashboard/dashboard-edit/dashboard-edit.module').then(m => m.DashboardEditModule)},\n];\n\nconst dashboardRoute: Route = { path: 'dashboards', data: { pageTitle: 'Dashboards' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: DashboardIndexComponent},\n    {path: '', children: (<Routes>dashboardRoutes)}\n    ])\n};\n\nconst lovRoutes: Routes = [\n    { path: 'listOfValues-edit/:listOfValuesKey', component: ListOfValuesEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit List Of Values'}},\n    { path: 'listOfValues-new', component: ListOfValuesEditComponent, data: { action: 'new', pageTitle: 'New List of Values'}},\n];\n\nconst lovRoute: Route = { path: 'listOfValues', data: { pageTitle: 'List of Values' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: ListOfValuesIndexComponent},\n    {path: '', children: (<Routes>lovRoutes)}\n    ])\n};\n\nconst apiRoutes: Routes = [\n    { path: 'api-edit/:apiKey', component: ApiEditComponent, canDeactivate: [ItemEditGuard],\n        data: { action: 'edit', pageTitle: 'Edit Api'}},\n    { path: 'api-new', component: ApiEditComponent, data: { action: 'new', pageTitle: 'New Api'}},\n];\n\nconst apiRoute: Route = { path: 'apis', data: { pageTitle: 'Apis' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: ApiIndexComponent},\n    {path: '', children: (<Routes>apiRoutes)}\n    ])\n};\nconst hubVariableRoutes: Routes = [\n    { path: 'hubVariable-edit/:hubVariableKey', component: HubVariableEditComponent, data: { action: 'edit',\n        pageTitle: 'Edit Hub Variable'}},\n    { path: 'hubVariable-new', component: HubVariableEditComponent, data: { action: 'new', pageTitle: 'New Hub Variable'}},\n];\n\nconst hubVariablesRoute: Route = { path: 'hubVariables', data: { pageTitle: 'Hub Variables' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: HubVariableIndexComponent},\n    {path: '', children: (<Routes>hubVariableRoutes)}\n    ])\n};\n\nconst tagsRoute: Route = { path: 'tags', component: TagsComponent}\n\nconst datalinkTestRoutes: Routes = [\n    { path: 'datalinkTest-edit/:datalinkTestKey', data: { pageTitle: 'Edit Datalink Test', action: 'edit'},\n            loadChildren: () => import('./test/datalinkTest-edit/datalinkTest-edit.module').then(m => m.DatalinkTestEditModule)},\n    { path: 'datalinkTest-new',  data: {  pageTitle: 'New Datalink Test', action: 'new'},\n            loadChildren: () => import('./test/datalinkTest-edit/datalinkTest-edit.module').then(m => m.DatalinkTestEditModule)},\n    { path: 'datalinkTest-new/:datalinkKeys', component: DatalinkTestNewComponent,\n        data: {  pageTitle: 'New Datalink Test', action: 'new'}},\n    resultViewRoute\n];\n\nconst datalinkTestsRoute: Route = { path: 'datalinkTests', data: { pageTitle: 'Datalink Tests' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: DatalinkTestIndexComponent},\n    {path: '', children: (<Routes>datalinkTestRoutes)},\n    {path: '', children: (<Routes>resultRoutes)},\n    ])\n};\n\nconst filesRoutes: Routes = [\n    { path: 'manage', children: (<Routes> [\n        { path: '', component: FilesManageComponent, data: { action: 'edit', pageTitle: 'Manage Files'}},\n        { path: ':tableKey', data: { action: 'edit', pageTitle: 'Manage Files'}, children: (<Routes> [\n            { path: '', component: FilesManageComponent, data: { action: 'edit', pageTitle: 'Manage Files'}},\n            { path: 'file-preview/:path/:fileName', component: TablePreviewDataComponent, data: { pageTitle: 'Preview File' } }\n        ])}\n    ])},\n    { path: 'bulk-load', children: (<Routes> [\n       {path: '', data: { action: 'new', pageTitle: 'Bulk Load Files'},\n        loadChildren: () => import('./files/files-bulk-load/files-bulk-load.module').then(m => m.FilesBulkLoadModule)},\n       {path: ':connectionKey', data: { action: 'new', pageTitle: 'Bulk Load Files'},\n        loadChildren: () => import('./files/files-bulk-load/files-bulk-load.module').then(m => m.FilesBulkLoadModule)},\n    ])},\n];\n\nconst filesRoute: Route = { path: 'files', data: { pageTitle: 'Files' }, children: (<Routes>[\n    {path: '', children: (<Routes>filesRoutes)}\n    ])\n};\n\nconst datalinksRoute = { path: 'datalinks', data: { pageTitle: 'Data Links' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', data: { pageTitle: 'Data Links' }, component: DatalinkIndexComponent},\n    {path: '', children: (<Routes>datalinkRoutes)},\n    {path: '', children: (<Routes>resultRoutes)},\n    ])\n};\n\n// const publishedRoute: Route = { path: 'published', children: (<Routes>[\n//     { path: '', redirectTo: 'All'},\n//     { path: ':typeFilter', children: (<Routes> [\n//         {path: '', pathMatch: 'full', component: DatalinkIndexComponent, data: { pageTitle: 'Published' }},\n//     {path: '', children: (<Routes>datalinkRoutes)},\n//     {path: '', children: (<Routes>resultRoutes)},\n//     ])}\n//     ])\n// };\n\nconst datajobRoutes: Routes = [\n    { path: 'datajob-edit/:datajobKey', data: { pageTitle: 'Edit Data Job', action: 'edit'},\n            loadChildren: () => import('./datajob/datajob-edit/datajob-edit.module').then(m => m.DatajobEditModule)},\n    { path: 'datajob-new',  data: {  pageTitle: 'New Data Job', action: 'new'},\n            loadChildren: () => import('./datajob/datajob-edit/datajob-edit.module').then(m => m.DatajobEditModule)},\n    { path: 'datajob-run/:datajobKeys', component: DatajobRunComponent, data: { pageTitle: 'Run datajobs' } },\n\n];\n\nconst datajobsRoute: Route = { path: 'datajobs', data: { pageTitle: 'Data Jobs' }, children: (<Routes>[\n    {path: '', pathMatch: 'full', component: DatajobIndexComponent},\n    {path: '', children: (<Routes>datajobRoutes)},\n    {path: '', children: (<Routes>resultRoutes)},\n    ])\n};\n\nconst searchRoute: Route =  { path: 'search',  data: {pageTitle: 'Search'}, children: (<Routes> [\n    { path: '', pathMatch: 'full', redirectTo: '0/' },\n\n    // { path: '', loadChildren: './hub.base.module#HubBaseModule' },\n     { path: ':searchObject/:search', pathMatch: 'full', component: SearchComponent, },\n     { path: ':searchObject/:search', loadChildren: () => import('./hub.base.module').then(m => m.HubBaseModule) }\n  ])\n };\n\nconst routes: Routes = (<Routes>[\n    agentsRoute,\n    connectionsRoute,\n//    publishedRoute,\n    datalinksRoute,\n    tablesRoute,\n    datajobsRoute,\n  // resultsRoute,\n    columnValidationsRoute,\n    customFunctionRoute,\n    fileFormatsRoute,\n    viewRoute,\n    dashboardRoute,\n    lovRoute,\n    apiRoute,\n    hubVariablesRoute,\n    manageRoute,\n    importRoute,\n    exportRoute,\n    sharedDataRoute,\n    filesRoute,\n    datalinkTestsRoute,\n    tagsRoute,\n    searchRoute,\n    { path: '', children : connectionRoutes},\n    { path: '', children : datalinkRoutes},\n    { path: '', children : tableRoutes},\n    { path: '', children : datajobRoutes},\n    { path: '', children : resultRoutes},\n    { path: '', children : customFunctionRoutes},\n    { path: '', children : columnValidationRoutes},\n    { path: '', children : fileFormatRoutes},\n    { path: '', children : viewRoutes},\n    { path: '', children : dashboardRoutes},\n    { path: '', children : lovRoutes},\n    { path: '', children : apiRoutes},\n    { path: '', children : hubVariableRoutes},\n    { path: '', children : filesRoutes},\n    { path: '', children : agentRoutes},\n    { path: '', children : datalinkTestRoutes},\n]);\n\nexport const BaseRouting = RouterModule.forChild(routes);\n","<div class=\"container\">\n\t<d-widget \n\ttitle=\"Edit Variable\" \n\ticonClass=\"fa fa-lg fa-fw fa-at\" \n\t[showCloseButton]=\"true\"\n\t[padding]=\"true\"\n\t(close)=\"close()\"\n\t>\n        <ng-template #header>\n            <d-button-save *ngIf=\"hubCache.canWrite\" class=\"mr-1\" (click)=\"save()\"></d-button-save>\n            <cancel-button [formsService]=\"formsService\"></cancel-button>\n        </ng-template>\n\n\t\t<form *ngIf=\"formsService.currentForm\"  [formGroup]=\"formsService.currentForm\" >\n\t\t\t<!--dummy hidden password to stop chrome/firefox autocompletion password.-->\n\t\t\t<input id=\"fake_user_name\" name=\"fake_user[name]\" style=\"position:absolute; top:-5000px;\" type=\"text\" value=\"Fake Auto-fill\">\n\t\t\t<input id=\"fake_password\" type=\"password\" name=\"fake_password[password]\" style=\"position:absolute; top:-5000px;\" type=\"text\" value=\"Fake Auto-fill\">\n\n\t\t\t<fieldset>\n\n\t\t\t\t\t\t\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Hub Variable Name\" formControlName=\"name\" placeholder=\"Enter the name.\" [autocapitalize]=\"true\" iconClass=\"fa fa-list\" [errors]=\"formsService.formErrors['name']\" >\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input [label]=\"formsService.currentForm.controls.isEnvironmentVariable.value ? 'Environment Variable Name' : 'Hub Variable Value'\" [type]=\"formsService.currentForm.controls.isEncrypted.value ? 'password' : 'text'\" formControlName=\"valueRaw\" placeholder=\"Enter the value.\" iconClass=\"fa fa-list\" [errors]=\"formsService.formErrors['value']\" autocomplete=\"off\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<section >\n\t\t\t\t\t<form-checkbox label=\"Encrypt value\" formControlName=\"isEncrypted\" >\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\n\t\t\t\t<section >\n\t\t\t\t\t<form-checkbox label=\"Use an environment variable on the remote agent\" formControlName=\"isEnvironmentVariable\" >\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\n\t\t\t</fieldset>\n\t\t</form>\n \n\t</d-widget>\n\n\t<dexih-help class=\"m-3\"  title=\"Hub Variables\" path=\"/assets/help/reference/hubVariable.md\"></dexih-help>\n\n</div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DexihHubVariable } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n  selector: 'dexih-hubVariable-edit-form',\n  templateUrl: './hubVariable-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class HubVariableEditComponent implements OnInit, OnDestroy {\n\n  private hubVariableKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _isEncryptedSubscription: Subscription;\n  private isLoaded = false;\n\n  private cancelToken = new CancelToken();\n\n  constructor(private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.pageTitle = data['pageTitle'];\n        this.action = data['action'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Edit Variables');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._isEncryptedSubscription) { this._isEncryptedSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  load() {\n    this.isLoaded = true;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.hubVariableKey = + this.params['hubVariableKey'];\n\n      if (!this.hubVariableKey) {\n        this.hubService.addHubErrorMessage('There was no variable specified to edit.');\n        // this.errorMessage = 'There was no validation specified to edit.';\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihHubVariables) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let hubVariable = this.hubCache.hub.dexihHubVariables.find(c => c.key === this.hubVariableKey);\n          this.formsService.hubVariable(hubVariable);\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let hubVariable = new DexihHubVariable();\n      hubVariable.value = '';\n      hubVariable.name = '';\n      this.formsService.hubVariable(hubVariable);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/hubVariable-new', `/hubVariable-edit/${key}`)\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n\n    this._isEncryptedSubscription = this.formsService.currentForm.controls.isEncrypted.valueChanges.subscribe(isEncrypted => {\n      if (!isEncrypted) {\n        this.formsService.currentForm.controls.valueRaw.setValue('');\n      }\n    });\n  }\n\n  async save() {\n    let form = this.formsService.currentForm;\n\n    let isEncrypted = form.controls.isEncrypted.value;\n    if (isEncrypted) {\n      let valueRaw = form.controls.valueRaw.value;\n        if (valueRaw) {\n          let value = await this.hubService.encrypt(valueRaw, this.cancelToken);\n          form.controls.value.setValue(value);\n          form.controls.valueRaw.setValue(null);\n        }\n      } else {\n        let valueRaw = form.controls.valueRaw.value;\n        form.controls.value.setValue(valueRaw);\n      }\n\n    await this.formsService.save();\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n}\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Observable, Subscription, BehaviorSubject, combineLatest} from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { DexihHubVariable, DexihHub, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'hubVariable',\n  templateUrl: './hubVariable-index.component.html',\n  styles: []\n})\nexport class HubVariableIndexComponent implements OnInit, OnDestroy {\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    hubVariables: Array<DexihHubVariable>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', format: '', tags: 'tags'},\n        { name: 'value', title: 'Value', format: ''},\n        { name: 'isEncrypted', title: 'Encrypted?', format: 'Boolean'},\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar'},\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        this._subscription = combineLatest(\n            this.hubService.getHubCacheObservable()\n        ).subscribe(result => {\n          this.hubCache = result[0];\n          this.updateVariables();\n        });\n    } catch (e) {\n        this.hubService.addHubClientErrorMessage(e, 'Hub Variables Index');\n      }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    deleteHubVariables(variables: Array<DexihHubVariable>) {\n        this.hubService.deleteHubVariables(variables);\n    }\n\n    updateVariables() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let variables = this.hubCache.hub.dexihHubVariables.filter(c => c.isValid).map(c => {\n                return {\n                    key: c.key,\n                    name: c.name,\n                    description: c.description,\n                    updateDate: c.updateDate,\n                    value: c.isEncrypted ? '(Encrypted)' : c.value,\n                    isEncrypted: c.isEncrypted,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.HubVariable, c.key)\n                }\n            });\n            this._tableData.next(variables);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(variable: DexihHubVariable) {\n        this.router.navigate(['hubVariable-edit', variable.key], { relativeTo: this.route});\n    }\n\n    export(variables: Array<DexihHubVariable>) {\n        let vars = this.hubCache.hub.dexihHubVariables.filter(c => {\n            return variables.findIndex(d => d.key === c.key) >= 0\n        });\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        hub.dexihHubVariables = vars;\n        let filename = 'hub_variables.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n\n    watchChanges() {\n      // watch the current validation in case it is changed in another session.\n      this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n          if (hubCacheChange.changeClass === eSharedObjectType.HubVariable || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n            this.updateVariables();\n          }\n      });\n  }\n}\n","<div class=\"container-fluid\">\n    <d-widget title=\"Hub Variables\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-at\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n \n\n\t\t<d-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-hubVariable=\"item\">\n\t\t\t\t\t<d-button-edit class=\"mr-1\" [routerLink]=\"['hubVariable-edit', hubVariable.key]\" queryParamsHandling preserveFragment></d-button-edit>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<d-button-save-local class=\"mr-1\" (click)=\"export(items)\"></d-button-save-local>\n\t\t\t\t\t<d-button-delete *ngIf=\"hubCache.canWrite\" class=\"mr-1\" (click)=\"deleteHubVariables(items)\"></d-button-delete>\n\t\t\t\t\t<tags-update-button class=\"mr-1\" [objectType]=\"eSharedObjectType.HubVariable\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<d-button-new *ngIf=\"hubCache.canWrite\" class=\"mr-1\" [routerLink]=\"['hubVariable-new']\"></d-button-new>\n\t\t\t\t</ng-template>\n\t\t</d-table>\n\n\t</d-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Hub Variables\" path=\"/assets/help/reference/hubVariable.md\"></dexih-help>\n\n</div>\n\n\n","export * from './hubVariable-index/hubVariable-index.component';\nexport * from './hubVariable-edit/hubVariable-edit.component';\n","export * from './listOfValues-edit.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { HubCache, eCacheStatus, ConnectionTables } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest, merge, Subject} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DexihListOfValues, DexihDatalink, eLOVObjectType,\n  DexihColumnBase, eLOVObjectTypeItems, SelectQuery, ListOfValuesItem } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { InputOutputColumns } from '../../hub.lineage.models';\nimport { FormGroup, FormArray } from '@angular/forms';\n\n@Component({\n\n  selector: 'dexih-listOfValues-edit-form',\n  templateUrl: './listOfValues-edit.component.html',\n  providers: [HubFormsService]\n})\nexport class ListOfValuesEditComponent implements OnInit, OnDestroy {\n\n  private listOfValuesKey: number;\n\n  private hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _sourceChangeSubscription: Subscription;\n  private isLoaded = false;\n\n  private refreshDataSubject: Subject<void> = new Subject<void>();\n\n  private cancelToken = new CancelToken();\n\n  public eLOVObjectType = eLOVObjectType;\n  public connectionTables: ConnectionTables[] = [];\n  public datalinks: DexihDatalink[] = [];\n\n  public tableColumns: DexihColumnBase[];\n  public sourceTypes = eLOVObjectTypeItems.filter( c => c.key > 0);\n\n  columns = [\n    { name: 'key', title: 'Key'},\n    { name: 'name', title: 'Name'},\n    { name: 'description', title: 'Description'},\n];\n  public data: Array<any>;\n\n  constructor(private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.pageTitle = data['pageTitle'];\n        this.action = data['action'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Edit List Of Values');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n    if (this._sourceChangeSubscription) { this._sourceChangeSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  load() {\n    this.isLoaded = true;\n\n    this.connectionTables = this.hubCache.getConnectionTables();\n    this.datalinks = this.hubCache.hub.dexihDatalinks;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.listOfValuesKey = + this.params['listOfValuesKey'];\n\n      if (!this.listOfValuesKey) {\n        this.hubService.addHubErrorMessage('There was no list of values specified to edit.');\n        // this.errorMessage = 'There was no validation specified to edit.';\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihListOfValues) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n          let listOfValues = this.hubCache.hub.dexihListOfValues.find(c => c.key === this.listOfValuesKey);\n          if (! listOfValues.selectQuery) {\n            listOfValues.selectQuery = new SelectQuery();\n          }\n          this.formsService.listOfValues(listOfValues);\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n      let listOfValues = new DexihListOfValues();\n      listOfValues.selectQuery = new SelectQuery();\n      this.formsService.listOfValues(listOfValues);\n\n      // update the url with the saved key\n      this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n        let key = form.controls.key.value;\n        if (key) {\n          if (history.pushState) {\n            let newUrl = window.location.pathname.replace('/listOfValues-new', `/listOfValues-edit/${key}`);\n            this.router.navigateByUrl(newUrl);\n            this._formChangeSubscription.unsubscribe();\n          }\n        }\n      });\n    }\n\n    this.refreshColumns();\n\n    let currentForm = this.formsService.currentForm;\n\n    // if any source table/datalink changed, refresh the columns.\n    this._sourceChangeSubscription = merge(\n      currentForm.controls.sourceType.valueChanges,\n      currentForm.controls.sourceTableKey.valueChanges,\n      currentForm.controls.sourceDatalinkKey.valueChanges).subscribe(() => {\n        this.refreshColumns();\n    });\n  }\n\n  refreshColumns() {\n    let currentForm = this.formsService.currentForm;\n    let sourceType = <eLOVObjectType> currentForm.controls.sourceType.value;\n\n    switch (sourceType) {\n      case eLOVObjectType.Datalink:\n        let datalinkKey = currentForm.controls.sourceDatalinkKey.value;\n        let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === datalinkKey);\n        if (datalink) {\n          // get the outputs from the last transform in the datalink\n          const ioColumns = new InputOutputColumns();\n          ioColumns.buildInputOutput(this.hubCache, datalink);\n          this.tableColumns = ioColumns.getDatalinkOutputColumns(datalink);\n        } else {\n          if (datalinkKey > 0) {\n            this.hubService.addHubErrorMessage(`The datalink with the key ${datalinkKey} could not be found.`);\n          }\n          this.tableColumns = null;\n        }\n        break;\n      case eLOVObjectType.Table:\n        let tableKey = currentForm.controls.sourceTableKey.value;\n        let table = this.hubCache.hub.dexihTables.find(c => c.key === tableKey);\n        if (table) {\n          this.tableColumns = table.dexihTableColumns;\n        } else {\n          if (tableKey > 0) {\n            this.hubService.addHubErrorMessage(`The table with the key ${tableKey} could not be found.`);\n          }\n          this.tableColumns = null;\n        }\n        break;\n      }\n  }\n\n  refreshData() {\n    let form = this.formsService.currentForm;\n\n    let listOfValues = <DexihListOfValues>form.value;\n\n    this.hubService.previewListOfValues(listOfValues, true, this.cancelToken).then((data) => {\n      this.data = data;\n      this.refreshDataSubject.next();\n    }).catch((reason) => {\n      this.hubService.addHubMessage(reason);\n    });\n  }\n\n  hasChanged() {\n\n  }\n\n  add(index: number) {\n    let currentForm = <FormGroup> this.formsService.currentForm;\n    let item = this.formsService.listOfValuesItem(new ListOfValuesItem());\n    let staticData = <FormArray> currentForm.controls.staticData;\n    staticData.insert(index + 1, item);\n  }\n\n  remove(index: number) {\n    let currentForm = <FormGroup> this.formsService.currentForm;\n    let staticData = <FormArray> currentForm.controls.staticData;\n    staticData.removeAt(index);\n  }\n\n  clear() {\n    let currentForm = <FormGroup> this.formsService.currentForm;\n    let staticData = <FormArray> currentForm.controls.staticData;\n    while(staticData.controls.length > 0) {\n      staticData.removeAt(0);\n    }\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n}\n","<div class=\"container\" *ngIf=\"formsService.currentForm\">\n\t<d-widget title=\"Edit List of Values\" iconClass=\"fa fa-lg fa-list-alt\" [showCloseButton]=\"true\" [padding]=\"false\"\n\t\t(close)=\"close()\">\n\t\t<ng-template #header>\n\t\t\t<dexih-invalid-form-details [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\" class=\"mr-1\"></dexih-invalid-form-details>\n\t\t\t<save-button *ngIf=\"hubCache.canWrite\" [formsService]=\"formsService\" class=\"mr-1\"></save-button>\n\t\t\t<cancel-button [formsService]=\"formsService\"></cancel-button>\n\t\t</ng-template>\n\n\t\t<form [formGroup]=\"formsService.currentForm\" class=\"m-3\">\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\t\t\t\t\t<form-input label=\"List of Values\" formControlName=\"name\"\n\t\t\t\t\t\tplaceholder=\"Enter the list of values name.\" [autocapitalize]=\"on\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\t[errors]=\"formsService.formErrors['name']\">\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\t\t\t\t<section>\n\t\t\t\t\t<form-textarea label=\"Description\" [showMarkdown]=\"true\" formControlName=\"description\"\n\t\t\t\t\t\tplaceholder=\"Enter the description.\">\n\t\t\t\t\t</form-textarea>\n\t\t\t\t</section>\n\t\t\t\t<section>\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t\t<form-select label=\"Data Source Type\" formControlName=\"sourceType\" [items]=\"sourceTypes\"\n\t\t\t\t\t\t\t\titemKey=\"key\" itemName=\"name\" iconClass=\"fa fa-database\"\n\t\t\t\t\t\t\t\tnote='Specify the source type for this view' [enableFilter]=\"false\">\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class=\"form-group col-md-6\"\n\t\t\t\t\t\t\t*ngIf=\"formsService.currentForm.value.sourceType == eLOVObjectType.Table\">\n\t\t\t\t\t\t\t<form-select label=\"Source Table\" formControlName=\"sourceTableKey\"\n\t\t\t\t\t\t\t\t[errors]=\"errors?.sourceTableKey\" [items]=\"connectionTables\" parentName=\"name\"\n\t\t\t\t\t\t\t\tchildItems=\"dexihTables\" itemKey=\"key\" itemName=\"logicalName\"\n\t\t\t\t\t\t\t\tnote=\"Select the source table\">\n\t\t\t\t\t\t\t\t<table-edit-button [key]=\"formsService.currentForm.controls.sourceTableKey.value\"></table-edit-button>\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class=\"form-group col-md-6\"\n\t\t\t\t\t\t\t*ngIf=\"formsService.currentForm.value.sourceType == eLOVObjectType.Datalink\">\n\t\t\t\t\t\t\t<form-select label=\"Source Datalink\" formControlName=\"sourceDatalinkKey\"\n\t\t\t\t\t\t\t\t[errors]=\"errors?.sourceDatalinkKey\" [items]=\"datalinks\" itemKey=\"key\" itemName=\"name\"\n\t\t\t\t\t\t\t\tnote='Select the source datalink'>\n\t\t\t\t\t\t\t\t<datalink-edit-button [key]=\"formsService.currentForm.controls.sourceDatalinkKey.value\"></datalink-edit-button>\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-row\" *ngIf=\"tableColumns\">\n\t\t\t\t\t\t<section class=\"form-group col-md-4\">\n\t\t\t\t\t\t\t<form-select label=\"Key Column\" formControlName=\"keyColumn\" [items]=\"tableColumns\"\n\t\t\t\t\t\t\t\titemKey=\"name\" itemName=\"name\" iconClass=\"fa fa-key\" [allowNullSelect]=\"true\" [enableFilter]=\"false\">\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class=\"form-group col-md-4\">\n\t\t\t\t\t\t\t<form-select label=\"Name Column\" formControlName=\"nameColumn\" [items]=\"tableColumns\"\n\t\t\t\t\t\t\t\titemKey=\"name\" itemName=\"name\" iconClass=\"fa fa-circle-o\" [allowNullSelect]=\"true\" [enableFilter]=\"false\">\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t\t<section class=\"form-group col-md-4\">\n\t\t\t\t\t\t\t<form-select label=\"Description Column\" formControlName=\"descriptionColumn\"\n\t\t\t\t\t\t\t\t[items]=\"tableColumns\" itemKey=\"name\" itemName=\"name\" [allowNullSelect]=\"true\" iconClass=\"fa fa-comment-o\"\n\t\t\t\t\t\t\t\t[enableFilter]=\"false\">\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"form-row\" *ngIf=\"tableColumns\">\n\t\t\t\t\t\t<section class=\"form-group col-md-12\">\n\t\t\t\t\t\t\t<div class=\"d-flex flex-wrap pt-1\">\n\t\t\t\t\t\t\t\t<form-checkbox class=\"input-group-prepend\" label=\"Cache Lookup\" formControlName=\"cache\" [border]=\"true\"></form-checkbox>\n\t\t\t\t\t\t\t\t<form-input type=\"number\" class=\"pl-1\" *ngIf=\"formsService.currentForm.controls.cache.value\" labelLeft=\"Cache Seconds\" placeholder=\"seconds\" title=\"Specify the number of seconds to cache the lookup\" formControlName=\"cacheSeconds\"></form-input>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\n\t\t<d-widget-section *ngIf=\"formsService.currentForm.value.sourceType == eLOVObjectType.Static\" title=\"Static Values\"\n\t\t\t[showExpandButton]=\"true\">\n\t\t\t<ng-template #header>\n\t\t\t\t<d-button class=\"mr-1\" (click)=\"add(-1)\" iconClass=\"fa fa-plus\">Insert Item</d-button>\n\t\t\t\t<d-button-delete (click)=\"clear()\" text=\"Clear All\"></d-button-delete>\n\t\t\t</ng-template>\n\t\t\n\t\t\t<form *ngFor=\"let itemForm of formsService.currentForm.controls.staticData.controls; let i = index;\"\n\t\t\t\t[formGroup]=\"itemForm\" class=\"flex-fill\">\n\t\t\t\t<div class=\"input-group\">\t\t\n\t\t\t\t\t<div class=\"form-control p-0\">\n\t\t\t\t\t\t<form-input [border]=\"false\" formControlName=\"key\" type=\"text\" placeholder=\"Key Value\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-control p-0\">\n\t\t\t\t\t\t<form-input [border]=\"false\" formControlName=\"name\" type=\"text\" placeholder=\"Item name\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-control p-0\">\n\t\t\t\t\t\t<form-input [border]=\"false\" formControlName=\"key\" type=\"text\" placeholder=\"Description\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"input-group-append flex-shrink-1 ml-1 \">\n\t\t\t\t\t\t<button class=\"btn btn-light\" type=\"button\" (click)=\"add(i)\"  value=\"Add\">\n\t\t\t\t\t\t\t<i class=\"fa fa-plus-square-o\"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button class=\"btn btn-light\" type=\"button\" (click)=\"remove(i)\"  value=\"Remove\">\n\t\t\t\t\t\t\t<i class=\"fa fa-minus-square-o\"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\n\t\t</d-widget-section>\n\t\t\n\t\t<ng-template [ngIf]=\"formsService.currentForm.value.sourceType !== eLOVObjectType.Static\">\n\t\t\t<d-widget-section title=\"Query Configuration\" [showExpandButton]=\"true\">\n\t\t\t\t<query-builder [selectQuery]=\"formsService.currentForm.controls.selectQuery.value\" [columns]=\"tableColumns\"\n\t\t\t\t\t[inputColumns]=\"inputColumns\" [parameters]=\"null\" (hasChanged)=\"hasChanged()\" [refreshEvent]=\"refreshDataSubject.asObservable()\" (onRefreshData)=\"refreshData()\"></query-builder>\n\t\t\t</d-widget-section>\n\t\t\n\t\t\t<div *ngIf=\"!data\" class=\"m-3\">\n\t\t\t\t<d-button-refresh (click)=\"refreshData()\" text=\"Reload\" [autoCompact]=\"false\"></d-button-refresh>\n\t\t\t</div>\n\t\t\n\t\t\t<d-table *ngIf=\"data\" [enableMultiSelect]=\"false\" [enableSaveCsv]=\"true\" [columns]=\"columns\" [data]=\"data\">\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<d-button-refresh class=\"mr-1\" (click)=\"refreshData()\" text=\"Reload\"></d-button-refresh>\n\t\t\t\t</ng-template>\n\t\t\t</d-table>\n\t\t</ng-template>\n\t</d-widget>\n\n</div>","export * from './listOfValues-index.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Observable, Subscription, BehaviorSubject, combineLatest} from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { DexihListOfValues, eSharedObjectType, eLOVObjectType } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'listOfValues',\n  templateUrl: './listOfValues-index.component.html',\n  styles: []\n})\nexport class ListOfValuesIndexComponent implements OnInit, OnDestroy {\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    listOfValues: Array<DexihListOfValues>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', format: '', tags: 'tags'},\n        { name: 'sourceType', title: 'Source Type', format: 'Enum', enum: eLOVObjectType},\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar'},\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        this._subscription = combineLatest(\n            this.hubService.getHubCacheObservable()\n        ).subscribe(result => {\n          this.hubCache = result[0];\n          this.update();\n        });\n    } catch (e) {\n        this.hubService.addHubClientErrorMessage(e, 'Hub List of Values Index');\n      }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    delete(lov: Array<DexihListOfValues>) {\n        this.hubService.deleteListOfValues(lov);\n    }\n\n    update() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let listOfValues = this.hubCache.hub.dexihListOfValues.filter(c => c.isValid).map(c => {\n                return {\n                    key: c.key,\n                    name: c.name,\n                    description: c.description,\n                    updateDate: c.updateDate,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.ListOfValues, c.key)\n                }\n            });\n            this._tableData.next(listOfValues);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(lov: DexihListOfValues) {\n        this.router.navigate(['listOfValues-edit', lov.key], { relativeTo: this.route});\n    }\n\n    export(lov: Array<DexihListOfValues>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(cache.hub.hubKey, '');\n        hub.dexihListOfValues = lov;\n        lov.forEach(lovItem => {\n            cache.getListOfValuesCache(lovItem, hub);\n        });\n        let filename = 'list_of_values.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n\n    watchChanges() {\n      // watch the current validation in case it is changed in another session.\n      this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n          if (hubCacheChange.changeClass === eSharedObjectType.ListOfValues || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n            this.update();\n          }\n      });\n  }\n}\n","<div class=\"container-fluid\">\n    <d-widget title=\"List Of Values\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-list-alt\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t<d-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t<d-button-edit class=\"mr-1\" [routerLink]=\"['listOfValues-edit', item.key]\" queryParamsHandling preserveFragment></d-button-edit>\n\t\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.ListOfValues'></dependent-items-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<d-button-save-local class=\"mr-1\" (click)=\"export(items)\"></d-button-save-local>\n\t\t\t\t\t<d-button-delete *ngIf=\"hubCache.canWrite\" class=\"mr-1\" (click)=\"delete(items)\"></d-button-delete>\n\t\t\t\t\t<tags-update-button class=\"mr-1\" [objectType]=\"eSharedObjectType.ListOfValues\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<d-button-new *ngIf=\"hubCache.canWrite\" class=\"mr-1\" [routerLink]=\"['listOfValues-new']\"></d-button-new>\n\t\t\t\t</ng-template>\n\t\t</d-table>\n\t</d-widget>\n</div>\n\n\n","import { Component, OnInit, OnDestroy, Input, ViewChild } from '@angular/core';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../../hub.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { DexihMessageComponent } from  '../../../shared/ui/dexihMessage/dexih-message.component';\nimport { UserAuthorization } from '../../../+admin/admin.models';\nimport { ePermission, ePermissionItems } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'users',\n  templateUrl: './manage-users-index.component.html',\n  styles: []\n})\nexport class ManageUsersIndexComponent implements OnInit, OnDestroy {\n  @ViewChild('DexihMessage', { static: true }) public dexihMessage: DexihMessageComponent;\n\n    columns = [\n        { name: 'userName', title: 'User Name', format: ''},\n        { name: 'firstName', title: 'First Name', format: ''},\n        { name: 'lastName', title: 'Last Name', format: ''},\n        { name: 'permission', title: 'Permission', enum: ePermission, format: 'Enum'},\n        { name: 'receiveAlerts', title: 'Receives Alert Emails', format: 'Boolean'}\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    ePermission = ePermission;\n    ePermissionItems = ePermissionItems;\n    permission = ePermission.PublishReader;\n    emails: string[] = [];\n    sendInvites = true;\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        this.refreshUsers();\n    }\n\n    ngOnDestroy() {\n    }\n\n    refreshUsers() {\n        this.hubService.getHubUsers().then(result => {\n            this._tableData.next(result);\n        });\n    }\n\n    setPermission(permission: ePermission, users: Array<UserAuthorization>) {\n        const userNames = users.map(c => c.userName);\n\n        this.authService.confirmDialog('Confirm Permission Change',\n            `This action will change the selected user(s) hub permission to ${ePermission[this.permission]}.  Proceed?`).then(confirm => {\n                if (confirm) {\n                    this.hubService.setUserPermissions(userNames, permission, false).then(result => {\n                        this.dexihMessage.addSuccessMessage('The specified user(s) permission have been updated.');\n                        this.refreshUsers();\n                    });\n                }\n            });\n    }\n\n    setUserAlert(alertEmail: boolean, users: Array<UserAuthorization>) {\n        const userIds = users.map(c => c.id);\n\n        this.hubService.setUserAlerts(userIds, alertEmail, false).then(result => {\n            this.dexihMessage.addSuccessMessage('The specified user(s) alert email status have been updated.');\n            this.refreshUsers();\n        });\n    }\n\n    deleteUsers(users: Array<UserAuthorization>) {\n        const emails = users.map(c => c.userName);\n\n        this.authService.confirmDialog('Confirm Delete Users',\n        `This action will delete the selected user(s) from using this hub.  Proceed?`).then(confirm => {\n            if (confirm) {\n                this.hubService.removeUsers(emails).then(result => {\n                    this.dexihMessage.addSuccessMessage('The specified users have been removed from the hub.');\n                    this.refreshUsers();\n                });\n            }\n        });\n    }\n\n    addUsers() {\n        if (this.emails.length > 0 && this.permission) {\n            this.authService.confirmDialog('Add Users',\n            // tslint:disable-next-line:max-line-length\n            `This action will added users with the specified emails to this hub with permission ${ePermission[this.permission]}.  Proceed?`).then(confirm => {\n                if (confirm) {\n                    this.hubService.setUserPermissions(this.emails, this.permission, this.sendInvites).then(result => {\n                        this.emails = [];\n                        this.dexihMessage.addSuccessMessage('The specified users have been added to the hub.');\n                        this.refreshUsers();\n                    });\n                }\n            });\n        }\n    }\n}\n","<dexih-message class=\"p-3\" #DexihMessage></dexih-message>\n\n<div class=\"container-fluid\">\n\t<d-widget-vertical>\n\t<d-widget title=\"Invite Users\" iconClass=\"fa fa-lg fa-fw fa-birthday-cake\" [padding]=\"true\">\n\t\t\n\t\t<ng-template #subHeader>\n\t\t\t<d-button-save [disabled]=\"emails.length == 0\" (click)=\"addUsers()\" text=\"Add User(s)\"></d-button-save>\n\t\t</ng-template>\n\n\t\t<form >\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\t\t\t\t\t<form-select label=\"Permission\" [(ngModel)]=\"permission\" name=\"permission\" [items]=\"ePermissionItems\" itemKey=\"key\" itemName=\"name\" note='Permission level to grant to emails' [enableFilter]=\"false\">\n\t\t\t\t\t</form-select>\n\t\t\t\t</section>\n\n\t\t\t\t<section>\n\t\t\t\t\t<form-tags label=\"Email Addresses / User names\" [(ngModel)]=\"emails\" name=\"emails\" note=\"Provide a list of user names or email addresses of users to join the hub.\">\n\t\t\t\t\t</form-tags>\n\t\t\t\t</section>\n\t\t\t\t<section>\n\t\t\t\t\t<form-checkbox label=\"Send invites\" [(ngModel)]=\"sendInvites\" name=\"sendInvites\" note=\"Emails which are not registered to use the integration hub will be sent an invite to join.\">\n\t\t\t\t\t</form-checkbox>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\t</d-widget>\n\n\t<d-widget title=\"Current Users\" iconClass=\"fa fa-lg fa-fw fa-group\">\n\t\t<d-table [enableMultiSelect]=\"true\" [columns]=\"columns\"\n\t\t [dataObservable]=\"tableData\">\n\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t<d-button-delete class=\"mr-1\" (click)=\"deleteUsers(items)\"></d-button-delete>\n\t\t\t\t<d-button-dropdown buttonClass=\"btn-primary\" iconClass=\"fa fa-lock\" text=\"Set Permission\">\n\t\t\t\t\t<a *ngFor=\"let permission of ePermissionItems\" class=\"dropdown-item\" (click)=\"setPermission(permission.key, items)\">{{permission.name}}</a>\n\t\t\t\t</d-button-dropdown>\n\t\t\t\t<d-button-dropdown buttonClass=\"btn-primary\" iconClass=\"fa fa-bell\" text=\"Set User Alert\" class=\"ml-1\">\n\t\t\t\t\t<a class=\"dropdown-item\" (click)=\"setUserAlert(true, items)\">Receive alert emails</a>\n\t\t\t\t\t<a class=\"dropdown-item\" (click)=\"setUserAlert(false, items)\">Do not receive alert emails.</a>\n\t\t\t\t</d-button-dropdown>\n\t\t\t</ng-template>\n\t\t</d-table>\n\n\t</d-widget>\n\t</d-widget-vertical>\n</div>","export * from './remoteAgent-index/remoteAgent-index.component';\nexport * from './remoteAgent-edit/remoteAgent-edit.component';\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { DexihRemoteAgentHub, DexihRemoteAgent } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'remote-agents',\n    templateUrl: './remoteAgent-edit.component.html',\n    providers: [HubFormsService]\n})\nexport class RemoteAgentEditComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n\n    private remoteAgentKey: number;\n    private remoteAgentHubKey: number;\n\n    hubCache: HubCache;\n    name: string;\n\n    remoteAgents: DexihRemoteAgent[];\n    remoteAgentHub: DexihRemoteAgentHub;\n\n    public isNew = false;\n\n    ipAddress: string;\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService,\n        public formsService: HubFormsService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n                this.authService.getRemoteAgentsObservable(),\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                this.hubCache = result[2];\n                this.remoteAgents = result[3];\n\n                if (!this.hubCache.isLoaded() || !this.remoteAgents) { return; }\n\n                this.remoteAgentKey = +params['remoteAgentKey'];\n                this.remoteAgentHubKey = +params['remoteAgentHubKey'];\n\n                if (!this.remoteAgentKey) {\n                    this.hubService.addHubErrorMessage('There was no remote agent specified to edit.');\n                    // this.errorMessage = 'There was no validation specified to edit.';\n                } else {\n                    let remoteAgent = this.remoteAgents.find(c => c.remoteAgentKey === this.remoteAgentKey);\n                    let activeAgent = remoteAgent['activeAgents'] &&\n                        remoteAgent['activeAgents'].length > 0 ? remoteAgent['activeAgents'][0] : null;\n                    this.name = activeAgent ? activeAgent.name : '';\n                    this.ipAddress = activeAgent ? activeAgent.ipAddress : null;\n                    this.remoteAgentHub = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === this.remoteAgentHubKey);\n\n                    if (!this.remoteAgentHub) {\n                        this.remoteAgentHub = {\n                            hubKey: this.hubCache.hub.hubKey,\n                            remoteAgentHubKey: 0,\n                            remoteAgentKey: remoteAgent.remoteAgentKey,\n                            isAuthorized: true,\n                            isValid: true,\n                            createDate: null,\n                            isDefault: false,\n                            updateDate: null\n                        }\n                        this.remoteAgentHub['allowExternalConnect'] = true;\n                        this.remoteAgentHub['isSelected'] = false;\n                        this.isNew = true;\n                    }\n\n                    this.formsService.remoteAgent(this.remoteAgentHub);\n\n                    if (this.remoteAgentHub.remoteAgentHubKey === 0) {\n                        this.formsService.hasChanged = true;\n                    }\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Remote Agent Edit');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    addCurrentIp() {\n        if (this.ipAddress) {\n            let form = this.formsService.currentForm;\n            let ipAddressesControl = form.controls.ipAddresses;\n            let ipAddresses = <string[]> ipAddressesControl.value;\n\n            if (ipAddresses.findIndex(c => c === this.ipAddress) < 0) {\n                ipAddresses.push(this.ipAddress);\n                ipAddressesControl.setValue(ipAddresses);\n            }\n        }\n    }\n\n    save() {\n        let form = this.formsService.currentForm;\n        let remoteAgentHub = form.value;\n        this.hubService.saveRemoteAgent(remoteAgentHub).then((success) => {\n            if (success) {\n                this.hubService.addHubSuccessMessage('The remote agent updated successfully.');\n                this.authService.navigateUp();\n            }\n        });\n    }\n}\n","<dexih-message #DexihMessage></dexih-message>\n\n<div class=\"container\">\n    <d-widget \n\t\ttitle=\"Edit Hub Remote Agent\" \niconClass=\"fa fa-lg fa-fw fa-database\" \n        [padding]=\"true\"\n        [showCloseButton]=\"true\"\n        (close)=\"close()\"\n>\n        <ng-template #header>\n            <d-button-edit [routerLink]=\"['/hubs', 'index', 'agents', 'edit', remoteAgentKey]\"></d-button-edit>\n            <d-button-save [disabled]=\"!formsService.hasChanged\" (click)=\"save()\" class=\"pl-1\"></d-button-save>\n            <cancel-button [formsService]=\"formsService\" class=\"pl-1\"></cancel-button>\n        </ng-template>\n\n<ng-template #header>\n\n</ng-template>\n\n        <div *ngIf=\"isNew\" class=\"alert alert-primary\">\n            Creating a new hub -> remote agent authorization\n        </div>\n\n        <form *ngIf=\"formsService.currentForm\"  [formGroup]=\"formsService.currentForm\">\n            <fieldset>\n                <section >\n                    <form-input label=\"Agent name\" [disabled]=\"true\" note=\"This can be changed in the agents appsettings.json config file.\" [(ngModel)]=\"name\" [ngModelOptions]=\"{standalone: true}\" iconClass=\"fa fa-comment\"></form-input>\n                </section>\n\n                <section>\n\t\t\t\t\t<form-checkbox label=\"Is default agent for this Hub\" formControlName=\"isDefault\" >\n\t\t\t\t\t</form-checkbox>\n                </section>\n\n                <section>\n\t\t\t\t\t<form-checkbox label=\"Is Authorized for this Hub.\" formControlName=\"isAuthorized\" >\n\t\t\t\t\t</form-checkbox>\n                </section>\n            </fieldset>\n        </form>\n    </d-widget>\n</div>\n","<div class=\"container-fluid\">\n\t<d-widget title=\"Hub Remote Agents\"\n\t\ticonClass=\"fa fa-lg fa-fw fa-wifi\"\n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t\t>\n\t\t<ng-template #header>\n\t\t\t<d-button-dropdown buttonClass=\"btn btn-sm btn-outline-secondary\" iconClass=\"fa fa-filter\" [text]=\"statusFilter\" title=\"Filter by a status\" [pullRight]=\"true\">\n\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"statusFilter=='All'\" routerLink='.' [queryParams]=\"{statusFilter: 'All'}\" title=\"All Items\">All</a>\n\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"statusFilter=='Ready'\" routerLink='.' [queryParams]=\"{statusFilter: 'Ready'}\" title=\"Ready\">Ready</a>\n\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"statusFilter=='Offline'\" routerLink='.' [queryParams]=\"{statusFilter: 'Offline'}\" title=\"Offline Items\">Offline</a>\n\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"statusFilter=='Unauthorized'\" routerLink='.' [queryParams]=\"{statusFilter: 'Unauthorized'}\" title=\"Unauthorized Items\">Unauthorized</a>\n\t\t\t</d-button-dropdown>\n</ng-template>\n\n\t\t<d-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t>\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<d-button-delete class=\"mr-1\" (click)=\"deleteSelected(items)\" title=\"Delete selected remote agents\"></d-button-delete>\n\t\t\t\t\t<d-button class=\"mr-1\" iconClass=\"fa fa-check\" buttonClass=\"btn-primary\" (click)=\"authorize(items)\" title=\"Authorize the selected agents for this hub\">Authorize</d-button>\n\t\t\t\t\t<d-button class=\"mr-1\" iconClass=\"fa fa-times\" buttonClass=\"btn-danger\" (click)=\"deAuthorize(items)\" title=\"De-Authorize the selected agents\">De-Authorize</d-button>\n\t\t\t\t</ng-template>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-remoteItem=\"item\">\n\t\t\t\t\t<d-button-edit [routerLink]=\"['agent-edit', remoteItem.remoteAgentKey, remoteItem.remoteAgentHubKey]\" class=\"mr-1\" ></d-button-edit>\n\t\t\t\t</ng-template>\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<d-button-download [routerLink]=\"['/hubs/index/agents/download']\" iconClass=\"fa fa-download\" text=\"Download Agent\" class=\"mr-1\" ></d-button-download>\n\t\t\t\t</ng-template>\n\t\t</d-table>\n\t</d-widget>\n</div>","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { DexihRemoteAgent, DexihRemoteAgentHub, eSharedObjectType, eDataPrivacyStatus } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'remoteagents',\n    templateUrl: './remoteAgent-index.component.html',\n    styles: []\n})\nexport class RemoteAgentIndexComponent implements OnInit, OnDestroy {\n    @Input() public hubKey: number;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    remoteAgents: Array<DexihRemoteAgent>;\n    hubCache: HubCache;\n\n    statusFilter: string;\n\n    columns = [\n        { name: 'name', title: 'Name', format: '' },\n        { name: 'connected', title: 'Connected', format: 'Boolean' },\n        { name: 'isAuthorized', title: 'Authorized?', format: 'Boolean' },\n        { name: 'user', title: 'User', format: ''},\n        { name: 'dataPrivacyStatus', title: 'Data Privacy', format: 'Enum', enum: eDataPrivacyStatus },\n        { name: 'isEncrypted', title: 'Encrypted?', format: 'Boolean' },\n        { name: 'ipAddress', title: 'Current IP Address', format: '' },\n        { name: 'remoteAgentId', title: 'Id', format: '' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n        { name: 'lastLoginDateTime', title: 'Last Login', format: 'Calendar' },\n        { name: 'lastLoginIpAddress', title: 'Last IP Address', format: '' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(private hubService: HubService, private authService: AuthService, private router: Router, private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n                this.authService.getRemoteAgentsObservable(),\n                this.hubService.getRemoteAgentObservable() // this is included to ensure refresh when active agent changes.\n            ).subscribe(result => {\n                let queryParams = result[0];\n                this.hubCache = result[1];\n                this.remoteAgents = result[2];\n\n                if (!this.hubCache.isLoaded()) { return; }\n\n                this.statusFilter = queryParams['statusFilter'];\n                if (!this.statusFilter) { this.statusFilter = 'All'; }\n\n                this.updateRemoteAgents();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Remote Agent index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    private updateRemoteAgents() {\n        if (!(this.hubCache && this.hubCache.hub)) { return; }\n\n        let data: any[] = this.hubCache.hub.dexihRemoteAgentHubs.map(a => {\n            let remoteAgent = this.remoteAgents ? this.remoteAgents.find(c => c.remoteAgentKey === a.remoteAgentKey) : null;\n            let activeAgent = remoteAgent && remoteAgent['activeAgents'] && remoteAgent['activeAgents'].length > 0\n                ? remoteAgent['activeAgents'][0] : null;\n\n            return {\n                remoteAgentHubKey: a.remoteAgentHubKey,\n                connected: activeAgent !== null,\n                isAuthorized: a.isAuthorized,\n                name: activeAgent ? activeAgent.name : ( remoteAgent ? remoteAgent.name : 'Unknown') ,\n                user: activeAgent ? activeAgent.user : '',\n                dataPrivacyStatus: activeAgent ? activeAgent.dataPrivacyStatus : '',\n                isEncrypted: activeAgent ? activeAgent.isEncrypted : '',\n                ipAddress: activeAgent ? activeAgent.ipAddress : '',\n                remoteAgentKey: a.remoteAgentKey,\n                updateDate: a.updateDate,\n                lastLoginDateTime: remoteAgent ? remoteAgent.lastLoginDateTime : '',\n                lastLoginIpAddress: remoteAgent ? remoteAgent.lastLoginIpAddress : '',\n                remoteAgentId: remoteAgent ? remoteAgent.remoteAgentId : ''\n            };\n        });\n\n        if (this.remoteAgents) {\n            this.remoteAgents.forEach(a => {\n                let activeAgent = a['activeAgents'] && a['activeAgents'].length > 0 ? a['activeAgents'][0] : null;\n\n                if (activeAgent && data.findIndex(d => d.remoteAgentKey === a.remoteAgentKey) < 0) {\n                    data.push({\n                        remoteAgentHubKey: 0,\n                        connected: true,\n                        isAuthorized: false,\n                        name: activeAgent.name,\n                        user:  activeAgent.user,\n                        dataPrivacyStatus: activeAgent.dataPrivacyStatus,\n                        isEncrypted: activeAgent.isEncrypted,\n                        ipAddress: activeAgent.ipAddress,\n                        remoteAgentKey: a.remoteAgentKey,\n                        remoteAgentId: a.remoteAgentId,\n                        updateDate: '',\n                        });\n                }\n            });\n        }\n        this._tableData.next(data);\n    }\n\n    watchChanges() {\n        // watch the current remote hubs\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.RemoteAgent) {\n                this.updateRemoteAgents();\n            }\n        });\n    }\n\n    async authorize(remoteAgents: Array<any>) {\n        for await (const remoteAgent of remoteAgents) {\n            if (!remoteAgent.isAuthorized) {\n                let agentHub: DexihRemoteAgentHub;\n                if (remoteAgent.remoteAgentHubKey) {\n                    agentHub = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === remoteAgent.remoteAgentHubKey);\n                    agentHub.isAuthorized = true;\n                } else {\n                    agentHub = {\n                        hubKey: this.hubCache.hub.hubKey,\n                        remoteAgentHubKey: 0,\n                        remoteAgentKey: remoteAgent.remoteAgentKey,\n                        isAuthorized: true,\n                        isValid: true,\n                        createDate: null,\n                        isDefault: false,\n                        updateDate: null\n                    }\n                    agentHub['allowExternalConnect'] = true;\n                    agentHub['isSelected'] = false;\n                }\n                await this.hubService.saveRemoteAgent(agentHub);\n            }\n        };\n    }\n\n    deAuthorize(remoteAgents: Array<DexihRemoteAgentHub>) {\n        remoteAgents.forEach(remoteAgent => {\n            if (remoteAgent.isAuthorized) {\n                if (remoteAgent.remoteAgentHubKey) {\n                    let agent = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === remoteAgent.remoteAgentHubKey);\n                    if (agent) {\n                        agent.isAuthorized = false;\n                        this.hubService.saveRemoteAgent(agent);\n                    }\n                }\n            }\n        });\n    }\n\n    deleteSelected(remoteAgents: Array<DexihRemoteAgentHub>) {\n        remoteAgents.forEach(remoteAgent => {\n            if (remoteAgent.remoteAgentHubKey) {\n                let agent = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === remoteAgent.remoteAgentHubKey);\n                if (agent) {\n                    agent.isAuthorized = false;\n                    this.hubService.deleteRemoteAgent(agent);\n                }\n            }\n        });\n    }\n\n    edit(remoteAgent: DexihRemoteAgentHub) {\n        this.router.navigate(['agent-edit', remoteAgent.remoteAgentKey, remoteAgent.remoteAgentHubKey], { relativeTo: this.route });\n    }\n}\n","export * from './results-index';\nexport * from './results-view';\n","export * from './results-index.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { TransformWriterResult, eConnectionPurpose } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'results-index',\n    templateUrl: './results-index.component.html',\n    styles: []\n})\nexport class ResultsIndexComponent implements OnInit, OnDestroy {\n    hubCache: HubCache;\n\n    private _subscription: Subscription;\n    private _transformWriterResultChangeSubscription: Subscription;\n\n    public hubPath;\n    public rows = 20;\n    private datalinkStatus: Map<number, TransformWriterResult>;\n\n    private cancelToken = new CancelToken();\n\n    showPage = false;\n    showPageMessage = 'Loading...';\n\n    columns = [\n        { name: 'auditKey', title: '#', format: '' },\n        { name: 'auditType', title: 'Type', format: '' },\n        { name: 'referenceName', title: 'Name', format: '' },\n        { name: 'rowsTotal', title: 'Rows Total', format: '' },\n        { name: 'startTime', title: 'Start Date', format: 'Calendar' },\n        { name: 'startTime', title: 'Time', format: 'Time' },\n        { name: 'endTime', title: 'Finished At', format: 'Time' },\n        { name: 'message', title: 'Message', format: '' },\n    ];\n\n    auditTypes = [ 'Datalink', 'Datajob', 'DatalinkTest' ];\n\n    private _tableData = new BehaviorSubject<Array<TransformWriterResult>>(null);\n    tableData: Observable<Array<TransformWriterResult>> = this._tableData.asObservable();\n\n    datalinks: Array<number> = [];\n    datajobs: Array<number> = [];\n    datalinkTests: Array<number> = [];\n\n    auditType: string = null;\n\n    constructor(private hubService: HubService, private router: Router, private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n                this.hubService.getRemoteAgentObservable()\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                let queryParams = result[2];\n                this.hubCache = result[3];\n                let remoteAgent = result[4];\n\n                this.showPage = false;\n                this.showPageMessage = 'Waiting for an active remote agent...';\n\n                if (this.hubCache.isLoaded() && remoteAgent) {\n                    this.hubPath = this.hubCache.getHubUrl();\n\n                    let datalinkKeysString = queryParams['datalinkKeys'];\n                    let datajobKeysString = queryParams['datajobKeys'];\n                    let datalinkTestsKeysString = queryParams['datalinkTestKeys'];\n\n                    if (datalinkKeysString) {\n                        this.datalinks = (datalinkKeysString + '').split(',').map(c => +c);\n                        this.auditType = 'Datalink';\n                    }\n                    if (datajobKeysString) {\n                        this.datajobs = (datajobKeysString + '').split(',').map(c => +c);\n                        this.auditType = 'Datajob';\n                    }\n                    if (datalinkTestsKeysString) {\n                        this.datalinkTests = (datalinkTestsKeysString + '').split(',').map(c => +c);\n                        this.auditType = 'DatalinkTest';\n                    }\n\n                    this.refresh();\n\n                    this.showPage = true;\n                    this.showPageMessage = '';\n                }\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Results Index');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._transformWriterResultChangeSubscription) { this._transformWriterResultChangeSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    showResult(result: TransformWriterResult) {\n        this.router.navigate(['result-view', result.auditConnectionKey, result.auditKey], { relativeTo: this.route })\n    }\n\n    refresh() {\n        let data = [];\n\n        let keys: number[];\n        let connectionKeys: number[] = [];\n\n        switch (this.auditType) {\n            case 'Datalink':\n                keys = this.datalinks;\n                connectionKeys = this.datalinks.map(c => this.hubCache.hub.dexihDatalinks.find(d => d.key === c).auditConnectionKey);\n                break;\n            case 'Datajob':\n                keys = this.datajobs;\n                connectionKeys = this.datajobs.map(c => this.hubCache.hub.dexihDatajobs.find(d => d.key === c).auditConnectionKey);\n                break;\n            case 'DatalinkTest':\n                keys = this.datalinkTests;\n                connectionKeys = this.datalinkTests.map(c => this.hubCache.hub.dexihDatalinkTests\n                    .find(d => d.key === c).auditConnectionKey);\n                break;\n            default:\n                keys = null;\n                break;\n        }\n\n        let uniqueKeys = connectionKeys.filter(function(item, i, ar) { return ar.indexOf(item) === i; });\n\n        if (uniqueKeys.length === 0) {\n            uniqueKeys = this.hubCache.hub.dexihConnections.filter(c => c.purpose === eConnectionPurpose.Managed).map(c => c.key);\n        }\n\n        this.hubService.getAuditResults(this.auditType, uniqueKeys, keys, true, this.rows, this.cancelToken)\n        .then(results => {\n            this._tableData.next(results);\n            this.watchChanges();\n            return;\n        });\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        if (this._transformWriterResultChangeSubscription) { this._transformWriterResultChangeSubscription.unsubscribe(); }\n        this._transformWriterResultChangeSubscription =\n            this.hubService.getTransformWriterResultChangeObservable().subscribe(writerResult => {\n                let results: TransformWriterResult[] = this._tableData.value;\n\n                if (this.datalinks && this.datalinks.findIndex(c => c === writerResult.referenceKey) >= 0) {\n                    let existingResult = results.find(c => c.auditKey === writerResult.auditKey);\n                    if (existingResult) {\n                        Object.assign(existingResult, writerResult);\n                        this._tableData.next(results);\n                    } else {\n                        this._tableData.next([writerResult].concat(results));\n                    }\n                }\n                if (this.datajobs && this.datajobs.findIndex(c => c === writerResult.referenceKey) >= 0) {\n                    let existingResult = results.find(c => c.auditKey === writerResult.auditKey);\n                    if (existingResult) {\n                        Object.assign(existingResult, writerResult);\n                        this._tableData.next(results);\n                    } else {\n                        this._tableData.next([writerResult].concat(results));\n                    }\n                }\n\n                if (this.datalinkTests && this.datalinkTests.findIndex(c => c === writerResult.referenceKey) >= 0) {\n                    let existingResult = results.find(c => c.auditKey === writerResult.auditKey);\n                    if (existingResult) {\n                        Object.assign(existingResult, writerResult);\n                        this._tableData.next(results);\n                    } else {\n                        this._tableData.next([writerResult].concat(results));\n                    }\n                }\n        });\n    }\n}\n\n\n","<div class=\"container-fluid\">\n    <d-widget title=\"Execution Results\" \niconClass=\"fa fa-lg fa-fw fa-exchange\" \n>\n\t\t<d-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t[enableSaveCsv]=\"true\" \n\t\t\t(rowClick)=\"showResult($event)\"\n\t\t\t>\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<div class=\"d-flex flex-wrap\">\n\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t<d-button-refresh class=\"input-group-prepend\" (click)=\"refresh()\" text=\"Reload\"></d-button-refresh>\n\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" placeholder=\"Maximum rows...\"\n\t\t\t\t\t\t\t\ttitle=\"Specify the maximum rows to return\" [(ngModel)]=\"rows\" style=\"width: 100%; max-width: 100px\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t\t<div class=\"flex-fill ml-1\">\n\t\t\t\t\t\t\t<form-select labelLeft=\"Type\" [(ngModel)]=\"auditType\" [border]=\"false\" class=\"form-control p-0\"\n\t\t\t\t\t\t\t\t[items]=\"auditTypes\" [enableTextEntry]=\"false\" [allowNullSelect]=\"true\" selectNullMessage=\"All types\">\n\t\t\t\t\t\t\t</form-select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #tableHeader>\n\t\t\t\t\t<div class=\"d-flex flex-wrap pt-1\" *ngIf=\"auditType === 'Datalink'\">\n\t\t\t\t\t\t<form-tags-dropdown labelLeft=\"Datalinks\" [(ngModel)]=\"datalinks\" [items]=\"hubCache.hub.dexihDatalinks\"\n\t\t\t\t\t\t\titemKey=\"key\" itemName=\"name\" [enableAddAll]=\"true\">\n\t\t\t\t\t\t</form-tags-dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"d-flex flex-wrap pt-1\" *ngIf=\"auditType === 'Datajob'\">\n\t\t\t\t\t\t<form-tags-dropdown labelLeft=\"Datajobs\" [(ngModel)]=\"datajobs\" [items]=\"hubCache.hub.dexihDatajobs\"\n\t\t\t\t\t\t\titemKey=\"key\" itemName=\"name\" [enableAddAll]=\"true\">\n\t\t\t\t\t\t</form-tags-dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"d-flex flex-wrap pt-1\" *ngIf=\"auditType === 'DatalinkTest'\">\n\t\t\t\t\t\t<form-tags-dropdown labelLeft=\"DatalinkTests\" [(ngModel)]=\"datalinkTests\"\n\t\t\t\t\t\t\t[items]=\"hubCache.hub.dexihDatalinkTests\" itemKey=\"key\" itemName=\"name\" [enableAddAll]=\"true\">\n\t\t\t\t\t\t</form-tags-dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-result=\"item\">\n\t\t\t\t\t<d-button-edit class=\"mr-1\" [routerLink]=\"[hubPath, 'datalink-edit', 'edit', result.referenceKey]\" text='Edit Datalink'></d-button-edit>\n\t\t\t\t\t<d-button-view [routerLink]=\"['result-view', result.auditConnectionKey, result.auditKey]\" queryParamsHandling=\"merge\"></d-button-view>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-result=\"item\">\n\t\t\t\t\t<datalink-status [writerResult]=\"result\"></datalink-status>\n\t\t\t\t</ng-template>\n\n\t\t</d-table>\n    </d-widget>\n</div>\n\n\n","export * from './results-view.component';","import { Component, Input, OnInit, OnDestroy } from '@angular/core';\nimport { PreviewResults, HubCache } from '../../hub.models';\nimport { HubService } from '../../hub.service';\nimport { Subscription, Subject} from 'rxjs';\nimport { PromiseWithCancel, CancelToken } from '../../../+auth/auth.models';\nimport { TransformWriterResult, DexihDatalink, DexihTable, SelectQuery, eDeltaType, Filter, eCompare,\n    eAndOr, eTypeCode, DownloadObject, eSourceType, eDownloadFormat, DexihDatalinkColumn,\n    TableColumn, eDataObjectType, DexihTableColumn } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'preview-results',\n    templateUrl: './preview-results.component.html'\n})\n\nexport class PreviewResultsComponent implements OnInit, OnDestroy {\n    @Input() auditResult: TransformWriterResult;\n\n    _hubCacheSubscription: Subscription;\n\n    private cache: HubCache;\n\n    public targetTable: DexihTable;\n    public columns: Array<any>;\n    public data: Array<any>;\n    public selectQuery = new SelectQuery();\n\n    private refreshDataSubject: Subject<void> = new Subject<void>();\n\n    private runningQuery: PromiseWithCancel<PreviewResults>;\n    private cancelToken = new CancelToken();\n\n    constructor(\n        private hubService: HubService\n    ) {\n    }\n\n    ngOnInit() {\n        this._hubCacheSubscription = this.hubService.getHubCacheObservable().subscribe(cache => {\n            this.cache = cache;\n\n            switch (this.auditResult.auditType) {\n                case 'Table':\n                    this.targetTable = this.cache.getTable(this.auditResult.referenceKey);\n                    this.refresh();\n                    break;\n                case 'Datalink':\n                case 'DatalinkStep':\n                    let datalink = this.cache.hub.dexihDatalinks.find(c => c.key === this.auditResult.referenceKey);\n\n                    if (!datalink) {\n                        this.hubService.addHubErrorMessage(`The datalink with the key ${this.auditResult.referenceKey} cannot be found.`)\n                        return;\n                    }\n\n                    if (datalink.dexihDatalinkTargets.length >= 1) {\n                        this.targetTable = this.cache.getTable(datalink.dexihDatalinkTargets[0].tableKey);\n                    } else {\n                        this.hubService.addHubErrorMessage(`There is no target table for this datalink.`)\n                        return;\n                    }\n                    this.refresh();\n                    break;\n                case 'DatalinkTestStep':\n                    let testStep = this.cache.getDatalinkTestStep(this.auditResult.referenceKey);\n\n                    if (!testStep) {\n                        this.hubService.addHubErrorMessage(`The test step with the key ${this.auditResult.referenceKey} cannot be found.`)\n                        return;\n                    }\n\n                    let testDatalink = this.cache.hub.dexihDatalinks.find(c => c.key === testStep.datalinkKey);\n\n                    if (testDatalink.dexihDatalinkTargets.length >= 1) {\n                        let table = this.cache.getTable(testDatalink.dexihDatalinkTargets[0].tableKey);\n                        let testTable = JSON.parse(JSON.stringify(table));\n                        testTable.name = testStep.errorTableName;\n                        testTable.schema = testStep.errorSchema;\n                        testTable.connectionKey = testStep.errorConnectionKey;\n\n                        for (let column of testTable.dexihTableColumns) {\n                            column.deltaType = eDeltaType.NonTrackingField;\n                        }\n                        let auditCol = new DexihTableColumn();\n                        auditCol.name = 'error_audit_key';\n                        auditCol.dataType = eTypeCode.Int64;\n                        auditCol.deltaType = eDeltaType.CreateAuditKey;\n\n                        let opCol = new DexihTableColumn();\n                        opCol.name = 'error_operation';\n                        opCol.dataType = eTypeCode.CharArray;\n                        opCol.maxLength = 1;\n                        opCol.deltaType = eDeltaType.DatabaseOperation;\n\n\n                        let reasonCol = new DexihTableColumn();\n                        reasonCol.name = 'mismatch_reason';\n                        reasonCol.dataType = eTypeCode.String;\n                        reasonCol.deltaType = eDeltaType.UpdateReason;\n\n                        testTable.dexihTableColumns.push(auditCol);\n                        testTable.dexihTableColumns.push(opCol);\n                        testTable.dexihTableColumns.push(reasonCol);\n\n                        this.targetTable = testTable;\n                    } else {\n                        this.hubService.addHubErrorMessage(`There is no target table for this datalink.`)\n                        return;\n                    }\n                    this.refresh();\n                    break;\n                case 'datajob':\n                break;\n            }\n\n        });\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheSubscription ) { this._hubCacheSubscription.unsubscribe(); }\n        if (this.runningQuery) { this.runningQuery.cancel(); }\n        this.cancelToken.cancel();\n    }\n\n    createSelectQuery(): SelectQuery {\n        const createAuditColumn = this.targetTable.dexihTableColumns.find(c => c.deltaType === eDeltaType.CreateAuditKey);\n        const updateAuditColumn = this.targetTable.dexihTableColumns.find(c => c.deltaType === eDeltaType.UpdateAuditKey);\n\n        if (!createAuditColumn && !updateAuditColumn) {\n            this.hubService.addHubErrorMessage(\n            // tslint:disable-next-line:max-line-length\n            `The table ${this.targetTable.name} does not contain a create or update audit column which is required to connect to an audit.`);\n            return;\n        }\n\n        // clone the query, and add the audit filter columns\n        let selectQuery = JSON.parse(JSON.stringify(this.selectQuery));\n\n        if (createAuditColumn) {\n            let filter = new Filter();\n            filter.column1 = new TableColumn();\n            Object.assign(filter.column1, createAuditColumn);\n            filter.operator = eCompare.IsEqual;\n            filter.value2 = this.auditResult.auditKey;\n            filter.andOr = eAndOr.Or\n            filter.compareDataType = eTypeCode.Int64;\n            selectQuery.filters.push(filter);\n        }\n\n        if (updateAuditColumn) {\n            let filter = new Filter();\n            filter.column1 = new TableColumn();\n            Object.assign(filter.column1, updateAuditColumn);\n            filter.operator = eCompare.IsEqual;\n            filter.value2 = this.auditResult.auditKey;\n            filter.andOr = eAndOr.Or\n            filter.compareDataType = eTypeCode.Int64;\n            selectQuery.filters.push(filter);\n        }\n\n        selectQuery.rows = 100;\n\n        return selectQuery;\n    }\n\n    refresh() {\n        let selectQuery = this.createSelectQuery();\n\n        let query = this.hubService.previewTableDataQuery(this.targetTable, false, selectQuery, null, null, this.cancelToken);\n\n        query.then(result => {\n            this.refreshDataSubject.next();\n            this.columns = result.columns;\n            this.data = result.data;\n        }).catch(() => {\n            // this.hubService.addHubErrorMessage(reason);\n        });\n\n        this.runningQuery = query;\n    }\n\n    download() {\n        let selectQuery = this.createSelectQuery();\n        let downloadObject = new DownloadObject();\n        downloadObject.objectKey = this.targetTable.key;\n        downloadObject.objectType = eDataObjectType.Table;\n        downloadObject.query = selectQuery;\n        this.hubService.downloadData([downloadObject], false, eDownloadFormat.Csv, this.cancelToken)\n    }\n}\n","<d-table [enableMultiSelect]=\"false\" [columns]=\"columns\" [data]=\"data\">\n\n    <ng-template #actions let-items=\"items\">\n        <d-button-refresh (click)=\"refresh()\" text=\"Reload\"></d-button-refresh>\n        <d-button-download class=\"ml-1\" (click)=\"download()\"></d-button-download>\n    </ng-template>\n    <ng-template #tableHeader>\n        <query-builder [selectQuery]=\"selectQuery\" [columns]=\"targetTable.dexihTableColumns\" [inputColumns]=\"inputColumns\" [refreshEvent]=\"refreshDataSubject.asObservable()\" (onRefreshData)=\"refresh()\"></query-builder>\n    </ng-template>\n</d-table>","import { Component, Input, OnInit, OnDestroy } from '@angular/core';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../../hub.service';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { TransformWriterResult } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'profile-results',\n    templateUrl: './profile-results.component.html'\n})\n\nexport class ProfileResultsComponent implements OnInit, OnDestroy {\n    @Input() auditResult: TransformWriterResult;\n\n    columns: Array<any>;\n    data: Array<any>;\n\n    showDetailed = false;\n\n    private cancelToken = new CancelToken();\n\n    constructor(\n        private authService: AuthService,\n        private hubService: HubService\n    ) {\n\n    }\n\n    ngOnInit() {\n        this.refresh();\n    }\n\n    ngOnDestroy(): void {\n        this.cancelToken.cancel();\n    }\n\n    refresh() {\n        this.hubService.previewProfileData(this.auditResult, !this.showDetailed, this.cancelToken).then(result => {\n            this.columns = result.columns;\n            this.data = result.data;\n        }).catch(reason => {\n          // this.hubService.addHubMessage(reason);\n        });\n    }\n\n    download() {\n        this.hubService.downloadProfileData(this.auditResult, this.cancelToken);\n    }\n}\n","<d-table [enableMultiSelect]=\"false\" [columns]=\"columns\" [data]=\"data\">\n\n    <ng-template #actions let-items=\"items\">\n        <d-button-refresh (click)=\"refresh()\" text=\"Reload\"></d-button-refresh>\n        <d-button-download class=\"ml-1\" (click)=\"download()\"></d-button-download>\n\n        <div class=\"d-flex flex-wrap\">\n            <div class=\"flex-fill pl-1\" >\n                <form-checkbox label=\"Show Detailed Results\" [(ngModel)]=\"showDetailed\" [border]=\"true\" (change)=\"refresh()\"></form-checkbox>\n            </div>\n        </div>\n    </ng-template>\n</d-table>","import { Component, OnInit, Input } from '@angular/core';\nimport { TransformWriterResult } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'result-progress',\n    templateUrl: './progress.component.html'\n})\n\nexport class ProgressComponent implements OnInit {\n    @Input() public value: number;\n    @Input() public total: number;\n    @Input() public caption: string;\n    @Input() public color: string;\n\n    percent = '0%';\n\n    constructor() {\n\n    }\n\n    ngOnInit() {\n        if (this.value === 0) {\n            this.percent = '0%';\n        } else if (this.total === 0) {\n            this.percent = '100%';\n        } else {\n            let percent = 100 * this.value / this.total;\n            if (percent < 0) { percent = 0; }\n            if (percent > 100) { percent = 100; }\n            this.percent = percent.toString() + '%';\n        }\n    }\n}\n","<div class=\"\">\n    <span class=\"text\">  {{caption}}\n        <span class=\"float-right\">{{value}}/{{total}}</span> \n    </span>\n    <div class=\"progress\" style=\"width:100%\">\n        <div [ngClass]=\"['progress-bar', color]\" [ngStyle]=\"{width: percent}\">&nbsp;</div>\n    </div>\n</div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubService } from '../../hub.service';\nimport { HubCache } from '../../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable, Subscription, combineLatest} from 'rxjs';\nimport { CancelToken } from '../../../+auth/auth.models';\nimport { TransformWriterResult, eSharedObjectType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'results-view',\n    templateUrl: './results-view.component.html',\n    styles: []\n})\nexport class ResultsViewComponent implements OnInit, OnDestroy {\n    hubCache: HubCache;\n    referenceKeys: Array<number>;\n\n    private _subscription: Subscription;\n    private _transformWriterResultChangeSubscription: Subscription;\n\n    public auditResult: TransformWriterResult;\n\n    showPage = false;\n    showPageMessage = 'Loading...';\n    view: string;\n\n    resultChartData: Array<any>;\n\n    private cancelToken = new CancelToken();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(true),\n                this.hubService.getRemoteAgentObservable(true)\n            ).subscribe(result => {\n                let data = result[0];\n                let params = result[1];\n                let queryParams = result[2];\n                this.hubCache = result[3];\n                let remoteAgent = result[4]\n\n                let auditConnectionKey = +params['auditConnectionKey'];\n                let auditKey = +params['auditKey'];\n\n                this.showPage = false;\n                this.showPageMessage = 'Waiting for an active remote agent...';\n\n                this.view = queryParams['view'];\n                if (!this.view) { this.view = 'Stats'; }\n\n                if (remoteAgent) {\n                    this.showPage = true;\n                    this.showPageMessage = '';\n                    this.hubService.getResultDetail(auditConnectionKey, auditKey, this.cancelToken).then(r => {\n                        this.auditResult = r[0];\n                    });\n                }\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Results View');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._transformWriterResultChangeSubscription) { this._transformWriterResultChangeSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        if (this._transformWriterResultChangeSubscription) { this._transformWriterResultChangeSubscription.unsubscribe(); }\n        this._transformWriterResultChangeSubscription = this.hubService.getTransformWriterResultChangeObservable()\n        .subscribe(writerResult => {\n            if (this.auditResult && writerResult.auditConnectionKey === this.auditResult.auditConnectionKey &&\n                    writerResult.auditKey === this.auditResult.auditKey) {\n                this.auditResult = writerResult;\n            }\n        });\n    }\n\n}\n\n\n","<div class=\"container-fluid\">\n\t<d-widget *ngIf=\"auditResult\" [title]=\"auditResult?.referenceName\"iconClass=\"fa fa-lg fa-fw fa-trophy\"\n\t[showCloseButton]=\"true\" (close)=\"close()\">\n\n\t\t<ng-template #header>\n\t\t\t\t<ul class=\"nav nav-tabs card-header-tabs\">\n\t\t\t\t<li class=\"nav-item\" >\n\t\t\t\t\t<a class=\"nav-link\" [class.active]=\"view=='Stats'\" routerLink=\".\" [queryParams]=\"{view: 'Stats'}\"><i class=\"fa fa-clock-o\"></i> <span class=\"ml-1 d-none d-md-inline\">Execution Stats</span></a>\n\t\t\t\t</li>\n\n\t\t\t\t<li class=\"nav-item\" *ngIf=\"auditResult.profileTableName && ( auditResult?.auditType == 'DatalinkStep' || auditResult?.auditType == 'Datalink')\" >\n\t\t\t\t\t<a class=\"nav-link\" [class.active]=\"view=='Profile'\" routerLink=\".\" [queryParams]=\"{view: 'Profile'}\"><i class=\"fa fa-tachometer\" ></i> <span class=\"ml-1 d-none d-md-inline\">Profile Data</span></a>\n\t\t\t\t</li>\n\n\t\t\t\t<li class=\"nav-item\" *ngIf=\"auditResult?.auditType == 'DatalinkStep' || auditResult?.auditType == 'Datalink' || auditResult?.auditType == 'Table' || auditResult?.auditType == 'DatalinkTestStep'\" >\n\t\t\t\t\t<a class=\"nav-link\" [class.active]=\"view=='Preview'\" routerLink=\".\" [queryParams]=\"{view: 'Preview'}\"><i class=\"fa fa-table\" ></i> <span class=\"ml-1 d-none d-md-inline\">Preview</span></a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</ng-template>\n\t\t<div [ngSwitch]=\"view\">\n\t\t\t<div *ngSwitchCase=\"'Stats'\">\n\t\t\t\t<stats [auditResult]=\"auditResult\"></stats>\n\t\t\t</div>\n\t\t\t<div *ngSwitchCase=\"'Profile'\">\n\t\t\t\t<profile-results [auditResult]=\"auditResult\"></profile-results>\n\t\t\t</div>\n\t\t\t<div *ngSwitchCase=\"'Preview'\">\n\t\t\t\t<preview-results [auditResult]=\"auditResult\"></preview-results>\n\t\t\t</div>\n\t\t</div>\n\t</d-widget>\n</div>","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../../../shared/shared.module';\n\nimport { ResultsViewComponent } from './results-view.component';\nimport { StatsComponent } from './stats.component';\nimport { ProgressComponent } from './progress.component';\nimport { ProfileResultsComponent } from './profile-results.component';\nimport { PreviewResultsComponent } from './preview-results.component';\nimport { HubSharedModule } from '../../hub.shared.module';\n\n\n@NgModule({\n    imports: [SharedModule, HubSharedModule],\n    exports: [\n        ResultsViewComponent\n    ],\n    declarations: [\n        ResultsViewComponent,\n        ProgressComponent,\n        StatsComponent,\n        ProfileResultsComponent,\n        PreviewResultsComponent\n    ],\n    providers: [],\n})\nexport class ResultsViewModule { }\n","import { Component, Input, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TransformWriterResult, eRunStatus, eTriggerMethod } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'stats',\n    templateUrl: './stats.component.html'\n})\n\nexport class StatsComponent implements OnInit {\n    @Input() auditResult: TransformWriterResult;\n\n    exceptionHidden = true;\n\n    columns: Array<any>;\n\n    public barChartData: any[];\n\n    public runTime: number;\n\n    public fail = false;\n    public success = false;\n    eRunStatus = eRunStatus;\n    eTriggerMethod = eTriggerMethod;\n\n\n    constructor(public route: ActivatedRoute, public router: Router\n    ) {\n\n    }\n\n    ngOnInit() {\n\n        if (this.auditResult.endTime) {\n            this.runTime = ( (new Date(this.auditResult.endTime)).valueOf() - (new Date(this.auditResult.startTime)).valueOf()) / 1000;\n        } else {\n            if (this.auditResult.runStatus === eRunStatus.Running ||\n                this.auditResult.runStatus === eRunStatus.RunningErrors ||\n                this.auditResult.runStatus === eRunStatus.Started) {\n                    this.runTime = ( (new Date()).valueOf() -\n                        (new Date(this.auditResult.startTime)).valueOf()) / 1000;\n                } else {\n                this.runTime = null;\n            }\n        }\n\n        switch (this.auditResult.runStatus) {\n            case eRunStatus.Abended:\n            case eRunStatus.Cancelled:\n            case eRunStatus.Failed:\n            case eRunStatus.FinishedErrors:\n                this.fail = true;\n                break;\n            case eRunStatus.Finished:\n            case eRunStatus.Passed:\n                this.success = true;\n\n        }\n\n        this.barChartData = [\n            {\n                name: 'Reading',\n                value: this.rowsPerSecond(this.auditResult.rowsReadPrimary + this.auditResult.rowsReadReference, this.auditResult.readTicks)\n            },\n            {\n                name: 'Processing',\n                value: this.rowsPerSecond(this.auditResult.rowsTotal, this.auditResult.processingTicks)\n            },\n            {\n                name: 'Writing',\n                value: this.rowsPerSecond(this.auditResult.rowsTotal, this.auditResult.writeTicks)\n            }\n        ];\n\n    }\n\n    numberWithCommas(x) {\n        const parts = x.toString().split('.');\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n        return parts.join('.');\n    }\n\n    rowsPerSecond(rows, ticks) {\n        if (ticks === 0) {\n            return 0;\n        }\n        return rows / (ticks / 10000000);\n    }\n\n    openResult(auditKey) {\n        this.router.navigate(['..', auditKey], { relativeTo: this.route });\n    }\n\n}\n","<ul class=\"list-group\">\n    <li class=\"list-group-item list-group-item-danger\" *ngIf=\"fail\">\n        <h5>Error encountered!</h5>\n    </li>\n    <li class=\"list-group-item list-group-item-success\" *ngIf=\"success\">\n        <h5>Finished Successfully</h5>\n    </li>\n    <li class=\"list-group-item\" *ngIf=\"auditResult?.message\">\n        <div class=\"d-flex mb-2\">\n            {{auditResult.message}}\n            <div class=\"ml-auto\">\n                <d-button *ngIf=\"auditResult.exceptionDetails\" (click)='exceptionHidden = !exceptionHidden'>Details</d-button>\n            </div>\n        </div>\n        <div>\n            <pre *ngIf=\"!exceptionHidden && auditResult.exceptionDetails\">{{auditResult.exceptionDetails}}</pre>\n        </div>\n    </li>\n    <li class=\"list-group-item list-group-item-info rounded-0\">\n        <h5>Running Time</h5>\n    </li>\n    <li class=\"list-group-item \">\n            <div class=\"container\">\n                <div class=\"row rounded text-white bg-secondary\">\n                    <ng-template [ngIf]=\"auditResult.targetTableName\">\n                            <div class=\"col border border-white\">Target Table</div>\n                            <div class=\"col border border-white\">{{auditResult.targetTableName}}</div>\n                            <div class=\"w-100\"></div>\n                    </ng-template>                    \n                    <div class=\"col border border-white\">Run Status</div>\n                    <div class=\"col border border-white\">{{eRunStatus[auditResult.runStatus]}}</div>\n                    <div class=\"w-100\"></div>                    \n                    <div class=\"col border border-white\">Start Date</div>\n                    <div class=\"col border border-white\">{{auditResult.initializeTime | calendar}}</div>\n                    <div class=\"w-100\"></div>\n                    <ng-template [ngIf]=\"auditResult.scheduledTime\">\n                        <div class=\"col border border-white\">Scheduled Time</div>\n                        <div class=\"col border border-white\">{{auditResult.scheduledTime | calendar}}</div>\n                        <div class=\"w-100\"></div>\n                    </ng-template>\n\n                    <div class=\"col border border-white\">Initialized</div>\n                    <div class=\"col border border-white\">{{auditResult.initializeTime | calendar}}</div>\n                    <div class=\"w-100\"></div>\n                    <div class=\"col border border-white\">Started</div>\n                    <div class=\"col border border-white\">{{auditResult.startTime | calendar}}</div>\n                    <div class=\"w-100\"></div>\n                    <div class=\"col border border-white\">Finished</div>\n                    <div class=\"col border border-white\">{{auditResult.endTime | calendar}}</div>\n                    <div class=\"w-100\"></div>\n                    <div class=\"col border border-white\">Run Time</div>\n                    <div class=\"col border border-white\">{{runTime | number: '1.2-2'}} seconds</div>\n                    <div class=\"w-100\"></div>\n                    <div class=\"col border border-white\">Triggered By</div>\n                    <div class=\"col border border-white\">{{eTriggerMethod[auditResult.triggerMethod]}}</div>\n                </div>\n            </div>\n    </li>\n    <li *ngIf=\"auditResult.childResults?.length > 0\" class=\"list-group-item list-group-item-info\">\n        <h5>Child Results</h5>\n    </li>\n    <li *ngIf=\"auditResult.childResults?.length > 0\" class=\"list-group-item \">\n        <div *ngFor=\"let result of auditResult.childResults\">\n            <div class=\"\">\n                <span class=\"text\">  {{result.auditType ==='Table' ? result.targetTableName : result.referenceName}}\n                </span>\n                <datalink-status [writerResult]=\"result\"></datalink-status>\n            </div>\n        </div>\n    </li>\n    <li class=\"list-group-item list-group-item-info\">\n        <h5>Row Distribution</h5>\n    </li>\n    <li class=\"list-group-item \">\n            <result-progress *ngIf=\"auditResult.rowsReadPrimary > 0\" [value]=\"auditResult.rowsReadPrimary\" [total]=\"auditResult.rowsReadPrimary + auditResult.rowsReadReference\"\n                caption=\"Source Rows\" color=\"bg-color-blueDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsReadReference > 0\" [value]=\"auditResult.rowsReadReference\" [total]=\"auditResult.rowsReadPrimary + auditResult.rowsReadReference\"\n                caption=\"Joined Rows\" color=\"bg-color-blueLight\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsCreated > 0\" [value]=\"auditResult.rowsCreated\" [total]=\"auditResult.rowsTotal\" caption=\"Created\"\n                color=\"bg-color-greenDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsUpdated > 0\" [value]=\"auditResult.rowsUpdated\" [total]=\"auditResult.rowsTotal\" caption=\"Updated\"\n                color=\"bg-color-blueDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsDeleted > 0\" [value]=\"auditResult.rowsDeleted\" [total]=\"auditResult.rowsTotal\" caption=\"Deleted\"\n                color=\"bg-color-magenta\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsRejected > 0\" [value]=\"auditResult.rowsRejected\" [total]=\"auditResult.rowsTotal\"\n                caption=\"Rejected\" color=\"bg-color-red\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsPreserved > 0\" [value]=\"auditResult.rowsPreserved\" [total]=\"auditResult.rowsTotal\"\n                caption=\"Preserved\" color=\"bg-color-pinkDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.rowsIgnored > 0\" [value]=\"auditResult.rowsIgnored\" [total]=\"auditResult.rowsTotal\" caption=\"Ignored\"\n                color=\"bg-color-grayDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.passed > 0\" [value]=\"auditResult.passed\" [total]=\"auditResult.rowsTotal\" caption=\"Passed\"\n                color=\"bg-color-greenDark\"></result-progress>\n            <result-progress *ngIf=\"auditResult.failed > 0\" [value]=\"auditResult.failed\" [total]=\"auditResult.rowsTotal\" caption=\"Failed\"\n                color=\"bg-color-magenta\"></result-progress>\n        </li>\n    <li class=\"list-group-item list-group-item-info\">\n        <h5>Performance Estimates (rows/second)</h5>\n    </li>\n    <li class=\"list-group-item \">\n            <div class=\"row rounded text-white bg-secondary\">\n                <ng-template ngFor let-item [ngForOf]=\"auditResult.performanceSummary\">\n                        <div class=\"col border border-white\">{{item.transformName}}</div>\n                        <div class=\"col border border-white\">{{item.seconds == 0 ? 'N/A' : ((item.rows / item.seconds) | number: '1.2-2')}} rows/second</div>\n                        <div class=\"w-100\"></div>\n                </ng-template>                    \n            </div>\n        <div style=\"display: grid\">\n            <ngx-charts-bar-vertical\n                scheme=\"natural\"\n                [results]=\"barChartData\" \n                [gradient]=\"true\" \n                [xAxis]=\"true\" \n                [yAxis]=\"true\"\n                [legend]=\"false\" \n                [showGridLines]=\"true\" \n                [showXAxisLabel]=\"true\"\n                [showYAxisLabel]=\"true\" \n                yAxisLabel=\"rows/second\" \n                xAxisLabel=\"operation\">\n            </ngx-charts-bar-vertical>\n        </div>\n    </li>\n</ul>","\nexport {SearchComponent} from './search.component';\nexport {SearchModule} from './search.module';\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { eSearchObjectType, SearchObjectTypes } from '../hub.models';\n\n@Pipe({\n  name: 'objectTypeName'\n})\nexport class ObjectTypePipe implements PipeTransform {\n\n  transform(value: eSearchObjectType): any {\n    return SearchObjectTypes.find(c => c.key === value).name;\n  }\n}\n","import { HostListener, Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { HubService } from '../hub.service';\nimport { AuthService } from '../../+auth/auth.service';\nimport { HubCache, SearchResult, eSearchObjectType, SearchObjectTypes } from '../hub.models';\nimport { Observable, Subscription, combineLatest} from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\n@Component({\n    selector: 'search',\n    templateUrl: './search.component.html',\n})\n\nexport class SearchComponent implements OnInit, OnDestroy {\n\n    private _subscription: Subscription;\n    private _searchSubscription: Subscription;\n    public hubCache: HubCache;\n\n    public searchForm: FormGroup;\n\n    searchObjectTypes = SearchObjectTypes;\n    eSearchObjectType = eSearchObjectType;\n\n    private isFirst = false;\n\n    searchResults: Array<SearchResult>;\n\n    constructor(public hubService: HubService,\n        private authService: AuthService,\n        private route: ActivatedRoute,\n        private router: Router,\n        private fb: FormBuilder\n    ) { }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let params = result[0];\n                this.hubCache = result[1];\n\n                if (!this.isFirst) {\n                    this.isFirst = false;\n                    let searchObject = +params['searchObject'];\n                    if (!searchObject) {\n                        searchObject = 0;\n                    }\n\n                    this.searchForm = this.fb.group({\n                        'searchString': [params['search'], [\n                        ]],\n                        'searchObject': [searchObject, [\n                        ]],\n                    });\n\n                    this.updateSearch();\n\n                    if (this._searchSubscription) { this._searchSubscription.unsubscribe(); }\n                    this._searchSubscription = this.searchForm.valueChanges\n                        .pipe(debounceTime(500))\n                        .subscribe(newValue => {\n                            this.updateSearch();\n                        });\n                }\n\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Search');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._searchSubscription) { this._searchSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    updateSearch() {\n        if (!this.hubCache.isLoaded()) { return; }\n\n        this.searchResults = this.hubCache.search(this.searchForm.value.searchString, this.searchForm.value.searchObject);\n\n        if (history.pushState) {\n            let newUrl = this.hubCache.getHubUrl() + '/search';\n            let searchString = this.searchForm.value.searchString;\n            let searchObject = this.searchForm.value.searchObject;\n            if (searchString) {\n                newUrl += '/' + searchObject + '/' + searchString;\n            }\n            this.router.navigateByUrl(newUrl);\n        }\n    }\n}\n\n\n","<div class=\"container-fluid\">\n\t<d-widget title=\"Search Results\" iconClass=\"fa fa-lg fa-fw fa-search\" [showCloseButton]=\"true\" [padding]=\"true\" (close)=\"close()\">\n\t\t<form *ngIf=\"searchForm\" [formGroup]=\"searchForm\">\n\t\t\t<fieldset>\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Search Term\" formControlName=\"searchString\" placeholder=\"Search...\" iconClass=\"fa fa-search\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Restrict to\" formControlName=\"searchObject\" [items]=\"searchObjectTypes\" itemKey=\"key\" itemName=\"name\">\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\t\t</form>\n\n\t\t<div role=\"content\">\n\t\t\t<div class=\"well\" *ngIf=\"!searchResults || searchResults?.length == 0\">\n\t\t\t\t<h5>No search results available.</h5>\n\t\t\t</div>\n\n\t\t\t<div class=\"well\">\n\t\t\t\t<ul class=\"list-group \">\n\t\t\t\t\t<li *ngFor=\"let searchResult of searchResults\" class=\"list-group-item\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h5>{{searchResult.objectType | objectTypeName }}</h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col-xs-9\" [ngSwitch]=\"searchResult.objectType\">\n\t\t\t\t\t\t\t<datajob-view *ngSwitchCase=\"eSearchObjectType.Datajob\" [datajob]=\"searchResult.object\"></datajob-view>\n\t\t\t\t\t\t\t<datalink-view *ngSwitchCase=\"eSearchObjectType.Datalink\" [datalink]=\"searchResult.object\"></datalink-view>\n\t\t\t\t\t\t\t<connection-view *ngSwitchCase=\"eSearchObjectType.Connection\" [connection]=\"searchResult.object\"></connection-view>\n\t\t\t\t\t\t\t<table-view *ngSwitchCase=\"eSearchObjectType.Table\" [connection]=\"searchResult.objectParent\" [table]=\"searchResult.object\"></table-view>\n\t\t\t\t\t\t\t<table-column-view *ngSwitchCase=\"eSearchObjectType.TableColumn\" [table]=\"searchResult.objectParent\" [column]=\"searchResult.object\"></table-column-view>\n\t\t\t\t\t\t\t<columnValidation-view *ngSwitchCase=\"eSearchObjectType.ColumnValidation\" [columnValidation]=\"searchResult.object\"></columnValidation-view>\n\t\t\t\t\t\t\t<fileFormat-view *ngSwitchCase=\"eSearchObjectType.FileFormat\" [fileFormat]=\"searchResult.object\"></fileFormat-view>\n\t\t\t\t\t\t\t<view-view *ngSwitchCase=\"eSearchObjectType.View\" [view]=\"searchResult.object\"></view-view>\n\t\t\t\t\t\t\t<api-view *ngSwitchCase=\"eSearchObjectType.Api\" [api]=\"searchResult.object\"></api-view>\n\t\t\t\t\t\t\t<dashboard-view *ngSwitchCase=\"eSearchObjectType.Dashboard\" [dashboard]=\"searchResult.object\"></dashboard-view>\n\t\t\t\t\t\t\t<listOfValues-view *ngSwitchCase=\"eSearchObjectType.ListOfValues\" [listOfValues]=\"searchResult.object\"></listOfValues-view>\n\t\t\t\t\t\t\t<datalinkTest-view *ngSwitchCase=\"eSearchObjectType.DatalinkTest\" [datalinkTest]=\"searchResult.object\"></datalinkTest-view>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</d-widget>\n</div>","import { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { SharedModule } from '../../shared/shared.module';\nimport { SearchComponent } from './search.component';\nimport { ObjectTypePipe } from './object-type.pipe';\nimport { HubSharedModule} from '../hub.shared.module';\n\n@NgModule({\n    imports: [\n        SharedModule,\n        HubSharedModule,\n        ReactiveFormsModule\n    ],\n    exports: [],\n    declarations: [SearchComponent, ObjectTypePipe],\n    providers: [],\n})\nexport class SearchModule { }\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HubService } from '../hub.service';\nimport { HubCache } from '../hub.models';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { AuthService } from '../../+auth/auth.service';\nimport { DexihDatalink, eSourceType, eDownloadFormat, DownloadObject,\n    eDataObjectType, eSharedObjectType } from '../../shared/shared.models';\nimport { CancelToken } from '../../+auth/auth.models';\n\n@Component({\n    selector: 'sharedData-index',\n    templateUrl: './sharedData-index.component.html',\n    styles: []\n})\nexport class SharedDataIndexComponent implements OnInit, OnDestroy {\n    hubCache: HubCache;\n\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n    private cancelToken: CancelToken = new CancelToken();\n\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'objectTypeName', title: 'Type', format: '' },\n        { name: 'name', title: 'Name', format: '', tags: 'tags' },\n        { name: 'description', title: 'Description', format: 'Md' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    typeFilter: string;\n\n    private _tableData = new BehaviorSubject<Array<DexihDatalink>>(null);\n    tableData: Observable<Array<DexihDatalink>> = this._tableData.asObservable();\n\n    constructor(private hubService: HubService, private authService: AuthService, private router: Router, private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let queryParams = result[2];\n                this.hubCache = result[3];\n\n                this.watchChanges();\n\n                this.typeFilter = queryParams['typeFilter'];\n                if (!this.typeFilter) {\n                    this.typeFilter = 'All';\n                }\n\n                this.route.snapshot.data['pageTitle'] =  this.typeFilter;\n\n                this.updateSharedData();\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Shared Data Index');\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    private updateSharedData() {\n        let objects = new Array<any>();\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            if (!this.hubCache.hub.dexihDatalinks && !this.hubCache.hub.dexihConnections) {\n                this._tableData.next(new Array<DexihDatalink>());\n            } else {\n                if (this.typeFilter === 'All' || this.typeFilter === 'Datalink') {\n                    this.hubCache.hub.dexihDatalinks.filter(d => d.isShared).forEach(datalink => {\n                        objects.push({\n                            objectKey: datalink.key,\n                            objectTypeName: eDataObjectType[eDataObjectType.Datalink],\n                            objectType: eDataObjectType.Datalink,\n                            name: datalink.name,\n                            description: datalink.description,\n                            updateDate: datalink.updateDate,\n                            tags: this.hubCache.getObjectTags(eSharedObjectType.Datalink, datalink.key)\n                        });\n                    });\n                }\n\n                if (this.typeFilter === 'All' || this.typeFilter === 'Table') {\n                    this.hubCache.hub.dexihTables.filter(c => c.isShared).forEach(table => {\n                        objects.push({\n                            objectKey: table.key,\n                            objectTypeName: eDataObjectType[eDataObjectType.Table],\n                            objectType: eDataObjectType.Table,\n                            name: table.logicalName + ' (' + table.name + ')',\n                            description: table.description,\n                            updateDate: table.updateDate,\n                            tags: this.hubCache.getObjectTags(eSharedObjectType.TagObjects, table.key)\n                        });\n                    });\n                }\n\n                if (this.typeFilter === 'All' || this.typeFilter === 'View') {\n                    this.hubCache.hub.dexihViews.filter(c => c.isShared).forEach(view => {\n                        objects.push({\n                            objectKey: view.key,\n                            objectTypeName: eDataObjectType[eDataObjectType.View],\n                            objectType: eDataObjectType.View,\n                            name: view.name,\n                            description: view.description,\n                            updateDate: view.updateDate,\n                            tags: this.hubCache.getObjectTags(eSharedObjectType.View, view.key)\n                        });\n                    });\n                }\n\n                if (this.typeFilter === 'All' || this.typeFilter === 'Dashboard') {\n                    this.hubCache.hub.dexihDashboards.filter(c => c.isShared).forEach(dashboard => {\n                        objects.push({\n                            objectKey: dashboard.key,\n                            objectTypeName: eDataObjectType[eDataObjectType.Dashboard],\n                            objectType: eDataObjectType.Dashboard,\n                            name: dashboard.name,\n                            description: dashboard.description,\n                            updateDate: dashboard.updateDate,\n                            tags: this.hubCache.getObjectTags(eSharedObjectType.Dashboard, dashboard.key)\n                        });\n                    });\n                }\n\n                if (this.typeFilter === 'All' || this.typeFilter === 'Api') {\n                    this.hubCache.hub.dexihApis.filter(c => c.isShared).forEach(api => {\n                        objects.push({\n                            objectKey: api.key,\n                            objectTypeName: eDataObjectType[eDataObjectType.Api],\n                            objectType: eDataObjectType.Api,\n                            name: api.name,\n                            description: api.description,\n                            updateDate: api.updateDate,\n                            tags: this.hubCache.getObjectTags(eSharedObjectType.Api, api.key)\n                        });\n                    });\n                }\n\n                this._tableData.next(objects);\n            }\n        }\n\n    }\n\n    public downloadData(dataObjects: Array<any>) {\n        this.hubService.downloadData(dataObjects, true, eDownloadFormat.Csv, this.cancelToken).then(() => {\n            this.hubService.addHubSuccessMessage('The specified data is being downloaded.');\n        }).catch(() => {\n            //            this.hubService.addHubErrorMessage(reason);\n        });\n    }\n\n    public preview(dataObject: DownloadObject) {\n        if (dataObject.objectType === eDataObjectType.Table) {\n            this.router.navigate(['table-preview', dataObject.objectKey], { relativeTo: this.route });\n        }\n        if (dataObject.objectType === eDataObjectType.Datalink) {\n            this.router.navigate(['datalink-preview', dataObject.objectKey], { relativeTo: this.route });\n        }\n        if (dataObject.objectType === eDataObjectType.View) {\n            this.router.navigate(['view-preview', dataObject.objectKey], { relativeTo: this.route });\n        }\n        if (dataObject.objectType === eDataObjectType.Dashboard) {\n            this.router.navigate(['dashboard-preview', dataObject.objectKey], { relativeTo: this.route });\n        }\n        if (dataObject.objectType === eDataObjectType.Api) {\n            this.router.navigate(['api-preview', dataObject.objectKey], { relativeTo: this.route });\n        }\n    }\n\n    public unshareSelectedTables(dataObjects: Array<DownloadObject>) {\n        let datalinkKeys = dataObjects.filter(c => c.objectType === eDataObjectType.Datalink).map(c => c.objectKey);\n        if (datalinkKeys.length > 0) {\n            this.hubService.shareItems(datalinkKeys, eDataObjectType.Datalink, false);\n        }\n\n        let tableKeys = dataObjects.filter(c => c.objectType === eDataObjectType.Table).map(c => c.objectKey);\n        if (tableKeys.length > 0) {\n            this.hubService.shareItems(tableKeys, eDataObjectType.Table, false);\n        }\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Datalink || hubCacheChange.changeClass === eSharedObjectType.Table) {\n                this.updateSharedData();\n            }\n        });\n\n    }\n}\n\n\n","<div class=\"container-fluid\">\n    <d-widget title=\"Shared Data\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-newspaper-o\" \n\t\t[showCloseButton]=\"true\"\n\t\t[padding]=\"false\"\n\t\t(close)=\"close()\"\n\t>\n\n\t<d-table \n\t\t[enableMultiSelect]=\"true\"\n\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t[columns]=\"columns\"\n\t\t[dataObservable]=\"tableData\"\n\t\t(rowClick)=\"preview($event)\"\n\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t>\n\n\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t<d-button-preview (click)=\"preview(item)\"></d-button-preview>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-objects=\"items\">\n\t\t\t\t<d-button-download class=\"mr-1\" (click)=\"downloadData(objects)\"></d-button-download>\n\t\t\t\t<d-button-private *ngIf=\"hubCache.canWrite\"  (click)=\"unshareSelectedTables(objects)\"></d-button-private>\n\t\t\t</ng-template>\n\n\t\t\t<ng-template #filter select=\"filter\" let-items=\"items\">\n\t\t\t\t<d-button-dropdown buttonClass=\"btn-primary mr-1\" iconClass=\"fa fa-filter\" [text]=\"typeFilter\" title=\"Filter by a purpose\" [pullRight]=\"true\">\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='All'\" routerLink='.' [queryParams]=\"{typeFilter: 'All'}\" title=\"All Items\">All</a>\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='Datalink'\" routerLink='.' [queryParams]=\"{typeFilter: 'Datalink'}\" title=\"Datalinks\">Datalinks</a>\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='Table'\" routerLink='.' [queryParams]=\"{typeFilter: 'Table'}\" title=\"Tables\">Tables</a>\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='View'\" routerLink='.' [queryParams]=\"{typeFilter: 'View'}\" title=\"Views\">Views</a>\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='Dashboard'\" routerLink='.' [queryParams]=\"{typeFilter: 'Dashboard'}\" title=\"Dashboards\">Dashboards</a>\n\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"typeFilter=='Api'\" routerLink='.' [queryParams]=\"{typeFilter: 'Api'}\" title=\"Apis\">Apis</a>\n\t\t\t\t</d-button-dropdown>\n\t\t\t</ng-template>\n\t</d-table>\n\n    </d-widget>\n</div>\n\n","export * from './table-index.component';\n","<div class=\"container-fluid\">\n    <d-widget [title]=\"title\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-table\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t\t[showIf]=\"hubCache?.hub\"\n\t>\n\n\t\t<ng-template #header>\n\n\n\t\t</ng-template>\n\n\t\t<d-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"editTable($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t[enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n\t\t\t>\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<actions-table-button [tables]=\"items\" [refreshTables]=\"true\" ></actions-table-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-table=\"item\">\n\t\t\t\t\t<datalink-status [tableKey]='table?.key'></datalink-status>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #filter select=\"filter\" let-items=\"items\">\n\t\t\t\t\t<d-button-dropdown *ngIf=\"hubCache?.hub\" class=\"mr-1\"[autoCompact]=\"false\" buttonClass=\"btn btn-primary\" iconClass=\"fa fa-database\" [text]=\"connectionName\" title=\"Filter by a connection\" [pullRight]=\"true\">\n\t\t\t\t\t\t<a *ngFor=\"let connection of (hubCache.hub.dexihConnections | equalFilter :'isValid':true )\" class=\"dropdown-item\" routerLink=\".\" [queryParams]=\"{connectionKey: connection.key}\">{{connection.name}}</a>\n\t\t\t\t\t</d-button-dropdown>\n\t\t\n\t\t\t\t\t<d-button-dropdown class=\"mr-1\" [autoCompact]=\"false\" buttonClass=\"btn btn-primary\" iconClass=\"fa fa-filter\" [text]=\"eConnectionPurpose[purposeFilter]\" title=\"Filter by a purpose\" [pullRight]=\"true\">\n\t\t\t\t\t\t<a class=\"dropdown-item\" [class.active]=\"purposeFilter=='0'\" routerLink='.' [queryParams]=\"{purposeFilter: 'All'}\" title=\"All Connections\">All</a>\n\t\t\t\t\t\t<a *ngFor=\"let purpose of eConnectionPurposeItems | gtFilter:'key':0\" [class.active]=\"purposeFilter==purpose.key\" class=\"dropdown-item\" routerLink='.' [queryParams]=\"{purposeFilter: purpose.key}\" [title]=\"purpose.name\">{{purpose.name}}</a>\n\t\t\t\t\t</d-button-dropdown>\n\t\t\t\t</ng-template>\n\t\t\t\t\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.Table\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.Table'></dependent-items-button>\n\t\t\t\t</ng-template>\n\n\n\n\t\t</d-table>\n\n\t</d-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Datalinks\" path=\"/assets/help/reference/table.md\"></dexih-help>\n\n</div>\n\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { Subscription, Observable, BehaviorSubject, combineLatest} from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { HubCache } from '../../hub.models';\nimport { DexihTable, eConnectionCategory, eSharedObjectType, eConnectionPurposeItems, eConnectionPurpose, eTableType } from '../../../shared/shared.models';\n\n@Component({\n    selector: 'table-index',\n    templateUrl: './table-index.component.html',\n    styles: []\n})\nexport class TableIndexComponent implements OnInit, OnDestroy {\n    private _hubCacheChangeSubscription: Subscription;\n    private _subscription: Subscription;\n\n    hubCache: HubCache;\n    purposeFilter: string;\n    connectionKey: number;\n    connectionName: string;\n    eConnectionPurposeItems = eConnectionPurposeItems;\n    eConnectionPurpose = eConnectionPurpose;\n    eSharedObjectType = eSharedObjectType;\n\n    title: string;\n\n    columns = [\n        { name: 'logicalName', title: 'Logical Name', format: 'Md', footer: 'description', tags: 'tags' },\n        { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },\n        { name: 'tableType', title: 'Table Type', format: 'Enum', enum: eTableType },\n        { name: 'connectionName', title: 'Connection', footer: 'connectionType', format: '' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<DexihTable>>(null);\n    tableData: Observable<Array<DexihTable>> = this._tableData.asObservable();\n\n\n    constructor(private hubService: HubService, private authService: AuthService, private router: Router, private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(async result => {\n                let data = result[0];\n                let params = result[1];\n                let queryParams = result[2];\n                this.hubCache = result[3];\n\n                if (!this.hubCache.isLoaded()) { return; }\n                this.purposeFilter = queryParams['purposeFilter'];\n                if (!this.purposeFilter) { this.purposeFilter = 'All' }\n\n                this.connectionKey = +queryParams['connectionKey'];\n                if (this.connectionKey) {\n                    let connection = this.hubCache.hub.dexihConnections.find(c => c.key === this.connectionKey);\n                    if (connection) {\n                        this.connectionName = connection.name;\n                    }\n                } else {\n                    this.connectionName = 'All';\n                }\n\n                await this.updateTableData();\n\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Table Index');\n        }\n\n        // watch for any changes in the connections.\n        this.watchChanges();\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    async updateTableData() {\n        this.title = 'Tables ';\n        this.connectionName = 'All';\n\n        if (this.purposeFilter && this.purposeFilter !== 'All') {\n            this.title += ': ' + eConnectionPurpose[this.purposeFilter];\n        }\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let tableData = [];\n            for await (const table of this.hubCache.hub.dexihTables) {\n                let connection = this.hubCache.hub.dexihConnections.find(c => c.key === table.connectionKey);\n                let connectionReference = await this.hubService.GetConnectionReference(connection);\n\n                if (\n                    ((this.purposeFilter === 'All' || !this.purposeFilter) ||\n                        (connection && connection.purpose.toString() === this.purposeFilter)) &&\n                    (!this.connectionKey || table.connectionKey === this.connectionKey)\n                ) {\n                    let name: string;\n                    if (table.tableType === eTableType.Query) {\n                        name = '(Sql Query)';\n                    } else {\n                        if (table.schema) {\n                            name = table.schema + '.' + table.name;\n                        } else {\n                            name = table.name;\n                        }\n                    }\n\n                    let tableName;\n                    if (this.hubCache.defaultTableLogicalName(table.schema, table.name) === table.logicalName) {\n                        tableName = table.logicalName\n                    } else {\n                        tableName = `${table.logicalName} (${table.name})`\n                    }\n\n                    let description = '';\n                    if ( table.logicalName !== table.name) { description = `Name: ${table.name}`}\n                    if (description) { description += '<br>' }\n                    if (table.description ) { description += table.description; }\n\n                    tableData.push({\n                        key: table.key,\n                        connectionType: connection ? eConnectionPurpose[connection.purpose] : 'undefined',\n                        connectionName: connection ? connection.name : 'undefined',\n                        description: description,\n                        tableType: table.tableType,\n                        name: name,\n                        logicalName: table.logicalName,\n                        tags: this.hubCache.getObjectTags(eSharedObjectType.Table, table.key),\n                        updateDate: table.updateDate,\n                        connectionKey: connection ? connection.key : '',\n                        isFile: connectionReference ? connectionReference.connectionCategory === eConnectionCategory.File : false,\n                        sharedIcon: table.isShared ? 'fa fa-group' : 'fa fa-user-secret',\n                        sharedToolTip: table.isShared ? 'Table is shared' : 'Table is private'\n                    });\n                }\n            };\n\n            if (this.connectionKey) {\n                let connection = this.hubCache.hub.dexihConnections.find(c => c.key === this.connectionKey);\n                if (connection) {\n                    this.connectionName = connection.name;\n                    this.title += ' for connection - ' + connection.name;\n                }\n            }\n\n            this._tableData.next(tableData);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    routeSibling(path) {\n        this.router.navigate(['..', path]);\n    }\n\n\n    editTable(table: DexihTable) {\n        this.router.navigate(['table-edit', table.key], { queryParamsHandling: 'merge', relativeTo: this.route.parent });\n    }\n\n\n    getConnection(connectionKey: number) {\n        return this.hubCache.hub.dexihConnections.find(c => c.key === connectionKey);\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Table || hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n                this.updateTableData();\n            }\n        });\n    }\n\n\n}\n","export { TablePreviewDataComponent } from './table-preview-data.component';\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subscription, BehaviorSubject, Observable, combineLatest } from 'rxjs';\nimport { HubCache } from '../hub.models';\nimport { DexihTag, eSharedObjectType } from '../../shared/shared.models';\nimport { HubService } from '..';\nimport { AuthService } from '../../+auth/auth.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HubFormsService } from '../hub.forms.service';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\n\n@Component({\n    selector: 'tags',\n    templateUrl: 'tags.component.html',\n    providers: [HubFormsService],\n    animations: [\n        // trigger name for attaching this animation to an element using the [@triggerName] syntax\n        trigger('slideDown', [\n            state('hide', style({ height: 0, overflow: 'hidden' })),\n            state('show', style({ height: '*', overflow: 'unset' })),\n            transition('hide <=> show', animate('200ms ease-in')),\n        ])\n        ]\n})\nexport class TagsComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n\n    tags: Array<DexihTag>;\n    state = 'hide';\n\n    colors = [\n        { name: 'primary', color: '#3a5f8d' },\n        { name: 'secondary', color : '#89B3BF'},\n        { name: 'success', color : '#479762'},\n        { name: 'warning', color : '#c4872a' },\n        { name: 'danger', color : '#f44336' },\n        { name: 'yellow', color : 'yellow'},\n        { name: 'pink', color : 'pink'},\n        { name: 'purple', color : 'purple'},\n        { name: 'dark', color : '#1F2624'},\n    ]\n\n    columns = [\n        { name: 'name', title: 'Name', footer: 'description', format: 'Md' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        public formsService: HubFormsService,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        try {\n            this._subscription = combineLatest(\n                this.route.queryParams,\n                this.hubService.getHubCacheObservable(),\n            ).subscribe(result => {\n                let params = result[0];\n                this.hubCache = result[1];\n\n                if (params['key']) {\n                    let tag = this.hubCache.hub.dexihTags.find(c => c.key === +params['key']);\n                    if (tag) {\n                        let editTag = this.hubCache.hub.dexihTags.find(c => c.key === tag.key);\n                        this.formsService.tag(editTag);\n                        this.state = 'show';\n                    }\n                }\n\n                this.update();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'View Index');\n        }\n\n\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n\n    update() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let tags: Array<DexihTag>;\n            tags = this.hubCache.hub.dexihTags.filter(c => c.isValid);\n            let tableData = tags.map(tag => {\n                return {\n                    key: tag.key,\n                    name: tag.name,\n                    description: tag.description,\n                    color: tag.color,\n                    updateDate: tag.updateDate,\n                };\n            });\n            this._tableData.next(tableData);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    new() {\n        let tag = new DexihTag();\n        this.formsService.tag(tag);\n        this.state = 'show';\n    }\n\n    edit(tag: DexihTag) {\n        let editTag = this.hubCache.hub.dexihTags.find(c => c.key === tag.key);\n        this.formsService.tag(editTag);\n        this.state = 'show';\n        if (history.pushState) {\n            this.router.navigateByUrl(window.location.pathname + `?key=${tag.key}`);\n        }\n        document.body.scrollTop = 0; // For Safari\n        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera\n    }\n\n    delete(tags: DexihTag[]) {\n        this.hubService.deleteTags(tags);\n    }\n\n    save() {\n        this.formsService.save(false).then(() => {\n            this.hide();\n        }).catch();\n    }\n\n    cancel() {\n        this.hide();\n    }\n\n    hide() {\n        this.state = 'hide';\n        if (history.pushState) {\n            if (window.location.search) {\n                this.router.navigateByUrl(window.location.pathname);\n            }\n          }\n    }\n\n    selectColor(color) {\n        this.formsService.currentForm.controls.color.setValue(color.color);\n    }\n\n    export(items: Array<DexihTag>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(cache.hub.hubKey, '');\n        items.forEach(item => { cache.cacheAddTag(item.key, hub); });\n\n        let filename = items.length === 1 ? 'Tag - ' + items[0].name + '.json' : 'tags.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n    watchChanges() {\n        // watch the current validation in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Tags) {\n                this.update();\n            }\n        });\n    }\n}\n","<div class=\"container-fluid\">\n    <d-widget title=\"Tags\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-tags\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n\t\t\t<d-table \n\t\t\t\t[enableMultiSelect]=\"true\"\n                [enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\"\n                [columns]=\"columns\"\n\t\t\t\t[dataObservable]=\"tableData\"\n                (rowClick)=\"edit($event)\"\n                rowStatusHeading=\"Color\"\n\t\t\t\t>\n\t\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-hubVariable=\"item\">\n\t\t\t\t\t<d-button-edit class=\"mr-1\" (click)=\"edit(item)\"></d-button-edit>\n\t\t\t\t</ng-template>\n\n                    <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n                        <d-button-save-local class=\"mr-1\" (click)=\"export(items)\"></d-button-save-local>\n                        <d-button-delete class=\"mr-1\" *ngIf=\"hubCache.canWrite\" (click)=\"delete(items)\"></d-button-delete>\n                    </ng-template>\n    \n                    <ng-template #actions let-items=\"items\">\n                        <d-button-new class=\"mr-1\" *ngIf=\"hubCache.canWrite\" (click)=\"new()\"></d-button-new>\n                    </ng-template>\n\n                    <ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n\t\t\t\t\t\t<div (click)=\"edit(item)\" class=\"alert p-1 text-center\" [ngStyle]=\"{'background-color': item.color, 'margin-bottom': '0' }\">\n                            <span class=\"blend-text  font-weight-bold\">{{item.name}}</span>\n                        </div>\n\t\t\t\t\t</ng-template>\n    \n                    <ng-template #tableHeader>\n                        <div [@slideDown]='state' class=\"card mt-2\" style=\"width: 100%;\">\n                            <div class=\"card-header text-white bg-primary\">\n                                <b>Add/Edit Tag</b>\n                            </div>\n                            <div class=\"card-body\">\n                                <form *ngIf=\"formsService.currentForm\" [formGroup]=\"formsService.currentForm\">\n                                    <div class=\"form-row\">\n                                        <section class=\"form-group col-md-3\">\n                                            <form-input label=\"Tag Name\" formControlName=\"name\" placeholder=\"Enter the name.\"\n                                                [autocapitalize]=\"true\" iconClass=\"fa fa-list\" [errors]=\"formsService.formErrors['name']\">\n                                            </form-input>\n                                        </section>\n                                        <section class=\"form-group col-md-9\">\n                                            <div>\n                                                <label class=\"mt-1\">Color</label>\n                        \n                                                <div class=\"input-group m-0\">\n                                                    <label class=\"btn mr-1\" style=\"height: '38px'; width: '76px'\" [style.background-color]=\"formsService.currentForm.controls.color.value\">\n                                                        <input formControlName=\"color\" hidden type=\"color\">\n                                                    </label>\n                                                    <form-input class=\"mr-3\" style=\"height: '38px'; width: '90px'\" formControlName=\"color\" placeholder=\"color\"></form-input>\n                                                    <div class=\"btn-group-toggle\" data-toggle=\"buttons\">\n                                                        <button *ngFor=\"let color of colors\" class=\"btn mr-1\" (click)=\"selectColor(color)\" [style.background-color]=\"color.color\" style=\"height: '38px'; width: '38px'\"></button>\n                                                    </div>\n                                                </div>\n                        \n                                            </div>\n                                        </section>\n                                    </div>\n                                    <div class=\"form-row\">\n                                        <section class=\"col-md-12\">\n                                            <form-textarea label=\"Description\" [showMarkdown]=\"true\" formControlName=\"description\" placeholder=\"Enter the description.\" >\n                                            </form-textarea>\n                                        </section>\n                                    </div>\n                        \n                                </form>\n                            </div>\n                            <div class=\"card-footer\">\n                                <d-button-save class=\"mr-1\" (click)=\"save()\"></d-button-save>\n                                <d-button-cancel class=\"mr-1\" (click)=\"cancel()\"></d-button-cancel>\n                            </div>\n                        </div>\n                    </ng-template>\n    \n\t\t\t</d-table>\n\n\t</d-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Views\" path=\"/assets/help/reference/tag.md\"></dexih-help>\n\n</div>\n\n\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Observable, Subscription, BehaviorSubject, combineLatest} from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HubCache } from '../../hub.models';\nimport { DexihDatalinkTest, DexihHub, eSharedObjectType } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n  selector: 'datalink-test',\n  templateUrl: './datalinkTest-index.component.html',\n  styles: []\n})\nexport class DatalinkTestIndexComponent implements OnInit, OnDestroy {\n  private _subscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n\n    hubCache: HubCache;\n    private cancelToken: CancelToken = new CancelToken();\n\n    datalinkTests: Array<DexihDatalinkTest>;\n    public eSharedObjectType = eSharedObjectType;\n\n    columns = [\n        { name: 'name', title: 'Name', format: '', tags: 'tags'},\n        { name: 'description', title: 'Description', format: ''},\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar'},\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private router: Router,\n        private route: ActivatedRoute) {\n    }\n\n    ngOnInit() {\n        try {\n        // watch for any changes in the validations.\n        this.watchChanges();\n\n        this._subscription = combineLatest(\n            this.hubService.getHubCacheObservable()\n        ).subscribe(result => {\n          this.hubCache = result[0];\n          this.update();\n        });\n    } catch (e) {\n        this.hubService.addHubClientErrorMessage(e, 'Datalink Tests Index');\n      }\n    }\n\n    ngOnDestroy() {\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        this.cancelToken.cancel();\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    delete(items: Array<DexihDatalinkTest>) {\n        this.hubService.deleteDatalinkTests(items);\n    }\n\n    snapshot(items: Array<DexihDatalinkTest>) {\n        this.hubService.runDatalinkTestSnapshot(items, this.cancelToken);\n    }\n\n    run(items: Array<DexihDatalinkTest>) {\n        let keys = items.map(c => c.key);\n        this.hubService.runDatalinkTests(keys, this.cancelToken);\n    }\n\n    update() {\n        if (this.hubCache && this.hubCache.isLoaded()) {\n            let items = this.hubCache.hub.dexihDatalinkTests.filter(c => c.isValid).map(c => {\n                return {\n                    key: c.key,\n                    name: c.name,\n                    description: c.description,\n                    updateDate: c.updateDate,\n                    tags: this.hubCache.getObjectTags(eSharedObjectType.DatalinkTest, c.key)\n                }\n            });\n            this._tableData.next(items);\n        } else {\n            this._tableData.next(null);\n        }\n    }\n\n    edit(item: DexihDatalinkTest) {\n        this.router.navigate(['datalinkTest-edit', item.key], { relativeTo: this.route});\n    }\n\n    export(tests: Array<DexihDatalinkTest>) {\n        const cache = this.hubCache;\n        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');\n        hub.dexihDatalinkTests = tests;\n        let filename = 'datalink_tests.json';\n\n        this.hubService.exportHub(hub, filename);\n    }\n\n\n    watchChanges() {\n      // watch the current validation in case it is changed in another session.\n      this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n          if (hubCacheChange.changeClass === eSharedObjectType.DatalinkTest ||\n            hubCacheChange.changeClass === eSharedObjectType.TagObjects) {\n            this.update();\n          }\n      });\n  }\n}\n","<div class=\"container-fluid\">\n    <d-widget title=\"Datalink Tests\" \n\t\ticonClass=\"fa fa-lg fa-fw fa-flag-checkered\" \n\t\t[showCloseButton]=\"true\"\n\t\t(close)=\"close()\"\n\t>\n \n\n\t\t<d-table \n\t\t\t[enableMultiSelect]=\"true\"\n\t\t\t[columns]=\"columns\"\n\t\t\t[dataObservable]=\"tableData\"\n\t\t\t(rowClick)=\"edit($event)\"\n\t\t\t[tags]=\"this.hubCache.hub.dexihTags\"\n\t\t\t>\n\t\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t\t<dependent-items-button class=\"ml-1\" [key]=\"item.key\" [objectType]='eSharedObjectType.DatalinkTest'></dependent-items-button>\n\t\t\t</ng-template>\n\n\n\t\t\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t\t\t<tags-update-button class=\"ml-1\" [objectType]=\"eSharedObjectType.DatalinkTest\" [objects]=\"items\" ></tags-update-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #actions let-items=\"items\">\n\t\t\t\t\t<actions-datalinkTest-button [datalinkTests]=\"items\"></actions-datalinkTest-button>\n\t\t\t\t</ng-template>\n\n\t\t\t\t<ng-template #rowStatus select=\"rowStatus\" let-item=\"item\">\n\t\t\t\t\t<datalink-status [datalinkTestKey]='item?.key'></datalink-status>\n\t\t\t\t</ng-template>\n\t\n\t\t</d-table>\n\n\t</d-widget>\n\t\n\t<dexih-help class=\"m-3\" title=\"Datalink Test\" path=\"/assets/help/reference/datalinkTest.md\"></dexih-help>\n\n</div>\n\n\n","<div class=\"container\">\n\t<d-widget title=\"New Datalink Test(s)\"  iconClass=\"fa fa-lg fa-fw fa-exchange\" [showCloseButton]=\"true\" (close)=\"!saving && cancel()\"\n\t [padding]=\"true\">\n\t\t<ng-template #header>\n\t\t\t<d-button-save class=\"mr-1\" (click)=\"!saving && save()\" [busy]=\"saving\"></d-button-save>\n\t\t\t<d-button-cancel (click)=\"!saving && cancel()\" [busy]=\"saving\"></d-button-cancel>\n\t\t</ng-template>\n\n\t\t<ng-template #subHeader>\n\t\t\t<label class=\"label\">Create automatic tests for the following datalink(s):</label>\n\t\t\t<div>\n\t\t\t\t<div class=\"list-group d-inline-block\">\n\t\t\t\t\t<span class=\"list-group-item\" *ngFor=\"let datalink of sourceDatalinks\">\n\t\t\t\t\t\t{{datalink.name}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ng-template>\n\n\t\t<form *ngIf=\"sourceDatalinkKeys\" [formGroup]=\"mainForm\">\n\n\t\t\t<fieldset>\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input *ngIf=\"sourceDatalinks.length == 1\" label=\"Test Name\" formControlName=\"name\" placeholder=\"Test name (leave blank for auto naming)\"\n\t\t\t\t\t\t iconClass=\"fa fa-comment\" [errors]=\"formErrors.name\"></form-input>\n\t\t\t\t\t\t<form-input *ngIf=\"sourceDatalinks.length > 1\" disabled label=\"Test Name\" placeholder=\"Test name can not be specified when creating multiple tests.\"\n\t\t\t\t\t\t iconClass=\"fa fa-comment\"></form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select label=\"Audit Connection\" formControlName=\"auditConnectionKey\" [items]=\"hubCache.hub.dexihConnections\"\n\t\t\t\t\t\t\titemKey=\"key\" itemName=\"name\" [errors]=\"formErrors.auditConnectionKey\" iconClass=\"fa fa-database\"\n\t\t\t\t\t\t\tnote=\"Connection where test results are stored.\">\n\t\t\t\t\t\t</form-select>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select formControlName=\"sourceConnectionKey\" label=\"Input Connection\" [items]=\"managedConnections\" itemKey=\"key\"\n\t\t\t\t\t\t itemName=\"name\" note=\"Specify the connection to use for any datalink source data.\" [errors]=\"formErrors.sourceConnectionKey\"\n\t\t\t\t\t\t [allowNullSelect]=\"true\" selectNullMessage=\"No source table\"></form-select>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-select formControlName=\"targetConnectionKey\" label=\"Target Connection\" [items]=\"managedConnections\" itemKey=\"key\"\n\t\t\t\t\t\t itemName=\"name\" note=\"Specify the connection for target data.\" [errors]=\"formErrors.targetConnectionKey\"\n\t\t\t\t\t\t [allowNullSelect]=\"true\" selectNullMessage=\"No target table\"></form-select>\n\t\t\t\t\t</section>\n\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\t\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t\t<section class=\"col col-11\">\n\t\t\t\t\t\t\t<form-checkbox label=\"Snapshot and copy current source/target data into the test connections.\" formControlName=\"snapshotData\"\n\t\t\t\t\t\t\t name=\"snapshotData\"></form-checkbox>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</fieldset>\n\t\t</form>\n\n\t</d-widget>\n</div>","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators, ValidatorFn, AbstractControl } from '@angular/forms';\nimport { HubService } from '../../hub.service';\nimport { Observable, Subscription, combineLatest } from 'rxjs';\nimport { Location } from '@angular/common';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { DexihConnection, DexihDatalink, eConnectionPurpose } from '../../../shared/shared.models';\nimport { CancelToken } from '../../../+auth/auth.models';\n\n@Component({\n\n  selector: 'dexih-datalinkTest-new-form',\n  templateUrl: './datalinkTest-new.component.html'\n})\nexport class DatalinkTestNewComponent implements OnInit, OnDestroy {\n\n  private _subscription: Subscription;\n  private _valueChangesSubscription: Subscription;\n  private cancelToken: CancelToken = new CancelToken();\n\n  private hubCache: HubCache;\n\n  public pageTitle: string;\n\n  hasChanged = false;\n  showAllErrors = false;\n\n  public name: string;\n  public auditConnectionKey: number;\n  public sourceConnectionKey: number;\n  public targetConnectionKey: number;\n\n  public managedConnections: Array<DexihConnection>;\n\n  public sourceDatalinkKeys: Array<number>;\n  public sourceDatalinks: Array<DexihDatalink>;\n\n  public saving = false;\n\n  mainForm: FormGroup;\n\n  formErrors = {\n    'name': '',\n    'auditConnectionKey': '',\n    'sourceConnectionKey': '',\n    'targetConnectionKey': '',\n    'snapshotData': '',\n  };\n\n  validationMessages = {\n    'name': {\n      'required': 'Name is required.',\n      'minlength': 'Name must be at least 4 characters long.',\n      'maxlength': 'Name cannot be more than 50 characters long.',\n    },\n    'auditConnectionKey': {\n    },\n    'targetConnectionKey': {\n    },\n    'sourceConnectionKey': {\n    },\n    'snapshotData': {\n    },\n  };\n\n\n  constructor(\n    private hubService: HubService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private fb: FormBuilder) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        let params = result[1];\n        this.hubCache = result[2];\n\n        this.managedConnections = this.hubCache.hub.dexihConnections\n          .filter(c => c.purpose === eConnectionPurpose.Managed)\n\n        if (this.hubCache.status === eCacheStatus.Loaded) {\n          let datalinkKeys: string = params['datalinkKeys'];\n          this.sourceDatalinkKeys = new Array<number>();\n          this.sourceDatalinks = new Array<DexihDatalink>();\n\n          if (datalinkKeys && this.hubCache.hub.dexihConnections) {\n            let datalinkKeyArray = datalinkKeys.split('|');\n            this.hubCache.hub.dexihDatalinks.forEach(datalink => {\n              if (datalinkKeyArray.findIndex(t => t === datalink.key.toString()) >= 0) {\n                this.sourceDatalinkKeys.push(datalink.key);\n                this.sourceDatalinks.push(datalink);\n              }\n            });\n          }\n\n          let targetConnection = this.hubCache.hub.dexihConnections.find(c => c.purpose === eConnectionPurpose.Managed);\n          if (targetConnection) {\n            this.targetConnectionKey = targetConnection.key;\n          }\n          this.sourceConnectionKey = this.targetConnectionKey;\n          this.auditConnectionKey = this.targetConnectionKey;\n\n          this.buildForm();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Datalink New');\n    }\n\n\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._valueChangesSubscription) { this._valueChangesSubscription.unsubscribe(); }\n    this.cancelToken.cancel();\n  }\n\n  buildForm(): void {\n    this.mainForm = this.fb.group({\n      'name': [this.name, [\n      ]],\n      'auditConnectionKey': [this.auditConnectionKey > 0 ? this.auditConnectionKey : null, [\n        // Validators.required,\n      ]],\n      'targetConnectionKey': [this.targetConnectionKey > 0 ? this.targetConnectionKey : null, [\n        // Validators.required,\n      ]],\n      'sourceConnectionKey': [this.sourceConnectionKey > 0 ? this.sourceConnectionKey : null, [\n        // Validators.required,\n      ]],\n      'snapshotData': [true, [\n        // Validators.required,\n      ]],\n    });\n\n    if (this._valueChangesSubscription) { this._valueChangesSubscription.unsubscribe(); }\n    this._valueChangesSubscription = this.mainForm.valueChanges.subscribe(data => this.onValueChanged(data));\n    this.onValueChanged(); // (re)set validation messages now\n    this.hasChanged = false;\n  }\n\n  onValueChanged(data?: any) {\n    if (!this.mainForm) { return; }\n    const form = this.mainForm;\n\n    this.hasChanged = true;\n\n    for (const field of Object.keys(this.formErrors)) {\n      // clear previous error message (if any)\n      this.formErrors[field] = '';\n      const control = form.get(field);\n\n      if (control && (control.dirty || this.showAllErrors) && !control.valid) {\n        const messages = this.validationMessages[field];\n        for (const key of Object.keys(control.errors)) {\n          this.formErrors[field] += messages[key] + ' ';\n        }\n      }\n    }\n  }\n\n  save() {\n    if (this.mainForm.valid) {\n      let value = this.mainForm.value;\n      this.saving = true;\n      this.hubService.newDatalinkTest(\n        this.name,\n        this.sourceDatalinkKeys,\n        value.auditConnectionKey,\n        value.targetConnectionKey,\n        value.sourceConnectionKey\n      ).then(async result => {\n        if (value.snapshotData) {\n          await this.hubService.runDatalinkTestSnapshot([result], this.cancelToken);\n        }\n          this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinkTests', 'datalinkTest-edit', result.key],\n            { relativeTo: this.route.root });\n      }).catch(reason => {\n        this.saving = false;\n      });\n    } else {\n      this.showAllErrors = true;\n      this.onValueChanged();\n    }\n  }\n\n  cancel() {\n    this.location.back();\n  }\n}\n","export * from './datalinkTest-index/datalinkTest-index.component';\nexport * from './datalinkTest-new/datalinkTest-new.component';\n","export * from './view-edit.component';\n","export * from './view-index.component';\n"]}