{"version":3,"sources":["./src/app/+hub/test/datalinkTest-edit/datalinkTest-edit-guard.ts","./src/app/+hub/test/datalinkTest-edit/datalinkTest-edit.component.ts","./src/app/+hub/test/datalinkTest-edit/datalinkTest-edit.component.html","./src/app/+hub/test/datalinkTest-edit/datalinkTest-edit.module.ts","./src/app/+hub/test/datalinkTest-edit/datalinkTest-edit.routing.ts","./src/app/+hub/test/datalinkTest-edit/properties/datalinkTest-properties.component.ts","./src/app/+hub/test/datalinkTest-edit/properties/datalinkTest-properties.component.html","./src/app/+hub/test/datalinkTest-edit/step-edit/datalinkTest-edit-step.component.ts","./src/app/+hub/test/datalinkTest-edit/step-edit/datalinkTest-edit-step.component.html"],"names":[],"mappings":"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","file":"4-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { CanDeactivate } from '@angular/router';\nimport { Observable, combineLatest} from 'rxjs';\n\nexport interface CanComponentDeactivate {\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\n}\n\n@Injectable()\nexport class DatalinkTestEditGuard implements CanDeactivate<CanComponentDeactivate> {\n\n  canDeactivate(component: CanComponentDeactivate) {\n    return component && component.canDeactivate ? component.canDeactivate() : true;\n  }\n\n}\n","import { HostListener, Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { HubService } from '../../hub.service';\nimport { AuthService } from '../../../+auth/auth.service';\nimport { Subscription, combineLatest} from 'rxjs';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { HubCache, eCacheStatus } from '../../hub.models';\nimport { DexihDatalinkTest } from '../../../shared/shared.models';\n\n@Component({\n  selector: 'dexih-datalinkTest-edit-form',\n  templateUrl: './datalinkTest-edit.component.html'\n})\nexport class DatalinkTestEditComponent implements OnInit, OnDestroy {\n  public datalinkTestKey: number;\n\n  public hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n  public params: Params;\n\n  private _subscription: Subscription;\n  private _formChangeSubscription: Subscription;\n  private _hubCacheChangeSubscription: Subscription;\n  private isLoaded = false;\n\n  constructor(private hubService: HubService,\n    public formsService: HubFormsService,\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.route.data,\n        this.route.params,\n        this.hubService.getHubCacheObservable(),\n      ).subscribe(result => {\n        let data = result[0];\n        this.params = result[1];\n        this.hubCache = result[2];\n\n        this.action = data['action'];\n        this.pageTitle = data['pageTitle'];\n\n        if (!this.hubCache || this.hubCache.status !== eCacheStatus.Loaded ) { return; }\n\n        if (this.isLoaded && this.action === 'new') { return; }\n\n        if (this.isLoaded && this.formsService.hasChanged) {\n            this.authService.confirmDialog('Synchronization warning',\n            'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')\n            .then(confirm => {\n                if (confirm) {\n                    this.load();\n                }\n            }).catch(reason => {\n                return;\n            });\n        } else {\n            this.load();\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'DatalinkTest Edit');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    if (this._subscription) { this._subscription.unsubscribe(); }\n    if (this._formChangeSubscription) { this._formChangeSubscription.unsubscribe(); }\n\n    this.formsService.ngOnDestroy();\n  }\n\n  load() {\n    this.isLoaded = true;\n\n    if (this.action === 'edit') {\n      // get the hub key from the route data, and update the service.\n      this.datalinkTestKey = + this.params['datalinkTestKey'];\n\n      if (!this.datalinkTestKey) {\n        this.hubService.addHubErrorMessage('There was no datalink test specified to edit.');\n      } else {\n        if (!this.hubCache.hub || !this.hubCache.hub.dexihDatalinkTests) {\n          this.hubService.addHubErrorMessage('The hub cache is not loaded.');\n        } else {\n\n          let datalinkTest = this.hubCache.hub.dexihDatalinkTests.find(c => c.key === this.datalinkTestKey);\n          if (!datalinkTest) {\n            this.hubService.addHubErrorMessage('The specified datalink test could not be found.');\n          } else {\n            this.formsService.datalinkTest(datalinkTest);\n          }\n        }\n      }\n    }\n\n    if (this.action === 'new') {\n        let  datalinkTest = new DexihDatalinkTest();\n        datalinkTest.key = 0;\n        this.formsService.datalinkTest(datalinkTest);\n\n        // update the url with the saved key\n        this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {\n          let key = form.controls.key.value;\n          if (key) {\n            if (history.pushState) {\n              let newUrl = window.location.pathname.replace('/datalinkTest-new', `/datalinkTest-edit/${key}`)\n              this.router.navigateByUrl(newUrl);\n              this._formChangeSubscription.unsubscribe();\n            }\n          }\n        });\n    }\n  }\n\n  public canDeactivate(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (this.formsService.hasChanged) {\n        this.authService.confirmDialog('The data job has not been saved',\n          'The datalink test changes have not been saved.  Do you want to discard the changes and exit?')\n          .then((confirm) => {\n              resolve(confirm);\n            }).catch(() => {\n              resolve(false);\n            });\n      } else {\n        resolve(true);\n      }\n    });\n  }\n\n  // @HostListener allows is to guard against browser refresh, close, etc.\n  @HostListener('window:beforeunload', ['$event'])\n  unloadNotification($event: any) {\n    if (this.formsService.hasChanged) {\n      $event.returnValue = 'The datalink test changes have not been saved.  Do you want to discard the changes and exit?';\n    }\n  }\n}\n","<div class=\"container\">\n    <d-widget title=\"Edit Datalink Test\" iconClass=\"fa fa-lg fa-fw fa-cog\">\n\n    <ng-template #header>\n            <dexih-invalid-form-details class=\"mr-1\" [control]=\"formsService.currentForm\" (click)=\"formsService.showErrors()\"></dexih-invalid-form-details>\n            <save-button *ngIf=\"hubCache.canWrite\"  class=\"mr-1\" [formsService]=\"formsService\"></save-button>\n            <cancel-button  class=\"mr-1\" [formsService]=\"formsService\"></cancel-button>\n        </ng-template>\n\n        <router-outlet></router-outlet>\n    </d-widget>\n</div>  \n\n\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routing } from './datalinkTest-edit.routing';\nimport { SharedModule } from '../../../shared/shared.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { DatalinkTestEditComponent } from './datalinkTest-edit.component';\nimport { DatalinkTestPropertiesComponent } from './properties/datalinkTest-properties.component';\nimport { DatalinkTestEditStepComponent } from './step-edit/datalinkTest-edit-step.component';\n\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DatalinkTestEditGuard } from './datalinkTest-edit-guard';\nimport { HubSharedModule } from '../../hub.shared.module';\n\n@NgModule({\n    imports: [\n        SharedModule,\n        CommonModule,\n        FormsModule,\n        Routing,\n        ReactiveFormsModule,\n        HubSharedModule\n    ],\n    declarations: [\n        DatalinkTestEditComponent,\n        DatalinkTestPropertiesComponent,\n        DatalinkTestEditStepComponent,\n    ],\n    providers: [ HubFormsService, DatalinkTestEditGuard ],\n    exports: []\n})\nexport class DatalinkTestEditModule {\n\n    static forRoot(): ModuleWithProviders<DatalinkTestEditModule> {\n        return {\n            ngModule: DatalinkTestEditModule,\n            providers: [ HubFormsService ]\n        };\n    }\n}\n","import { Routes, RouterModule } from '@angular/router';\nimport { DatalinkTestEditComponent } from './datalinkTest-edit.component';\nimport { DatalinkTestPropertiesComponent } from './properties/datalinkTest-properties.component';\nimport { DatalinkTestEditStepComponent } from './step-edit/datalinkTest-edit-step.component';\nimport { DatalinkTestEditGuard} from './datalinkTest-edit-guard';\n\nexport const editRoutes = [\n        { path: '', redirectTo: 'properties',  data: { navigateSkip: true}},\n        { path: 'properties', component: DatalinkTestPropertiesComponent, data: { navigateSkip: true, pageTitle: 'Properties' } },\n        { path: 'step', component: DatalinkTestEditStepComponent, data: { pageTitle: 'New Step' }  },\n        { path: 'step/:datalinkTestStepKey', component: DatalinkTestEditStepComponent, data: { pageTitle: 'Edit Step' }  },\n];\n\nexport const routes: Routes = [\n        { path: '', component: DatalinkTestEditComponent, canDeactivate: [DatalinkTestEditGuard], children: editRoutes},\n];\n\nexport const Routing = RouterModule.forChild(routes);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { HubService } from '../../../hub.service';\nimport { AuthService } from '../../../../+auth/auth.service';\nimport { Subscription, combineLatest, BehaviorSubject, Observable} from 'rxjs';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { FormGroup, FormArray } from '@angular/forms';\nimport { HubCache } from '../../../hub.models';\nimport { DexihDatalinkTestStep } from '../../../../shared/shared.models';\n\n@Component({\n\n  selector: 'datalinkTest-properties-form',\n  templateUrl: './datalinkTest-properties.component.html'\n})\nexport class DatalinkTestPropertiesComponent implements OnInit, OnDestroy {\n\n  private datalinkTestKey: number;\n\n  public hubCache: HubCache;\n  public action: string; // new or edit\n  public pageTitle: string;\n\n  private _subscription: Subscription;\n\n  public hasChanged = false;\n  public mainForm: FormGroup;\n\n  stepColumns = [\n    { name: 'name', title: 'Name', format: '' },\n    { name: 'datalink', title: 'Datalink', format: '' },\n    { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    { name: 'errors', title: 'Errors', format: '' },\n  ];\n\n  private _stepTableData = new BehaviorSubject<Array<any>>(null);\n  stepTableData: Observable<Array<any>> = this._stepTableData.asObservable();\n\n  constructor(private hubService: HubService,\n    private authService: AuthService,\n    public formsService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest(\n        this.hubService.getHubCacheObservable(),\n        this.formsService.getCurrentFormObservable(),\n      ).subscribe(result => {\n        this.hubCache = result[0];\n        this.mainForm = result[1];\n\n        this.updateSteps();\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Data Job Edit Properties');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n  }\n\n  updateSteps() {\n    let stepData = [];\n    if (this.mainForm) {\n      let steps = (<FormArray>this.mainForm.controls['dexihDatalinkTestSteps']);\n      steps.controls.forEach(stepControl => {\n        let step = <DexihDatalinkTestStep> stepControl.value;\n        let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === step.datalinkKey);\n        stepData.push({\n          key: step.key,\n          name: step.name,\n          datalink: datalink ? datalink.name : 'Not specified',\n          updateDate: step.updateDate,\n          errors: stepControl.valid ? 'No errors' : 'Errors'\n        });\n      });\n    }\n\n    this._stepTableData.next(stepData);\n  }\n\n  newStep() {\n    this.router.navigate(['step'], { relativeTo: this.route.parent });\n  }\n\n  editStep(step: DexihDatalinkTestStep) {\n    this.router.navigate(['step', step.key], { relativeTo: this.route.parent });\n  }\n\n\n  deleteSteps(steps: Array<DexihDatalinkTestStep>) {\n    let stepsArray = <FormArray>this.mainForm.controls.dexihDatalinkTestSteps;\n\n    steps.forEach(step => {\n      let index = stepsArray.controls.findIndex(c => c.value.datalinkTestStepKey === step.key);\n      stepsArray.removeAt(index);\n    });\n    this.updateSteps();\n  }\n\n  close() {\n    this.authService.navigateUp();\n  }\n\n}\n","<div class=\"list-group-item list-group-item-info  rounded-0\">\n\t<div class=\"d-flex flex-row\">\n\t\t<h5>Properties</h5>\n\t</div>\n</div>\n\n<div class=\"list-group-item p-3\">\n\n\t<form *ngIf=\"mainForm\" [formGroup]=\"mainForm\">\n\t\t<fieldset>\n\n\t\t\t<section>\n\t\t\t\t<form-input label=\"Test Name\" formControlName=\"name\" placeholder=\"Enter the name.\" [autocapitalize]=\"on\" iconClass=\"fa fa-list\" [errors]=\"formsService.formErrors['name']\">\n\t\t\t\t</form-input>\n\t\t\t</section>\n\n\t\t\t<section>\n\t\t\t\t<form-textarea label=\"Description\" formControlName=\"description\" placeholder=\"Enter a description\" iconClass=\"fa fa-comment\"\n\t\t\t\t [errors]=\"formsService.formErrors['description']\">\n\t\t\t\t</form-textarea>\n\t\t\t</section>\n\n\t\t\t<section>\n\t\t\t\t<form-select label=\"Audit Connection\" formControlName=\"auditConnectionKey\" [items]=\"hubCache.hub.dexihConnections\"\n\t\t\t\t\titemKey=\"key\" itemName=\"name\" [errors]=\"formsService.formErrors.auditConnectionKey\" iconClass=\"fa fa-database\"\n\t\t\t\t\tnote=\"Connection where test results are stored.\">\n\t\t\t\t\t<connection-edit-button [key]=\"mainForm.controls.auditConnectionKey.value\"></connection-edit-button>\n\t\t\t\t</form-select>\n\t\t\t</section>\n\t\t</fieldset>\n\t</form>\n\n</div>\n\n<div class=\"list-group-item list-group-item-info  rounded-0\">\n\t<div class=\"d-flex flex-row\">\n\t\t<h5>Steps</h5>\n\t</div>\n</div>\n<div class=\"list-group-item p-0\">\n\t<d-table [enableMultiSelect]=\"true\" [enableManualSort]=\"true\" sortColumn=\"position\" [columns]=\"stepColumns\"\n\t [dataObservable]=\"stepTableData\" (rowClick)='editStep($event)'>\n\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t<d-button-delete (click)=\"deleteSteps(items)\"></d-button-delete>\n\t\t</ng-template>\n\n\t\t<ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n\t\t\t<d-button-edit (click)=\"editStep(item)\"></d-button-edit>\n\t\t</ng-template>\n\n\t\t<ng-template #actions select=\"actionsTemplate\" let-items=\"items\">\n\t\t\t<d-button-new class=\"mr-1\" (click)=\"newStep()\" title=\"Create a new step\"></d-button-new>\n\t\t</ng-template>\n\t</d-table>\n</div>","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { HubService } from '../../../hub.service';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { FormGroup, FormArray, FormBuilder } from '@angular/forms';\nimport { AuthService } from '../../../../+auth/auth.service';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { HubCache } from '../../../hub.models';\nimport { DexihDatalinkTestStep } from '../../../../shared/shared.models';\n\n@Component({\n    selector: 'datalinkTest-edit-step',\n    templateUrl: './datalinkTest-edit-step.component.html'\n})\nexport class DatalinkTestEditStepComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n    private _formChanges: Subscription;\n\n    public hubCache: HubCache;\n\n    private datalinkTestStepKey: number;\n    datalinkTestKey: number;\n\n    datalinkTestForm: FormGroup;\n\n    targetTableName: string;\n    inputTableNames: string[];\n\n    stepFormService: HubFormsService;\n    showAllErrors = false;\n\n    stepColumns = [\n        { name: 'name', title: 'Name', format: '' },\n        { name: 'datalink', title: 'Datalink', format: '' },\n        { name: 'dependencies', title: 'Dependencies', format: '' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _stepTableData = new BehaviorSubject<Array<any>>(null);\n    stepTableData: Observable<Array<any>> = this._stepTableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private formService: HubFormsService,\n        private route: ActivatedRoute,\n        private fb: FormBuilder) {\n\n        // create a separate formService instance to manage the copied form\n        this.stepFormService = new HubFormsService(fb, hubService, authService);\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest(\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n                this.formService.getCurrentFormObservable(),\n            ).subscribe(result => {\n                let params = result[1];\n                this.hubCache = result[2];\n                let mainForm = result[3];\n\n                this.datalinkTestStepKey = +params['datalinkTestStepKey'];\n\n                if (mainForm) {\n                    this.datalinkTestForm = mainForm;\n                    let step: DexihDatalinkTestStep;\n\n                    if (this.datalinkTestStepKey) {\n                        step = mainForm.value.dexihDatalinkTestSteps\n                            .find(c => c.key === this.datalinkTestStepKey);\n\n                        if (!step) {\n                            this.authService.navigateUp();\n                            return;\n                        }\n                    } else {\n                        step = new DexihDatalinkTestStep();\n                        // if new trigger, then set a temporary key of -1 or lower.\n                        let minKey = -1;\n                        this.datalinkTestForm.value.dexihDatalinkTestSteps.forEach(t => {\n                            if (t.key <= minKey) {\n                                minKey = t.key - 1;\n                            }\n                        });\n                        step.key = minKey;\n                        this.datalinkTestStepKey = minKey;\n                        step.isValid = true;\n                    }\n\n                    this.updateTableNames(step);\n\n                    const stepForm = this.stepFormService.datalinkTestStep(step);\n                    this._formChanges = stepForm.controls.datalinkKey.valueChanges.subscribe(datalinkKey => {\n                        this.updateTableNames(stepForm.value);\n                    });\n\n                    this.stepFormService.startForm(stepForm);\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'DatalinkTest Edit Step');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n    }\n\n    private updateTableNames(step: DexihDatalinkTestStep) {\n        this.inputTableNames = step.dexihDatalinkTestTables.map(tt => {\n            let table = this.hubCache.getTable(tt.tableKey);\n            if (table) {\n                return table.name;\n            } else {\n                return 'Table not found.';\n            }\n        });\n\n        this.targetTableName = 'No target defined.';\n        if (step.datalinkKey) {\n            let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key ===  step.datalinkKey);\n            if (datalink && datalink.dexihDatalinkTargets.length > 0) {\n                this.targetTableName = datalink.dexihDatalinkTargets.map(c => this.hubCache.getTable(c.tableKey).name).join(', ');\n            }\n        }\n    }\n\n    cancel() {\n        this.authService.navigateUp();\n    }\n\n    applyExit() {\n        const stepForm = this.stepFormService.currentForm;\n        const stepsArray = <FormArray>this.datalinkTestForm.controls.dexihDatalinkTestSteps;\n\n        const index = stepsArray.controls\n            .findIndex(c => c.value.key === this.datalinkTestStepKey && c.value.isValid);\n\n        if (index < 0) {\n            stepsArray.push(stepForm);\n        } else {\n            stepsArray.removeAt(index);\n            stepsArray.push(stepForm);\n        }\n\n        this.authService.navigateUp();\n    }\n}\n","<div *ngIf=\"stepFormService.currentForm\">\n<div class=\"list-group-item list-group-item-info rounded-0\">\n\t<div class=\"d-flex flex-row\">\n\t\t<h5>Step Properties</h5>\n\t\t<div class=\"ml-auto\">\n\t\t\t<d-button-apply class=\"mr-1\" [disabled]=\"!stepFormService.hasChanged\" (click)=\"applyExit()\"></d-button-apply>\n\t\t\t<d-button-cancel (click)=\"cancel()\"></d-button-cancel>\n\t\t</div>\n\t</div>\n</div>\n\n<div class=\"list-group-item\" >\n\t<form [formGroup]=\"stepFormService.currentForm\">\n\t\t<fieldset>\n\t\t\t<section>\n\t\t\t\t<form-input label=\"Data Step Name\" formControlName=\"name\" placeholder=\"Enter the step name.\" [autocapitalize]=\"true\" iconClass=\"fa fa-list\"\n\t\t\t\t [errors]=\"stepFormService.formErrors.name\" note=\"Enter a name for the data step, blank will use datalink name.\">\n\t\t\t\t</form-input>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<form-textarea label=\"Description\" formControlName=\"description\" [showPreview]=\"true\" [isHidden]=\"true\" placeholder=\"Enter a description\" iconClass=\"fa fa-comment\"\n\t\t\t\t [errors]=\"stepFormService.formErrors['description']\">\n\t\t\t\t</form-textarea>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<form-select label=\"Data Link\" formControlName=\"datalinkKey\" [items]=\"hubCache.hub.dexihDatalinks\" itemKey=\"key\"\n\t\t\t\t itemName=\"name\" [errors]=\"stepFormService.formErrors.datalinkKey\" iconClass=\"fa fa-database\">\n\t\t\t\t <datalink-edit-button [key]=\"stepFormService.currentForm.controls.datalinkKey?.value\"></datalink-edit-button>\n\t\t\t\t</form-select>\n\t\t\t</section>\n\t\t</fieldset>\n\t</form>\n</div>\n\n<div class=\"list-group-item list-group-item-info rounded-0\">\n\t<div class=\"d-flex flex-row\">\n\t\t<h5>Target Table: {{targetTableName}}</h5>\n\t\t<div class=\"ml-auto\">\n\t\t\t<d-button-apply class=\"mr-1\" [disabled]=\"!stepFormService.hasChanged\" (click)=\"applyExit()\"></d-button-apply>\n\t\t\t<d-button-cancel (click)=\"cancel()\"></d-button-cancel>\n\t\t</div>\n\t</div>\n</div>\n<div class=\"list-group-item\" *ngIf=\"stepFormService.currentForm\">\n\t<form [formGroup]=\"stepFormService.currentForm\">\n\t\t<fieldset>\n\t\t\t<section>\n\t\t\t\t<form-select label=\"Target Connection\" formControlName=\"targetConnectionKey\" [items]=\"hubCache.hub.dexihConnections\"\n\t\t\t\t itemKey=\"key\" itemName=\"name\" [errors]=\"stepFormService.formErrors.targetConnectionKey\" iconClass=\"fa fa-database\"\n\t\t\t\t note=\"Connection for the datalink target table\">\n\t\t\t\t <connection-edit-button [key]=\"stepFormService.currentForm.controls.targetConnectionKey?.value\"></connection-edit-button>\n\t\t\t\t</form-select>\n\t\t\t</section>\n\t\t\t<div class=\"form-row\">\n\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t<form-input label=\"Target Table Name\" formControlName=\"targetTableName\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\"\n\t\t\t\t\t [errors]=\"stepFormService.formErrors['targetTableName']\" note=\"Name of target table\">\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t<form-input label=\"Target Table Schema\" formControlName=\"targetSchema\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\"\n\t\t\t\t\t [errors]=\"stepFormService.formErrors['targetSchema']\">\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t\t<section>\n\t\t\t\t<form-select label=\"Expected Connection\" formControlName=\"expectedConnectionKey\" [items]=\"hubCache.hub.dexihConnections\"\n\t\t\t\t itemKey=\"key\" itemName=\"name\" [errors]=\"stepFormService.formErrors.expectedConnectionKey\" iconClass=\"fa fa-database\"\n\t\t\t\t note=\"Connection where the expected target data is.\">\n\t\t\t\t <connection-edit-button [key]=\"stepFormService.currentForm.controls.expectedConnectionKey?.value\"></connection-edit-button>\n\t\t\t\t</form-select>\n\t\t\t</section>\n\t\t\t<div class=\"form-row\">\n\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t<form-input label=\"Expected Table Name\" formControlName=\"expectedTableName\" placeholder=\"Enter the name.\"\n\t\t\t\t\t iconClass=\"fa fa-list\" [errors]=\"stepFormService.formErrors['expectedTableName']\">\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t<form-input label=\"Expected Table Schema\" formControlName=\"expectedSchema\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\"\n\t\t\t\t\t [errors]=\"stepFormService.formErrors['expectedSchema']\">\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t\t<section>\n\t\t\t\t<form-select label=\"Error Connection\" formControlName=\"errorConnectionKey\" [items]=\"hubCache.hub.dexihConnections\"\n\t\t\t\t itemKey=\"key\" itemName=\"name\" [errors]=\"stepFormService.formErrors.errorConnectionKey\" iconClass=\"fa fa-database\"\n\t\t\t\t note=\"Connection where the error data should be sent.\">\n\t\t\t\t <connection-edit-button [key]=\"stepFormService.currentForm.controls.errorConnectionKey?.value\"></connection-edit-button>\n\t\t\t\t</form-select>\n\t\t\t</section>\n\t\t\t<div class=\"form-row\">\n\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t<form-input label=\"Error Table Name\" formControlName=\"errorTableName\" placeholder=\"Enter the name.\"\n\t\t\t\t\t iconClass=\"fa fa-list\" [errors]=\"stepFormService.formErrors['errorTableName']\">\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t<form-input label=\"Error Table Schema\" formControlName=\"errorSchema\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\"\n\t\t\t\t\t [errors]=\"stepFormService.formErrors['errorSchema']\">\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t</fieldset>\n\t</form>\n</div>\n\n<div *ngFor=\"let testTable of stepFormService.currentForm.controls.dexihDatalinkTestTables.controls; let i = index;\">\n\t<div class=\"list-group-item list-group-item-info rounded-0\">\n\t\t<div class=\"d-flex flex-row\">\n\t\t\t<h5>Source Table: {{inputTableNames[i]}}</h5>\n\t\t\t<div class=\"ml-auto\">\n\t\t\t\t<d-button-apply class=\"mr-1\" [disabled]=\"!stepFormService.hasChanged\" (click)=\"applyExit()\"></d-button-apply>\n\t\t\t\t<d-button-cancel (click)=\"cancel()\"></d-button-cancel>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class=\"list-group-item\" *ngIf=\"stepFormService.currentForm\">\n\t\t<form [formGroup]=\"testTable\">\n\t\t\t<fieldset>\n\t\t\t\t<section>\n\t\t\t\t\t<form-select label=\"Source Connection\" formControlName=\"sourceConnectionKey\" [items]=\"hubCache.hub.dexihConnections\"\n\t\t\t\t\t itemKey=\"key\" itemName=\"name\" [errors]=\"stepFormService.formErrors.sourceConnectionKey\" iconClass=\"fa fa-database\"\n\t\t\t\t\t note=\"Connection where the source test data is.\">\n\t\t\t\t\t <connection-edit-button [key]=\"stepFormService.currentForm.controls.sourceConnectionKey?.value\"></connection-edit-button>\n\t\t\t\t\t</form-select>\n\t\t\t\t</section>\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Source Table Name\" formControlName=\"sourceTableName\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\t [errors]=\"stepFormService.formErrors['sourceTableName']\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Source Table Schema\" formControlName=\"sourceSchema\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\t [errors]=\"stepFormService.formErrors['sourceSchema']\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t\t<section>\n\t\t\t\t\t<form-select label=\"Test Connection\" formControlName=\"testConnectionKey\" [items]=\"hubCache.hub.dexihConnections\"\n\t\t\t\t\t itemKey=\"key\" itemName=\"name\" [errors]=\"stepFormService.formErrors.testConnectionKey\" iconClass=\"fa fa-database\"\n\t\t\t\t\t note=\"Connection where the test data is.\">\n\t\t\t\t\t <connection-edit-button [key]=\"stepFormService.currentForm.controls.testConnectionKey?.value\"></connection-edit-button>\n\t\t\t\t\t</form-select>\n\t\t\t\t</section>\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Test Table Name\" formControlName=\"testTableName\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\t [errors]=\"stepFormService.formErrors['testTableName']\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t\t<form-input label=\"Test Table Schema\" formControlName=\"testSchema\" placeholder=\"Enter the name.\" iconClass=\"fa fa-list\"\n\t\t\t\t\t\t [errors]=\"stepFormService.formErrors['testSchema']\">\n\t\t\t\t\t\t</form-input>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\t\t</form>\n\t</div>\n</div>\n</div>"],"sourceRoot":"webpack:///"}