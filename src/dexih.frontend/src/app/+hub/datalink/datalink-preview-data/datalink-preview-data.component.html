<div class="container-fluid">
    <dexih-widget [title]="title" iconClass="fa fa-lg fa-fw fa-table" [showCloseButton]="true" (close)="close()">
        <dexih-table [enableMultiSelect]="false" [enableSaveCsv]="true" [csvFileName]="csvFileName" [columns]="columns" [data]="data" [hideTable]="showChart">

            <ng-template #actions let-items="items">
                <dexih-button-refresh class="mr-1" (click)="refresh()" text="Reload"></dexih-button-refresh>
                <download-button class="ml-1" (download)="download($event)"></download-button>
                <dexih-button  class="ml-1" iconClass="fa fa-line-chart" (click)="showChart = !showChart" text="Chart" ></dexih-button>
                <dexih-button-save class="ml-1"  (click)="save()"></dexih-button-save>
            </ng-template>

            <ng-template #tableHeader>
                <h5>Data Configuration</h5>
                <query-builder [selectQuery]="selectQuery" [columns]="tableColumns" [inputColumns]="inputColumns"></query-builder>
                <div [ngStyle]="{'display': showChart ? 'block' : 'none' }" class="mt-1">
                    <h5>Chart Configuration</h5>
                    <chart-builder [columns]="columns" [data]="data" [config]="chartConfig"></chart-builder>
                </div>
            </ng-template>

        </dexih-table>

    </dexih-widget>
</div>