(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[6],{

/***/ "./src/app/+hub/api/api-edit/api-edit.component.ts":
/*!*********************************************************!*\
  !*** ./src/app/+hub/api/api-edit/api-edit.component.ts ***!
  \*********************************************************/
/*! exports provided: ApiEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApiEditComponent", function() { return ApiEditComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _hub_lineage_models__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../hub.lineage.models */ "./src/app/+hub/hub.lineage.models.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _shared_ui_queryBuilder_query_builder_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/ui/queryBuilder/query-builder.component */ "./src/app/shared/ui/queryBuilder/query-builder.component.ts");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component */ "./src/app/shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component.ts");
/* harmony import */ var _shared_ui_icons_download_button_download_button_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../shared/ui/icons/download-button/download-button.component */ "./src/app/shared/ui/icons/download-button/download-button.component.ts");
/* harmony import */ var _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../buttons/cancel-button/cancel-button.component */ "./src/app/+hub/buttons/cancel-button/cancel-button.component.ts");
/* harmony import */ var _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../buttons/save-button/save-button.component */ "./src/app/+hub/buttons/save-button/save-button.component.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _buttons_table_edit_button_table_edit_button_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../buttons/table-edit-button/table-edit-button.component */ "./src/app/+hub/buttons/table-edit-button/table-edit-button.component.ts");
/* harmony import */ var _buttons_datalink_edit_button_datalink_edit_button_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../buttons/datalink-edit-button/datalink-edit-button.component */ "./src/app/+hub/buttons/datalink-edit-button/datalink-edit-button.component.ts");
/* harmony import */ var _widgets_input_parameters_input_parameters_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../widgets/input-parameters/input-parameters.component */ "./src/app/+hub/widgets/input-parameters/input-parameters.component.ts");




























function ApiEditComponent_ng_template_2_save_button_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "save-button", 16);
} if (rf & 2) {
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r7.formsService);
} }
function ApiEditComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "dexih-invalid-form-details", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ApiEditComponent_ng_template_2_Template_dexih_invalid_form_details_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9); const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r8.formsService.showErrors(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "download-button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("download", function ApiEditComponent_ng_template_2_Template_download_button_download_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9); const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r10.download($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ApiEditComponent_ng_template_2_save_button_2_Template, 1, 1, "save-button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "cancel-button", 15);
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r1.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r1.formsService);
} }
function ApiEditComponent_form_5_section_22_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-select", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "table-edit-button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r11.errors == null ? null : ctx_r11.errors.sourceTableKey)("items", ctx_r11.connectionTables);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", ctx_r11.formsService.currentForm.controls.sourceTableKey.value);
} }
function ApiEditComponent_form_5_section_23_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-select", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "datalink-edit-button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r12.errors == null ? null : ctx_r12.errors.sourceDatalinkKey)("items", ctx_r12.datalinks);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", ctx_r12.formsService.currentForm.controls.sourceDatalinkKey.value);
} }
function ApiEditComponent_form_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "form-input", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "form-textarea", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "section", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "form-checkbox", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "section", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](11, "form-input", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "section", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](15, "form-checkbox", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "section", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](17, "form-time", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](18, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](19, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](20, "section", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](21, "form-select", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](22, ApiEditComponent_form_5_section_22_Template, 3, 3, "section", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](23, ApiEditComponent_form_5_section_23_Template, 3, 3, "section", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r2.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autocapitalize", true)("errors", ctx_r2.formsService.formErrors["name"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showPreview", true)("isHidden", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r2.formsService.formErrors["logDirectory"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r2.formsService.formErrors["resetCacheInterval"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r2.sourceTypes)("enableFilter", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.formsService.currentForm.value.sourceType == ctx_r2.eSourceType.Table);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.formsService.currentForm.value.sourceType == ctx_r2.eSourceType.Datalink);
} }
function ApiEditComponent_d_widget_section_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-widget-section", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "input-parameters", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showExpandButton", true)("padding", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showEdit", true)("parameters", ctx_r3.formsService.currentForm.controls.parameters)("formsService", ctx_r3.formsService);
} }
function ApiEditComponent_div_8_span_1_Template(rf, ctx) { if (rf & 1) {
    const _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "form-input", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ApiEditComponent_div_8_span_1_Template_form_input_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); const column_r14 = ctx.$implicit; return column_r14.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const column_r14 = ctx.$implicit;
    const i_r15 = ctx.index;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", column_r14.logicalName, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("name", "column", i_r15, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("placeholder", "Enter " + column_r14.logicalName)("ngModel", column_r14.value);
} }
function ApiEditComponent_div_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ApiEditComponent_div_8_span_1_Template, 5, 4, "span", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r4.inputColumns);
} }
function ApiEditComponent_ng_template_14_Template(rf, ctx) { if (rf & 1) {
    const _r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-refresh", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ApiEditComponent_ng_template_14_Template_d_button_refresh_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r20); const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r19.refresh(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
class ApiEditComponent {
    constructor(hubService, authService, formsService, route, router) {
        this.hubService = hubService;
        this.authService = authService;
        this.formsService = formsService;
        this.route = route;
        this.router = router;
        this.refreshDataSubject = new rxjs__WEBPACK_IMPORTED_MODULE_4__["Subject"]();
        this.refreshDataObservable = this.refreshDataSubject.asObservable();
        this.sourceTypes = [
            { key: _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["eSourceType"].Datalink, name: 'Datalink' },
            { key: _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["eSourceType"].Table, name: 'Table' }
        ];
        this.eSourceType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["eSourceType"];
        this.connectionTables = [];
        this.datalinks = [];
        this.selectQuery = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["SelectQuery"]();
        this.data = [];
        this.isLoaded = false;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_8__["CancelToken"]();
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable()).subscribe(result => {
                let data = result[0];
                this.params = result[1];
                this.hubCache = result[2];
                this.action = data['action'];
                this.pageTitle = data['pageTitle'];
                if (!this.hubCache || this.hubCache.status !== _hub_models__WEBPACK_IMPORTED_MODULE_2__["eCacheStatus"].Loaded) {
                    return;
                }
                if (this.hubCache && this.hubCache.isLoaded()) {
                    this.connectionTables = this.hubCache.getConnectionTables();
                    this.datalinks = this.hubCache.hub.dexihDatalinks;
                }
                if (this.isLoaded && this.action === 'new') {
                    return;
                }
                if (this.isLoaded && this.formsService.hasChanged) {
                    this.authService.confirmDialog('Synchronization warning', 'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')
                        .then(confirm => {
                        if (confirm) {
                            this.load();
                        }
                    }).catch(reason => {
                        return;
                    });
                }
                else {
                    this.load();
                }
                if (this.hubCache.isLoaded()) {
                    if (!this.hubCache || this.hubCache.status !== _hub_models__WEBPACK_IMPORTED_MODULE_2__["eCacheStatus"].Loaded || this.isLoaded) {
                        return;
                    }
                    this.isLoaded = true;
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Api Edit');
        }
    }
    load() {
        if (this.action === 'edit') {
            // get the hub key from the route data, and update the service.
            this.apiKey = +this.params['apiKey'];
            if (!this.apiKey) {
                this.hubService.addHubErrorMessage('There was no api specified to edit.');
            }
            else {
                if (!this.hubCache.hub || !this.hubCache.hub.dexihApis) {
                    this.hubService.addHubErrorMessage('The hub cache is not loaded.');
                }
                else {
                    let api = this.hubCache.hub.dexihApis.find(c => c.key === this.apiKey);
                    this.selectQuery = api.selectQuery;
                    if (!this.selectQuery) {
                        this.selectQuery = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["SelectQuery"]();
                    }
                    this.formsService.api(api);
                    this.watchChanges();
                    this.getColumns();
                    // this.refresh();
                }
            }
        }
        if (this.action === 'new') {
            let api = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["DexihApi"]();
            this.formsService.api(api);
            this.watchChanges();
            // update the url with the saved key
            this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {
                let key = form.controls.key.value;
                if (key) {
                    if (history.pushState) {
                        let newUrl = window.location.pathname.replace('/api-new', `/api-edit/${key}`);
                        this.router.navigateByUrl(newUrl);
                        this._formChangeSubscription.unsubscribe();
                    }
                }
            });
        }
    }
    watchChanges() {
        if (this._changesSubscription) {
            this._changesSubscription.unsubscribe();
        }
        this._changesSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["merge"])(this.formsService.currentForm.controls.sourceDatalinkKey.valueChanges, this.formsService.currentForm.controls.sourceTableKey.valueChanges).subscribe(() => {
            this.reset();
            this.selectQuery = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["SelectQuery"]();
            this.getColumns();
            //    this.refresh();
        });
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._formChangeSubscription) {
            this._formChangeSubscription.unsubscribe();
        }
        if (this._changesSubscription) {
            this._changesSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    close() {
        this.authService.navigateUp();
    }
    getColumns() {
        let apiForm = this.formsService.currentForm;
        if (apiForm.controls.sourceType.value === _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["eSourceType"].Table && apiForm.controls.sourceTableKey.value > 0) {
            let table = this.hubCache.getTable(apiForm.controls.sourceTableKey.value);
            if (table) {
                this.tableColumns = table.dexihTableColumns;
                this.inputColumns = this.getInputColumns(table.dexihTableColumns);
                return;
            }
            else {
                this.reset();
            }
        }
        else {
            this.reset();
        }
        if (apiForm.controls.sourceType.value === _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["eSourceType"].Datalink && apiForm.controls.sourceDatalinkKey.value > 0) {
            let datalink = this.datalinks.find(c => c.key === apiForm.controls.sourceDatalinkKey.value);
            if (datalink) {
                const ioColumns = new _hub_lineage_models__WEBPACK_IMPORTED_MODULE_7__["InputOutputColumns"]();
                ioColumns.buildInputOutput(datalink);
                this.tableColumns = ioColumns.getDatalinkOutputColumns(datalink);
                this.inputColumns = this.getInputColumns(datalink.sourceDatalinkTable.dexihDatalinkColumns);
            }
            else {
                this.reset();
            }
        }
        else {
            this.reset();
        }
    }
    getInputColumns(columns) {
        let inputColumns = columns.filter(c => c.isInput).map(c => {
            return {
                name: c.name, logicalName: c.logicalName, dataType: c.dataType, rank: c.rank, value: c.defaultValue
            };
        });
        return inputColumns;
    }
    reset() {
        this.tableColumns = [];
        this.inputColumns = [];
        this.columns = null;
        this.data = null;
    }
    refresh() {
        let apiForm = this.formsService.currentForm;
        if (apiForm.controls.sourceType.value === _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["eSourceType"].Datalink) {
            this.hubService.previewDatalinkKeyData(apiForm.controls.sourceDatalinkKey.value, false, this.selectQuery, this.inputColumns, apiForm.controls.parameters.value, this.cancelToken).then((result) => {
                this.refreshDataSubject.next();
                this.columns = result.columns;
                this.data = result.data;
            }).catch(() => {
            });
        }
        if (apiForm.controls.sourceType.value === _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["eSourceType"].Table) {
            this.hubService.previewTableKeyData(apiForm.controls.sourceTableKey.value, false, this.selectQuery, this.inputColumns, apiForm.controls.parameters.value, this.cancelToken).then((result) => {
                this.columns = result.columns;
                this.data = result.data;
            }).catch(() => {
            });
        }
    }
    download(format) {
        let api = this.formsService.currentForm.value;
        let downloadObject = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["DownloadObject"]();
        if (api.sourceType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["eSourceType"].Table) {
            downloadObject.objectKey = api.sourceDatalinkKey;
            downloadObject.objectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["eDataObjectType"].Datalink;
        }
        if (api.sourceType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["eSourceType"].Table) {
            downloadObject.objectKey = api.sourceTableKey;
            downloadObject.objectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_9__["eDataObjectType"].Table;
        }
        downloadObject.query = this.selectQuery;
        this.hubService.downloadData([downloadObject], false, format, this.cancelToken);
    }
    canDeactivate() {
        return new Promise((resolve) => {
            if (this.formsService.hasChanged) {
                this.authService.confirmDialog('The api has not been saved', 'The api changes have not been saved.  Do you want to discard the changes and exit?')
                    .then((confirm) => {
                    resolve(confirm);
                }).catch(() => {
                    resolve(false);
                });
            }
            else {
                resolve(true);
            }
        });
    }
    // @HostListener allows is to guard against browser refresh, close, etc.
    unloadNotification($event) {
        if (this.formsService.hasChanged) {
            $event.returnValue = 'The api changes have not been saved.  Do you want to discard the changes and exit?';
        }
    }
}
ApiEditComponent.ɵfac = function ApiEditComponent_Factory(t) { return new (t || ApiEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_6__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_5__["HubFormsService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"])); };
ApiEditComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ApiEditComponent, selectors: [["dexih-api-edit-form"]], hostBindings: function ApiEditComponent_HostBindings(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("beforeunload", function ApiEditComponent_beforeunload_HostBindingHandler($event) { return ctx.unloadNotification($event); }, false, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresolveWindow"]);
    } }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([_hub_forms_service__WEBPACK_IMPORTED_MODULE_5__["HubFormsService"]])], decls: 17, vars: 16, consts: [[1, "container"], ["title", "Edit API", "iconClass", "fa fa-lg fa-fw fa-feed", 3, "showCloseButton", "padding", "close"], ["header", ""], ["title", "Properties", 3, "showExpandButton"], [3, "formGroup", 4, "ngIf"], ["title", "Parameters", 3, "showExpandButton", "padding", 4, "ngIf"], ["title", "Data", 3, "showExpandButton"], ["class", "d-flex flex-wrap pt-1", 4, "ngIf"], [3, "selectQuery", "columns", "inputColumns", "parameters", "refreshEvent", "onRefreshData"], [3, "enableMultiSelect", "enableSaveCsv", "columns", "data"], ["actions", ""], ["title", "Connections", "path", "/assets/help/reference/api.md", 1, "m-3"], [1, "mr-1", 3, "control", "click"], [1, "mr-1", 3, "download"], ["class", "mr-1", 3, "formsService", 4, "ngIf"], [3, "formsService"], [1, "mr-1", 3, "formsService"], [3, "formGroup"], ["label", "Api Name", "formControlName", "name", "placeholder", "Enter the api name.", "iconClass", "fa fa-list", 3, "autocapitalize", "errors"], ["label", "Description", "formControlName", "description", "placeholder", "Enter the description.", 3, "showPreview", "isHidden"], [1, "form-row"], [1, "form-group", "col-md-6"], ["label", "Auto Start", "formControlName", "autoStart", "note", "Re-start the API when the remote agent is restarted."], ["label", "Log Directory", "formControlName", "logDirectory", "placeholder", "Enter a directory to log api updates.", "iconClass", "fa fa-list", "note", "Directory to create detailed logs of API calls.  Leave blank to exclude file logging.", 3, "errors"], ["label", "Cache Queries", "formControlName", "cacheQueries", "note", "Cache API called to improve performance"], ["label", "Reset Cache Interval", "formControlName", "cacheResetInterval", "note", "The interval to reset the cache (forcing a reload of new data).", 3, "errors"], ["label", "Data Source Type", "formControlName", "sourceType", "itemKey", "key", "itemName", "name", "iconClass", "fa fa-database", "note", "Specify the source type for this view", 3, "items", "enableFilter"], ["class", "form-group col-md-6", 4, "ngIf"], ["label", "Source Table", "formControlName", "sourceTableKey", "parentName", "name", "childItems", "dexihTables", "itemKey", "key", "itemName", "logicalName", "note", "Select the source table", 3, "errors", "items"], [3, "key"], ["label", "Source Datalink", "formControlName", "sourceDatalinkKey", "itemKey", "key", "itemName", "name", "note", "Select the source datalink", 3, "errors", "items"], ["title", "Parameters", 3, "showExpandButton", "padding"], [3, "showEdit", "parameters", "formsService"], [1, "d-flex", "flex-wrap", "pt-1"], ["class", "input-group", 4, "ngFor", "ngForOf"], [1, "input-group"], [1, "input-group-prepend"], [1, "input-group-text"], [1, "form-control", "p-0", 3, "name", "placeholder", "ngModel", "ngModelChange"], ["text", "Reload", 1, "mr-1", 3, "click"]], template: function ApiEditComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ApiEditComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ApiEditComponent_ng_template_2_Template, 4, 3, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "d-widget-section", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ApiEditComponent_form_5_Template, 24, 11, "form", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, ApiEditComponent_d_widget_section_6_Template, 2, 5, "d-widget-section", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "d-widget-section", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, ApiEditComponent_div_8_Template, 2, 1, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "section");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "h5");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11, "Data Configuration");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "query-builder", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("onRefreshData", function ApiEditComponent_Template_query_builder_onRefreshData_12_listener() { return ctx.refresh(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "d-table", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](14, ApiEditComponent_ng_template_14_Template, 1, 0, "ng-template", null, 10, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](16, "dexih-help", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", false);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showExpandButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.formsService.currentForm);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.formsService.currentForm);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showExpandButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.inputColumns && ctx.inputColumns.length > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("selectQuery", ctx.selectQuery)("columns", ctx.tableColumns)("inputColumns", ctx.inputColumns)("parameters", ctx.formsService == null ? null : ctx.formsService.currentForm == null ? null : ctx.formsService.currentForm.controls.parameters.value)("refreshEvent", ctx.refreshDataObservable);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", false)("enableSaveCsv", true)("columns", ctx.columns)("data", ctx.data);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DWidgetComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["ɵa"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], _shared_ui_queryBuilder_query_builder_component__WEBPACK_IMPORTED_MODULE_12__["QueryBuilderComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_13__["DTableComponent"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_14__["DexihHelpComponent"], _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_15__["DexihInvalidFormDetailsComponent"], _shared_ui_icons_download_button_download_button_component__WEBPACK_IMPORTED_MODULE_16__["DownloadButtonComponent"], _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_17__["CancelButtonComponent"], _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_18__["SaveButtonComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormInputComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormTextAreaComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormCheckboxComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormTimeComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormSelectComponent"], _buttons_table_edit_button_table_edit_button_component__WEBPACK_IMPORTED_MODULE_20__["TableEditButtonComponent"], _buttons_datalink_edit_button_datalink_edit_button_component__WEBPACK_IMPORTED_MODULE_21__["DatalinkEditButtonComponent"], _widgets_input_parameters_input_parameters_component__WEBPACK_IMPORTED_MODULE_22__["InputParametersComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgForOf"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["NgModel"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DButtonRefreshComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ApiEditComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dexih-api-edit-form',
                templateUrl: './api-edit.component.html',
                providers: [_hub_forms_service__WEBPACK_IMPORTED_MODULE_5__["HubFormsService"]]
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_6__["AuthService"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_5__["HubFormsService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }]; }, { unloadNotification: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['window:beforeunload', ['$event']]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/api/api-edit/index.ts":
/*!********************************************!*\
  !*** ./src/app/+hub/api/api-edit/index.ts ***!
  \********************************************/
/*! exports provided: ApiEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _api_edit_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api-edit.component */ "./src/app/+hub/api/api-edit/api-edit.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ApiEditComponent", function() { return _api_edit_component__WEBPACK_IMPORTED_MODULE_0__["ApiEditComponent"]; });




/***/ }),

/***/ "./src/app/+hub/api/api-index/api-index.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/+hub/api/api-index/api-index.component.ts ***!
  \***********************************************************/
/*! exports provided: ApiIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApiIndexComponent", function() { return ApiIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../buttons/tags-update-button/tags-update-button.component */ "./src/app/+hub/buttons/tags-update-button/tags-update-button.component.ts");
/* harmony import */ var _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../buttons/dependent-items/dependent-items-button.component */ "./src/app/+hub/buttons/dependent-items/dependent-items-button.component.ts");
/* harmony import */ var _buttons_actions_api_button_actions_api_button_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../buttons/actions-api-button/actions-api-button.component */ "./src/app/+hub/buttons/actions-api-button/actions-api-button.component.ts");
/* harmony import */ var _widgets_api_status_api_status_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../widgets/api-status/api-status.component */ "./src/app/+hub/widgets/api-status/api-status.component.ts");

















function ApiIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "tags-update-button", 11);
} if (rf & 2) {
    const items_r8 = ctx.items;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("objectType", ctx_r1.eSharedObjectType.ColumnValidation)("objects", items_r8);
} }
function ApiIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "dependent-items-button", 12);
} if (rf & 2) {
    const item_r9 = ctx.item;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", item_r9.key)("objectType", ctx_r3.eSharedObjectType.Api);
} }
function ApiIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "actions-api-button", 13);
} if (rf & 2) {
    const items_r10 = ctx.items;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("apis", items_r10);
} }
function ApiIndexComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "api-status", 14);
} if (rf & 2) {
    const item_r11 = ctx.item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("apiKey", item_r11 == null ? null : item_r11.key);
} }
class ApiIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.columns = [
            { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },
            { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },
            { name: 'apiSource', title: 'Api Source' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_4__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        // watch for any changes in the validations.
        this.watchChanges();
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable()).subscribe(result => {
                let data = result[0];
                let params = result[1];
                this.hubCache = result[2];
                this.updateApis();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'View Index');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    editApi(api) {
        this.router.navigate(['api-edit', api.key], { relativeTo: this.route });
    }
    updateApis() {
        if (this.hubCache.isLoaded()) {
            let apis;
            apis = this.hubCache.hub.dexihApis.filter(c => c.isValid);
            let tableData = apis.map(api => {
                return {
                    key: api.key,
                    name: api.name,
                    apiSource: this.getSourceDetails(api),
                    updateDate: api.updateDate,
                    sharedIcon: api.isShared ? 'fa fa-group' : 'fa fa-user-secret',
                    sharedToolTip: api.isShared ? 'Table is shared' : 'Table is private',
                    tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].ColumnValidation, api.key)
                };
            });
            this._tableData.next(tableData);
        }
        else {
            this._tableData.next(null);
        }
    }
    getSourceDetails(api) {
        if (api.sourceType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSourceType"].Table) {
            let table = this.hubCache.getTable(api.sourceTableKey);
            if (table) {
                return 'Table: ' + table.name;
            }
            else {
                return 'Error: Table not found';
            }
        }
        else {
            let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === api.sourceDatalinkKey);
            if (datalink) {
                return 'Datalink: ' + datalink.name;
            }
            else {
                return 'Error: Datalink not found';
            }
        }
        return 'Error: Source not configured';
    }
    watchChanges() {
        // watch the current validation in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Api || hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects) {
                this.updateApis();
            }
        });
    }
}
ApiIndexComponent.ɵfac = function ApiIndexComponent_Factory(t) { return new (t || ApiIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"])); };
ApiIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ApiIndexComponent, selectors: [["apis"]], inputs: { hubKey: "hubKey" }, decls: 12, vars: 7, consts: [[1, "container-fluid"], ["title", "Api's", "iconClass", "fa fa-lg fa-fw fa-feed", 3, "showCloseButton", "close"], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "tags", "rowClick"], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["actions", ""], ["select", "rowStatus"], ["rowStatus", ""], ["title", "Connections", "path", "/assets/help/reference/api.md", 1, "m-3"], [1, "ml-1", 3, "objectType", "objects"], [1, "ml-1", 3, "key", "objectType"], [3, "apis"], [3, "apiKey"]], template: function ApiIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ApiIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function ApiIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.editApi($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ApiIndexComponent_ng_template_3_Template, 1, 2, "ng-template", 3, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ApiIndexComponent_ng_template_5_Template, 1, 2, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ApiIndexComponent_ng_template_7_Template, 1, 1, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, ApiIndexComponent_ng_template_9_Template, 1, 1, "ng-template", 8, 9, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](11, "dexih-help", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__["DexihHelpComponent"], _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_9__["TagsUpdateButtonComponent"], _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_10__["DependentItemsButtonComponent"], _buttons_actions_api_button_actions_api_button_component__WEBPACK_IMPORTED_MODULE_11__["ActionsApiButtonComponent"], _widgets_api_status_api_status_component__WEBPACK_IMPORTED_MODULE_12__["ApiStatusComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ApiIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'apis',
                templateUrl: './api-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] }]; }, { hubKey: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/api/api-index/index.ts":
/*!*********************************************!*\
  !*** ./src/app/+hub/api/api-index/index.ts ***!
  \*********************************************/
/*! exports provided: ApiIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _api_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api-index.component */ "./src/app/+hub/api/api-index/api-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ApiIndexComponent", function() { return _api_index_component__WEBPACK_IMPORTED_MODULE_0__["ApiIndexComponent"]; });




/***/ }),

/***/ "./src/app/+hub/columnValidation/columnValidation-edit/columnValidation-edit.component.ts":
/*!************************************************************************************************!*\
  !*** ./src/app/+hub/columnValidation/columnValidation-edit/columnValidation-edit.component.ts ***!
  \************************************************************************************************/
/*! exports provided: ColumnValidationEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColumnValidationEditComponent", function() { return ColumnValidationEditComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var _hub_remote_models__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../hub.remote.models */ "./src/app/+hub/hub.remote.models.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../buttons/cancel-button/cancel-button.component */ "./src/app/+hub/buttons/cancel-button/cancel-button.component.ts");
/* harmony import */ var _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component */ "./src/app/shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../buttons/save-button/save-button.component */ "./src/app/+hub/buttons/save-button/save-button.component.ts");





















function ColumnValidationEditComponent_ng_template_2_ng_template_1_div_1_Template(rf, ctx) { if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ColumnValidationEditComponent_ng_template_2_ng_template_1_div_1_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r7); const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r6.test(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "i", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ColumnValidationEditComponent_ng_template_2_ng_template_1_div_1_Template_input_ngModelChange_5_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r7); const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r8.testValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r4.testValue);
} }
function ColumnValidationEditComponent_ng_template_2_ng_template_1_save_button_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "save-button", 6);
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r5.formsService);
} }
function ColumnValidationEditComponent_ng_template_2_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "dexih-invalid-form-details", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ColumnValidationEditComponent_ng_template_2_ng_template_1_Template_dexih_invalid_form_details_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10); const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r9.formsService.showErrors(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ColumnValidationEditComponent_ng_template_2_ng_template_1_div_1_Template, 6, 1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ColumnValidationEditComponent_ng_template_2_ng_template_1_save_button_2_Template, 1, 1, "save-button", 9);
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r3.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.hubCache.canWrite);
} }
function ColumnValidationEditComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ColumnValidationEditComponent_ng_template_2_ng_template_1_Template, 3, 3, "ng-template", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "cancel-button", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.hubCache && ctx_r1.hubCache.status === ctx_r1.eCacheStatus.Loaded);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r1.formsService);
} }
function ColumnValidationEditComponent_form_4_section_2_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"]("Cleaned Value = ", ctx_r18.testResult.cleanedValue, " ");
} }
function ColumnValidationEditComponent_form_4_section_2_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"]("Reject Reason = ", ctx_r19.testResult.rejectReason, " ");
} }
function ColumnValidationEditComponent_form_4_section_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ColumnValidationEditComponent_form_4_section_2_div_3_Template, 2, 1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ColumnValidationEditComponent_form_4_section_2_div_4_Template, 2, 1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("alert-danger", ctx_r11.testResult.success == false)("alert-success", ctx_r11.testResult.success == true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" Test Result = ", ctx_r11.testResult.success, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r11.testResult.cleanedValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r11.testResult.rejectReason);
} }
function ColumnValidationEditComponent_form_4_section_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "form-select", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r12.cleanActions);
} }
function ColumnValidationEditComponent_form_4_section_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "form-input", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ColumnValidationEditComponent_form_4_div_17_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "section", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "form-input", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "section", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "form-input", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ColumnValidationEditComponent_form_4_section_18_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "form-input", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ColumnValidationEditComponent_form_4_section_19_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "form-input", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ColumnValidationEditComponent_form_4_div_20_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "section", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "form-input", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "section", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "form-input", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ColumnValidationEditComponent_form_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ColumnValidationEditComponent_form_4_section_2_Template, 5, 7, "section", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "section", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "form-input", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "section", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "form-select", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "form-textarea", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "section", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](12, "form-select", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](13, ColumnValidationEditComponent_form_4_section_13_Template, 2, 1, "section", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](14, ColumnValidationEditComponent_form_4_section_14_Template, 2, 0, "section", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](15, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](16, "form-checkbox", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](17, ColumnValidationEditComponent_form_4_div_17_Template, 5, 0, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](18, ColumnValidationEditComponent_form_4_section_18_Template, 2, 0, "section", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](19, ColumnValidationEditComponent_form_4_section_19_Template, 2, 0, "section", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](20, ColumnValidationEditComponent_form_4_div_20_Template, 5, 0, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](21, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](22, "form-tags", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](23, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](24, "form-tags", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](25, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](26, "form-select", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](27, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](28, "form-checkbox", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](29, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](30, "form-checkbox", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r2.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.testResult);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autocapitalize", true)("errors", ctx_r2.formsService.formErrors["name"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r2.typeCodes);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showPreview", true)("isHidden", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r2.InvalidActions);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.formsService.currentForm.value.invalidAction == ctx_r2.eInvalidAction.Clean || ctx_r2.formsService.currentForm.value.invalidAction == ctx_r2.eInvalidAction.RejectClean);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (ctx_r2.formsService.currentForm.value.invalidAction == ctx_r2.eInvalidAction.RejectClean || ctx_r2.formsService.currentForm.value.invalidAction == ctx_r2.eInvalidAction.Clean) && ctx_r2.formsService.currentForm.value.cleanAction == ctx_r2.eCleanAction.CleanValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.formsService.currentForm.value.dataType == ctx_r2.eTypeCode.String || ctx_r2.formsService.currentForm.value.dataType == ctx_r2.eTypeCode.Char);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.formsService.currentForm.value.dataType == ctx_r2.eTypeCode.String || ctx_r2.formsService.currentForm.value.dataType == ctx_r2.eTypeCode.Char);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.formsService.currentForm.value.dataType == ctx_r2.eTypeCode.String || ctx_r2.formsService.currentForm.value.dataType == ctx_r2.eTypeCode.Char);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.formsService.currentForm.value.dataType != ctx_r2.eTypeCode.String && ctx_r2.formsService.currentForm.value.dataType != ctx_r2.eTypeCode.Char);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r2.connections)("allowNullSelect", true);
} }
class ColumnValidationEditComponent {
    constructor(hubService, authService, formsService, route, router) {
        this.hubService = hubService;
        this.authService = authService;
        this.formsService = formsService;
        this.route = route;
        this.router = router;
        this.eInvalidAction = _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eInvalidAction"];
        this.eCleanAction = _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eCleanAction"];
        this.eTypeCode = _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eTypeCode"];
        this.InvalidActions = _hub_models__WEBPACK_IMPORTED_MODULE_2__["InvalidActions"];
        this.CleanActions = _hub_models__WEBPACK_IMPORTED_MODULE_2__["CleanActions"];
        this.typeCodes = _hub_remote_models__WEBPACK_IMPORTED_MODULE_7__["TypeCodes"];
        this.invalidActions = _hub_models__WEBPACK_IMPORTED_MODULE_2__["InvalidActions"];
        this.cleanActions = _hub_models__WEBPACK_IMPORTED_MODULE_2__["CleanActions"];
        this.lookupColumnValue = '';
        this.isLoaded = false;
        this.eCacheStatus = _hub_models__WEBPACK_IMPORTED_MODULE_2__["eCacheStatus"];
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_9__["CancelToken"]();
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable()).subscribe(result => {
                let data = result[0];
                this.params = result[1];
                this.hubCache = result[2];
                this.action = data['action'];
                this.pageTitle = data['pageTitle'];
                if (!this.hubCache || this.hubCache.status !== _hub_models__WEBPACK_IMPORTED_MODULE_2__["eCacheStatus"].Loaded) {
                    return;
                }
                if (this.isLoaded && this.action === 'new') {
                    return;
                }
                if (this.isLoaded && this.formsService.hasChanged) {
                    this.authService.confirmDialog('Synchronization warning', 'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')
                        .then(confirm => {
                        if (confirm) {
                            this.load();
                        }
                    }).catch(reason => {
                        return;
                    });
                }
                else {
                    this.load();
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Column Validation');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._formChangeSubscription) {
            this._formChangeSubscription.unsubscribe();
        }
        if (this._lookupColumnSubscription) {
            this._lookupColumnSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    load() {
        this.connections = this.hubCache.getConnectionTables();
        if (this.action === 'edit') {
            // get the hub key from the route data, and update the service.
            this.columnValidationKey = +this.params['validationKey'];
            if (!this.columnValidationKey) {
                this.hubService.addHubErrorMessage('There was no validation specified to edit.');
                // this.errorMessage = 'There was no validation specified to edit.';
            }
            else {
                if (!this.hubCache.hub || !this.hubCache.hub.dexihColumnValidations) {
                    this.hubService.addHubErrorMessage('The hub cache is not loaded.');
                }
                else {
                    let validation = this.hubCache.hub.dexihColumnValidations.find(c => c.key === this.columnValidationKey);
                    this.formsService.validation(validation);
                }
            }
        }
        if (this.action === 'new') {
            let validation = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["DexihColumnValidation"]();
            this.formsService.validation(validation);
            // update the url with the saved key
            this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {
                let key = form.controls.key.value;
                if (key) {
                    if (history.pushState) {
                        let newUrl = window.location.pathname.replace('/columnValidation-new', `/columnValidation-edit/${key}`);
                        this.router.navigateByUrl(newUrl);
                        this._formChangeSubscription.unsubscribe();
                    }
                }
            });
        }
        this.isLoaded = true;
        this.getValidationLookupColumn();
        if (this._lookupColumnSubscription) {
            this._lookupColumnSubscription.unsubscribe();
        }
        this._lookupColumnSubscription = this.formsService.currentForm.controls.lookupColumnKey.valueChanges.subscribe(() => {
            this.getValidationLookupColumn();
        });
    }
    getValidationLookupColumn() {
        let lookupColumnKey = this.formsService.currentForm.controls.lookupColumnKey.value;
        if (lookupColumnKey) {
            let column = this.hubCache.getColumn(lookupColumnKey);
            if (column) {
                let table = this.hubCache.getTable(column.tableKey);
                this.lookupColumnValue = 'Exists in table:' + table.name + ', column:' + column.name;
            }
            else {
                this.lookupColumnValue = 'Column not found.  Re-select a valid column.';
            }
        }
        else {
            this.lookupColumnValue = '';
        }
    }
    test() {
        this.hubService.testColumnValidation(this.formsService.currentForm.value, this.testValue, this.cancelToken).then(result => {
            this.testResult = result;
        });
    }
    close() {
        this.authService.navigateUp();
    }
    canDeactivate() {
        return new Promise((resolve) => {
            if (this.formsService.hasChanged) {
                this.authService.confirmDialog('The view has not been saved', 'The column validation changes have not been saved.  Do you want to discard the changes and exit?')
                    .then((confirm) => {
                    resolve(confirm);
                }).catch(() => {
                    resolve(false);
                });
            }
            else {
                resolve(true);
            }
        });
    }
    // @HostListener allows is to guard against browser refresh, close, etc.
    unloadNotification($event) {
        if (this.formsService.hasChanged) {
            $event.returnValue = 'The column validation changes have not been saved.  Do you want to discard the changes and exit?';
        }
    }
}
ColumnValidationEditComponent.ɵfac = function ColumnValidationEditComponent_Factory(t) { return new (t || ColumnValidationEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"])); };
ColumnValidationEditComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ColumnValidationEditComponent, selectors: [["dexih-columnValidation-edit-form"]], hostBindings: function ColumnValidationEditComponent_HostBindings(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("beforeunload", function ColumnValidationEditComponent_beforeunload_HostBindingHandler($event) { return ctx.unloadNotification($event); }, false, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresolveWindow"]);
    } }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]])], decls: 5, vars: 3, consts: [[1, "container"], ["title", "Edit Validation", "iconClass", "fa fa-lg fa-fw fa-check-square-o", 3, "showCloseButton", "padding", "close"], ["header", ""], [3, "formGroup", 4, "ngIf"], [1, "d-inline-flex"], [3, "ngIf"], [1, "mr-1", 3, "formsService"], [1, "mr-1", 3, "control", "click"], [4, "ngIf"], ["class", "mr-1", 3, "formsService", 4, "ngIf"], [1, "input-group", "mr-1"], [1, "input-group-prepend"], ["type", "button", 1, "btn", "btn-primary", 3, "click"], [1, "fa", "fa-check-circle-o"], ["type", "text", "placeholder", "Test value", "aria-label", "", "aria-describedby", "basic-addon1", 1, "form-control", 2, "max-width", "100px", 3, "ngModel", "ngModelChange"], [3, "formGroup"], [1, "form-row"], [1, "form-group", "col-md-6"], ["label", "Column Validation Name", "formControlName", "name", "placeholder", "Enter the name.", "iconClass", "fa fa-list", 3, "autocapitalize", "errors"], ["label", "Data Type", "formControlName", "dataType", "itemKey", "key", "itemName", "name", 3, "items"], ["label", "Description", "formControlName", "description", "placeholder", "Enter the description.", 3, "showPreview", "isHidden"], ["label", "Validation Fail Action", "formControlName", "invalidAction", "itemKey", "key", "itemName", "name", "note", "Action to take when the validation fails.", 3, "items"], ["class", "form-group col-md-6", 4, "ngIf"], ["label", "Ignore null values.", "formControlName", "allowDbNull"], ["class", "form-row", 4, "ngIf"], ["label", "Restrict to list of values", "formControlName", "listOfValues", "placeholder", "Provide a list of values which are valid."], ["label", "Excluded list of values", "formControlName", "listOfNotValues", "placeholder", "Provide a list of values which are valid."], ["label", "Restrict to values that exist in a lookup table column", "formControlName", "lookupColumnKey", "grandParentName", "name", "parentName", "name", "itemKey", "key", "itemName", "name", "childItems", "dexihTables", "grandChildItems", "dexihTableColumns", "note", "Checks the selected table column, and ensures the value contains at least one match.", 3, "items", "allowNullSelect"], ["label", "Only lookup values where the 'is current' column is true.", "formControlName", "lookupIsValid"], ["label", "Allow valid when lookup returns multiple rows.", "formControlName", "lookupMultipleRecords"], [1, "alert"], ["label", "Clean Action", "formControlName", "cleanAction", "itemKey", "key", "itemName", "name", "note", "Clean Action to apply", 3, "items"], ["label", "Clean Value", "formControlName", "cleanValue", "placeholder", "Enter the clean value.", "iconClass", "fa fa-list"], ["label", "Minimum String Length", "formControlName", "minLength", "placeholder", "Enter the minimum string length", "type", "number", "iconClass", "fa fa-list"], ["label", "Maximum String Length", "formControlName", "maxLength", "placeholder", "Enter the maximum string length", "type", "number", "iconClass", "fa fa-list"], ["label", "Simple Pattern Match", "formControlName", "patternMatch", "placeholder", "Provide a match string", "iconClass", "fa fa-list", "note", "Simple pattern match, use the format - A=Upper, a=Lower, Z=Any Character, 9=numeric.  (For example: AA999 matches AS123)"], ["label", "Regular Expression Match", "formControlName", "regexMatch", "placeholder", "Provide a regular expression", "iconClass", "fa fa-list", "note", "Use a standard regular expression to validate.  For example [A-Za-z0-9] will ensure string only contains characters and numbers."], ["label", "Minimum Value", "formControlName", "minValue", "placeholder", "Enter the minimum value", "type", "number", "iconClass", "fa fa-list"], ["label", "Maximum Value", "formControlName", "maxValue", "placeholder", "Enter the maximum value", "type", "number", "iconClass", "fa fa-list"]], template: function ColumnValidationEditComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ColumnValidationEditComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ColumnValidationEditComponent_ng_template_2_Template, 3, 2, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ColumnValidationEditComponent_form_4_Template, 31, 16, "form", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.formsService.currentForm);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DWidgetComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_12__["CancelButtonComponent"], _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_13__["DexihInvalidFormDetailsComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NgModel"], _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_15__["SaveButtonComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormInputComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormSelectComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormTextAreaComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormCheckboxComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormTagsComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ColumnValidationEditComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dexih-columnValidation-edit-form',
                templateUrl: './columnValidation-edit.component.html',
                providers: [_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]]
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }]; }, { unloadNotification: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['window:beforeunload', ['$event']]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/columnValidation/columnValidation-index/columnValidation-index.component.ts":
/*!**************************************************************************************************!*\
  !*** ./src/app/+hub/columnValidation/columnValidation-index/columnValidation-index.component.ts ***!
  \**************************************************************************************************/
/*! exports provided: ColumnValidationIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColumnValidationIndexComponent", function() { return ColumnValidationIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _buttons_actions_columnValidation_button_actions_columnValidation_button_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../buttons/actions-columnValidation-button/actions-columnValidation-button.component */ "./src/app/+hub/buttons/actions-columnValidation-button/actions-columnValidation-button.component.ts");
/* harmony import */ var _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../buttons/dependent-items/dependent-items-button.component */ "./src/app/+hub/buttons/dependent-items/dependent-items-button.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../buttons/tags-update-button/tags-update-button.component */ "./src/app/+hub/buttons/tags-update-button/tags-update-button.component.ts");
















function ColumnValidationIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "actions-columnValidation-button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "dependent-items-button", 9);
} if (rf & 2) {
    const item_r6 = ctx.item;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("columnValidation", item_r6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", item_r6.key)("objectType", ctx_r1.eSharedObjectType.ColumnValidation);
} }
function ColumnValidationIndexComponent_ng_template_5_d_button_delete_1_Template(rf, ctx) { if (rf & 1) {
    const _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-delete", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ColumnValidationIndexComponent_ng_template_5_d_button_delete_1_Template_d_button_delete_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r11); const items_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r9.deleteValidations(items_r7); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ColumnValidationIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    const _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save-local", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ColumnValidationIndexComponent_ng_template_5_Template_d_button_save_local_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r13); const items_r7 = ctx.items; const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r12.export(items_r7); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ColumnValidationIndexComponent_ng_template_5_d_button_delete_1_Template, 1, 0, "d-button-delete", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "tags-update-button", 12);
} if (rf & 2) {
    const items_r7 = ctx.items;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("objectType", ctx_r3.eSharedObjectType.ColumnValidation)("objects", items_r7);
} }
const _c0 = function () { return ["columnValidation-new"]; };
function ColumnValidationIndexComponent_ng_template_7_d_button_new_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-button-new", 14);
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](1, _c0));
} }
function ColumnValidationIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ColumnValidationIndexComponent_ng_template_7_d_button_new_0_Template, 1, 2, "d-button-new", 13);
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.hubCache.canWrite);
} }
class ColumnValidationIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.columns = [
            { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_4__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        // watch for any changes in the validations.
        this.watchChanges();
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.hubService.getHubCacheObservable()).subscribe(result => {
                this.hubCache = result[0];
                this.updateValidations();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Column Validation Index');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    deleteValidations(validations) {
        this.hubService.deleteColumnValidations(validations);
    }
    updateValidations() {
        if (this.hubCache && this.hubCache.isLoaded()) {
            let validations = this.hubCache.hub.dexihColumnValidations.filter(c => c.isValid)
                .map(c => {
                return {
                    key: c.key,
                    name: c.name,
                    description: c.description,
                    updateDate: c.updateDate,
                    tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].ColumnValidation, c.key)
                };
            });
            this._tableData.next(validations);
        }
        else {
            this._tableData.next(null);
        }
    }
    edit(validation) {
        this.router.navigate(['columnValidation-edit', validation.key], { relativeTo: this.route });
    }
    export(items) {
        const cache = this.hubCache;
        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');
        items.forEach(item => { this.hubCache.cacheAddColumnValidation(item.key, hub); });
        let filename = items.length === 1 ? 'ColumnValidation - ' + items[0].name + '.json' : 'columnValidations.json';
        this.hubService.exportHub(hub, filename);
    }
    watchChanges() {
        // watch the current validation in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].ColumnValidation
                || hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects) {
                this.updateValidations();
            }
        });
    }
}
ColumnValidationIndexComponent.ɵfac = function ColumnValidationIndexComponent_Factory(t) { return new (t || ColumnValidationIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"])); };
ColumnValidationIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ColumnValidationIndexComponent, selectors: [["columnValidations"]], inputs: { hubKey: "hubKey" }, decls: 9, vars: 7, consts: [[1, "container-fluid"], ["title", "Validation Rules", "iconClass", "fa fa-lg fa-fw fa-check-square-o", 3, "showCloseButton", "close"], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "tags", "rowClick"], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["actions", ""], [1, "mr-1", 3, "columnValidation"], [1, "mr-1", 3, "key", "objectType"], [1, "mr-1", 3, "click"], ["class", "mr-1", 3, "click", 4, "ngIf"], [1, "mr-1", 3, "objectType", "objects"], ["class", "mr-1", 3, "routerLink", 4, "ngIf"], [1, "mr-1", 3, "routerLink"]], template: function ColumnValidationIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ColumnValidationIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function ColumnValidationIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.edit($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ColumnValidationIndexComponent_ng_template_3_Template, 2, 3, "ng-template", 3, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ColumnValidationIndexComponent_ng_template_5_Template, 3, 3, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ColumnValidationIndexComponent_ng_template_7_Template, 1, 1, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], _buttons_actions_columnValidation_button_actions_columnValidation_button_component__WEBPACK_IMPORTED_MODULE_8__["ActionsColumnValidationButtonComponent"], _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_9__["DependentItemsButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonSaveLocalComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgIf"], _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_11__["TagsUpdateButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDeleteComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonNewComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_3__["RouterLink"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ColumnValidationIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'columnValidations',
                templateUrl: './columnValidation-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] }]; }, { hubKey: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/columnValidation/index.ts":
/*!************************************************!*\
  !*** ./src/app/+hub/columnValidation/index.ts ***!
  \************************************************/
/*! exports provided: ColumnValidationIndexComponent, ColumnValidationEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _columnValidation_index_columnValidation_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./columnValidation-index/columnValidation-index.component */ "./src/app/+hub/columnValidation/columnValidation-index/columnValidation-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ColumnValidationIndexComponent", function() { return _columnValidation_index_columnValidation_index_component__WEBPACK_IMPORTED_MODULE_0__["ColumnValidationIndexComponent"]; });

/* harmony import */ var _columnValidation_edit_columnValidation_edit_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./columnValidation-edit/columnValidation-edit.component */ "./src/app/+hub/columnValidation/columnValidation-edit/columnValidation-edit.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ColumnValidationEditComponent", function() { return _columnValidation_edit_columnValidation_edit_component__WEBPACK_IMPORTED_MODULE_1__["ColumnValidationEditComponent"]; });





/***/ }),

/***/ "./src/app/+hub/connection/connection-edit/connection-edit.component.ts":
/*!******************************************************************************!*\
  !*** ./src/app/+hub/connection/connection-edit/connection-edit.component.ts ***!
  \******************************************************************************/
/*! exports provided: ConnectionEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionEditComponent", function() { return ConnectionEditComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var _logging__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../logging */ "./src/logging.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component */ "./src/app/shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component.ts");
/* harmony import */ var _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../buttons/cancel-button/cancel-button.component */ "./src/app/+hub/buttons/cancel-button/cancel-button.component.ts");
/* harmony import */ var _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../buttons/save-button/save-button.component */ "./src/app/+hub/buttons/save-button/save-button.component.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var ngx_d_markdown__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ngx-d-markdown */ "./node_modules/ngx-d-markdown/__ivy_ngcc__/fesm2015/ngx-d-markdown.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};























function ConnectionEditComponent_ng_template_2_d_button_1_Template(rf, ctx) { if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionEditComponent_ng_template_2_d_button_1_Template_d_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r7); const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return !ctx_r6.refreshingConnection && ctx_r6.refreshConnection(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Test");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("busy", ctx_r3.refreshingConnection);
} }
function ConnectionEditComponent_ng_template_2_save_button_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "save-button", 11);
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r4.formsService);
} }
const _c0 = function (a1) { return ["../../connection-import", a1]; };
function ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_0_d_button_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Import Tables");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c0, ctx_r11.formsService.currentForm.controls.key.value));
} }
function ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_0_d_button_0_Template, 2, 3, "d-button", 12);
} if (rf & 2) {
    const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r8.formsService.currentForm.controls.key.value);
} }
const _c1 = function (a2) { return ["../../../tables", "table-new", a2]; };
function ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_1_d_button_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "New File");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c1, ctx_r12.formsService.currentForm.controls.key.value));
} }
function ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_1_d_button_0_Template, 2, 3, "d-button", 12);
} if (rf & 2) {
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r9.formsService.currentForm.controls.key.value);
} }
function ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_2_d_button_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "New WebService");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c1, ctx_r13.formsService.currentForm.controls.key.value));
} }
function ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_2_d_button_0_Template, 2, 3, "d-button", 12);
} if (rf & 2) {
    const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r10.formsService.currentForm.controls.key.value);
} }
function ConnectionEditComponent_ng_template_2_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_0_Template, 1, 1, "ng-template", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_1_Template, 1, 1, "ng-template", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ConnectionEditComponent_ng_template_2_ng_template_3_ng_template_2_Template, 1, 1, "ng-template", 8);
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.connectionReference.connectionCategory == ctx_r5.eConnectionCategory.SqlDatabase || ctx_r5.connectionReference.connectionCategory == ctx_r5.eConnectionCategory.DatabaseFile || ctx_r5.connectionReference.connectionCategory == ctx_r5.eConnectionCategory.NoSqlDatabase || ctx_r5.connectionReference.connectionCategory == ctx_r5.eConnectionCategory.Hub);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.connectionReference.connectionCategory == ctx_r5.eConnectionCategory.File);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.connectionReference.connectionCategory == ctx_r5.eConnectionCategory.WebService);
} }
function ConnectionEditComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    const _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "dexih-invalid-form-details", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionEditComponent_ng_template_2_Template_dexih_invalid_form_details_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r15); const ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r14.formsService.showErrors(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ConnectionEditComponent_ng_template_2_d_button_1_Template, 2, 1, "d-button", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ConnectionEditComponent_ng_template_2_save_button_2_Template, 1, 1, "save-button", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ConnectionEditComponent_ng_template_2_ng_template_3_Template, 3, 3, "ng-template", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "cancel-button", 9);
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r1.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.hubCache.canWrite && ctx_r1.connectionReference);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r1.formsService);
} }
function ConnectionEditComponent_form_4_span_13_span_3_section_3_form_input_1_span_1_a_2_Template(rf, ctx) { if (rf & 1) {
    const _r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionEditComponent_form_4_span_13_span_3_section_3_form_input_1_span_1_a_2_Template_a_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r27); const ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](7); return ctx_r26.revealConnectionString(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "i", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Reveal ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ConnectionEditComponent_form_4_span_13_span_3_section_3_form_input_1_span_1_span_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "i", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Revealing... please wait ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ConnectionEditComponent_form_4_span_13_span_3_section_3_form_input_1_span_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, " (");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ConnectionEditComponent_form_4_span_13_span_3_section_3_form_input_1_span_1_a_2_Template, 3, 0, "a", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ConnectionEditComponent_form_4_span_13_span_3_section_3_form_input_1_span_1_span_3_Template, 3, 0, "span", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, ")");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r23.revealingConnectionString == false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r23.revealingConnectionString == true);
} }
function ConnectionEditComponent_form_4_span_13_span_3_section_3_form_input_1_Template(rf, ctx) { if (rf & 1) {
    const _r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form-input", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("keydown", function ConnectionEditComponent_form_4_span_13_span_3_section_3_form_input_1_Template_form_input_keydown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r29); const ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5); return ctx_r28.connectionStringChanged(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ConnectionEditComponent_form_4_span_13_span_3_section_3_form_input_1_span_1_Template, 5, 2, "span", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r21.formsService.formErrors.connectionStringDisplay);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r21.formsService.formErrors.connectionStringRaw);
} }
function ConnectionEditComponent_form_4_span_13_span_3_section_3_form_select_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "form-select", 36);
} if (rf & 2) {
    const ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r22.variables)("sortItems", true)("enableTextEntry", true);
} }
function ConnectionEditComponent_form_4_span_13_span_3_section_3_Template(rf, ctx) { if (rf & 1) {
    const _r31 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ConnectionEditComponent_form_4_span_13_span_3_section_3_form_input_1_Template, 2, 2, "form-input", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ConnectionEditComponent_form_4_span_13_span_3_section_3_form_select_2_Template, 1, 3, "form-select", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "form-checkbox", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionEditComponent_form_4_span_13_span_3_section_3_Template_form_checkbox_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r31); const ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r30.clearConnectionString(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r20.formsService.currentForm.controls.useConnectionStringVariable.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r20.formsService.currentForm.controls.useConnectionStringVariable.value);
} }
function ConnectionEditComponent_form_4_span_13_span_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "form-checkbox", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ConnectionEditComponent_form_4_span_13_span_3_section_3_Template, 4, 2, "section", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r17.formsService.currentForm.controls.useConnectionString.value == true);
} }
function ConnectionEditComponent_form_4_span_13_span_4_section_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "form-checkbox", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ConnectionEditComponent_form_4_span_13_span_4_div_4_form_input_4_Template(rf, ctx) { if (rf & 1) {
    const _r39 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form-input", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("keydown", function ConnectionEditComponent_form_4_span_13_span_4_div_4_form_input_4_Template_form_input_keydown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r39); const ctx_r38 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5); return ctx_r38.passwordChanged(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r36.formsService.formErrors.password);
} }
function ConnectionEditComponent_form_4_span_13_span_4_div_4_form_select_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "form-select", 46);
} if (rf & 2) {
    const ctx_r37 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r37.variables)("sortItems", true)("enableTextEntry", true);
} }
function ConnectionEditComponent_form_4_span_13_span_4_div_4_Template(rf, ctx) { if (rf & 1) {
    const _r41 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "section", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "form-select", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "section", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ConnectionEditComponent_form_4_span_13_span_4_div_4_form_input_4_Template, 1, 1, "form-input", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ConnectionEditComponent_form_4_span_13_span_4_div_4_form_select_5_Template, 1, 3, "form-select", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "form-checkbox", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionEditComponent_form_4_span_13_span_4_div_4_Template_form_checkbox_click_6_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r41); const ctx_r40 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r40.clearPassword(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableTextEntry", true)("errors", ctx_r33.formsService.formErrors.username)("items", ctx_r33.variables)("enableFilter", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r33.formsService.currentForm.controls.usePasswordVariable.value == false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r33.formsService.currentForm.controls.usePasswordVariable.value);
} }
function ConnectionEditComponent_form_4_span_13_span_4_div_5_form_input_2_Template(rf, ctx) { if (rf & 1) {
    const _r45 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form-input", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("keydown", function ConnectionEditComponent_form_4_span_13_span_4_div_5_form_input_2_Template_form_input_keydown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r45); const ctx_r44 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5); return ctx_r44.passwordChanged(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r42 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r42.formsService.formErrors.password);
} }
function ConnectionEditComponent_form_4_span_13_span_4_div_5_form_select_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "form-select", 51);
} if (rf & 2) {
    const ctx_r43 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r43.variables)("sortItems", true)("enableTextEntry", true);
} }
function ConnectionEditComponent_form_4_span_13_span_4_div_5_Template(rf, ctx) { if (rf & 1) {
    const _r47 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "section", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ConnectionEditComponent_form_4_span_13_span_4_div_5_form_input_2_Template, 1, 1, "form-input", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ConnectionEditComponent_form_4_span_13_span_4_div_5_form_select_3_Template, 1, 3, "form-select", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "form-checkbox", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionEditComponent_form_4_span_13_span_4_div_5_Template_form_checkbox_click_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r47); const ctx_r46 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r46.clearPassword(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r34 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r34.formsService.currentForm.controls.usePasswordVariable.value == false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r34.formsService.currentForm.controls.usePasswordVariable.value);
} }
function ConnectionEditComponent_form_4_span_13_span_4_section_6_a_3_Template(rf, ctx) { if (rf & 1) {
    const _r53 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionEditComponent_form_4_span_13_span_4_section_6_a_3_Template_a_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r53); const ctx_r52 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5); return ctx_r52.refreshConnection(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "i", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Refresh ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ConnectionEditComponent_form_4_span_13_span_4_section_6_span_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "i", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Refreshing... please wait ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ConnectionEditComponent_form_4_span_13_span_4_section_6_a_6_Template(rf, ctx) { if (rf & 1) {
    const _r55 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionEditComponent_form_4_span_13_span_4_section_6_a_6_Template_a_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r55); const ctx_r54 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5); return ctx_r54.createDatabase(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "i", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " New Database ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ConnectionEditComponent_form_4_span_13_span_4_section_6_span_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "i", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Creating database... please wait ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ConnectionEditComponent_form_4_span_13_span_4_section_6_Template(rf, ctx) { if (rf & 1) {
    const _r57 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-select", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("textValueChange", function ConnectionEditComponent_form_4_span_13_span_4_section_6_Template_form_select_textValueChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r57); const ctx_r56 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r56.newDatabaseName($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " (");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ConnectionEditComponent_form_4_span_13_span_4_section_6_a_3_Template, 3, 0, "a", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ConnectionEditComponent_form_4_span_13_span_4_section_6_span_4_Template, 3, 0, "span", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, ") ( ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, ConnectionEditComponent_form_4_span_13_span_4_section_6_a_6_Template, 3, 0, "a", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ConnectionEditComponent_form_4_span_13_span_4_section_6_span_7_Template, 3, 0, "span", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](8, ") ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("label", ctx_r35.connectionReference.databaseDescription)("items", ctx_r35.databases)("defaultItem", ctx_r35.formsService.currentForm.value.defaultDatabase)("sortItems", true)("enableTextEntry", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r35.refreshingConnection == false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r35.refreshingConnection == true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r35.creatingDatabase == false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r35.creatingDatabase == true);
} }
function ConnectionEditComponent_form_4_span_13_span_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "form-select", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ConnectionEditComponent_form_4_span_13_span_4_section_3_Template, 2, 0, "section", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ConnectionEditComponent_form_4_span_13_span_4_div_4_Template, 7, 6, "div", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ConnectionEditComponent_form_4_span_13_span_4_div_5_Template, 5, 2, "div", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, ConnectionEditComponent_form_4_span_13_span_4_section_6_Template, 9, 9, "section", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableTextEntry", true)("label", ctx_r18.connectionReference.serverDescription)("errors", ctx_r18.formsService.formErrors.server)("items", ctx_r18.variables)("enableFilter", true)("note", ctx_r18.connectionReference.serverHelp);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r18.connectionReference.allowsWindowsAuth == true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r18.connectionReference.allowsUserPassword && (ctx_r18.formsService.currentForm.controls.useWindowsAuth.value == false || ctx_r18.connectionReference.allowsWindowsAuth == false));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r18.connectionReference.allowsToken && (ctx_r18.formsService.currentForm.controls.useWindowsAuth.value == false || ctx_r18.connectionReference.allowsWindowsAuth == false));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r18.connectionReference.requiresDatabase);
} }
function ConnectionEditComponent_form_4_span_13_section_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "form-checkbox", 55);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r19.formsService.formErrors.embedTableKey);
} }
function ConnectionEditComponent_form_4_span_13_Template(rf, ctx) { if (rf & 1) {
    const _r59 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "markdown", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionEditComponent_form_4_span_13_Template_markdown_click_2_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r59); const ctx_r58 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r58.getRoute($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ConnectionEditComponent_form_4_span_13_span_3_Template, 4, 1, "span", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ConnectionEditComponent_form_4_span_13_span_4_Template, 7, 10, "span", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "section", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "form-input", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "section", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "form-input", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](10, ConnectionEditComponent_form_4_span_13_section_10_Template, 2, 1, "section", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("data", ctx_r16.connectionReference.description);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r16.connectionReference.allowsConnectionString == true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r16.formsService.currentForm.controls.useConnectionString.value == false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r16.formsService.formErrors.connectionTimeout);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r16.formsService.formErrors.commandTimeout);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r16.formsService.currentForm.controls.purpose.value == "Managed");
} }
const _c2 = function () { return { standalone: true }; };
function ConnectionEditComponent_form_4_Template(rf, ctx) { if (rf & 1) {
    const _r61 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "input", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "input", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "form-select", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "section", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "form-input", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "section", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "form-select", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ConnectionEditComponent_form_4_Template_form_select_ngModelChange_10_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r61); const ctx_r60 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r60.connectionReference = $event; })("ngModelChange", function ConnectionEditComponent_form_4_Template_form_select_ngModelChange_10_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r61); const ctx_r62 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r62.selectDatabaseType($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](12, "form-textarea", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](13, ConnectionEditComponent_form_4_span_13_Template, 11, 6, "span", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r2.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r2.eConnectionPurposeItems)("enableFilter", false)("errors", ctx_r2.formsService.formErrors.purpose);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autocapitalize", true)("errors", ctx_r2.formsService.formErrors.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r2.connectionReference)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](15, _c2))("items", ctx_r2.connectionTypes)("enableKeySelect", false)("sortItems", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showPreview", true)("isHidden", true)("errors", ctx_r2.formsService.formErrors.description);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.connectionReference);
} }
class ConnectionEditComponent {
    constructor(hubService, authService, formsService, route, router) {
        this.hubService = hubService;
        this.authService = authService;
        this.formsService = formsService;
        this.route = route;
        this.router = router;
        this.savingConnection = false;
        this.refreshingConnection = false;
        this.revealingConnectionString = false;
        this.creatingDatabase = false;
        this.databases = [];
        this.eConnectionPurposeItems = _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eConnectionPurposeItems"].filter(c => c.key > 0);
        this.eConnectionPurpose = _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eConnectionPurpose"];
        this.eConnectionCategory = _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eConnectionCategory"];
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_9__["CancelToken"]();
        this.isLoaded = false;
        this.variables = [];
        this.logger = new _logging__WEBPACK_IMPORTED_MODULE_7__["LogFactory"]('connection-edit');
    }
    ngOnInit() {
        this.logger.LogC(() => `OnInit`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Trace);
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable(), this.hubService.getRemoteLibrariesObservable()).subscribe((result) => __awaiter(this, void 0, void 0, function* () {
                let data = result[0];
                this.params = result[1];
                this.hubCache = result[2];
                this.remoteLibraries = result[3];
                this.action = data['action'];
                this.pageTitle = data['pageTitle'];
                this.variables = this.hubCache.hub.dexihHubVariables.map(c => '{' + c.name + '}');
                if (!this.hubCache || this.hubCache.status !== _hub_models__WEBPACK_IMPORTED_MODULE_2__["eCacheStatus"].Loaded) {
                    return;
                }
                if (this.isLoaded && this.action === 'new') {
                    return;
                }
                if (this.isLoaded && this.formsService.hasChanged) {
                    this.authService.confirmDialog('Synchronization warning', 'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')
                        .then((confirm) => __awaiter(this, void 0, void 0, function* () {
                        if (confirm) {
                            yield this.load();
                        }
                    })).catch(reason => {
                        return;
                    });
                }
                else {
                    yield this.load();
                }
            }));
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Connection Edit');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._formChangeSubscription) {
            this._formChangeSubscription.unsubscribe();
        }
        if (this._purposeSubscription) {
            this._purposeSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    load() {
        return __awaiter(this, void 0, void 0, function* () {
            this.isLoaded = true;
            if (this.action === 'edit') {
                // get the hub key from the route data, and update the service.
                this.connectionKey = +this.params['connectionKey'];
                this.logger.LogC(() => `edit connection key ${this.connectionKey}.`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Trace);
                if (!this.connectionKey) {
                    this.hubService.addHubErrorMessage('There was no connection specified to edit.');
                }
                else {
                    if (!this.hubCache.hub || !this.hubCache.hub.dexihConnections) {
                        this.hubService.addHubErrorMessage('The hub cache is not loaded.');
                    }
                    else {
                        let connection = this.hubCache.hub.dexihConnections.find(c => c.key === this.connectionKey);
                        if (!connection) {
                            this.hubService.addHubErrorMessage('The specified connection could not be found.');
                            this.logger.LogC(() => `edit connection with key ${this.connectionKey} not found.`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Warning);
                        }
                        else {
                            this.updateDatabaseTypes(connection.purpose);
                            this.connectionReference = yield this.hubService.GetConnectionReference(connection);
                            this.formsService.connection(connection);
                            if (connection.defaultDatabase) {
                                this.databases = [connection.defaultDatabase];
                            }
                            this.logger.LogC(() => `edit connection, form loaded.`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Trace);
                        }
                    }
                }
            }
            if (this.action === 'new') {
                let connection = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["DexihConnection"]();
                connection.purpose = +this.params['purpose'];
                this.logger.LogC(() => `new connection, purpose ${connection.purpose}.`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Trace);
                this.updateDatabaseTypes(connection.purpose);
                this.formsService.connection(connection);
                this.updateUrl();
                this.logger.LogC(() => `new connection, form loaded.`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Trace);
            }
            if (this.action === 'copy') {
                let connection = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["DexihConnection"]();
                let previousConnectionKey = +this.params['connectionKey'];
                let previousConnection = this.hubCache.hub.dexihConnections.find(c => c.key === previousConnectionKey);
                Object.assign(connection, previousConnection);
                connection.name += ' (copy)';
                connection.key = null;
                this.connectionReference = yield this.hubService.GetConnectionReference(connection);
                this.logger.LogC(() => `copy connection, connectionKey ${previousConnectionKey}.`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Trace);
                this.updateDatabaseTypes(connection.purpose);
                this.formsService.connection(connection);
                this.updateUrl();
                this.logger.LogC(() => `new connection, form loaded.`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Trace);
            }
            if (this._purposeSubscription) {
                this._purposeSubscription.unsubscribe();
            }
            this._purposeSubscription = this.formsService.currentForm.controls.purpose.valueChanges.subscribe(purpose => {
                this.updateDatabaseTypes(purpose);
            });
        });
    }
    updateUrl() {
        // update the url with the saved key
        this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {
            let key = form.controls.key.value;
            if (key) {
                if (history.pushState) {
                    let url = window.location.pathname;
                    let index = url.indexOf('/connection-new');
                    if (index > 0) {
                        let newUrl = url.substr(0, index) + `/connection-edit/${key}`;
                        this.router.navigateByUrl(newUrl);
                    }
                    this._formChangeSubscription.unsubscribe();
                }
            }
        });
    }
    updateDatabaseTypes(purpose) {
        this.connectionTypes = this.remoteLibraries.connections.filter(d => (purpose === _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eConnectionPurpose"].Source && d.allowsSourceConnection) ||
            (purpose === _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eConnectionPurpose"].Managed && d.allowsManagedConnection) ||
            (purpose === _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eConnectionPurpose"].Target && d.allowsTargetConnection));
    }
    selectDatabaseType(connectionReference) {
        return __awaiter(this, void 0, void 0, function* () {
            this.formsService.currentForm.controls.connectionClassName.setValue(connectionReference.connectionClassName);
            this.formsService.currentForm.controls.connectionAssemblyName.setValue(connectionReference.connectionAssemblyName);
            // For integration hub connections, pre-fill some information.
            if (this.connectionReference.connectionCategory === _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eConnectionCategory"].Hub) {
                if (!this.formsService.currentForm.controls.server.value) {
                    const uri = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');
                    this.formsService.currentForm.controls.server.setValue(uri);
                }
                if (!this.formsService.currentForm.controls.username.value) {
                    const user = this.authService.getUser();
                    if (user) {
                        this.formsService.currentForm.controls.username.setValue(user.email);
                    }
                }
            }
        });
    }
    connectionStringChanged() {
        this.logger.LogC(() => `connectionStringChanged.`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Trace);
        if (this.formsService.currentForm.controls.connectionString.value) {
            this.formsService.currentForm.controls.connectionString.setValue(null);
            this.formsService.currentForm.controls.connectionStringDisplay.setValue('');
        }
    }
    clearConnectionString() {
        this.formsService.currentForm.controls.connectionString.setValue(null);
        this.formsService.currentForm.controls.connectionStringDisplay.setValue('');
    }
    revealConnectionString() {
        this.logger.LogC(() => `revealConnectionString.`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Trace);
        this.revealingConnectionString = true;
        this.hubService.decrypt(this.formsService.currentForm.controls.connectionString.value, this.cancelToken)
            .then(result => {
            this.formsService.currentForm.controls.connectionStringDisplay.setValue(result);
            this.revealingConnectionString = false;
        }).catch(reason => {
            this.hubService.addHubMessage(reason);
            this.revealingConnectionString = false;
        });
    }
    passwordChanged() {
        this.logger.LogC(() => `passwordChanged.`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Trace);
        if (this.formsService.currentForm.controls.password.value) {
            this.formsService.currentForm.controls.password.setValue(null);
            this.formsService.currentForm.controls.passwordDisplay.setValue('');
        }
    }
    clearPassword() {
        this.formsService.currentForm.controls.password.setValue(null);
        this.formsService.currentForm.controls.passwordDisplay.setValue('');
    }
    refreshConnection() {
        return __awaiter(this, void 0, void 0, function* () {
            this.logger.LogC(() => `refreshConnection.`, _logging__WEBPACK_IMPORTED_MODULE_7__["eLogLevel"].Trace);
            yield this.encryptConnection();
            this.refreshingConnection = true;
            this.hubService.refreshConnection(this.formsService.currentForm.value, this.cancelToken)
                .then(result => {
                this.hubService.addHubSuccessMessage('The connection was successful.');
                this.databases = result;
                this.refreshingConnection = false;
            }).catch(reason => {
                this.hubService.addHubMessage(reason);
                this.refreshingConnection = false;
            });
        });
    }
    newDatabaseName(value) {
        this.formsService.currentForm.controls.defaultDatabase.setValue(value);
    }
    createDatabase() {
        this.creatingDatabase = true;
        this.authService.promptDialog('Create Database', 'Enter the name for the new database?').then((result) => __awaiter(this, void 0, void 0, function* () {
            if (result) {
                yield this.encryptConnection();
                let connection = Object.assign({}, this.formsService.currentForm.value);
                connection.defaultDatabase = result;
                this.hubService.createDatabase(connection, this.cancelToken)
                    .then(() => {
                    this.hubService.addHubSuccessMessage('The database was created successfully.');
                    this.databases = [result];
                    this.formsService.currentForm.controls.defaultDatabase.setValue(result);
                    this.creatingDatabase = false;
                }).catch(reason => {
                    this.hubService.addHubMessage(reason);
                    this.creatingDatabase = false;
                });
            }
            else {
                this.creatingDatabase = false;
            }
        })).catch(() => {
            this.creatingDatabase = false;
        });
    }
    encryptConnection() {
        return __awaiter(this, void 0, void 0, function* () {
            let form = this.formsService.currentForm;
            let passwordRaw = form.controls.passwordRaw.value;
            if (passwordRaw) {
                let password = yield this.hubService.encrypt(passwordRaw, this.cancelToken);
                form.controls.password.setValue(password);
                form.controls.passwordRaw.setValue(null);
            }
            let connectionStringRaw = form.controls.connectionStringRaw.value;
            if (connectionStringRaw) {
                let connectionString = yield this.hubService.encrypt(connectionStringRaw, this.cancelToken);
                form.controls.connectionString.setValue(connectionString);
                form.controls.connectionStringRaw.setValue(null);
            }
        });
    }
    save() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.encryptConnection();
            yield this.formsService.save();
        });
    }
    close() {
        this.authService.navigateUp();
    }
    canDeactivate() {
        return new Promise((resolve) => {
            if (this.formsService.hasChanged) {
                this.authService.confirmDialog('The connection has not been saved', 'The connection changes have not been saved.  Do you want to discard the changes and exit?')
                    .then((confirm) => {
                    resolve(confirm);
                }).catch(() => {
                    resolve(false);
                });
            }
            else {
                resolve(true);
            }
        });
    }
    getRoute(event) {
        this.authService.getRoute(event);
    }
    // @HostListener allows is to guard against browser refresh, close, etc.
    unloadNotification($event) {
        if (this.formsService.hasChanged) {
            $event.returnValue = 'The connection changes have not been saved.  Do you want to discard the changes and exit?';
        }
    }
}
ConnectionEditComponent.ɵfac = function ConnectionEditComponent_Factory(t) { return new (t || ConnectionEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"])); };
ConnectionEditComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ConnectionEditComponent, selectors: [["dexih-connection-edit-form"]], hostBindings: function ConnectionEditComponent_HostBindings(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("beforeunload", function ConnectionEditComponent_beforeunload_HostBindingHandler($event) { return ctx.unloadNotification($event); }, false, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresolveWindow"]);
    } }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]])], decls: 6, vars: 3, consts: [[1, "container"], ["title", "Edit Connection", "iconClass", "fa fa-lg fa-fw fa-database", 3, "showCloseButton", "padding", "close"], ["header", ""], [3, "formGroup", 4, "ngIf"], ["title", "Connections", "path", "/assets/help/reference/connection.md", 1, "m-3"], [1, "mr-1", 3, "control", "click"], ["class", "mr-1", "buttonClass", "btn btn-success", "iconClass", "fa fa-thumbs-o-up", "title", "Test the connection against the source.", 3, "busy", "click", 4, "ngIf"], ["class", "mr-1", 3, "formsService", 4, "ngIf"], [3, "ngIf"], [3, "formsService"], ["buttonClass", "btn btn-success", "iconClass", "fa fa-thumbs-o-up", "title", "Test the connection against the source.", 1, "mr-1", 3, "busy", "click"], [1, "mr-1", 3, "formsService"], ["class", "mr-1", "iconClass", "fa fa-plus", 3, "routerLink", 4, "ngIf"], ["iconClass", "fa fa-plus", 1, "mr-1", 3, "routerLink"], [3, "formGroup"], ["id", "fake_user_name", "name", "fake_user[name]", "type", "text", "value", "Fake Auto-fill", 2, "position", "absolute", "top", "-5000px"], ["id", "fake_password", "type", "password", "name", "fake_password[password]", "type", "text", "value", "Fake Auto-fill", 2, "position", "absolute", "top", "-5000px"], ["label", "Purpose", "formControlName", "purpose", "placeholder", "Connection purpose", "iconClass", "fa fa-database", "itemName", "name", "itemKey", "key", 3, "items", "enableFilter", "errors"], [1, "form-row"], [1, "form-group", "col-md-6"], ["label", "Name", "formControlName", "name", "placeholder", "Enter a name for the connection", "iconClass", "fa fa-database", 3, "autocapitalize", "errors"], ["label", "Database Type", "itemName", "name", "itemKey", "name", "iconClass", "fa fa-database", 3, "ngModel", "ngModelOptions", "items", "enableKeySelect", "sortItems", "ngModelChange"], ["label", "Description", "formControlName", "description", "placeholder", "Enter the description.", 3, "showPreview", "isHidden", "errors"], [4, "ngIf"], [3, "data", "click"], ["type", "number", "label", "Connection Timeout", "formControlName", "connectionTimeout", "iconClass", "fa fa-clock-o", "note", "The duration in seconds the remote agent will wait to establish a connection.", 3, "errors"], ["type", "number", "label", "Command Timeout", "formControlName", "commandTimeout", "iconClass", "fa fa-clock-o", "note", "The duration in seconds the remote agent will for a command to start returning a result.", 3, "errors"], ["label", "Use a connection string", "formControlName", "useConnectionString"], ["label", "Connection String", "formControlName", "connectionStringDisplay", "placeholder", "Enter a the connection string", "iconClass", "fa fa-database", 3, "errors", "keydown", 4, "ngIf"], ["label", "Connection String", "formControlName", "connectionString", "iconClass", "fa fa-at", "textEntryNote", "Enter the variable name surrounded by {}", 3, "items", "sortItems", "enableTextEntry", 4, "ngIf"], ["label", "Use a variable for connection string", "formControlName", "useConnectionStringVariable", 3, "click"], ["label", "Connection String", "formControlName", "connectionStringDisplay", "placeholder", "Enter a the connection string", "iconClass", "fa fa-database", 3, "errors", "keydown"], ["href", "javascript:void(0)", 3, "click", 4, "ngIf"], ["href", "javascript:void(0)", 3, "click"], [1, "fa", "fa-refresh"], [1, "fa", "fa-spin", "fa-refresh"], ["label", "Connection String", "formControlName", "connectionString", "iconClass", "fa fa-at", "textEntryNote", "Enter the variable name surrounded by {}", 3, "items", "sortItems", "enableTextEntry"], ["formControlName", "server", "placeholder", "Enter the details.", "iconClass", "fa fa-server", 3, "enableTextEntry", "label", "errors", "items", "enableFilter", "note"], ["class", "form-row", 4, "ngIf"], ["ng-disabled", "refreshingConnection || creatingDatabase", 4, "ngIf"], ["label", "Use windows authentication", "formControlName", "useWindowsAuth"], ["label", "User Name", "formControlName", "username", "placeholder", "Enter user name", "iconClass", "fa fa-user", 3, "enableTextEntry", "errors", "items", "enableFilter"], ["label", "Password", "formControlName", "passwordDisplay", "type", "password", "placeholder", "Enter a password", "iconClass", "fa fa-lock", 3, "errors", "keydown", 4, "ngIf"], ["label", "Password", "formControlName", "password", "iconClass", "fa fa-at", 3, "items", "sortItems", "enableTextEntry", 4, "ngIf"], ["label", "Use a variable for password", "formControlName", "usePasswordVariable", 3, "click"], ["label", "Password", "formControlName", "passwordDisplay", "type", "password", "placeholder", "Enter a password", "iconClass", "fa fa-lock", 3, "errors", "keydown"], ["label", "Password", "formControlName", "password", "iconClass", "fa fa-at", 3, "items", "sortItems", "enableTextEntry"], ["label", "Secure Token", "formControlName", "passwordDisplay", "type", "password", "placeholder", "Enter secure token", "iconClass", "fa fa-lock", 3, "errors", "keydown", 4, "ngIf"], ["label", "Secure Token", "formControlName", "password", "iconClass", "fa fa-at", 3, "items", "sortItems", "enableTextEntry", 4, "ngIf"], ["label", "Use a variable for token", "formControlName", "usePasswordVariable", 3, "click"], ["label", "Secure Token", "formControlName", "passwordDisplay", "type", "password", "placeholder", "Enter secure token", "iconClass", "fa fa-lock", 3, "errors", "keydown"], ["label", "Secure Token", "formControlName", "password", "iconClass", "fa fa-at", 3, "items", "sortItems", "enableTextEntry"], ["ng-disabled", "refreshingConnection || creatingDatabase"], ["formControlName", "defaultDatabase", "iconClass", "fa fa-database", "textEntryNote", "Enter the database name", 3, "label", "items", "defaultItem", "sortItems", "enableTextEntry", "textValueChange"], [1, "fa", "fa-edit"], ["label", "Multi-use Managed Database (table keys will be added to table names to allow multiple hubs to use same database)", "formControlName", "embedTableKey", 3, "errors"]], template: function ConnectionEditComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ConnectionEditComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ConnectionEditComponent_ng_template_2_Template, 5, 5, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ConnectionEditComponent_form_4_Template, 14, 16, "form", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "dexih-help", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.formsService.currentForm);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DWidgetComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_12__["DexihHelpComponent"], _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_13__["DexihInvalidFormDetailsComponent"], _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_14__["CancelButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DButtonComponent"], _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_15__["SaveButtonComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterLink"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormSelectComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormInputComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgModel"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormTextAreaComponent"], ngx_d_markdown__WEBPACK_IMPORTED_MODULE_17__["DMarkdownComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_10__["DFormCheckboxComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ConnectionEditComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dexih-connection-edit-form',
                templateUrl: './connection-edit.component.html',
                providers: [_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]]
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }]; }, { unloadNotification: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['window:beforeunload', ['$event']]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/connection/connection-edit/index.ts":
/*!**********************************************************!*\
  !*** ./src/app/+hub/connection/connection-edit/index.ts ***!
  \**********************************************************/
/*! exports provided: ConnectionEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _connection_edit_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./connection-edit.component */ "./src/app/+hub/connection/connection-edit/connection-edit.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEditComponent", function() { return _connection_edit_component__WEBPACK_IMPORTED_MODULE_0__["ConnectionEditComponent"]; });




/***/ }),

/***/ "./src/app/+hub/connection/connection-import/connection-import.component.ts":
/*!**********************************************************************************!*\
  !*** ./src/app/+hub/connection/connection-import/connection-import.component.ts ***!
  \**********************************************************************************/
/*! exports provided: ConnectionImportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionImportComponent", function() { return ConnectionImportComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};















function ConnectionImportComponent_ng_template_2_Template(rf, ctx) { }
function ConnectionImportComponent_ng_template_5_d_button_splitdropdown_0_Template(rf, ctx) { if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-splitdropdown", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("buttonClick", function ConnectionImportComponent_ng_template_5_d_button_splitdropdown_0_Template_d_button_splitdropdown_buttonClick_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r12); const items_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r10.importSelected(items_r8); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "a", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionImportComponent_ng_template_5_d_button_splitdropdown_0_Template_a_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r12); const items_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r13.newDatalinks(items_r8); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "Import & Create Datalinks");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ConnectionImportComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    const _r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ConnectionImportComponent_ng_template_5_d_button_splitdropdown_0_Template, 3, 0, "d-button-splitdropdown", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-delete", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionImportComponent_ng_template_5_Template_d_button_delete_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r16); const items_r8 = ctx.items; const ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r15.deleteSelected(items_r8); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.hubCache.canWrite);
} }
const _c0 = function (a1) { return ["table-edit", a1]; };
function ConnectionImportComponent_ng_template_7_d_button_edit_0_Template(rf, ctx) { if (rf & 1) {
    const _r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-edit", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionImportComponent_ng_template_7_d_button_edit_0_Template_d_button_edit_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r20); const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r19.deleteSelected(ctx_r19.items); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const table_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c0, table_r17.key));
} }
function ConnectionImportComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ConnectionImportComponent_ng_template_7_d_button_edit_0_Template, 1, 3, "d-button-edit", 14);
} if (rf & 2) {
    const table_r17 = ctx.item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", table_r17.key);
} }
function ConnectionImportComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    const _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-dropdown", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionImportComponent_ng_template_9_Template_a_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r23.setTableFilter("All"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionImportComponent_ng_template_9_Template_a_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r25.setTableFilter("Imported"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "Imported");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionImportComponent_ng_template_9_Template_a_click_5_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r26.setTableFilter("NonImported"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, "Non Imported");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "d-button-dropdown", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionImportComponent_ng_template_9_Template_a_click_8_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r27.setViewFilter("All"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionImportComponent_ng_template_9_Template_a_click_10_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r28.setViewFilter("Tables"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11, "Tables");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ConnectionImportComponent_ng_template_9_Template_a_click_12_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r29.setViewFilter("Views"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](13, "Views");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("text", ctx_r7.tableFilter)("pullRight", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.tableFilter == "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.tableFilter == "Imported");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.tableFilter == "NonImported");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("text", ctx_r7.viewFilter)("pullRight", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.viewFilter == "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.viewFilter == "Imported");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.viewFilter == "NonImported");
} }
class ConnectionImportComponent {
    constructor(authService, hubService, router, route) {
        this.authService = authService;
        this.hubService = hubService;
        this.router = router;
        this.route = route;
        this.showPage = false;
        this.showPageMessage = 'Loading...';
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_7__["CancelToken"]();
        this.columns = [
            { name: 'schema', title: 'Schema', format: '' },
            { name: 'name', title: 'Name', format: '' },
            { name: 'tableType', title: 'Type', enum: _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eTableType"], format: 'Enum' },
            { name: 'entityStatus.message', title: 'Latest Status' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_4__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
        this.tableFilter = 'All';
        this.viewFilter = 'Tables';
    }
    ngOnInit() {
        this.showPageMessage = 'Querying source database tables.  Please wait...';
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable(), this.hubService.getRemoteAgentObservable()).subscribe((result) => __awaiter(this, void 0, void 0, function* () {
                let data = result[0];
                let params = result[1];
                this.hubCache = result[2];
                let remoteAgent = result[3];
                this.connectionKey = +params['connectionKey'];
                if (!this.connectionKey) {
                    this.hubService.addHubErrorMessage('There was no connection specified to import tables.');
                    this.close();
                }
                else {
                    if (this.hubCache.isLoaded()) {
                        this.connection = this.hubCache.hub.dexihConnections
                            .find(connection => connection.key === this.connectionKey);
                        this.connectionReference = yield this.hubService.GetConnectionReference(this.connection);
                        this.showPage = false;
                        if (remoteAgent) {
                            if (this.connection) {
                                this.getTables(this.connection);
                            }
                            else {
                                this.hubService.addHubErrorMessage('The connection could not be found.');
                                this.close();
                            }
                        }
                        else {
                            this.showPageMessage = 'Waiting for an active remote agent...';
                        }
                    }
                }
            }));
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Connection Import');
        }
        // watch for any changes in the connections.
        this.watchChanges();
    }
    setTableFilter(tableFilter) {
        this.tableFilter = tableFilter;
        this.updateFilter();
    }
    setViewFilter(viewFilter) {
        this.viewFilter = viewFilter;
        this.updateFilter();
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    updateFilter() {
        let tables;
        switch (this.tableFilter) {
            case 'Imported':
                tables = this.tables.filter(c => c.key > 0);
                break;
            case 'NonImported':
                tables = this.tables.filter(c => c.key === 0 || !c.key);
                break;
            default:
                tables = this.tables;
                break;
        }
        switch (this.viewFilter) {
            case 'Views':
                tables = tables.filter(c => c.tableType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eTableType"].View);
                break;
            case 'Tables':
                tables = tables.filter(c => c.tableType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eTableType"].Table);
                break;
        }
        this._tableData.next(tables);
    }
    getTables(connection) {
        this.showPage = false;
        this.showPageMessage = 'Importing tables from remote database...';
        this.hubService.getDatabaseTableNames(connection, this.cancelToken)
            .then(tables => {
            this.tables = tables;
            let cacheTables = this.hubCache.hub.dexihTables.filter(c => c.connectionKey === connection.key);
            for (let i = 0; i < tables.length; i++) {
                let cacheTable = null;
                let table = tables[i];
                if (cacheTables) {
                    cacheTable = cacheTables.find(t => t.name === table.name && t.schema === table.schema);
                    if (!cacheTable && this.connectionReference && this.connectionReference.defaultSchema === table.schema) {
                        cacheTable = cacheTables.find(t => t.name === table.name && !t.schema);
                    }
                }
                if (cacheTable) {
                    this.tables[i] = cacheTable;
                }
                else {
                    table.connectionKey = connection.key;
                    table.tableType = table.tableType;
                    table.entityStatus = new _hub_models__WEBPACK_IMPORTED_MODULE_2__["EntityStatus"]();
                }
            }
            this.showPage = true;
            this.showPageMessage = '';
            this.updateFilter();
        }).catch(reason => {
            this.hubService.addHubMessage(reason);
        });
    }
    import(table) {
        this.hubService.importTables([table], true, this.cancelToken).then(importResult => {
            this.mergeTables(importResult);
            // if (importResult) {
            //     importResult[0].entityStatus.isBusy = false;
            // }
        }).catch(reason => {
            table.entityStatus.isBusy = false;
            table.entityStatus.lastStatus = _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eStatus"].Error;
            table.entityStatus.message = reason.message;
        });
    }
    deleteTable(table) {
        this.hubService.deleteTables([table]).then(result => {
            table.entityStatus.isBusy = false;
        }).catch(reason => {
            table.entityStatus.isBusy = false;
            table.entityStatus.lastStatus = _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eStatus"].Error;
            table.entityStatus.message = reason.message;
        });
    }
    importSelected(selected) {
        let selectedTables = selected.filter(t => !t.entityStatus.isBusy);
        selectedTables.forEach(t => t.entityStatus.isBusy = true);
        this.hubService.importTables(selectedTables, true, this.cancelToken).then(result => {
            this.mergeTables(result);
            // selectedTables.forEach(t => t.entityStatus.isBusy = false);
        }).catch(reason => {
            selectedTables.forEach(t => t.entityStatus.isBusy = false);
        });
    }
    mergeTables(tables) {
        if (!tables) {
            return;
        }
        tables.forEach(table => {
            let index = this.tables.findIndex(t => t.name === table.name && t.schema === table.schema);
            if (index >= 0) {
                this.tables[index] = table;
            }
        });
        this.updateFilter();
    }
    deleteSelected(selected) {
        let selectedTables = selected.filter(t => !t.entityStatus.isBusy && t.key > 0);
        if (selectedTables.length === 0) {
            this.authService.informationDialog('Can not delete', 'None of the selected tables can be deleted, as they are either busy, or have not been imported.');
        }
        selectedTables.forEach(t => t.entityStatus.isBusy = true);
        this.hubService.deleteTables(selectedTables).then(result => {
            selectedTables.forEach(t => t.entityStatus.isBusy = false);
        }).catch(reason => {
            selectedTables.forEach(t => t.entityStatus.isBusy = false);
        });
    }
    editTable(table) {
        if (table && table.key) {
            this.router.navigate(['table-edit', table.key], { relativeTo: this.route.parent });
        }
    }
    newDatalinks(items) {
        let selectedTables = items.filter(t => !t.entityStatus.isBusy);
        selectedTables.forEach(t => t.entityStatus.isBusy = true);
        this.hubService.importTables(selectedTables, true, this.cancelToken).then(result => {
            this.mergeTables(result);
            let tableKeys = result.map(c => c.key).join('|');
            this.router.navigate(['datalink-new', tableKeys, 0], { relativeTo: this.route.parent });
        }).catch(reason => {
            selectedTables.forEach(t => t.entityStatus.isBusy = false);
        });
    }
    watchChanges() {
        // watch the current connection in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eSharedObjectType"].Table) {
                if (hubCacheChange.changeType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eImportAction"].Replace || hubCacheChange.changeType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eImportAction"].New) {
                    let table = hubCacheChange.data;
                    if (table.connectionKey === this.connectionKey) {
                        let index = this.tables.findIndex(t => t.name === table.name && t.schema === table.schema);
                        if (index >= 0) {
                            this.tables[index] = table;
                            this.updateFilter();
                        }
                    }
                }
                if (hubCacheChange.changeType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eImportAction"].Delete) {
                    let deletedTable = hubCacheChange.data;
                    if (deletedTable.connectionKey === this.connectionKey) {
                        let previousTable = this.tables.find(t => t.key === deletedTable.key);
                        if (previousTable) {
                            // table has been delete, so clear key attributes so it appears deleted.
                            previousTable.key = null;
                            previousTable.entityStatus.isBusy = false;
                            previousTable.updateDate = null;
                            previousTable.createDate = null;
                            this.updateFilter();
                        }
                    }
                }
            }
        });
    }
    close() {
        this.authService.navigateUp();
    }
}
ConnectionImportComponent.ɵfac = function ConnectionImportComponent_Factory(t) { return new (t || ConnectionImportComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_5__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"])); };
ConnectionImportComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ConnectionImportComponent, selectors: [["connections"]], inputs: { hubKey: "hubKey" }, decls: 11, vars: 10, consts: [[1, "container-fluid"], ["iconClass", "fa fa-lg fa-fw fa-database", 3, "title", "showIf", "loadingMessage", "showCloseButton", "padding", "close"], ["header", ""], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "rowClick"], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["select", "filter"], ["filter", ""], ["class", "mr-1", "text", "Import", "buttonClass", "btn btn-success", "iconClass", "fa fa-cloud-download", "title", "Import selected tables", 3, "buttonClick", 4, "ngIf"], ["title", "Delete selected tables", 3, "click"], ["text", "Import", "buttonClass", "btn btn-success", "iconClass", "fa fa-cloud-download", "title", "Import selected tables", 1, "mr-1", 3, "buttonClick"], ["title", "Import tables and create default staging datalinks", 1, "dropdown-item", 3, "click"], ["class", "mr-1", "queryParamsHandling", "", "preserveFragment", "", "title", "Edit this table", 3, "routerLink", "click", 4, "ngIf"], ["queryParamsHandling", "", "preserveFragment", "", "title", "Edit this table", 1, "mr-1", 3, "routerLink", "click"], ["buttonClass", "btn-primary", "iconClass", "fa fa-download", "title", "Filter by import status", 1, "mr-1", 3, "text", "pullRight"], [1, "dropdown-item", 3, "click"], ["buttonClass", "btn-primary", "iconClass", "fa fa-table", "title", "Filter by tables/views", 1, "mr-1", 3, "text", "pullRight"]], template: function ConnectionImportComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ConnectionImportComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ConnectionImportComponent_ng_template_2_Template, 0, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "d-table", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function ConnectionImportComponent_Template_d_table_rowClick_4_listener($event) { return ctx.editTable($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ConnectionImportComponent_ng_template_5_Template, 2, 1, "ng-template", 4, 5, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ConnectionImportComponent_ng_template_7_Template, 1, 1, "ng-template", 6, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, ConnectionImportComponent_ng_template_9_Template, 14, 16, "ng-template", 8, 9, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("title", "Import Tables for " + (ctx.connection == null ? null : ctx.connection.name))("showIf", ctx.showPage)("loadingMessage", ctx.showPageMessage)("showCloseButton", true)("padding", false);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_9__["DTableComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonDeleteComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonSplitDropDownComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonEditComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_3__["RouterLink"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonDropDownComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ConnectionImportComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'connections',
                templateUrl: './connection-import.component.html',
                styles: []
            }]
    }], function () { return [{ type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_5__["AuthService"] }, { type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] }]; }, { hubKey: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/connection/connection-import/index.ts":
/*!************************************************************!*\
  !*** ./src/app/+hub/connection/connection-import/index.ts ***!
  \************************************************************/
/*! exports provided: ConnectionImportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _connection_import_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./connection-import.component */ "./src/app/+hub/connection/connection-import/connection-import.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionImportComponent", function() { return _connection_import_component__WEBPACK_IMPORTED_MODULE_0__["ConnectionImportComponent"]; });




/***/ }),

/***/ "./src/app/+hub/connection/connection-index/connection-index.component.ts":
/*!********************************************************************************!*\
  !*** ./src/app/+hub/connection/connection-index/connection-index.component.ts ***!
  \********************************************************************************/
/*! exports provided: ConnectionIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionIndexComponent", function() { return ConnectionIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _buttons_actions_connection_button_actions_connection_button_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../buttons/actions-connection-button/actions-connection-button.component */ "./src/app/+hub/buttons/actions-connection-button/actions-connection-button.component.ts");
/* harmony import */ var _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../buttons/tags-update-button/tags-update-button.component */ "./src/app/+hub/buttons/tags-update-button/tags-update-button.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _shared_utils_gt_filter_pipe__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/utils/gt-filter.pipe */ "./src/app/shared/utils/gt-filter.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __asyncValues = (undefined && undefined.__asyncValues) || function (o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
};

















function ConnectionIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "actions-connection-button", 9);
} if (rf & 2) {
    const items_r6 = ctx.items;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("connections", items_r6);
} }
function ConnectionIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "tags-update-button", 10);
} if (rf & 2) {
    const items_r7 = ctx.items;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("objectType", ctx_r3.eSharedObjectType.Connection)("objects", items_r7);
} }
const _c0 = function (a0) { return { purposeFilter: a0 }; };
function ConnectionIndexComponent_ng_template_7_a_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const purpose_r10 = ctx.$implicit;
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r9.purposeFilter == purpose_r10.key);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](5, _c0, purpose_r10.key))("title", purpose_r10.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](purpose_r10.name);
} }
const _c1 = function () { return { purposeFilter: "All" }; };
function ConnectionIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-dropdown", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "a", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ConnectionIndexComponent_ng_template_7_a_3_Template, 2, 7, "a", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "gtFilter");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autoCompact", false)("text", ctx_r5.eConnectionPurpose[ctx_r5.purposeFilter])("pullRight", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r5.purposeFilter == "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](11, _c1));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind3"](4, 7, ctx_r5.eConnectionPurposeItems, "key", 0));
} }
class ConnectionIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.eConnectionPurpose = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eConnectionPurpose"];
        this.eConnectionPurposeItems = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eConnectionPurposeItems"];
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.columns = [
            { name: 'name', title: 'Name', format: 'Md', footer: 'description', tags: 'tags' },
            { name: 'purpose', title: 'Purpose', format: '' },
            { name: 'type', title: 'Type', format: '' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_4__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        // watch for any changes in the connections.
        this.watchChanges();
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.route.data, this.route.params, this.route.queryParams, this.hubService.getHubCacheObservable()).subscribe(result => {
                let data = result[0];
                let params = result[1];
                let queryParams = result[2];
                this.hubCache = result[3];
                this.purposeFilter = +queryParams['purposeFilter'];
                if (!this.purposeFilter) {
                    this.purposeFilter = 0;
                }
                this.pageTitle = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eConnectionPurpose"][this.purposeFilter] + ' Connections';
                this.updateConnections();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Connection Index');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    deleteConnection(connection) {
        this.hubService.deleteConnections([connection]).catch(reason => {
        });
    }
    deleteConnections(connections) {
        this.hubService.deleteConnections(connections);
    }
    editConnection(connection) {
        this.router.navigate(['connection-edit', connection.key], { relativeTo: this.route });
    }
    updateConnections() {
        var e_1, _a;
        return __awaiter(this, void 0, void 0, function* () {
            if (this.hubCache && this.hubCache.isLoaded()) {
                let connections;
                if (this.purposeFilter === 0 || !this.purposeFilter) {
                    connections = this.hubCache.hub.dexihConnections;
                }
                else {
                    connections = this.hubCache.hub.dexihConnections
                        .filter(c => c.purpose === this.purposeFilter);
                }
                let tableData = [];
                try {
                    for (var connections_1 = __asyncValues(connections), connections_1_1; connections_1_1 = yield connections_1.next(), !connections_1_1.done;) {
                        const connection = connections_1_1.value;
                        let connectionReference = yield this.hubService.GetConnectionReference(connection);
                        tableData.push({
                            key: connection.key,
                            connectionAssemblyName: connection.connectionAssemblyName,
                            connectionClassName: connection.connectionClassName,
                            purpose: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eConnectionPurpose"][connection.purpose],
                            type: connectionReference ? connectionReference.name : 'Unknown (' + connection.connectionClassName + ')',
                            name: connection.name,
                            tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Connection, connection.key),
                            description: connection.description,
                            updateDate: connection.updateDate
                        });
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (connections_1_1 && !connections_1_1.done && (_a = connections_1.return)) yield _a.call(connections_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
                ;
                this._tableData.next(tableData);
            }
            else {
                this._tableData.next(null);
            }
        });
    }
    export(connections) {
        const cache = this.hubCache;
        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');
        connections.forEach(connection => { this.hubCache.cacheAddConnection(connection.key, hub); });
        let filename = connections.length === 1 ? 'Connection - ' + connections[0].name + '.json' : 'connections.json';
        this.hubService.exportHub(hub, filename);
    }
    watchChanges() {
        // watch the current connection in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Connection
                || hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects) {
                this.updateConnections();
            }
        });
    }
}
ConnectionIndexComponent.ɵfac = function ConnectionIndexComponent_Factory(t) { return new (t || ConnectionIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"])); };
ConnectionIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ConnectionIndexComponent, selectors: [["connections"]], inputs: { hubKey: "hubKey" }, decls: 10, vars: 7, consts: [[1, "container-fluid"], ["title", "Connections", "iconClass", "fa fa-lg fa-fw fa-database", 3, "showCloseButton", "close"], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "tags", "rowClick"], ["actions", ""], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["select", "filter"], ["filter", ""], ["title", "Connections", "path", "/assets/help/reference/connection.md", 1, "m-3"], [3, "connections"], [1, "ml-1", 3, "objectType", "objects"], ["buttonClass", "btn-primary", "iconClass", "fa fa-filter", "title", "Filter by a purpose", 1, "mr-1", 3, "autoCompact", "text", "pullRight"], ["routerLink", ".", "title", "All Connections", 1, "dropdown-item", 3, "queryParams"], ["class", "dropdown-item", "routerLink", ".", 3, "active", "queryParams", "title", 4, "ngFor", "ngForOf"], ["routerLink", ".", 1, "dropdown-item", 3, "queryParams", "title"]], template: function ConnectionIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ConnectionIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function ConnectionIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.editConnection($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ConnectionIndexComponent_ng_template_3_Template, 1, 1, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ConnectionIndexComponent_ng_template_5_Template, 1, 2, "ng-template", 4, 5, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ConnectionIndexComponent_ng_template_7_Template, 5, 12, "ng-template", 6, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "dexih-help", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__["DexihHelpComponent"], _buttons_actions_connection_button_actions_connection_button_component__WEBPACK_IMPORTED_MODULE_9__["ActionsConnectionButtonComponent"], _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_10__["TagsUpdateButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDropDownComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_3__["RouterLinkWithHref"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgForOf"]], pipes: [_shared_utils_gt_filter_pipe__WEBPACK_IMPORTED_MODULE_12__["GtFilterPipe"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ConnectionIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'connections',
                templateUrl: './connection-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] }]; }, { hubKey: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/connection/connection-index/index.ts":
/*!***********************************************************!*\
  !*** ./src/app/+hub/connection/connection-index/index.ts ***!
  \***********************************************************/
/*! exports provided: ConnectionIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _connection_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./connection-index.component */ "./src/app/+hub/connection/connection-index/connection-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionIndexComponent", function() { return _connection_index_component__WEBPACK_IMPORTED_MODULE_0__["ConnectionIndexComponent"]; });




/***/ }),

/***/ "./src/app/+hub/connection/index.ts":
/*!******************************************!*\
  !*** ./src/app/+hub/connection/index.ts ***!
  \******************************************/
/*! exports provided: ConnectionIndexComponent, ConnectionEditComponent, ConnectionImportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _connection_index_connection_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./connection-index/connection-index.component */ "./src/app/+hub/connection/connection-index/connection-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionIndexComponent", function() { return _connection_index_connection_index_component__WEBPACK_IMPORTED_MODULE_0__["ConnectionIndexComponent"]; });

/* harmony import */ var _connection_edit_connection_edit_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./connection-edit/connection-edit.component */ "./src/app/+hub/connection/connection-edit/connection-edit.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionEditComponent", function() { return _connection_edit_connection_edit_component__WEBPACK_IMPORTED_MODULE_1__["ConnectionEditComponent"]; });

/* harmony import */ var _connection_import_connection_import_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./connection-import/connection-import.component */ "./src/app/+hub/connection/connection-import/connection-import.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConnectionImportComponent", function() { return _connection_import_connection_import_component__WEBPACK_IMPORTED_MODULE_2__["ConnectionImportComponent"]; });






/***/ }),

/***/ "./src/app/+hub/copy/export/export.component.ts":
/*!******************************************************!*\
  !*** ./src/app/+hub/copy/export/export.component.ts ***!
  \******************************************************/
/*! exports provided: ExportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExportComponent", function() { return ExportComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");









function ExportComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save-local", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ExportComponent_ng_template_3_Template_d_button_save_local_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const items_r6 = ctx.items; const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r7.export(items_r6); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ExportComponent_ng_template_5_Template(rf, ctx) { }
function ExportComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save-local", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ExportComponent_ng_template_7_Template_d_button_save_local_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r12); const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r11.exportAll(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
class ExportComponent {
    constructor(hubService, authService) {
        this.hubService = hubService;
        this.authService = authService;
        this.columns = [
            { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },
            { name: 'label', title: 'Item Type' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.hubService.getHubCacheObservable()).subscribe(result => {
                this.hubCache = result[0];
                if (!this.hubCache.isLoaded()) {
                    return;
                }
                let data = this.hubCache.getSharedObjects();
                this.data = data;
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'View Index');
        }
    }
    exportAll() {
        this.export(this.data);
    }
    export(items) {
        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');
        items.forEach(item => {
            this.hubCache.cacheAddObject(item.type, item.item, hub);
        });
        let filename = items.length === 1 ? `${items[0].label}-${items[0].type}.json` : `hub-${this.hubCache.hub.name}.json`;
        this.hubService.exportHub(hub, filename);
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
}
ExportComponent.ɵfac = function ExportComponent_Factory(t) { return new (t || ExportComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"])); };
ExportComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ExportComponent, selectors: [["export"]], inputs: { hubKey: "hubKey" }, decls: 9, vars: 7, consts: [[1, "container-fluid"], ["title", "Export", "iconClass", "fa fa-lg fa-fw fa-feed", 3, "showCloseButton", "close"], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "data", "tags"], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["actions", ""], ["text", "Export Selected", 1, "mr-1", 3, "click"], ["text", "Export All", 1, "mr-1", 3, "click"]], template: function ExportComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ExportComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ExportComponent_ng_template_3_Template, 1, 0, "ng-template", 3, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ExportComponent_ng_template_5_Template, 0, 0, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ExportComponent_ng_template_7_Template, 1, 0, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("data", ctx.data)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_4__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_5__["DTableComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_4__["DButtonSaveLocalComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ExportComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'export',
                templateUrl: './export.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }]; }, { hubKey: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/copy/import/import.component.ts":
/*!******************************************************!*\
  !*** ./src/app/+hub/copy/import/import.component.ts ***!
  \******************************************************/
/*! exports provided: ImportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImportComponent", function() { return ImportComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _shared_utils_dropzone__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/utils/dropzone */ "./src/app/shared/utils/dropzone.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
















const _c0 = ["fileInput"];
function ImportComponent_d_widget_1_section_22_Template(rf, ctx) { if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-select", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ImportComponent_d_widget_1_section_22_Template_form_select_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6); const action_r4 = ctx.$implicit; return action_r4.action = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const action_r4 = ctx.$implicit;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("label", "", ctx_r3.eSharedObjectType[action_r4.objectType], " Action");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("note", "Action when importing ", ctx_r3.eSharedObjectType[action_r4.objectType], "");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", action_r4.action)("items", ctx_r3.importActions);
} }
function ImportComponent_d_widget_1_Template(rf, ctx) { if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-widget", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ImportComponent_d_widget_1_Template_d_widget_close_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r7.close(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "ul", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "li", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "h5");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "Drop Export Files");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "li", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("dropFiles", function ImportComponent_d_widget_1_Template_div_dropFiles_6_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r9.filesDrop($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "section", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, " Drop import files ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "section", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "input", 11, 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function ImportComponent_d_widget_1_Template_input_change_12_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r10.uploadFile($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "label", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](15, "Choose file");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "li", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "h5");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](18, "Import Options");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](19, "li", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](20, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](21, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](22, ImportComponent_d_widget_1_section_22_Template, 2, 4, "section", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("requireFiles", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r0.importOptions);
} }
function ImportComponent_d_widget_3_div_1_ul_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "ul", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const warning_r17 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" Warning: ", warning_r17, " ");
} }
function ImportComponent_d_widget_3_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ImportComponent_d_widget_3_div_1_ul_1_Template, 2, 1, "ul", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r11.import.warnings);
} }
function ImportComponent_d_widget_3_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    const _r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ImportComponent_d_widget_3_ng_template_3_Template_d_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r20); const items_r18 = ctx.items; const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r19.importSelected(items_r18); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ImportComponent_d_widget_3_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    const _r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ImportComponent_d_widget_3_ng_template_5_Template_d_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r23); const ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r22.importAll(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-close", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ImportComponent_d_widget_3_ng_template_5_Template_d_button_close_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r23); const ctx_r24 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r24.reset(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ImportComponent_d_widget_3_Template(rf, ctx) { if (rf & 1) {
    const _r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-widget", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ImportComponent_d_widget_3_Template_d_widget_close_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r26); const ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r25.reset(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ImportComponent_d_widget_3_div_1_Template, 2, 1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ImportComponent_d_widget_3_ng_template_3_Template, 1, 0, "ng-template", 20, 21, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ImportComponent_d_widget_3_ng_template_5_Template, 2, 0, "ng-template", null, 22, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (ctx_r1.import == null ? null : ctx_r1.import.warnings == null ? null : ctx_r1.import.warnings.length) > 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("columns", ctx_r1.columns)("dataObservable", ctx_r1.tableData);
} }
class ImportComponent {
    constructor(authService, hubService, hubFormsService) {
        this.authService = authService;
        this.hubService = hubService;
        this.hubFormsService = hubFormsService;
        this.automaticUpload = true;
        this.pageTitle = 'Import Objects';
        this.showPage = false;
        this.showPageMessage = 'Loading...';
        this.importActions = _hub_models__WEBPACK_IMPORTED_MODULE_4__["importActions"];
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eSharedObjectType"];
        this.columns = [
            { name: 'name', title: 'Name', format: 'Md', description: 'description' },
            { name: 'objectType', title: 'Type', format: '' },
            { name: 'importAction', title: 'Action', format: 'Enum', enum: _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eImportAction"] },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        this.importOptions = _hub_models__WEBPACK_IMPORTED_MODULE_4__["sharedObjectProperties"].map(c => ({ action: _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["eImportAction"].Replace, objectType: c.type }));
        this._hubCacheChangeSubscription = this.hubService.getHubCacheObservable().subscribe(hubCache => {
            this.hubCache = hubCache;
        });
    }
    ngOnDestroy() {
        if (this._hubCacheSubscription) {
            this._hubCacheSubscription.unsubscribe();
        }
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    doImport(file) {
        const form = new FormData();
        form.append('file', file, file.name);
        form.append('hubKey', this.hubCache.hub.hubKey.toString());
        for (let i = 0; i < this.importOptions.length; i++) {
            form.append(`importActions[${i}].action`, this.importOptions[i].action.toString());
            form.append(`importActions[${i}].objectType`, this.importOptions[i].objectType.toString());
        }
        this.authService.postForm('/api/Hub/ImportPlan', form).then(result => {
            this.import = result;
            this.refreshImport();
        });
    }
    uploadFile(event) {
        let files = event.srcElement.files;
        this.doImport(files[0]);
        // this.fileInput.nativeElement.value = '';
    }
    filesDrop(files) {
        this.doImport(files[0]);
    }
    refreshImport() {
        let objects = [];
        _hub_models__WEBPACK_IMPORTED_MODULE_4__["sharedObjectProperties"].forEach(o => {
            let items = this.import[o.property];
            items.forEach(item => {
                objects.push({
                    objectType: o.property,
                    name: item.item.name,
                    importAction: item.importAction,
                    item: item,
                });
            });
        });
        this._tableData.next(objects);
    }
    reset() {
        this._tableData.next(null);
    }
    importSelected(items) {
        let newImport = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["Import"]();
        items.forEach(item => {
            if (!newImport[item.objectType]) {
                newImport[item.objectType] = [];
            }
            newImport[item.objectType].push(item.item);
        });
        this.hubService.importPackage(newImport).then(() => {
            this.authService.navigateUp();
        });
    }
    importAll() {
        this.hubService.importPackage(this.import).then(() => {
            this.authService.navigateUp();
        });
    }
}
ImportComponent.ɵfac = function ImportComponent_Factory(t) { return new (t || ImportComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_1__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_2__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_5__["HubFormsService"])); };
ImportComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ImportComponent, selectors: [["import"]], viewQuery: function ImportComponent_Query(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c0, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.fileInput = _t.first);
    } }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([_hub_forms_service__WEBPACK_IMPORTED_MODULE_5__["HubFormsService"]])], decls: 5, vars: 6, consts: [[1, "container"], ["title", "Import Objects", "iconClass", "fa fa-lg fa-fw fa-level-down", 3, "showCloseButton", "close", 4, "ngIf"], ["title", "Import Package", "iconClass", "fa fa-lg fa-fw fa-level-down", 3, "showCloseButton", "close", 4, "ngIf"], ["title", "Import Objects", "iconClass", "fa fa-lg fa-fw fa-level-down", 3, "showCloseButton", "close"], [1, "list-group"], [1, "list-group-item", "list-group-item-info", "rounded-0"], [1, "list-group-item"], ["dropZone", "", "dropAllowedClass", "nv-file-over", 1, "well", "my-drop-zone", 3, "requireFiles", "dropFiles"], [1, "form-row"], [1, "form-group", "col-md-6"], [1, "custom-file", "w-auto", "pull-right"], ["type", "file", 1, "custom-file-input", 3, "change"], ["fileInput", ""], ["for", "inputGroupFile01", 1, "custom-file-label"], [1, "list-group-item", "list-group-item-info"], ["class", "form-group col-md-6", 4, "ngFor", "ngForOf"], ["itemKey", "key", "itemName", "name", 3, "label", "ngModel", "items", "note", "ngModelChange"], ["title", "Import Package", "iconClass", "fa fa-lg fa-fw fa-level-down", 3, "showCloseButton", "close"], ["class", "alert alert-warning", 4, "ngIf"], [3, "enableMultiSelect", "columns", "dataObservable"], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["actions", ""], [1, "alert", "alert-warning"], ["class", "list-item", 4, "ngFor", "ngForOf"], [1, "list-item"], ["iconClass", "fa fa-upload", "buttonClass", "btn-primary", "text", "Import Selected", 1, "ml-1", 3, "click"], ["iconClass", "fa fa-cloud-upload", "buttonClass", "btn-primary", "text", "Import All", 3, "click"], [1, "ml-1", 3, "click"]], template: function ImportComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ImportComponent_d_widget_1_Template, 23, 3, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ImportComponent_d_widget_3_Template, 7, 5, "d-widget", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        var tmp_0_0 = null;
        var tmp_1_0 = null;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !((tmp_0_0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 2, ctx.tableData)) == null ? null : tmp_0_0.length));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ((tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 4, ctx.tableData)) == null ? null : tmp_1_0.length) > 0);
    } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_7__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DWidgetComponent"], _shared_utils_dropzone__WEBPACK_IMPORTED_MODULE_9__["DropZoneDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgForOf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DFormSelectComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgModel"], ngx_d_table__WEBPACK_IMPORTED_MODULE_11__["DTableComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonCloseComponent"]], pipes: [_angular_common__WEBPACK_IMPORTED_MODULE_7__["AsyncPipe"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ImportComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'import',
                templateUrl: './import.component.html',
                providers: [_hub_forms_service__WEBPACK_IMPORTED_MODULE_5__["HubFormsService"]]
            }]
    }], function () { return [{ type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_1__["AuthService"] }, { type: _hub_service__WEBPACK_IMPORTED_MODULE_2__["HubService"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_5__["HubFormsService"] }]; }, { fileInput: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['fileInput', { static: true }]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/copy/index.ts":
/*!************************************!*\
  !*** ./src/app/+hub/copy/index.ts ***!
  \************************************/
/*! exports provided: ImportComponent, ExportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _import_import_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./import/import.component */ "./src/app/+hub/copy/import/import.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ImportComponent", function() { return _import_import_component__WEBPACK_IMPORTED_MODULE_0__["ImportComponent"]; });

/* harmony import */ var _export_export_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./export/export.component */ "./src/app/+hub/copy/export/export.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ExportComponent", function() { return _export_export_component__WEBPACK_IMPORTED_MODULE_1__["ExportComponent"]; });





/***/ }),

/***/ "./src/app/+hub/customFunction/customFunction-edit/customFunction-edit.component.ts":
/*!******************************************************************************************!*\
  !*** ./src/app/+hub/customFunction/customFunction-edit/customFunction-edit.component.ts ***!
  \******************************************************************************************/
/*! exports provided: CustomFunctionEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomFunctionEditComponent", function() { return CustomFunctionEditComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var _hub_remote_models__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../hub.remote.models */ "./src/app/+hub/hub.remote.models.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _shared_ui_dexihMessage_dexih_message_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/ui/dexihMessage/dexih-message.component */ "./src/app/shared/ui/dexihMessage/dexih-message.component.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component */ "./src/app/shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component.ts");
/* harmony import */ var _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../buttons/cancel-button/cancel-button.component */ "./src/app/+hub/buttons/cancel-button/cancel-button.component.ts");
/* harmony import */ var _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../buttons/save-button/save-button.component */ "./src/app/+hub/buttons/save-button/save-button.component.ts");
/* harmony import */ var _customFunction_parameter_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./customFunction-parameter.component */ "./src/app/+hub/customFunction/customFunction-edit/customFunction-parameter.component.ts");

























function CustomFunctionEditComponent_ng_template_3_save_button_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "save-button", 13);
} if (rf & 2) {
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r9.formsService);
} }
function CustomFunctionEditComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    const _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "dexih-invalid-form-details", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionEditComponent_ng_template_3_Template_dexih_invalid_form_details_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r11); const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r10.formsService.showErrors(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CustomFunctionEditComponent_ng_template_3_save_button_1_Template, 1, 1, "save-button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "cancel-button", 12);
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r1.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r1.formsService);
} }
function CustomFunctionEditComponent_form_5_section_2_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"]("Cleaned Value = ", ctx_r14.testResult.cleanedValue, " ");
} }
function CustomFunctionEditComponent_form_5_section_2_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"]("Reject Reason = ", ctx_r15.testResult.rejectReason, " ");
} }
function CustomFunctionEditComponent_form_5_section_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CustomFunctionEditComponent_form_5_section_2_div_3_Template, 2, 1, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CustomFunctionEditComponent_form_5_section_2_div_4_Template, 2, 1, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("alert-danger", ctx_r12.testResult.success == false)("alert-success", ctx_r12.testResult.success == true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" Test Result = ", ctx_r12.testResult.success, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r12.testResult.cleanedValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r12.testResult.rejectReason);
} }
function CustomFunctionEditComponent_form_5_ng_template_9_div_3_Template(rf, ctx) { if (rf & 1) {
    const _r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionEditComponent_form_5_ng_template_9_div_3_Template_d_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r20); const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r19.addParameter(null, ctx_r19.eParameterDirection.Input); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "Add Parameter ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
const _c0 = function (a0) { return { "z-index": a0, "position": "relative" }; };
function CustomFunctionEditComponent_form_5_ng_template_9_div_4_Template(rf, ctx) { if (rf & 1) {
    const _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "customFunction-parameter", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("addParameter", function CustomFunctionEditComponent_form_5_ng_template_9_div_4_Template_customFunction_parameter_addParameter_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r23.addParameter($event, ctx_r23.eParameterDirection.Input); })("removeParameter", function CustomFunctionEditComponent_form_5_ng_template_9_div_4_Template_customFunction_parameter_removeParameter_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r25.removeParameter($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const parameter_r21 = ctx.$implicit;
    const i_r22 = ctx.index;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](2, _c0, 200 - i_r22));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("customFunctionParameterForm", parameter_r21);
} }
function CustomFunctionEditComponent_form_5_ng_template_9_div_5_div_8_Template(rf, ctx) { if (rf & 1) {
    const _r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionEditComponent_form_5_ng_template_9_div_5_div_8_Template_d_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r29); const ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r28.addParameter(null, ctx_r28.eParameterDirection.Output); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "Add Parameter");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function CustomFunctionEditComponent_form_5_ng_template_9_div_5_div_9_Template(rf, ctx) { if (rf & 1) {
    const _r33 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "customFunction-parameter", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("addParameter", function CustomFunctionEditComponent_form_5_ng_template_9_div_5_div_9_Template_customFunction_parameter_addParameter_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r33); const ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r32.addParameter($event, ctx_r32.eParameterDirection.Output); })("removeParameter", function CustomFunctionEditComponent_form_5_ng_template_9_div_5_div_9_Template_customFunction_parameter_removeParameter_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r33); const ctx_r34 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r34.removeParameter($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const parameter_r30 = ctx.$implicit;
    const i_r31 = ctx.index;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](2, _c0, 100 - i_r31));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("customFunctionParameterForm", parameter_r30);
} }
const _c1 = function () { return { "z-index": 101, "position": "relative" }; };
function CustomFunctionEditComponent_form_5_ng_template_9_div_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Output Parameters ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "input", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "form-select", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, CustomFunctionEditComponent_form_5_ng_template_9_div_5_div_8_Template, 3, 0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, CustomFunctionEditComponent_form_5_ng_template_9_div_5_div_9_Template, 2, 4, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](5, _c1));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("border", false)("items", ctx_r18.typeCodes);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r18.outputParameters.length === 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r18.outputParameters);
} }
function CustomFunctionEditComponent_form_5_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Input Parameters ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CustomFunctionEditComponent_form_5_ng_template_9_div_3_Template, 3, 0, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CustomFunctionEditComponent_form_5_ng_template_9_div_4_Template, 2, 4, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, CustomFunctionEditComponent_form_5_ng_template_9_div_5_Template, 11, 6, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, " Function Code ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "textarea", 23);
} if (rf & 2) {
    const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r13.inputParameters.length === 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r13.inputParameters);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r13.functionType != ctx_r13.eFunctionType.Condition);
} }
function CustomFunctionEditComponent_form_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CustomFunctionEditComponent_form_5_section_2_Template, 5, 7, "section", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "form-select", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "form-input", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "form-textarea", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, CustomFunctionEditComponent_form_5_ng_template_9_Template, 8, 3, "ng-template", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r2.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.testResult);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r2.functionTypes);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autocapitalize", true)("errors", ctx_r2.formsService.formErrors["name"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showPreview", true)("isHidden", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.functionType);
} }
function CustomFunctionEditComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    const _r36 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionEditComponent_ng_template_7_Template_d_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r36); const ctx_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r35.test(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Syntax Check");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-button", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionEditComponent_ng_template_7_Template_d_button_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r36); const ctx_r37 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r37.test(ctx_r37.inputParameterValues); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3, "Run");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "d-button-save-local", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionEditComponent_ng_template_7_Template_d_button_save_local_click_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r36); const ctx_r38 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r38.downloadCode(ctx_r38.inputParameterValues); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function CustomFunctionEditComponent_div_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, " Input Parameters ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function CustomFunctionEditComponent_div_14_div_1_div_4_Template(rf, ctx) { if (rf & 1) {
    const _r48 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "form-input", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function CustomFunctionEditComponent_div_14_div_1_div_4_Template_form_input_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r48); const j_r46 = ctx.index; const i_r40 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).index; const ctx_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return (ctx_r47.inputParameterValues[i_r40][j_r46] = $event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "button", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionEditComponent_div_14_div_1_div_4_Template_button_click_6_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r48); const j_r46 = ctx.index; const i_r40 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).index; const ctx_r50 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r50.addParameterValue(i_r40, j_r46); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "i", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "button", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionEditComponent_div_14_div_1_div_4_Template_button_click_9_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r48); const j_r46 = ctx.index; const i_r40 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).index; const ctx_r52 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r52.removeParameterValue(i_r40, j_r46); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "i", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const j_r46 = ctx.index;
    const ctx_r54 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    const inputParameter_r39 = ctx_r54.$implicit;
    const i_r40 = ctx_r54.index;
    const ctx_r44 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", inputParameter_r39.controls.name.value + "[" + j_r46 + "]", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("border", false)("ngModel", ctx_r44.inputParameterValues[i_r40][j_r46])("name", "inputParameterValues-" + i_r40 + "-" + j_r46);
} }
function CustomFunctionEditComponent_div_14_div_1_Template(rf, ctx) { if (rf & 1) {
    const _r57 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-button", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionEditComponent_div_14_div_1_Template_d_button_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r57); const i_r40 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().index; const ctx_r55 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r55.addParameterValue(i_r40); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CustomFunctionEditComponent_div_14_div_1_div_4_Template, 11, 4, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r58 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    const inputParameter_r39 = ctx_r58.$implicit;
    const i_r40 = ctx_r58.index;
    const ctx_r41 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" Add ", inputParameter_r39.controls.name.value, " value ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r41.inputParameterValues[i_r40]);
} }
function CustomFunctionEditComponent_div_14_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    const _r60 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form-input", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function CustomFunctionEditComponent_div_14_ng_template_2_Template_form_input_ngModelChange_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r60); const i_r40 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().index; const ctx_r59 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return (ctx_r59.inputParameterValues[i_r40] = $event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r62 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    const inputParameter_r39 = ctx_r62.$implicit;
    const i_r40 = ctx_r62.index;
    const ctx_r43 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("label", inputParameter_r39.controls.name.value)("ngModel", ctx_r43.inputParameterValues[i_r40])("name", "inputParameterValues" + i_r40);
} }
function CustomFunctionEditComponent_div_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CustomFunctionEditComponent_div_14_div_1_Template, 5, 2, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CustomFunctionEditComponent_div_14_ng_template_2_Template, 1, 3, "ng-template", null, 35, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const inputParameter_r39 = ctx.$implicit;
    const i_r40 = ctx.index;
    const _r42 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](3, _c0, 200 - i_r40));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", inputParameter_r39.controls.rank.value > 0)("ngIfElse", _r42);
} }
function CustomFunctionEditComponent_div_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, " Outputs Parameters ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function CustomFunctionEditComponent_div_17_Template(rf, ctx) { if (rf & 1) {
    const _r66 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-input", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function CustomFunctionEditComponent_div_17_Template_form_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r66); const i_r64 = ctx.index; const ctx_r65 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return (ctx_r65.outputParameterValues[i_r64] = $event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const outputParameter_r63 = ctx.$implicit;
    const i_r64 = ctx.index;
    const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](5, _c0, 200 - i_r64));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", true)("label", outputParameter_r63.controls.name.value)("ngModel", ctx_r8.outputParameterValues[i_r64])("name", "outputParameterValues" + i_r64);
} }
class CustomFunctionEditComponent {
    constructor(hubService, authService, formsService, route, router, location) {
        this.hubService = hubService;
        this.authService = authService;
        this.formsService = formsService;
        this.route = route;
        this.router = router;
        this.location = location;
        this.typeCodes = _hub_remote_models__WEBPACK_IMPORTED_MODULE_8__["TypeCodes"];
        this.eParameterDirection = _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["eParameterDirection"];
        this.outputParameters = [];
        this.inputParameters = [];
        this.outputParameterValues = [];
        this.inputParameterValues = [];
        this.functionTypes = _hub_remote_models__WEBPACK_IMPORTED_MODULE_8__["functionTypes"];
        this.eFunctionType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["eFunctionType"];
        this.lookupColumnValue = '';
        this.isLoaded = false;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_9__["CancelToken"]();
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable()).subscribe(result => {
                let data = result[0];
                this.params = result[1];
                this.hubCache = result[2];
                this.action = data['action'];
                this.pageTitle = data['pageTitle'];
                if (!this.hubCache || this.hubCache.status !== _hub_models__WEBPACK_IMPORTED_MODULE_2__["eCacheStatus"].Loaded) {
                    return;
                }
                if (this.isLoaded && this.action === 'new') {
                    return;
                }
                if (this.isLoaded && this.formsService.hasChanged) {
                    this.authService.confirmDialog('Synchronization warning', 'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')
                        .then(confirm => {
                        if (confirm) {
                            this.load();
                        }
                    }).catch(reason => {
                        return;
                    });
                }
                else {
                    this.load();
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Column Validation');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._formChangeSubscription) {
            this._formChangeSubscription.unsubscribe();
        }
        if (this._functionTypeSubscription) {
            this._functionTypeSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    load() {
        this.isLoaded = true;
        if (this.action === 'edit') {
            // get the hub key from the route data, and update the service.
            this.customFunctionKey = +this.params['customFunctionKey'];
            if (!this.customFunctionKey) {
                this.hubService.addHubErrorMessage('There was no custom function specified to edit.');
                // this.errorMessage = 'There was no validation specified to edit.';
            }
            else {
                if (!this.hubCache.hub || !this.hubCache.hub.dexihCustomFunctions) {
                    this.hubService.addHubErrorMessage('The hub cache is not loaded.');
                }
                else {
                    let customFunction = this.hubCache.hub.dexihCustomFunctions.find(c => c.key === this.customFunctionKey);
                    this.formsService.customFunction(customFunction);
                    this.functionType = this.formsService.currentForm.controls.functionType.value;
                }
            }
        }
        if (this.action === 'new') {
            let customFunction = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["DexihCustomFunction"]();
            customFunction.key = this.hubCache.getNextSequence();
            this.formsService.customFunction(customFunction);
            // update the url with the saved key
            this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {
                let key = form.controls.key.value;
                if (key >= 0) {
                    if (history.pushState) {
                        let newUrl = window.location.pathname.replace('/customFunction-new', `/customFunction-edit/${key}`);
                        this.router.navigateByUrl(newUrl);
                        this._formChangeSubscription.unsubscribe();
                    }
                }
            });
            this.functionType = this.formsService.currentForm.controls.functionType.value;
        }
        this._functionTypeSubscription = this.formsService.currentForm.controls.functionType.valueChanges.subscribe(functionType => {
            this.functionType = functionType;
            if (this.functionType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["eFunctionType"].Condition
                || this.functionType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["eFunctionType"].JoinCondition || this.functionType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["eFunctionType"].Validate) {
                this.formsService.currentForm.controls.returnType.setValue(_shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["eTypeCode"].Boolean);
                this.updateParameters();
            }
        });
        this.updateParameters();
    }
    canDeactivate() {
        return new Promise(resolve => {
            if (this.formsService.currentForm && !this.formsService.currentForm.pristine) {
                this.authService.confirmDialog('Function has changed', 'The function has changed.  Would you like to discard the changes and return to the previous screen?').then(confirm => {
                    resolve(confirm);
                }).catch(reason => {
                    resolve(false);
                });
            }
            else {
                resolve(true);
            }
        });
    }
    parametersArray() {
        return this.formsService.currentForm.controls.dexihCustomFunctionParameters;
    }
    updateParameters() {
        let parameters = this.parametersArray();
        this.inputParameters = parameters.controls.sort((a, b) => a.value.position - b.value.position)
            .filter(c => c.value.direction === _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["eParameterDirection"].Input);
        this.outputParameters = parameters.controls.sort((a, b) => a.value.position - b.value.position)
            .filter(c => c.value.direction === _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["eParameterDirection"].Output);
        this.inputParameterValues.length = this.inputParameters.length;
        this.outputParameterValues.length = this.outputParameters.length;
    }
    addParameter(parameter, direction) {
        try {
            let newParameter = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["DexihCustomFunctionParameter"]();
            if (parameter) {
                let oldParameter = parameter.value;
                newParameter.dataType = oldParameter.dataType;
                newParameter.name = oldParameter.name;
                newParameter.position = oldParameter.position + 1;
            }
            newParameter.key = this.hubCache.getNextSequence();
            newParameter.name = '';
            newParameter.direction = direction;
            newParameter.rank = 0;
            newParameter.isValid = true;
            let parameters = this.parametersArray();
            let newParameterForm = this.formsService.customFunctionParametersFormGroup(newParameter);
            parameters.push(newParameterForm);
            // reset the positions
            parameters.controls.sort((a, b) => a.value.position - b.value.position).forEach((p, index) => {
                p.controls.position.setValue(index * 10);
            });
            this.updateParameters();
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Edit Custom Function, add parameter');
        }
    }
    addParameterValue(index, valueIndex) {
        if (Array.isArray(this.inputParameterValues[index])) {
            this.inputParameterValues[index].splice(valueIndex + 1, 0, '');
        }
        else {
            this.inputParameterValues[index] = new Array(1);
        }
    }
    removeParameterValue(index, valueIndex) {
        this.inputParameterValues[index].splice(valueIndex, 1);
    }
    removeParameter(parameter) {
        try {
            let inputParameters = this.parametersArray();
            let index = inputParameters.controls.indexOf(parameter);
            if (index > -1) {
                inputParameters.removeAt(index);
            }
            this.updateParameters();
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Edit Custom Function, remove parameter');
        }
    }
    downloadCode(parameters = null) {
        let tmpTransform = this.createDataTransformItem();
        this.hubService.downloadCustomFunction(tmpTransform, parameters);
    }
    test(parameters = null) {
        let tmpTransform = this.createDataTransformItem();
        this.hubService.testCustomFunction(tmpTransform, parameters, this.cancelToken).then(result => {
            this.syntaxMessage = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_9__["Message"](true, 'The function has successfully compiled.', null, null);
            if (result && result.length > 0) {
                result.forEach((value, index) => {
                    if (index === 0) {
                        this.returnParameterValue = value;
                    }
                    else {
                        this.outputParameterValues[index - 1] = value;
                    }
                });
            }
            else {
                this.returnParameterValue = null;
                this.outputParameterValues.forEach(c => c = null);
            }
        }).catch(reason => {
            let converted = reason;
            if (reason.stack) {
                converted = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_9__["Message"](false, 'Client Error: ' + reason.message, reason.stack, '');
            }
            this.syntaxMessage = converted;
            this.returnParameterValue = null;
            this.outputParameterValues.forEach(c => c = null);
        });
    }
    createDataTransformItem() {
        let selectedCustomFunction = this.formsService.currentForm.value;
        let item = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["DexihDatalinkTransformItem"]();
        item.functionCode = selectedCustomFunction.methodCode;
        item.functionResultCode = selectedCustomFunction.resultCode;
        item.transformItemType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["eTransformItemType"].CustomFunction;
        let parameters = [];
        selectedCustomFunction.dexihCustomFunctionParameters.sort((a, b) => a.position - b.position)
            .forEach((param, index) => {
            if (param) {
                let newParameter = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["DexihFunctionParameter"]();
                newParameter.key = 0;
                newParameter.datalinkTransformItemKey = 0;
                newParameter.name = param.name;
                newParameter.rank = param.rank;
                newParameter.direction = param.direction;
                newParameter.dataType = param.dataType;
                newParameter.position = index;
                newParameter.isValid = true;
                parameters.push(newParameter);
            }
        });
        let returnParam = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["DexihFunctionParameter"]();
        returnParam.key = 0;
        returnParam.datalinkTransformItemKey = 0;
        returnParam.name = 'Return';
        returnParam.rank = 0;
        returnParam.direction = _shared_shared_models__WEBPACK_IMPORTED_MODULE_10__["eParameterDirection"].ReturnValue;
        returnParam.dataType = selectedCustomFunction.returnType;
        returnParam.position = 0;
        returnParam.isValid = true;
        parameters.push(returnParam);
        // item.returnType = selectedCustomFunction.returnType;
        item.dexihFunctionParameters = parameters;
        return item;
    }
    close() {
        this.authService.navigateUp();
    }
}
CustomFunctionEditComponent.ɵfac = function CustomFunctionEditComponent_Factory(t) { return new (t || CustomFunctionEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_7__["HubFormsService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_common__WEBPACK_IMPORTED_MODULE_6__["Location"])); };
CustomFunctionEditComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: CustomFunctionEditComponent, selectors: [["dexih-customFunction-edit-form"]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([_hub_forms_service__WEBPACK_IMPORTED_MODULE_7__["HubFormsService"]])], decls: 19, vars: 11, consts: [[1, "container"], ["title", "Edit Function", "iconClass", "fa fa-lg fa-fw fa-code", 3, "showCloseButton", "padding", "close"], ["header", ""], [3, "formGroup", 4, "ngIf"], ["title", "Test Function", "iconClass", "fa fa-lg fa-fw fa-code", 3, "padding"], [3, "message"], ["class", "label", 4, "ngIf"], [3, "ngStyle", 4, "ngFor", "ngForOf"], ["label", "Return Value", "name", "returnParameterValue", "type", "text", 3, "disabled", "ngModel", "ngModelChange"], ["title", "Custom Functions", "path", "/assets/help/reference/function.md", 1, "m-3"], [1, "mr-1", 3, "control", "click"], ["class", "mr-1", 3, "formsService", 4, "ngIf"], [3, "formsService"], [1, "mr-1", 3, "formsService"], [3, "formGroup"], [4, "ngIf"], ["label", "Function Type", "formControlName", "functionType", "itemKey", "key", "itemName", "name", "iconClass", "fa fa-question", 3, "items"], ["label", "Custom Function Name", "formControlName", "name", "placeholder", "Enter the name.", "iconClass", "fa fa-list", 3, "autocapitalize", "errors"], ["label", "Description", "formControlName", "description", "placeholder", "Enter the description.", 3, "showPreview", "isHidden"], [3, "ngIf"], [1, "alert"], [1, "label", "mb-1"], ["class", "mb-1", 4, "ngIf"], ["rows", "20", "width", "100%", "spellcheck", "false", "formControlName", "methodCode", 1, "form-control"], [1, "mb-1"], ["iconClass", "fa fa-plus-square-o", "title", "Click to add a parameter", 3, "click"], [3, "ngStyle"], [3, "customFunctionParameterForm", "addParameter", "removeParameter"], [1, "input-group", "mb-1"], ["readonly", "", "value", "Return Data Type", 1, "form-control"], ["formControlName", "returnType", "itemKey", "key", "itemName", "name", 1, "form-control", "p-0", 3, "border", "items"], ["buttonClass", "btn btn-success", 1, "mr-1", 3, "click"], ["text", "Sample Code", 3, "click"], [1, "label"], [4, "ngIf", "ngIfElse"], ["showValue", ""], [4, "ngFor", "ngForOf"], [1, "input-group"], [1, "form-control"], ["type", "text", "placeholder", "Enter a test value for the parameter", 1, "form-control", "p-0", 3, "border", "ngModel", "name", "ngModelChange"], [1, "input-group-text", "p-0"], ["type", "button", "value", "Add", 1, "btn", "btn-sm", "border-0", "bg-transparent", 3, "click"], [1, "fa", "fa-plus-square-o"], ["type", "button", "value", "Remove", 1, "btn", "btn-sm", "border-0", "bg-transparent", 3, "click"], [1, "fa", "fa-minus-square-o"], ["type", "text", "placeholder", "Enter a test value for the parameter", 3, "label", "ngModel", "name", "ngModelChange"], ["type", "text", 3, "disabled", "label", "ngModel", "name", "ngModelChange"]], template: function CustomFunctionEditComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget-vertical");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function CustomFunctionEditComponent_Template_d_widget_close_2_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CustomFunctionEditComponent_ng_template_3_Template, 3, 3, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, CustomFunctionEditComponent_form_5_Template, 10, 8, "form", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "d-widget", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, CustomFunctionEditComponent_ng_template_7_Template, 5, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "dexih-message", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "form");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "fieldset");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](13, CustomFunctionEditComponent_div_13_Template, 2, 0, "div", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](14, CustomFunctionEditComponent_div_14_Template, 4, 5, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](15, "form-input", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function CustomFunctionEditComponent_Template_form_input_ngModelChange_15_listener($event) { return ctx.returnParameterValue = $event; });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](16, CustomFunctionEditComponent_div_16_Template, 2, 0, "div", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](17, CustomFunctionEditComponent_div_17_Template, 2, 7, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](18, "dexih-help", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.formsService.currentForm);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("padding", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("message", ctx.syntaxMessage);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.inputParameters.length > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.inputParameters);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", true)("ngModel", ctx.returnParameterValue);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.outputParameters.length > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.outputParameters);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DWidgetVerticalComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DWidgetComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgIf"], _shared_ui_dexihMessage_dexih_message_component__WEBPACK_IMPORTED_MODULE_12__["DexihMessageComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["NgForm"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgForOf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DFormInputComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["NgModel"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_14__["DexihHelpComponent"], _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_15__["DexihInvalidFormDetailsComponent"], _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_16__["CancelButtonComponent"], _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_17__["SaveButtonComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DFormSelectComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DFormTextAreaComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["DefaultValueAccessor"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DButtonComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgStyle"], _customFunction_parameter_component__WEBPACK_IMPORTED_MODULE_18__["CustomFunctionParameterComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DButtonSaveLocalComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CustomFunctionEditComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dexih-customFunction-edit-form',
                templateUrl: './customFunction-edit.component.html',
                providers: [_hub_forms_service__WEBPACK_IMPORTED_MODULE_7__["HubFormsService"]]
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_7__["HubFormsService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }, { type: _angular_common__WEBPACK_IMPORTED_MODULE_6__["Location"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/customFunction/customFunction-edit/customFunction-parameter.component.ts":
/*!***********************************************************************************************!*\
  !*** ./src/app/+hub/customFunction/customFunction-edit/customFunction-parameter.component.ts ***!
  \***********************************************************************************************/
/*! exports provided: CustomFunctionParameterComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomFunctionParameterComponent", function() { return CustomFunctionParameterComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _hub_remote_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.remote.models */ "./src/app/+hub/hub.remote.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");






class CustomFunctionParameterComponent {
    constructor() {
        this.customFunctionParameterForm = null;
        this.addParameter = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.removeParameter = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.eBasicType = _hub_remote_models__WEBPACK_IMPORTED_MODULE_2__["eBasicType"];
        this.typeCodes = _hub_remote_models__WEBPACK_IMPORTED_MODULE_2__["TypeCodes"];
        this.ignoreChanges = false;
    }
    ngOnInit() {
    }
    ngOnDestroy() {
    }
    add() {
        this.addParameter.emit(this.customFunctionParameterForm);
    }
    remove() {
        this.removeParameter.emit(this.customFunctionParameterForm);
    }
}
CustomFunctionParameterComponent.ɵfac = function CustomFunctionParameterComponent_Factory(t) { return new (t || CustomFunctionParameterComponent)(); };
CustomFunctionParameterComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: CustomFunctionParameterComponent, selectors: [["customFunction-parameter"]], inputs: { customFunctionParameterForm: "customFunctionParameterForm" }, outputs: { addParameter: "addParameter", removeParameter: "removeParameter" }, decls: 15, vars: 3, consts: [[1, "mb-1", 3, "formGroup"], [1, "input-group"], ["type", "text", "formControlName", "name", "placeholder", "Enter a name for the parameter", 1, "form-control"], ["formControlName", "dataType", "itemKey", "key", "itemName", "name", 1, "form-control", "p-0", 3, "border", "items"], [1, "input-group-append"], [1, "input-group-text", "p-0"], [1, "p-1"], ["type", "number", "formControlName", "rank", 1, "mx-1"], ["type", "button", "value", "Add", 1, "btn", "btn-sm", "border-0", "bg-transparent", 3, "click"], [1, "fa", "fa-plus-square-o"], ["type", "button", "value", "Remove", 1, "btn", "btn-sm", "border-0", "bg-transparent", 3, "click"], [1, "fa", "fa-minus-square-o"]], template: function CustomFunctionParameterComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "input", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "form-select", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "span", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](7, "Array Dimensions (0-non array)");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "input", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "button", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionParameterComponent_Template_button_click_10_listener() { return ctx.add(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](11, "i", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "button", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionParameterComponent_Template_button_click_13_listener() { return ctx.remove(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](14, "i", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx.customFunctionParameterForm);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("border", false)("items", ctx.typeCodes);
    } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormGroupDirective"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_3__["DFormSelectComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["NumberValueAccessor"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CustomFunctionParameterComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'customFunction-parameter',
                templateUrl: './customFunction-parameter.component.html'
            }]
    }], function () { return []; }, { customFunctionParameterForm: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], addParameter: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], removeParameter: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/customFunction/customFunction-edit/index.ts":
/*!******************************************************************!*\
  !*** ./src/app/+hub/customFunction/customFunction-edit/index.ts ***!
  \******************************************************************/
/*! exports provided: CustomFunctionEditComponent, CustomFunctionParameterComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _customFunction_edit_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customFunction-edit.component */ "./src/app/+hub/customFunction/customFunction-edit/customFunction-edit.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomFunctionEditComponent", function() { return _customFunction_edit_component__WEBPACK_IMPORTED_MODULE_0__["CustomFunctionEditComponent"]; });

/* harmony import */ var _customFunction_parameter_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./customFunction-parameter.component */ "./src/app/+hub/customFunction/customFunction-edit/customFunction-parameter.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomFunctionParameterComponent", function() { return _customFunction_parameter_component__WEBPACK_IMPORTED_MODULE_1__["CustomFunctionParameterComponent"]; });





/***/ }),

/***/ "./src/app/+hub/customFunction/customFunction-index/customFunction-index.component.ts":
/*!********************************************************************************************!*\
  !*** ./src/app/+hub/customFunction/customFunction-index/customFunction-index.component.ts ***!
  \********************************************************************************************/
/*! exports provided: CustomFunctionIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomFunctionIndexComponent", function() { return CustomFunctionIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../buttons/tags-update-button/tags-update-button.component */ "./src/app/+hub/buttons/tags-update-button/tags-update-button.component.ts");















function CustomFunctionIndexComponent_ng_template_3_d_button_delete_1_Template(rf, ctx) { if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-delete", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionIndexComponent_ng_template_3_d_button_delete_1_Template_d_button_delete_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const items_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r6.deleteCustomFunctions(items_r4); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function CustomFunctionIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save-local", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CustomFunctionIndexComponent_ng_template_3_Template_d_button_save_local_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10); const items_r4 = ctx.items; const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r9.export(items_r4); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CustomFunctionIndexComponent_ng_template_3_d_button_delete_1_Template, 1, 0, "d-button-delete", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "tags-update-button", 9);
} if (rf & 2) {
    const items_r4 = ctx.items;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("objectType", ctx_r1.eSharedObjectType.CustomFunction)("objects", items_r4);
} }
const _c0 = function () { return ["customFunction-new"]; };
function CustomFunctionIndexComponent_ng_template_5_d_button_new_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-button-new", 11);
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](1, _c0));
} }
function CustomFunctionIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CustomFunctionIndexComponent_ng_template_5_d_button_new_0_Template, 1, 2, "d-button-new", 10);
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.hubCache.canWrite);
} }
class CustomFunctionIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.columns = [
            { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_4__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        // watch for any changes in the validations.
        this.watchChanges();
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.hubService.getHubCacheObservable()).subscribe(result => {
                this.hubCache = result[0];
                this.updateCustomFunctions();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Column Validation Index');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    deleteCustomFunctions(functions) {
        this.hubService.deleteCustomFunctions(functions);
    }
    updateCustomFunctions() {
        if (this.hubCache && this.hubCache.isLoaded()) {
            let functions = this.hubCache.hub.dexihCustomFunctions.filter(c => c.isValid)
                .map(c => {
                return {
                    key: c.key,
                    name: c.name,
                    description: c.description,
                    updateDate: c.updateDate,
                    tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].CustomFunction, c.key)
                };
            });
            this._tableData.next(functions);
        }
        else {
            this._tableData.next(null);
        }
    }
    edit(customFunction) {
        this.router.navigate(['customFunction-edit', customFunction.key], { relativeTo: this.route });
    }
    export(items) {
        const cache = this.hubCache;
        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');
        items.forEach(item => { this.hubCache.cacheAddCustomFunction(item.key, hub); });
        let filename = items.length === 1 ? 'CustomFunction - ' + items[0].name + '.json' : 'customFunctions.json';
        this.hubService.exportHub(hub, filename);
    }
    watchChanges() {
        // watch the current validation in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].CustomFunction ||
                hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects) {
                this.updateCustomFunctions();
            }
        });
    }
}
CustomFunctionIndexComponent.ɵfac = function CustomFunctionIndexComponent_Factory(t) { return new (t || CustomFunctionIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"])); };
CustomFunctionIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: CustomFunctionIndexComponent, selectors: [["customFunction"]], inputs: { hubKey: "hubKey" }, decls: 8, vars: 8, consts: [[1, "container-fluid"], ["title", "Custom Functions", "iconClass", "fa fa-lg fa-fw fa-code", 3, "showCloseButton", "padding", "close"], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "tags", "rowClick"], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["actions", ""], ["title", "Custom Functions", "path", "/assets/help/reference/function.md", 1, "m-3"], [1, "mr-1", 3, "click"], ["class", "mr-1", 3, "click", 4, "ngIf"], [1, "ml-1", 3, "objectType", "objects"], ["class", "mr-1", 3, "routerLink", 4, "ngIf"], [1, "mr-1", 3, "routerLink"]], template: function CustomFunctionIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function CustomFunctionIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function CustomFunctionIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.edit($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CustomFunctionIndexComponent_ng_template_3_Template, 3, 3, "ng-template", 3, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, CustomFunctionIndexComponent_ng_template_5_Template, 1, 1, "ng-template", null, 5, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "dexih-help", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", false);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__["DexihHelpComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonSaveLocalComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_10__["TagsUpdateButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDeleteComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonNewComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_3__["RouterLink"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CustomFunctionIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'customFunction',
                templateUrl: './customFunction-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] }]; }, { hubKey: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/customFunction/index.ts":
/*!**********************************************!*\
  !*** ./src/app/+hub/customFunction/index.ts ***!
  \**********************************************/
/*! exports provided: CustomFunctionIndexComponent, CustomFunctionEditComponent, CustomFunctionParameterComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _customFunction_index_customFunction_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customFunction-index/customFunction-index.component */ "./src/app/+hub/customFunction/customFunction-index/customFunction-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomFunctionIndexComponent", function() { return _customFunction_index_customFunction_index_component__WEBPACK_IMPORTED_MODULE_0__["CustomFunctionIndexComponent"]; });

/* harmony import */ var _customFunction_edit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./customFunction-edit */ "./src/app/+hub/customFunction/customFunction-edit/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomFunctionEditComponent", function() { return _customFunction_edit__WEBPACK_IMPORTED_MODULE_1__["CustomFunctionEditComponent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomFunctionParameterComponent", function() { return _customFunction_edit__WEBPACK_IMPORTED_MODULE_1__["CustomFunctionParameterComponent"]; });





/***/ }),

/***/ "./src/app/+hub/dashboard/dashboard-edit/dashboard-edit.component.ts":
/*!***************************************************************************!*\
  !*** ./src/app/+hub/dashboard/dashboard-edit/dashboard-edit.component.ts ***!
  \***************************************************************************/
/*! exports provided: DashboardEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DashboardEditComponent", function() { return DashboardEditComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component */ "./src/app/shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _shared_ui_icons_download_button_download_button_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/ui/icons/download-button/download-button.component */ "./src/app/shared/ui/icons/download-button/download-button.component.ts");
/* harmony import */ var _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../buttons/cancel-button/cancel-button.component */ "./src/app/+hub/buttons/cancel-button/cancel-button.component.ts");
/* harmony import */ var _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../buttons/save-button/save-button.component */ "./src/app/+hub/buttons/save-button/save-button.component.ts");




















const _c0 = ["dashboardItem"];
function DashboardEditComponent_ng_template_2_li_7_Template(rf, ctx) { if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "a", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardEditComponent_ng_template_2_li_7_Template_a_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6); const view_r4 = ctx.$implicit; const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r5.add(view_r4.key); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const view_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](view_r4.name);
} }
function DashboardEditComponent_ng_template_2_save_button_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "save-button", 13);
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r3.formsService);
} }
function DashboardEditComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "dexih-invalid-form-details", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardEditComponent_ng_template_2_Template_dexih_invalid_form_details_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r7.formsService.showErrors(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-edit", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardEditComponent_ng_template_2_Template_d_button_edit_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r9.toggleEdit(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-button", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardEditComponent_ng_template_2_Template_d_button_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r10.toggleLock(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "d-button-refresh", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardEditComponent_ng_template_2_Template_d_button_refresh_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r11.refresh(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "d-button-dropdown", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "a", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardEditComponent_ng_template_2_Template_a_click_5_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r12.newView(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, "(New View)");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, DashboardEditComponent_ng_template_2_li_7_Template, 3, 1, "li", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "download-button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("download", function DashboardEditComponent_ng_template_2_Template_download_button_download_8_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r13.download($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, DashboardEditComponent_ng_template_2_save_button_9_Template, 1, 1, "save-button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "cancel-button", 12);
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r1.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("text", (ctx_r1.formsService.currentForm == null ? null : ctx_r1.formsService.currentForm.controls.runTime.value.showEdit) ? "Hide Edit" : "Edit");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("iconClass", (ctx_r1.formsService.currentForm == null ? null : ctx_r1.formsService.currentForm.controls.runTime.value.lock) ? "fa fa-lock" : "fa fa-unlock")("text", (ctx_r1.formsService.currentForm == null ? null : ctx_r1.formsService.currentForm.controls.runTime.value.lock) ? "Unlock" : "Lock");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r1.views);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r1.formsService);
} }
class DashboardEditComponent {
    constructor(hubService, authService, formsService, route, router) {
        this.hubService = hubService;
        this.authService = authService;
        this.formsService = formsService;
        this.route = route;
        this.router = router;
        this.isLoaded = false;
        this.isRefreshing = false;
        this.refreshComplete = false;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__["CancelToken"]();
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable(), this.hubService.getRemoteAgentObservable()).subscribe(result => {
                let data = result[0];
                this.params = result[1];
                this.hubCache = result[2];
                this.remoteAgent = result[3];
                this.action = data['action'];
                this.pageTitle = data['pageTitle'];
                if (!this.hubCache || this.hubCache.status !== _hub_models__WEBPACK_IMPORTED_MODULE_7__["eCacheStatus"].Loaded) {
                    return;
                }
                if (this.isLoaded && this.action === 'new') {
                    return;
                }
                this.views = this.hubCache.hub.dexihViews;
                if (this.isLoaded && this.formsService.hasChanged) {
                    this.authService.confirmDialog('Synchronization warning', 'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')
                        .then(confirm => {
                        if (confirm) {
                            this.load();
                        }
                    }).catch(reason => {
                        return;
                    });
                }
                else {
                    this.load();
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Dashboard Edit');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._formChangeSubscription) {
            this._formChangeSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    close() {
        this.authService.navigateUp();
    }
    load() {
        this.isLoaded = true;
        if (this.action === 'edit') {
            // get the hub key from the route data, and update the service.
            this.dashboardKey = +this.params['dashboardKey'];
            if (!this.dashboardKey) {
                this.hubService.addHubErrorMessage('There was no dashboard specified to edit.');
            }
            else {
                if (!this.hubCache.hub || !this.hubCache.hub.dexihColumnValidations) {
                    this.hubService.addHubErrorMessage('The hub cache is not loaded.');
                }
                else {
                    let dashboard = this.hubCache.hub.dexihDashboards.find(c => c.key === this.dashboardKey);
                    // create a copy of the dashboard to avoid changes to the hub cache.
                    dashboard = JSON.parse(JSON.stringify(dashboard));
                    this.formsService.dashboard(dashboard);
                }
            }
        }
        if (this.action === 'new') {
            this.refreshComplete = true;
            let dashboard = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["DexihDashboard"]();
            dashboard.minCols = 4;
            dashboard.maxCols = 100;
            dashboard.minRows = 4;
            dashboard.maxRows = 100;
            dashboard.autoRefresh = true;
            this.formsService.dashboard(dashboard);
            let runTime = this.formsService.currentForm.controls.runTime.value;
            runTime.showEdit = true;
            // this.formsService.currentForm.controls.runTime.setValue(runTime);
            // this.add();
            // update the url with the saved key
            this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {
                let key = form.controls.key.value;
                if (key) {
                    if (history.pushState) {
                        let newUrl = window.location.pathname.replace('/dashboard-new', `/dashboard-edit/${key}`);
                        this.router.navigateByUrl(newUrl);
                        this._formChangeSubscription.unsubscribe();
                    }
                }
            });
        }
        if (this.formsService.currentForm.controls.autoRefresh.value && this.remoteAgent && !this.refreshComplete) {
            this.refreshComplete = true;
            this.refresh();
        }
    }
    // add() {
    //   let form = this.formsService.currentForm;
    //   let items = <FormArray> form.controls.dexihDashboardItems;
    //   let item = new DexihDashboardItem();
    //   item.cols = 1;
    //   item.rows = 1;
    //   item.x = 0;
    //   item.y = 0;
    //   let control = this.formsService.dashboardItem(item);
    //   items.push(control);
    // }
    refresh() {
        this.hubService.previewDashboard(this.formsService.currentForm.value, this.formsService.currentForm.value.parameters, this.cancelToken).then(keys => {
            let items = this.formsService.currentForm.controls.dexihDashboardItems;
            keys.forEach(url => {
                let item = items.controls.find((form) => form.controls.key.value === url.dashboardItemKey);
                if (item) {
                    let data = item.controls.runTime.value.data;
                    data.isRefreshing = true;
                    this.hubService.getRemoteResponse(url.dataKey, this.cancelToken).then(result => {
                        result.columns = this.authService.constructDataTableColumns(result.columns);
                        data.data.next(result);
                        data.isRefreshing = false;
                    }).catch();
                }
            });
        });
    }
    toggleEdit() {
        let runTime = this.formsService.currentForm.controls.runTime.value;
        runTime.showEdit = !runTime.showEdit;
        this.formsService.currentForm.controls.runTime.setValue(runTime);
    }
    toggleLock() {
        let runTime = this.formsService.currentForm.controls.runTime.value;
        runTime.lock = !runTime.lock;
        this.formsService.currentForm.controls.runTime.setValue(runTime);
    }
    add(viewKey) {
        let view = this.hubCache.hub.dexihViews.find(c => c.key === viewKey);
        if (!view) {
            return;
        }
        let form = this.formsService.currentForm;
        let items = form.controls.dexihDashboardItems;
        let item = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["DexihDashboardItem"]();
        item.key = this.hubCache.getNextSequence();
        item.cols = 1;
        item.rows = 1;
        item.x = -1;
        item.y = -1;
        // look for an empty cell
        found: for (let row = 0; row < form.controls.maxRows.value; row++) {
            for (let col = 0; col < form.controls.maxCols.value; col++) {
                let occupied = false;
                for (let i = 0; i < items.controls.length; i++) {
                    let currentItem = items.controls[i].value;
                    if (currentItem.x <= col && (currentItem.x + currentItem.cols) > col &&
                        currentItem.y <= row && (currentItem.y + currentItem.rows) > row) {
                        occupied = true;
                        break;
                    }
                }
                if (!occupied) {
                    item.x = col;
                    item.y = row;
                    break found;
                }
            }
        }
        item.viewKey = viewKey;
        item.name = view.name;
        let formGroup = this.formsService.dashboardItem(item);
        this.formsService.updateDashboardItemView(formGroup);
        items.push(formGroup);
    }
    newView() {
        this.router.navigate(['view-new'], { relativeTo: this.route });
    }
    download(format) {
        let items = this.formsService.currentForm.controls.dexihDashboardItems.value;
        let downloadObjects = items.filter(c => c.viewKey).map(item => {
            let view = this.hubCache.hub.dexihViews.find(c => c.key === item.viewKey);
            let downloadObject = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["DownloadObject"]();
            if (view.sourceType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eDataObjectType"].Datalink) {
                downloadObject.objectKey = view.sourceDatalinkKey;
                downloadObject.objectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eDataObjectType"].Datalink;
            }
            if (view.sourceType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eDataObjectType"].Table) {
                downloadObject.objectKey = view.sourceTableKey;
                downloadObject.objectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eDataObjectType"].Table;
            }
            downloadObject.query = view.selectQuery;
            return downloadObject;
        });
        this.hubService.downloadData(downloadObjects, false, format, this.cancelToken);
    }
    canDeactivate() {
        return new Promise((resolve) => {
            if (this.formsService.hasChanged) {
                this.authService.confirmDialog('The dashboard has not been saved', 'The dashboard changes have not been saved.  Do you want to discard the changes and exit?')
                    .then((confirm) => {
                    resolve(confirm);
                }).catch(() => {
                    resolve(false);
                });
            }
            else {
                resolve(true);
            }
        });
    }
    // @HostListener allows is to guard against browser refresh, close, etc.
    unloadNotification($event) {
        if (this.formsService.hasChanged) {
            $event.returnValue = 'The dashboard changes have not been saved.  Do you want to discard the changes and exit?';
        }
    }
}
DashboardEditComponent.ɵfac = function DashboardEditComponent_Factory(t) { return new (t || DashboardEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_2__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_5__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_4__["HubFormsService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"])); };
DashboardEditComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DashboardEditComponent, selectors: [["dexih-dashboard-edit-form"]], viewQuery: function DashboardEditComponent_Query(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c0, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.dashboardItems = _t);
    } }, hostBindings: function DashboardEditComponent_HostBindings(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("beforeunload", function DashboardEditComponent_beforeunload_HostBindingHandler($event) { return ctx.unloadNotification($event); }, false, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresolveWindow"]);
    } }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([_hub_forms_service__WEBPACK_IMPORTED_MODULE_4__["HubFormsService"]])], decls: 5, vars: 3, consts: [[1, "container-fluid"], ["iconClass", "fa fa-lg fa-fw fa-pie-chart", 3, "title", "showCloseButton", "padding", "close"], ["header", ""], [1, "mr-1", 3, "control", "click"], [1, "mr-1", 3, "text", "click"], [1, "mr-1", 3, "iconClass", "text", "click"], [1, "mr-1", 3, "click"], ["iconClass", "fa fa-plus", "text", "Add", 1, "mr-1"], [1, "dropdown-item", 3, "click"], [4, "ngFor", "ngForOf"], [1, "mr-1", 3, "download"], ["class", "mr-1", 3, "formsService", 4, "ngIf"], [3, "formsService"], [1, "mr-1", 3, "formsService"]], template: function DashboardEditComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function DashboardEditComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, DashboardEditComponent_ng_template_2_Template, 11, 7, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "router-outlet");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("title", "Dashboard - ", ctx.formsService == null ? null : ctx.formsService.currentForm == null ? null : ctx.formsService.currentForm.controls.name.value, "");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", false);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DWidgetComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterOutlet"], _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_10__["DexihInvalidFormDetailsComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonEditComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonRefreshComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonDropDownComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgForOf"], _shared_ui_icons_download_button_download_button_component__WEBPACK_IMPORTED_MODULE_12__["DownloadButtonComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_13__["CancelButtonComponent"], _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_14__["SaveButtonComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DashboardEditComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dexih-dashboard-edit-form',
                templateUrl: './dashboard-edit.component.html',
                providers: [_hub_forms_service__WEBPACK_IMPORTED_MODULE_4__["HubFormsService"]]
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_2__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_5__["AuthService"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_4__["HubFormsService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }]; }, { dashboardItems: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChildren"],
            args: ['dashboardItem']
        }], unloadNotification: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['window:beforeunload', ['$event']]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/dashboard/dashboard-edit/index.ts":
/*!********************************************************!*\
  !*** ./src/app/+hub/dashboard/dashboard-edit/index.ts ***!
  \********************************************************/
/*! exports provided: DashboardEditComponent, DashboardItemComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _dashboard_edit_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dashboard-edit.component */ "./src/app/+hub/dashboard/dashboard-edit/dashboard-edit.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DashboardEditComponent", function() { return _dashboard_edit_component__WEBPACK_IMPORTED_MODULE_0__["DashboardEditComponent"]; });

/* harmony import */ var _item_dashboard_item_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./item/dashboard-item.component */ "./src/app/+hub/dashboard/dashboard-edit/item/dashboard-item.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DashboardItemComponent", function() { return _item_dashboard_item_component__WEBPACK_IMPORTED_MODULE_1__["DashboardItemComponent"]; });





/***/ }),

/***/ "./src/app/+hub/dashboard/dashboard-edit/item/dashboard-item.component.ts":
/*!********************************************************************************!*\
  !*** ./src/app/+hub/dashboard/dashboard-edit/item/dashboard-item.component.ts ***!
  \********************************************************************************/
/*! exports provided: DashboardItemComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DashboardItemComponent", function() { return DashboardItemComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../.. */ "./src/app/+hub/index.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _widgets_input_parameters_input_parameters_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../widgets/input-parameters/input-parameters.component */ "./src/app/+hub/widgets/input-parameters/input-parameters.component.ts");
/* harmony import */ var _shared_ui_seriesAnimate_series_animate_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../shared/ui/seriesAnimate/series-animate.component */ "./src/app/shared/ui/seriesAnimate/series-animate.component.ts");
/* harmony import */ var _buttons_view_edit_button_view_edit_button_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../buttons/view-edit-button/view-edit-button.component */ "./src/app/+hub/buttons/view-edit-button/view-edit-button.component.ts");
/* harmony import */ var ngx_d_markdown__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ngx-d-markdown */ "./node_modules/ngx-d-markdown/__ivy_ngcc__/fesm2015/ngx-d-markdown.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_ui_charts_chartView_chart_view_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../shared/ui/charts/chartView/chart-view.component */ "./src/app/shared/ui/charts/chartView/chart-view.component.ts");






















const _c0 = ["widget"];
function DashboardItemComponent_d_button_edit_8_Template(rf, ctx) { if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-edit", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardItemComponent_d_button_edit_8_Template_d_button_edit_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r7.toggleEdit(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("compact", true);
} }
function DashboardItemComponent_d_button_preview_9_Template(rf, ctx) { if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-preview", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardItemComponent_d_button_preview_9_Template_d_button_preview_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10); const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r9.toggleEdit(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("compact", true);
} }
function DashboardItemComponent_d_button_10_Template(rf, ctx) { if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardItemComponent_d_button_10_Template_d_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r12); const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r11.maximise(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function DashboardItemComponent_d_button_11_Template(rf, ctx) { if (rf & 1) {
    const _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardItemComponent_d_button_11_Template_d_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14); const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r13.maximise(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function DashboardItemComponent_div_13_div_1_span_1_Template(rf, ctx) { if (rf & 1) {
    const _r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "form-input", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function DashboardItemComponent_div_13_div_1_span_1_Template_form_input_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r22); const column_r19 = ctx.$implicit; return column_r19.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const column_r19 = ctx.$implicit;
    const i_r20 = ctx.index;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", column_r19.logicalName, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("name", "column", i_r20, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("placeholder", "Enter " + column_r19.logicalName)("ngModel", column_r19.value);
} }
function DashboardItemComponent_div_13_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, DashboardItemComponent_div_13_div_1_span_1_Template, 5, 4, "span", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r15.inputColumns);
} }
function DashboardItemComponent_div_13_div_2_Template(rf, ctx) { if (rf & 1) {
    const _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "input-parameters", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("onRefreshData", function DashboardItemComponent_div_13_div_2_Template_input_parameters_onRefreshData_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r23.refresh(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showEdit", false)("parameters", ctx_r16.item.controls.parameters)("formsService", ctx_r16.formsService)("parentParameters", ctx_r16.parentParameters)("refreshEvent", ctx_r16.refreshDataObservable);
} }
function DashboardItemComponent_div_13_div_3_Template(rf, ctx) { if (rf & 1) {
    const _r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "series-animate", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("hasChanged", function DashboardItemComponent_div_13_div_3_Template_series_animate_hasChanged_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r26); const ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r25.hasChanged(); })("dataChange", function DashboardItemComponent_div_13_div_3_Template_series_animate_dataChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r26); const ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r27.dataRows = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showEdit", false)("showFrame", false)("animateConfig", ctx_r17.dataResult == null ? null : ctx_r17.dataResult.viewConfig.animateConfig)("columns", ctx_r17.dataResult == null ? null : ctx_r17.dataResult.columns)("baseData", ctx_r17.dataResult == null ? null : ctx_r17.dataResult.data)("data", ctx_r17.dataRows);
} }
function DashboardItemComponent_div_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, DashboardItemComponent_div_13_div_1_Template, 2, 1, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, DashboardItemComponent_div_13_div_2_Template, 2, 5, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, DashboardItemComponent_div_13_div_3_Template, 2, 6, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.inputColumns && ctx_r4.inputColumns.length > 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.item.controls.parameters.length > 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !(ctx_r4.data == null ? null : ctx_r4.data.isRefreshing) && (ctx_r4.dataResult == null ? null : ctx_r4.dataResult.columns == null ? null : ctx_r4.dataResult.columns.length) > 0 && (ctx_r4.dataResult == null ? null : ctx_r4.dataResult.viewConfig) && (ctx_r4.dataResult == null ? null : ctx_r4.dataResult.data));
} }
function DashboardItemComponent_div_14_Template(rf, ctx) { if (rf & 1) {
    const _r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "form-input", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "form-textarea", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "form-select", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "view-edit-button", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "form-checkbox", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](11, "form-checkbox", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "input-parameters", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("onRefreshData", function DashboardItemComponent_div_14_Template_input_parameters_onRefreshData_12_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r29); const ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r28.refresh(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r5.item);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autocapitalize", ctx_r5.on);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showPreview", true)("isHidden", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r5.views);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", ctx_r5.item.controls.viewKey.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showEdit", ctx_r5.showEdit)("allowAddRemove", false)("parameters", ctx_r5.item.controls.parameters)("formsService", ctx_r5.formsService)("parentParameters", ctx_r5.parentParameters)("refreshEvent", ctx_r5.refreshDataObservable);
} }
function DashboardItemComponent_ng_template_15_div_0_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Refreshing, please wait... ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function DashboardItemComponent_ng_template_15_div_0_ng_template_2_div_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "b");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r34 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r34.item.controls.name.value);
} }
function DashboardItemComponent_ng_template_15_div_0_ng_template_2_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "markdown", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("data", ctx_r35.item.controls.description.value);
} }
function DashboardItemComponent_ng_template_15_div_0_ng_template_2_div_2_d_table_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-table", 54);
} if (rf & 2) {
    const ctx_r39 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", false)("enableResponsive", false)("enableSaveCsv", false)("enableFilter", false)("columns", ctx_r39.dataResult.columns)("data", ctx_r39.dataRows);
} }
function DashboardItemComponent_ng_template_15_div_0_ng_template_2_div_2_chart_view_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "chart-view", 55);
} if (rf & 2) {
    const ctx_r40 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("responsive", true)("columns", ctx_r40.dataResult.columns)("data", ctx_r40.dataRows)("config", ctx_r40.view.chartConfig);
} }
function DashboardItemComponent_ng_template_15_div_0_ng_template_2_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, DashboardItemComponent_ng_template_15_div_0_ng_template_2_div_2_d_table_1_Template, 1, 6, "d-table", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, DashboardItemComponent_ng_template_15_div_0_ng_template_2_div_2_chart_view_3_Template, 1, 4, "chart-view", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r36.view.viewType == ctx_r36.eViewType.Table);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r36.view.viewType == ctx_r36.eViewType.Chart);
} }
function DashboardItemComponent_ng_template_15_div_0_ng_template_2_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    const _r42 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 56);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardItemComponent_ng_template_15_div_0_ng_template_2_ng_template_3_Template_div_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r42); const ctx_r41 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r41.refresh(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "i", 57);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Select to refresh the view. ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function DashboardItemComponent_ng_template_15_div_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, DashboardItemComponent_ng_template_15_div_0_ng_template_2_div_0_Template, 4, 1, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, DashboardItemComponent_ng_template_15_div_0_ng_template_2_div_1_Template, 3, 1, "div", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, DashboardItemComponent_ng_template_15_div_0_ng_template_2_div_2_Template, 4, 2, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, DashboardItemComponent_ng_template_15_div_0_ng_template_2_ng_template_3_Template, 3, 0, "ng-template", null, 45, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
} if (rf & 2) {
    const _r37 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](4);
    const ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r33.item.controls.header.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r33.item.controls.description.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !(ctx_r33.data == null ? null : ctx_r33.data.isRefreshing) && (ctx_r33.dataResult == null ? null : ctx_r33.dataResult.columns == null ? null : ctx_r33.dataResult.columns.length) > 0 && (ctx_r33.dataResult == null ? null : ctx_r33.dataResult.data == null ? null : ctx_r33.dataResult.data.length) > 0)("ngIfElse", _r37);
} }
const _c1 = function (a0) { return { "overflow": a0 }; };
function DashboardItemComponent_ng_template_15_div_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, DashboardItemComponent_ng_template_15_div_0_div_1_Template, 3, 0, "div", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, DashboardItemComponent_ng_template_15_div_0_ng_template_2_Template, 5, 4, "ng-template", null, 39, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const _r32 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](3);
    const ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](3, _c1, ctx_r30.item.controls.scrollable.value ? "scroll" : "hidden"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r30.data == null ? null : ctx_r30.data.isRefreshing)("ngIfElse", _r32);
} }
function DashboardItemComponent_ng_template_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, DashboardItemComponent_ng_template_15_div_0_Template, 4, 5, "div", 36);
} if (rf & 2) {
    const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r6.showPreview && ctx_r6.view);
} }
class DashboardItemComponent {
    constructor(authService, hubService, formsService) {
        this.authService = authService;
        this.hubService = hubService;
        this.formsService = formsService;
        this.showEdit = true;
        this.showPreview = false;
        this.isMaximized = false;
        this.onRemove = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onMaximize = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.eViewType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eViewType"];
        this.firstLoad = true;
        this.dialogOpen = false;
        this.dataRows = [];
        this.refreshDataSubject = new rxjs__WEBPACK_IMPORTED_MODULE_3__["Subject"]();
        this.refreshDataObservable = this.refreshDataSubject.asObservable();
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__["CancelToken"]();
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.hubService.getHubCacheObservable(), this.hubService.getRemoteAgentObservable()).subscribe(result => {
                var _a;
                this.hubCache = result[0];
                this.remoteAgent = result[1];
                if (this.hubService.isHubCacheLoaded) {
                    this.views = this.hubCache.hub.dexihViews;
                    if ((_a = this.item) === null || _a === void 0 ? void 0 : _a.controls.viewKey) {
                        this.view = this.hubCache.hub.dexihViews.find(c => c.key === this.item.controls.viewKey.value);
                        this.data = this.item.controls.runTime.value.data;
                        if (this.data) {
                            this._refreshDataSubscription = this.data.data.subscribe(dataResult => {
                                if (!dataResult) {
                                    return;
                                }
                                this.dataResult = dataResult;
                                if (!dataResult.viewConfig.animateConfig) {
                                    this.dataRows = this.dataResult.data;
                                }
                                if (dataResult.status) {
                                    this.hubService.addHubMessage(dataResult.status, false, this.view.name);
                                }
                            });
                        }
                        else if (this.remoteAgent) {
                            if (!this.firstLoad) {
                                if (!this.dialogOpen) {
                                    this.dialogOpen = true;
                                    this.authService.confirmDialog('Remote Agent Available', 'A remote agent is available, would you like to refresh the data?').then(confirm => {
                                        if (confirm) {
                                            this.refresh();
                                        }
                                        this.dialogOpen = false;
                                    });
                                }
                            }
                            else {
                                this.refresh();
                            }
                            this.firstLoad = false;
                        }
                    }
                    this.parentParameters = this.formsService.currentForm.controls.parameters.value;
                    if (this._parametersSubscription) {
                        this._parametersSubscription.unsubscribe();
                    }
                    this._parametersSubscription = this.formsService.currentForm.controls.parameters.valueChanges.subscribe(value => {
                        this.parentParameters = value;
                    });
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'View Index');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._viewKeySubscription) {
            this._viewKeySubscription.unsubscribe();
        }
        if (this._refreshDataSubscription) {
            this._refreshDataSubscription.unsubscribe();
        }
        if (this._parametersSubscription) {
            this._parametersSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    ngOnChanges(changes) {
        let itemChange = changes['item'];
        if (itemChange) {
            let newItem = itemChange.currentValue;
            if (this.views && newItem.value) {
                this.view = this.hubCache.hub.dexihViews.find(c => c.key === newItem.value);
            }
            if (this._viewKeySubscription) {
                this._viewKeySubscription.unsubscribe();
            }
            this._viewKeySubscription = newItem.controls.viewKey.valueChanges.subscribe(viewKey => {
                this.formsService.updateDashboardItemView(newItem);
            });
        }
    }
    // public updateView(viewKey) {
    //     if (this.views && viewKey) {
    //         this.view = this.hubCache.hub.dexihViews.find(c => c.key === viewKey);
    //         if (this.view) {
    //             this.item.controls.name.setValue(this.view.name);
    //             this.item.controls.runTime.value.data = new DataCache();
    //             // reset parameters.
    //             let formParameters = <FormArray> this.item.controls.parameters;
    //             let currentParameters = <DexihInputParameter[]> formParameters.value;
    //             formParameters.clear();
    //             let parameters = <InputParameterBase[]> this.view.parameters;
    //             if (this.view.sourceType === eDataObjectType.Datalink) {
    //                 let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === this.view.sourceDatalinkKey);
    //                 if (datalink && datalink.parameters) {
    //                     parameters = parameters.concat(datalink.parameters);
    //                 }
    //             }
    //             parameters.forEach(parameter => {
    //                 let currentParameter = currentParameters.find( c => c.name === parameter.name);
    //                 let newParameter = new InputParameterBase();
    //                 if (currentParameter) {
    //                     newParameter.name = currentParameter.name;
    //                     newParameter.value = currentParameter.value;
    //                 } else {
    //                     newParameter.name = parameter.name;
    //                     newParameter.value = parameter.value;
    //                 }
    //                 let newFormParameter = this.formsService.parameter(newParameter);
    //                 formParameters.push(newFormParameter);
    //             });
    //         }
    //     }
    // }
    refresh() {
        let preview = this.hubService.previewViewKey(this.item.controls.viewKey.value, null, this.formsService.currentForm.controls.parameters.value, this.item.controls.parameters.value, this.cancelToken);
        this.data = this.item.controls.runTime.value.data;
        this.data.refresh(preview);
        preview.then(results => {
            this.refreshDataSubject.next();
            this.dataResult = results;
            if (!this.dataResult.viewConfig.animateConfig) {
                this.dataRows = this.dataResult.data;
            }
        }).catch(reason => {
            this.hubService.addHubMessage(reason);
        });
    }
    parameterChange() {
        this.refresh();
    }
    toggleEdit() {
        this.showEdit = !this.showEdit;
    }
    removeItem($event) {
        $event.preventDefault();
        $event.stopPropagation();
        this.onRemove.emit();
    }
    maximise() {
        this.onMaximize.emit(this.item);
    }
}
DashboardItemComponent.ɵfac = function DashboardItemComponent_Factory(t) { return new (t || DashboardItemComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_8__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](___WEBPACK_IMPORTED_MODULE_2__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_4__["HubFormsService"])); };
DashboardItemComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DashboardItemComponent, selectors: [["dashboard-item"]], viewQuery: function DashboardItemComponent_Query(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c0, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.widget = _t.first);
    } }, inputs: { item: "item", showEdit: "showEdit", showPreview: "showPreview", refreshData: "refreshData", isMaximized: "isMaximized" }, outputs: { onRemove: "onRemove", onMaximize: "onMaximize" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]], decls: 16, vars: 9, consts: [[1, "side-menu"], [1, "side-menu-content"], [1, "spin-icon"], [1, "fa", "fa-cog", "fa-spin"], [1, "side-menu-box"], [1, "bg-light", "rounded", "p-1"], [3, "compact", "click"], ["class", "ml-1", 3, "compact", "click", 4, "ngIf"], ["class", "ml-1", "buttonClass", "btn btn-primary", "iconClass", "fa fa-window-maximize text-white", "tooltip", "Maximize window", 3, "click", 4, "ngIf"], ["class", "ml-1", "buttonClass", "btn btn-primary", "iconClass", "fa fa-window-minimize text-white", "tooltip", "Minimize window", 3, "click", 4, "ngIf"], [1, "ml-1", 3, "compact", "click"], [4, "ngIf"], ["class", "p-3 gridster-item-content", 4, "ngIf"], [3, "ngIf"], ["buttonClass", "btn btn-primary", "iconClass", "fa fa-window-maximize text-white", "tooltip", "Maximize window", 1, "ml-1", 3, "click"], ["buttonClass", "btn btn-primary", "iconClass", "fa fa-window-minimize text-white", "tooltip", "Minimize window", 1, "ml-1", 3, "click"], ["class", "m-1", 4, "ngIf"], ["class", "m-1", "style", "z-index: 99999;", 4, "ngIf"], [1, "m-1"], ["class", "input-group", 4, "ngFor", "ngForOf"], [1, "input-group"], [1, "input-group-prepend"], [1, "input-group-text"], [1, "form-control", "p-0", 3, "name", "placeholder", "ngModel", "ngModelChange"], [3, "showEdit", "parameters", "formsService", "parentParameters", "refreshEvent", "onRefreshData"], [1, "m-1", 2, "z-index", "99999"], [3, "showEdit", "showFrame", "animateConfig", "columns", "baseData", "data", "hasChanged", "dataChange"], [1, "p-3", "gridster-item-content"], [3, "formGroup"], ["label", "Item Name", "formControlName", "name", "placeholder", "Enter the dashboard item name.", "iconClass", "fa fa-list", 3, "autocapitalize"], ["label", "Description", "formControlName", "description", "placeholder", "Enter the description.", 3, "showPreview", "isHidden"], ["label", "Select View", "formControlName", "viewKey", "itemKey", "key", "itemName", "name", 3, "items"], [3, "key"], ["label", "Show Header", "formControlName", "header"], ["label", "Allow Scrolling", "formControlName", "scrollable"], [3, "showEdit", "allowAddRemove", "parameters", "formsService", "parentParameters", "refreshEvent", "onRefreshData"], ["class", "box", 3, "ngStyle", 4, "ngIf"], [1, "box", 3, "ngStyle"], ["class", "p-3", 4, "ngIf", "ngIfElse"], ["notRefreshing", ""], [1, "p-3"], [1, "dexih-loader"], ["class", "box-header bg-secondary text-white", 4, "ngIf"], ["class", "box-header", 4, "ngIf"], ["class", "box-content", 4, "ngIf", "ngIfElse"], ["elseBlock", ""], [1, "box-header", "bg-secondary", "text-white"], [1, "m-3"], [1, "box-header"], [3, "data"], [1, "box-content"], [3, "enableMultiSelect", "enableResponsive", "enableSaveCsv", "enableFilter", "columns", "data", 4, "ngIf"], [1, "h-100"], [3, "responsive", "columns", "data", "config", 4, "ngIf"], [3, "enableMultiSelect", "enableResponsive", "enableSaveCsv", "enableFilter", "columns", "data"], [3, "responsive", "columns", "data", "config"], [1, "alert", "alert-info", 3, "click"], [1, "fa", "fa-warning"]], template: function DashboardItemComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "i", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "d-button-refresh", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardItemComponent_Template_d_button_refresh_click_7_listener() { return ctx.refresh(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, DashboardItemComponent_d_button_edit_8_Template, 1, 1, "d-button-edit", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, DashboardItemComponent_d_button_preview_9_Template, 1, 1, "d-button-preview", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](10, DashboardItemComponent_d_button_10_Template, 1, 0, "d-button", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, DashboardItemComponent_d_button_11_Template, 1, 0, "d-button", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "d-button-delete", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DashboardItemComponent_Template_d_button_delete_click_12_listener($event) { return ctx.removeItem($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](13, DashboardItemComponent_div_13_Template, 4, 3, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](14, DashboardItemComponent_div_14_Template, 13, 12, "div", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](15, DashboardItemComponent_ng_template_15_Template, 1, 1, "ng-template", 13);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("compact", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.showEdit);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.showEdit);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.isMaximized);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.isMaximized);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("compact", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.showEdit && !ctx.showPreview && ctx.view);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.showEdit);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.showEdit);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_5__["DButtonRefreshComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_5__["DButtonDeleteComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_5__["DButtonEditComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_5__["DButtonPreviewComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_5__["DButtonComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgForOf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_5__["DFormInputComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["NgModel"], _widgets_input_parameters_input_parameters_component__WEBPACK_IMPORTED_MODULE_10__["InputParametersComponent"], _shared_ui_seriesAnimate_series_animate_component__WEBPACK_IMPORTED_MODULE_11__["SeriesAnimateComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormGroupDirective"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_5__["DFormTextAreaComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_5__["DFormSelectComponent"], _buttons_view_edit_button_view_edit_button_component__WEBPACK_IMPORTED_MODULE_12__["ViewEditButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_5__["DFormCheckboxComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgStyle"], ngx_d_markdown__WEBPACK_IMPORTED_MODULE_13__["DMarkdownComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_14__["DTableComponent"], _shared_ui_charts_chartView_chart_view_component__WEBPACK_IMPORTED_MODULE_15__["ChartViewComponent"]], styles: [".dashboard-item[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow: auto;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvK2h1Yi9kYXNoYm9hcmQvZGFzaGJvYXJkLWVkaXQvaXRlbS9kYXNoYm9hcmQtaXRlbS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sT0FBTztFQUNQLFNBQVM7RUFDVCxRQUFRO0VBQ1IsY0FBYztBQUNsQiIsImZpbGUiOiJzcmMvYXBwLytodWIvZGFzaGJvYXJkL2Rhc2hib2FyZC1lZGl0L2l0ZW0vZGFzaGJvYXJkLWl0ZW0uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZGFzaGJvYXJkLWl0ZW0gIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIHJpZ2h0OiAwO1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICB9XG4iXX0= */"] });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DashboardItemComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dashboard-item',
                templateUrl: 'dashboard-item.component.html',
                styleUrls: ['./dashboard-item.component.scss']
            }]
    }], function () { return [{ type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_8__["AuthService"] }, { type: ___WEBPACK_IMPORTED_MODULE_2__["HubService"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_4__["HubFormsService"] }]; }, { item: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], showEdit: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], showPreview: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], refreshData: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isMaximized: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], onRemove: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], onMaximize: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"]
        }], widget: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['widget', { static: true }]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/dashboard/dashboard-index/dashboard-index.component.ts":
/*!*****************************************************************************!*\
  !*** ./src/app/+hub/dashboard/dashboard-index/dashboard-index.component.ts ***!
  \*****************************************************************************/
/*! exports provided: DashboardIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DashboardIndexComponent", function() { return DashboardIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../buttons/dependent-items/dependent-items-button.component */ "./src/app/+hub/buttons/dependent-items/dependent-items-button.component.ts");
/* harmony import */ var _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../buttons/tags-update-button/tags-update-button.component */ "./src/app/+hub/buttons/tags-update-button/tags-update-button.component.ts");
/* harmony import */ var _buttons_actions_dashboard_button_actions_dashboard_button_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../buttons/actions-dashboard-button/actions-dashboard-button.component */ "./src/app/+hub/buttons/actions-dashboard-button/actions-dashboard-button.component.ts");
















function DashboardIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "dependent-items-button", 9);
} if (rf & 2) {
    const item_r6 = ctx.item;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", item_r6.key)("objectType", ctx_r1.eSharedObjectType.Dashboard);
} }
function DashboardIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "tags-update-button", 10);
} if (rf & 2) {
    const items_r7 = ctx.items;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("objectType", ctx_r3.eSharedObjectType.Dashboard)("objects", items_r7);
} }
function DashboardIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "actions-dashboard-button", 11);
} if (rf & 2) {
    const items_r8 = ctx.items;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("dashboards", items_r8);
} }
class DashboardIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.columns = [
            { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },
            { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_4__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        // watch for any changes in the validations.
        this.watchChanges();
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable()).subscribe(result => {
                let data = result[0];
                let params = result[1];
                this.hubCache = result[2];
                this.updateDashboards();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Dashboard Index');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    delete(dashboard) {
        // TDB
        this.hubService.deleteDashboards(dashboard);
    }
    updateDashboards() {
        if (this.hubCache && this.hubCache.isLoaded()) {
            let dashboards;
            dashboards = this.hubCache.hub.dexihDashboards.filter(c => c.isValid);
            let tableData = dashboards.map(dashboard => {
                return {
                    key: dashboard.key,
                    name: dashboard.name,
                    tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Dashboard, dashboard.key),
                    updateDate: dashboard.updateDate,
                    sharedIcon: dashboard.isShared ? 'fa fa-group' : 'fa fa-user-secret',
                    sharedToolTip: dashboard.isShared ? 'Table is shared' : 'Table is private'
                };
            });
            this._tableData.next(tableData);
        }
        else {
            this._tableData.next(null);
        }
    }
    edit(dashboard) {
        this.router.navigate(['dashboard-edit', dashboard.key], { relativeTo: this.route });
    }
    // TBD
    export(items) {
        const cache = this.hubCache;
        const hub = this.hubService.createHub(cache.hub.hubKey, '');
        items.forEach(item => { cache.cacheAddDashboard(item.key, hub); });
        let filename = items.length === 1 ? 'Dashboard - ' + items[0].name + '.json' : 'dashboards.json';
        this.hubService.exportHub(hub, filename);
    }
    // TBD
    watchChanges() {
        // watch the current validation in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Dashboard || hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects) {
                this.updateDashboards();
            }
        });
    }
}
DashboardIndexComponent.ɵfac = function DashboardIndexComponent_Factory(t) { return new (t || DashboardIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"])); };
DashboardIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DashboardIndexComponent, selectors: [["dashboards"]], inputs: { hubKey: "hubKey" }, decls: 10, vars: 7, consts: [[1, "container-fluid"], ["title", "Dashboards", "iconClass", "fa fa-lg fa-fw fa-pie-chart", 3, "showCloseButton", "close"], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "tags", "rowClick"], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["actions", ""], ["title", "Dashboards", "path", "/assets/help/reference/dashboard.md", 1, "m-3"], [1, "ml-1", 3, "key", "objectType"], [1, "ml-1", 3, "objectType", "objects"], [3, "dashboards"]], template: function DashboardIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function DashboardIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function DashboardIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.edit($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, DashboardIndexComponent_ng_template_3_Template, 1, 2, "ng-template", 3, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, DashboardIndexComponent_ng_template_5_Template, 1, 2, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, DashboardIndexComponent_ng_template_7_Template, 1, 1, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "dexih-help", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__["DexihHelpComponent"], _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_9__["DependentItemsButtonComponent"], _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_10__["TagsUpdateButtonComponent"], _buttons_actions_dashboard_button_actions_dashboard_button_component__WEBPACK_IMPORTED_MODULE_11__["ActionsDashboardButtonComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DashboardIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dashboards',
                templateUrl: './dashboard-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] }]; }, { hubKey: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/dashboard/dashboard-index/index.ts":
/*!*********************************************************!*\
  !*** ./src/app/+hub/dashboard/dashboard-index/index.ts ***!
  \*********************************************************/
/*! exports provided: DashboardIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _dashboard_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dashboard-index.component */ "./src/app/+hub/dashboard/dashboard-index/dashboard-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DashboardIndexComponent", function() { return _dashboard_index_component__WEBPACK_IMPORTED_MODULE_0__["DashboardIndexComponent"]; });




/***/ }),

/***/ "./src/app/+hub/dashboard/index.ts":
/*!*****************************************!*\
  !*** ./src/app/+hub/dashboard/index.ts ***!
  \*****************************************/
/*! exports provided: DashboardIndexComponent, DashboardEditComponent, DashboardItemComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _dashboard_index___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dashboard-index/ */ "./src/app/+hub/dashboard/dashboard-index/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DashboardIndexComponent", function() { return _dashboard_index___WEBPACK_IMPORTED_MODULE_0__["DashboardIndexComponent"]; });

/* harmony import */ var _dashboard_edit___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dashboard-edit/ */ "./src/app/+hub/dashboard/dashboard-edit/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DashboardEditComponent", function() { return _dashboard_edit___WEBPACK_IMPORTED_MODULE_1__["DashboardEditComponent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DashboardItemComponent", function() { return _dashboard_edit___WEBPACK_IMPORTED_MODULE_1__["DashboardItemComponent"]; });





/***/ }),

/***/ "./src/app/+hub/datajob/datajob-edit/datajob-edit.component.ts":
/*!*********************************************************************!*\
  !*** ./src/app/+hub/datajob/datajob-edit/datajob-edit.component.ts ***!
  \*********************************************************************/
/*! exports provided: DatajobEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatajobEditComponent", function() { return DatajobEditComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component */ "./src/app/shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../buttons/cancel-button/cancel-button.component */ "./src/app/+hub/buttons/cancel-button/cancel-button.component.ts");
/* harmony import */ var _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../buttons/save-button/save-button.component */ "./src/app/+hub/buttons/save-button/save-button.component.ts");

















function DatajobEditComponent_ng_template_2_save_button_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "save-button", 5);
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r2.formsService);
} }
function DatajobEditComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "dexih-invalid-form-details", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DatajobEditComponent_ng_template_2_Template_dexih_invalid_form_details_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r4); const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r3.formsService.showErrors(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, DatajobEditComponent_ng_template_2_save_button_1_Template, 1, 1, "save-button", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "cancel-button", 5);
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r1.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.hubCache == null ? null : ctx_r1.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r1.formsService);
} }
class DatajobEditComponent {
    constructor(hubService, formsService, authService, route, router) {
        this.hubService = hubService;
        this.formsService = formsService;
        this.authService = authService;
        this.route = route;
        this.router = router;
        this.isLoaded = false;
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable(true)).subscribe(result => {
                let data = result[0];
                this.params = result[1];
                this.hubCache = result[2];
                this.action = data['action'];
                this.pageTitle = data['pageTitle'];
                if (!this.hubCache || this.hubCache.status !== _hub_models__WEBPACK_IMPORTED_MODULE_2__["eCacheStatus"].Loaded) {
                    return;
                }
                if (this.isLoaded && this.action === 'new') {
                    return;
                }
                if (this.isLoaded && this.formsService.hasChanged) {
                    this.authService.confirmDialog('Synchronization warning', 'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')
                        .then(confirm => {
                        if (confirm) {
                            this.load();
                        }
                    }).catch(reason => {
                        return;
                    });
                }
                else {
                    this.load();
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Datajob Edit');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._formChangeSubscription) {
            this._formChangeSubscription.unsubscribe();
        }
        this.formsService.ngOnDestroy();
    }
    load() {
        this.isLoaded = true;
        if (this.action === 'edit') {
            // get the hub key from the route data, and update the service.
            this.datajobKey = +this.params['datajobKey'];
            if (!this.datajobKey) {
                this.hubService.addHubErrorMessage('There was no datajob specified to edit.');
            }
            else {
                if (!this.hubCache.hub || !this.hubCache.hub.dexihDatajobs) {
                    this.hubService.addHubErrorMessage('The hub cache is not loaded.');
                }
                else {
                    let datajob = this.hubCache.hub.dexihDatajobs.find(c => c.key === this.datajobKey);
                    if (!datajob) {
                        this.hubService.addHubErrorMessage('The specified datajob could not be found.');
                    }
                    else {
                        this.formsService.datajob(datajob);
                    }
                }
            }
        }
        if (this.action === 'new') {
            let datajob;
            if (this.hubService.newDatajob) {
                datajob = this.hubService.newDatajob;
                this.hubService.newDatajob = null;
            }
            else {
                datajob = this.hubService.createDefaultDatajob();
                datajob.key = 0;
            }
            this.formsService.datajob(datajob);
            // update the url with the saved key
            this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {
                let key = form.controls.key.value;
                if (key) {
                    if (history.pushState) {
                        let newUrl = window.location.pathname.replace('/datajob-new', `/datajob-edit/${key}`);
                        this.router.navigateByUrl(newUrl);
                        this._formChangeSubscription.unsubscribe();
                    }
                }
            });
        }
    }
    canDeactivate() {
        return new Promise((resolve) => {
            if (this.formsService.hasChanged) {
                this.authService.confirmDialog('The data job has not been saved', 'The datajob changes have not been saved.  Do you want to discard the changes and exit?')
                    .then((confirm) => {
                    resolve(confirm);
                }).catch(() => {
                    resolve(false);
                });
            }
            else {
                resolve(true);
            }
        });
    }
    // @HostListener allows is to guard against browser refresh, close, etc.
    unloadNotification($event) {
        if (this.formsService.hasChanged) {
            $event.returnValue = 'The datajob changes have not been saved.  Do you want to discard the changes and exit?';
        }
    }
}
DatajobEditComponent.ɵfac = function DatajobEditComponent_Factory(t) { return new (t || DatajobEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"])); };
DatajobEditComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DatajobEditComponent, selectors: [["dexih-datajob-edit-form"]], hostBindings: function DatajobEditComponent_HostBindings(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("beforeunload", function DatajobEditComponent_beforeunload_HostBindingHandler($event) { return ctx.unloadNotification($event); }, false, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresolveWindow"]);
    } }, decls: 6, vars: 0, consts: [[1, "container"], ["title", "Edit Job", "iconClass", "fa fa-lg fa-fw fa-cog"], ["header", ""], [1, "mr-1", 3, "control", "click"], ["class", "mr-1", 3, "formsService", 4, "ngIf"], [1, "mr-1", 3, "formsService"]], template: function DatajobEditComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, DatajobEditComponent_ng_template_2_Template, 3, 3, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "router-outlet");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DWidgetComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterOutlet"], _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_8__["DexihInvalidFormDetailsComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_10__["CancelButtonComponent"], _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_11__["SaveButtonComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DatajobEditComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dexih-datajob-edit-form',
                templateUrl: './datajob-edit.component.html'
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }]; }, { unloadNotification: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['window:beforeunload', ['$event']]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/datajob/datajob-index/datajob-index.component.ts":
/*!***********************************************************************!*\
  !*** ./src/app/+hub/datajob/datajob-index/datajob-index.component.ts ***!
  \***********************************************************************/
/*! exports provided: DatajobIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatajobIndexComponent", function() { return DatajobIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../buttons/dependent-items/dependent-items-button.component */ "./src/app/+hub/buttons/dependent-items/dependent-items-button.component.ts");
/* harmony import */ var _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../widgets/datalink-status/datalink-status.component */ "./src/app/+hub/widgets/datalink-status/datalink-status.component.ts");
/* harmony import */ var _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../buttons/tags-update-button/tags-update-button.component */ "./src/app/+hub/buttons/tags-update-button/tags-update-button.component.ts");
/* harmony import */ var _buttons_actions_datajob_button_actions_datajob_button_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../buttons/actions-datajob-button/actions-datajob-button.component */ "./src/app/+hub/buttons/actions-datajob-button/actions-datajob-button.component.ts");

















function DatajobIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "dependent-items-button", 11);
} if (rf & 2) {
    const item_r8 = ctx.item;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", item_r8.key)("objectType", ctx_r1.eSharedObjectType.Datajob);
} }
function DatajobIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "datalink-status", 12);
} if (rf & 2) {
    const datajob_r9 = ctx.item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("datajobKey", datajob_r9 == null ? null : datajob_r9.key);
} }
function DatajobIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "tags-update-button", 13);
} if (rf & 2) {
    const items_r10 = ctx.items;
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("objectType", ctx_r5.eSharedObjectType.Datajob)("objects", items_r10);
} }
function DatajobIndexComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "actions-datajob-button", 14);
} if (rf & 2) {
    const items_r11 = ctx.items;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("datajobs", items_r11);
} }
class DatajobIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.columns = [
            { name: 'name', title: 'Name', footer: 'description', format: 'Md', tags: 'tags' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_4__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        // watch for any changes in the datajobs.
        this.watchChanges();
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable()).subscribe(result => {
                let data = result[0];
                let params = result[1];
                this.hubCache = result[2];
                this.updateDatajobs();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Datajob Index');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    // deleteDatajob(datajob: DexihDatajob) {
    //     this.hubService.deleteDatajobs([datajob]).catch(reason => {
    //     });
    // }
    // deleteDatajobs(datajobs: Array<DexihDatajob>) {
    //     this.hubService.deleteDatajobs(datajobs);
    // }
    updateDatajobs() {
        if (this.hubCache && this.hubCache.isLoaded()) {
            let datajobs = this.hubCache.hub.dexihDatajobs
                .filter(c => c.isValid)
                .map(c => {
                return {
                    key: c.key,
                    name: c.name,
                    description: c.description,
                    updateDate: c.updateDate,
                    tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Datajob, c.key)
                };
            });
            this._tableData.next(datajobs);
        }
        else {
            this._tableData.next(null);
        }
    }
    // runDatajobs(datajobs, truncateTarget, resetIncremental) {
    //     this.hubService.runDatajobs(datajobs, truncateTarget, resetIncremental, null);
    // }
    // activateDatajobs(datajobs) {
    //     this.hubService.activateDatajobs(datajobs);
    // }
    // cancelDatajobs(datajobs: Array<DexihDatajob>) {
    //     this.hubService.deactivateDatajobs(datajobs.map(c => c.key));
    // }
    editDatajob(datajob) {
        this.router.navigate(['datajob-edit', datajob.key], { relativeTo: this.route });
    }
    // exportDatajobs(datajobs: Array<DexihDatajob>) {
    //     const cache = this.hubCache;
    //     const hub = new DexihHub(this.hubCache.hub.hubKey, '');
    //     datajobs.forEach(datajob => { this.hubCache.cacheAddDatajob(datajob.key, hub); });
    //     let filename = datajobs.length === 1 ? 'Datajob - ' + datajobs[0].name + '.json' : 'datajobs.json';
    //     this.hubService.exportHub(hub, filename);
    // }
    watchChanges() {
        // watch the current datajob in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Datajob || hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects) {
                this.updateDatajobs();
            }
        });
    }
}
DatajobIndexComponent.ɵfac = function DatajobIndexComponent_Factory(t) { return new (t || DatajobIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"])); };
DatajobIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DatajobIndexComponent, selectors: [["datajobs"]], inputs: { hubKey: "hubKey" }, decls: 12, vars: 7, consts: [[1, "container-fluid"], ["title", "Data Jobs", "iconClass", "fa fa-lg fa-fw fa-calendar", 3, "showCloseButton", "close"], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "tags", "rowClick"], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["select", "rowStatus"], ["rowStatus", ""], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["actions", ""], ["title", "Datalinks", "path", "/assets/help/reference/datajob.md", 1, "m-3"], [1, "ml-1", 3, "key", "objectType"], [3, "datajobKey"], [1, "ml-1", 3, "objectType", "objects"], [3, "datajobs"]], template: function DatajobIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function DatajobIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function DatajobIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.editDatajob($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, DatajobIndexComponent_ng_template_3_Template, 1, 2, "ng-template", 3, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, DatajobIndexComponent_ng_template_5_Template, 1, 1, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, DatajobIndexComponent_ng_template_7_Template, 1, 2, "ng-template", 7, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, DatajobIndexComponent_ng_template_9_Template, 1, 1, "ng-template", null, 9, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](11, "dexih-help", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__["DexihHelpComponent"], _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_9__["DependentItemsButtonComponent"], _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_10__["DatalinkStatusComponent"], _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_11__["TagsUpdateButtonComponent"], _buttons_actions_datajob_button_actions_datajob_button_component__WEBPACK_IMPORTED_MODULE_12__["ActionsDatajobButtonComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DatajobIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'datajobs',
                templateUrl: './datajob-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] }]; }, { hubKey: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/datajob/datajob-index/index.ts":
/*!*****************************************************!*\
  !*** ./src/app/+hub/datajob/datajob-index/index.ts ***!
  \*****************************************************/
/*! exports provided: DatajobIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _datajob_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./datajob-index.component */ "./src/app/+hub/datajob/datajob-index/datajob-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatajobIndexComponent", function() { return _datajob_index_component__WEBPACK_IMPORTED_MODULE_0__["DatajobIndexComponent"]; });




/***/ }),

/***/ "./src/app/+hub/datajob/datajob-run/datajob-run.component.ts":
/*!*******************************************************************!*\
  !*** ./src/app/+hub/datajob/datajob-run/datajob-run.component.ts ***!
  \*******************************************************************/
/*! exports provided: DatajobRunComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatajobRunComponent", function() { return DatajobRunComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _widgets_input_parameters_view_input_parameters_view_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../widgets/input-parameters-view/input-parameters-view.component */ "./src/app/+hub/widgets/input-parameters-view/input-parameters-view.component.ts");
/* harmony import */ var _shared_utils_sort_pipe__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/utils/sort.pipe */ "./src/app/shared/utils/sort.pipe.ts");















function DatajobRunComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-refresh", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DatajobRunComponent_ng_template_2_Template_d_button_refresh_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6); const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r5.run(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-refresh", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DatajobRunComponent_ng_template_2_Template_d_button_refresh_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6); const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r7.activate(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-button-cancel", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DatajobRunComponent_ng_template_2_Template_d_button_cancel_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6); const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r8.cancel(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function DatajobRunComponent_ng_template_4_span_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const datajob_r10 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", datajob_r10.name, " ");
} }
function DatajobRunComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "label", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Run the following datajobs(s):");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, DatajobRunComponent_ng_template_4_span_4_Template, 2, 1, "span", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "fieldSort");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](5, 1, ctx_r3.datajobs, "name"));
} }
function DatajobRunComponent_div_18_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Input Parameters ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "input-parameters-view", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("parameters", ctx_r4.parameters);
} }
const _c0 = function () { return { standalone: true }; };
class DatajobRunComponent {
    constructor(hubService, authService, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.route = route;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_5__["CancelToken"]();
        this.truncateTable = false;
        this.resetIncremental = false;
        this.resetValue = '';
        this.isRefreshing = false;
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable(), this.hubService.getRemoteAgentObservable()).subscribe(result => {
                let data = result[0];
                let params = result[1];
                this.hubCache = result[2];
                this.action = data['action'];
                this.pageTitle = data['pageTitle'];
                if (this.hubCache.isLoaded()) {
                    let datajobKeys = params['datajobKeys'];
                    this.datajobs = new Array();
                    if (datajobKeys) {
                        this.parameters = [];
                        let datajobKeyArray = datajobKeys.split('|').map(c => +c);
                        datajobKeyArray.forEach(datajobKey => {
                            let datajob = this.hubCache.hub.dexihDatajobs.find(c => c.key === datajobKey);
                            this.datajobs.push(datajob);
                            datajob.parameters.forEach(c => {
                                if (this.parameters.findIndex(p => c.name === p.name) < 0) {
                                    this.parameters.push({ name: c.name, value: c.value, rank: c.rank });
                                }
                            });
                        });
                    }
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Datajob Run');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    close() {
        this.authService.navigateUp();
    }
    run() {
        this.hubService.runDatajobs(this.datajobs, this.truncateTable, this.resetIncremental, this.resetValue, this.parameters, this.cancelToken);
        this.authService.navigateUp();
    }
    activate() {
        this.hubService.activateDatajobs(this.datajobs, this.parameters, this.cancelToken);
        this.authService.navigateUp();
    }
}
DatajobRunComponent.ɵfac = function DatajobRunComponent_Factory(t) { return new (t || DatajobRunComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"])); };
DatajobRunComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DatajobRunComponent, selectors: [["datajob-run"]], decls: 19, vars: 12, consts: [[1, "container"], ["title", "Datajob Options", "iconClass", "fa fa-lg fa-fw fa-exchange", 3, "showCloseButton", "padding", "close"], ["header", ""], ["subHeader", ""], [1, "form-row"], [1, "col"], ["label", "Truncate all target tables before execution.", 3, "ngModel", "ngModelOptions", "ngModelChange"], ["label", "Reset the source incremental value, and load all source rows.", 3, "ngModel", "ngModelOptions", "ngModelChange"], ["label", "Incremental Value", "placeholder", "", "iconClass", "fa fa-list", "note", "Use a specific incremental value to start loading source rows from (leave empty for null value)", 3, "ngModel", "ngModelOptions", "ngModelChange"], ["class", "d-flex flex-wrap pt-1", 4, "ngIf"], ["text", "Run Now", 1, "mr-1", 3, "click"], ["text", "Activate Triggers", 1, "mr-1", 3, "click"], [3, "click"], [1, "label"], [1, "row"], ["class", "col alert alert-primary m-1", 4, "ngFor", "ngForOf"], [1, "col", "alert", "alert-primary", "m-1"], [1, "d-flex", "flex-wrap", "pt-1"], [1, "input-group-text"], [3, "parameters"]], template: function DatajobRunComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function DatajobRunComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, DatajobRunComponent_ng_template_2_Template, 3, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, DatajobRunComponent_ng_template_4_Template, 6, 4, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "form");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "fieldset");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "section");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "section", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "form-checkbox", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function DatajobRunComponent_Template_form_checkbox_ngModelChange_11_listener($event) { return ctx.truncateTable = $event; });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "section", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "form-checkbox", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function DatajobRunComponent_Template_form_checkbox_ngModelChange_14_listener($event) { return ctx.resetIncremental = $event; });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](15, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "section", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "form-input", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function DatajobRunComponent_Template_form_input_ngModelChange_17_listener($event) { return ctx.resetValue = $event; });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](18, DatajobRunComponent_div_18_Template, 4, 1, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.truncateTable)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](9, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.resetIncremental)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](10, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.resetValue)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](11, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.parameters && ctx.parameters.length > 0);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgForm"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DFormCheckboxComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgModel"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DFormInputComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonRefreshComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonCancelComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgForOf"], _widgets_input_parameters_view_input_parameters_view_component__WEBPACK_IMPORTED_MODULE_9__["InputParametersViewComponent"]], pipes: [_shared_utils_sort_pipe__WEBPACK_IMPORTED_MODULE_10__["SortPipe"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DatajobRunComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'datajob-run',
                templateUrl: './datajob-run.component.html'
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/datajob/index.ts":
/*!***************************************!*\
  !*** ./src/app/+hub/datajob/index.ts ***!
  \***************************************/
/*! exports provided: DatajobIndexComponent, DatajobEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _datajob_index_datajob_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./datajob-index/datajob-index.component */ "./src/app/+hub/datajob/datajob-index/datajob-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatajobIndexComponent", function() { return _datajob_index_datajob_index_component__WEBPACK_IMPORTED_MODULE_0__["DatajobIndexComponent"]; });

/* harmony import */ var _datajob_edit_datajob_edit_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./datajob-edit/datajob-edit.component */ "./src/app/+hub/datajob/datajob-edit/datajob-edit.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatajobEditComponent", function() { return _datajob_edit_datajob_edit_component__WEBPACK_IMPORTED_MODULE_1__["DatajobEditComponent"]; });





/***/ }),

/***/ "./src/app/+hub/datalink/datalink-index/datalink-index.component.ts":
/*!**************************************************************************!*\
  !*** ./src/app/+hub/datalink/datalink-index/datalink-index.component.ts ***!
  \**************************************************************************/
/*! exports provided: DatalinkIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatalinkIndexComponent", function() { return DatalinkIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _buttons_actions_datalink_button_actions_datalink_button_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../buttons/actions-datalink-button/actions-datalink-button.component */ "./src/app/+hub/buttons/actions-datalink-button/actions-datalink-button.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../buttons/tags-update-button/tags-update-button.component */ "./src/app/+hub/buttons/tags-update-button/tags-update-button.component.ts");
/* harmony import */ var _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../widgets/datalink-status/datalink-status.component */ "./src/app/+hub/widgets/datalink-status/datalink-status.component.ts");
/* harmony import */ var _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../buttons/dependent-items/dependent-items-button.component */ "./src/app/+hub/buttons/dependent-items/dependent-items-button.component.ts");
/* harmony import */ var _shared_utils_gt_filter_pipe__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/utils/gt-filter.pipe */ "./src/app/shared/utils/gt-filter.pipe.ts");



















function DatalinkIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "actions-datalink-button", 13);
} if (rf & 2) {
    const items_r10 = ctx.items;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("datalinks", items_r10);
} }
const _c0 = function (a0) { return { typeFilter: a0 }; };
function DatalinkIndexComponent_ng_template_5_a_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const datalinkType_r13 = ctx.$implicit;
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r12.typeFilter == datalinkType_r13.key);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](5, _c0, datalinkType_r13.key))("title", datalinkType_r13.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](datalinkType_r13.name);
} }
const _c1 = function () { return { typeFilter: "All" }; };
function DatalinkIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-dropdown", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "a", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, DatalinkIndexComponent_ng_template_5_a_3_Template, 2, 7, "a", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "gtFilter");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autoCompact", false)("text", ctx_r3.eDatalinkType[ctx_r3.typeFilter])("pullRight", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r3.typeFilter == "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](11, _c1));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind3"](4, 7, ctx_r3.eDatalinkTypeItems, "key", 0));
} }
function DatalinkIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "tags-update-button", 18);
} if (rf & 2) {
    const items_r14 = ctx.items;
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("objectType", ctx_r5.eSharedObjectType.Datalink)("objects", items_r14);
} }
function DatalinkIndexComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "datalink-status", 19);
} if (rf & 2) {
    const item_r15 = ctx.item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("datalinkKey", item_r15 == null ? null : item_r15.key);
} }
function DatalinkIndexComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "dependent-items-button", 20);
} if (rf & 2) {
    const item_r16 = ctx.item;
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", item_r16.key)("objectType", ctx_r9.eSharedObjectType.Datalink);
} }
class DatalinkIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.eDatalinkType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDatalinkType"];
        this.eDatalinkTypeItems = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDatalinkTypeItems"];
        this.columns = [
            { name: 'name', title: 'Name', format: 'Md', footer: 'description', tags: 'tags' },
            { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },
            { name: 'datalinkType', title: 'Datalink Type', format: '' },
            { name: 'sourceName', title: 'Source', format: '' },
            { name: 'targetName', title: 'Target', format: '' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        this.watchChanges();
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.route.data, this.route.params, this.route.queryParams, this.hubService.getHubCacheObservable()).subscribe(result => {
                let queryParams = result[2];
                this.hubCache = result[3];
                if (!this.hubCache.isLoaded()) {
                    return;
                }
                this.typeFilter = +queryParams['typeFilter'];
                if (!this.typeFilter) {
                    this.typeFilter = 0;
                }
                this.updateDatalinks();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Datalink Index');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    updateDatalinks() {
        let newDatalinks;
        if (this.hubCache.isLoaded()) {
            if (!this.hubCache.hub.dexihDatalinks) {
                this._tableData.next(new Array());
            }
            else {
                if (this.typeFilter === 0 || !this.typeFilter) {
                    newDatalinks = this.hubCache.hub.dexihDatalinks;
                }
                else {
                    newDatalinks = this.hubCache.hub.dexihDatalinks.filter(d => d.datalinkType === this.typeFilter);
                }
                let datalinkData = new Array();
                newDatalinks.forEach(d => {
                    let sourceName = '';
                    let targetName = '';
                    switch (d.sourceDatalinkTable.sourceType) {
                        case _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSourceType"].Table:
                            let sourceTable = this.hubCache.getTable(d.sourceDatalinkTable.sourceTableKey);
                            sourceName = sourceTable ? sourceTable.logicalName : 'Error, not found';
                            break;
                        case _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSourceType"].Datalink:
                            let sourceDatalink = this.hubCache.hub.dexihDatalinks
                                .find(c => c.key === d.sourceDatalinkTable.sourceDatalinkKey);
                            sourceName = sourceDatalink ? 'Datalink: ' + sourceDatalink.name : 'Error, not found';
                            break;
                        case _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSourceType"].Rows:
                            sourceName = 'Static Rows';
                            break;
                    }
                    if (d.isQuery) {
                        targetName = 'None specified.';
                    }
                    else {
                        targetName = d.dexihDatalinkTargets.filter(t => t.isValid).map(c => {
                            let table = this.hubCache.getTable(c.tableKey);
                            return table && table.logicalName || 'Error, not found';
                        }).join(', ');
                    }
                    datalinkData.push({
                        key: d.key,
                        datalinkType: this.eDatalinkType[d.datalinkType],
                        name: d.name,
                        tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Datalink, d.key),
                        description: d.description,
                        sourceName: sourceName,
                        targetName: targetName,
                        updateDate: d.updateDate,
                        sharedIcon: d.isShared ? 'fa fa-group' : 'fa fa-user-secret',
                        sharedToolTip: d.isShared ? 'Table is shared' : 'Table is private'
                    });
                });
                this._tableData.next(datalinkData);
            }
        }
    }
    // ngOnDestroy() {
    //    this.hubSubscription.unsubscribe();
    // }
    editDatalink(datalink) {
        this.router.navigate(['datalink-edit', 'edit', datalink.key], { queryParamsHandling: 'merge', relativeTo: this.route.parent });
    }
    watchChanges() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        // watch the current connection in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Datalink || hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects) {
                this.updateDatalinks();
            }
        });
    }
}
DatalinkIndexComponent.ɵfac = function DatalinkIndexComponent_Factory(t) { return new (t || DatalinkIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"])); };
DatalinkIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DatalinkIndexComponent, selectors: [["datalink-index"]], decls: 14, vars: 7, consts: [[1, "container-fluid"], ["title", "Datalinks", "iconClass", "fa fa-lg fa-fw fa-exchange", 3, "showCloseButton", "close"], ["tableClass", "table table-striped table-hover m-0", 3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "tags", "rowClick"], ["actions", ""], ["select", "filter"], ["filter", ""], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["select", "rowStatus"], ["rowStatus", ""], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["title", "Datalinks", "path", "/assets/help/reference/datalink.md", 1, "m-3"], [3, "datalinks"], ["buttonClass", "btn btn-primary", "iconClass", "fa fa-filter", "title", "Filter by a purpose", 1, "mr-1", 3, "autoCompact", "text", "pullRight"], ["routerLink", ".", "title", "All Datalinks", 1, "dropdown-item", 3, "queryParams"], ["class", "dropdown-item", "routerLink", ".", 3, "active", "queryParams", "title", 4, "ngFor", "ngForOf"], ["routerLink", ".", 1, "dropdown-item", 3, "queryParams", "title"], [1, "ml-1", 3, "objectType", "objects"], [3, "datalinkKey"], [1, "ml-1", 3, "key", "objectType"]], template: function DatalinkIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function DatalinkIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function DatalinkIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.editDatalink($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, DatalinkIndexComponent_ng_template_3_Template, 1, 1, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, DatalinkIndexComponent_ng_template_5_Template, 5, 12, "ng-template", 4, 5, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, DatalinkIndexComponent_ng_template_7_Template, 1, 2, "ng-template", 6, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, DatalinkIndexComponent_ng_template_9_Template, 1, 1, "ng-template", 8, 9, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, DatalinkIndexComponent_ng_template_11_Template, 1, 2, "ng-template", 10, 11, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](13, "dexih-help", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__["DexihHelpComponent"], _buttons_actions_datalink_button_actions_datalink_button_component__WEBPACK_IMPORTED_MODULE_9__["ActionsDatalinkButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDropDownComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterLinkWithHref"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgForOf"], _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_11__["TagsUpdateButtonComponent"], _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_12__["DatalinkStatusComponent"], _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_13__["DependentItemsButtonComponent"]], pipes: [_shared_utils_gt_filter_pipe__WEBPACK_IMPORTED_MODULE_14__["GtFilterPipe"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DatalinkIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'datalink-index',
                templateUrl: './datalink-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/datalink/datalink-index/index.ts":
/*!*******************************************************!*\
  !*** ./src/app/+hub/datalink/datalink-index/index.ts ***!
  \*******************************************************/
/*! exports provided: DatalinkIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _datalink_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./datalink-index.component */ "./src/app/+hub/datalink/datalink-index/datalink-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatalinkIndexComponent", function() { return _datalink_index_component__WEBPACK_IMPORTED_MODULE_0__["DatalinkIndexComponent"]; });




/***/ }),

/***/ "./src/app/+hub/datalink/datalink-new/datalink-new.component.ts":
/*!**********************************************************************!*\
  !*** ./src/app/+hub/datalink/datalink-new/datalink-new.component.ts ***!
  \**********************************************************************/
/*! exports provided: DatalinkNewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatalinkNewComponent", function() { return DatalinkNewComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _shared_utils_sort_pipe__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/utils/sort.pipe */ "./src/app/shared/utils/sort.pipe.ts");















function DatalinkNewComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DatalinkNewComponent_ng_template_2_Template_d_button_save_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r7); const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return !ctx_r6.savingDatalink && ctx_r6.saveDatalink(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-cancel", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DatalinkNewComponent_ng_template_2_Template_d_button_cancel_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r7); const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return !ctx_r8.savingDatalink && ctx_r8.cancel(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("busy", ctx_r1.savingDatalink);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("busy", ctx_r1.savingDatalink);
} }
function DatalinkNewComponent_ng_template_4_span_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const sourceTable_r10 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", sourceTable_r10.name, " ");
} }
function DatalinkNewComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "label", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Create datalinks for the following source table(s):");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, DatalinkNewComponent_ng_template_4_span_4_Template, 2, 1, "span", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "fieldSort");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](5, 1, ctx_r3.sourceTables, "name"));
} }
function DatalinkNewComponent_form_6_form_input_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "form-input", 20);
} if (rf & 2) {
    const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autocapitalize", true)("errors", ctx_r11.formErrors.name);
} }
function DatalinkNewComponent_form_6_form_input_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "form-input", 21);
} }
function DatalinkNewComponent_form_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "section", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, DatalinkNewComponent_form_6_form_input_4_Template, 1, 2, "form-input", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, DatalinkNewComponent_form_6_form_input_5_Template, 1, 0, "form-input", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "section", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "form-select", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "section", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "form-select", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "section", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](12, "form-select", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r4.mainForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.sourceTables.length == 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.sourceTables.length > 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r4.eDatalinkTypeItems)("errors", ctx_r4.formErrors.datalinkType);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r4.managedConnections)("errors", ctx_r4.formErrors.targetConnectionKey)("allowNullSelect", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r4.managedConnections)("errors", ctx_r4.formErrors.auditConnectionKey)("allowNullSelect", true);
} }
const _c0 = function () { return { standalone: true }; };
function DatalinkNewComponent_form_7_section_12_Template(rf, ctx) { if (rf & 1) {
    const _r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-checkbox", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function DatalinkNewComponent_form_7_section_12_Template_form_checkbox_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r16); const auditColumnType_r14 = ctx.$implicit; return auditColumnType_r14.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const auditColumnType_r14 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("label", auditColumnType_r14.name)("ngModel", auditColumnType_r14.value)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](3, _c0));
} }
function DatalinkNewComponent_form_7_Template(rf, ctx) { if (rf & 1) {
    const _r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "section", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "form-checkbox", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "section", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "label", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, " Specify the audit columns (in addition to source columns) to be included in the target table. ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "form-checkbox", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function DatalinkNewComponent_form_7_Template_form_checkbox_ngModelChange_10_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r18); const ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r17.selectAllAuditColumns(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](12, DatalinkNewComponent_form_7_section_12_Template, 2, 4, "section", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r5.addSourceColumns);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r5.allAuditColumns);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r5.auditColumnTypes);
} }
class DatalinkNewComponent {
    constructor(hubService, route, router, location, fb) {
        this.hubService = hubService;
        this.route = route;
        this.router = router;
        this.location = location;
        this.fb = fb;
        this.hasChanged = false;
        this.showAllErrors = false;
        this.addSourceColumns = true;
        this.eConnectionPurpose = _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eConnectionPurpose"];
        this.auditColumnTypes = [
            { key: _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eDeltaType"].AutoIncrement, name: 'Auto Incrementing Key', value: false },
            { key: _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eDeltaType"].IsCurrentField, name: 'Is Current Flag', value: false },
            { key: _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eDeltaType"].Version, name: 'Record Version', value: false },
            { key: _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eDeltaType"].ValidFromDate, name: 'Valid From Date', value: false },
            { key: _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eDeltaType"].ValidToDate, name: 'Valid To Date', value: false },
            { key: _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eDeltaType"].CreateDate, name: 'Created Date', value: false },
            { key: _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eDeltaType"].UpdateDate, name: 'Updated Date', value: false },
            { key: _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eDeltaType"].CreateAuditKey, name: 'Created by AuditKey Reference', value: false },
            { key: _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eDeltaType"].UpdateAuditKey, name: 'Updated by AuditKey Reference', value: false }
        ];
        this.allAuditColumns = false;
        this.eDatalinkTypeItems = _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eDatalinkTypeItems"];
        this.savingDatalink = false;
        this.formErrors = {
            'name': '',
            'targetConnectionKey': '',
            'auditConnectionKey': '',
            'datalinkType': ''
        };
        this.validationMessages = {
            'name': {
                'required': 'Name is required.',
                'minlength': 'Name must be at least 4 characters long.',
                'maxlength': 'Name cannot be more than 50 characters long.',
            },
            'targetConnectionKey': {},
            'auditConnectionKey': {},
            'datalinkType': {
                'required': 'Datalink Type is required.',
            },
        };
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable()).subscribe(result => {
                let params = result[1];
                this.hubCache = result[2];
                this.managedTargetConnections = this.hubCache.hub.dexihConnections
                    .filter(c => c.purpose === _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eConnectionPurpose"].Managed || c.purpose === _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eConnectionPurpose"].Target);
                this.managedConnections = this.hubCache.hub.dexihConnections
                    .filter(c => c.purpose === _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eConnectionPurpose"].Managed);
                let tableKeys = params['sourceTableKeys'];
                this.tableKeys = tableKeys.split('|').map(c => +c);
                if (this.hubCache.status === _hub_models__WEBPACK_IMPORTED_MODULE_6__["eCacheStatus"].Loaded) {
                    this.updateTables();
                    this.targetConnectionKey = +params['targetConnectionKey'];
                    if (!this.targetConnectionKey) {
                        let targetConnection = this.hubCache.hub.dexihConnections.find(c => c.purpose === _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eConnectionPurpose"].Managed);
                        if (targetConnection) {
                            this.targetConnectionKey = targetConnection.key;
                        }
                    }
                    this.auditConnectionKey = this.targetConnectionKey;
                    this.datalinkType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eDatalinkType"].General;
                    this.buildForm();
                    this.watchChanges();
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Datalink New');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._valueChangesSubscription) {
            this._valueChangesSubscription.unsubscribe();
        }
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
    }
    updateTables() {
        this.sourceTableKeys = new Array();
        this.sourceTables = new Array();
        if (this.tableKeys && this.hubCache.hub.dexihConnections) {
            this.hubCache.hub.dexihTables.forEach(table => {
                if (this.tableKeys.findIndex(t => t === table.key) >= 0) {
                    this.sourceTableKeys.push(table.key);
                    this.sourceTables.push(table);
                }
            });
        }
    }
    buildForm() {
        this.mainForm = this.fb.group({
            'name': [this.name, []],
            'targetConnectionKey': [this.targetConnectionKey > 0 ? this.targetConnectionKey : null, [
                // Validators.required,
                ]],
            'auditConnectionKey': [this.auditConnectionKey > 0 ? this.auditConnectionKey : null, [
                // Validators.required,
                ]],
            'datalinkType': [this.datalinkType, [
                    _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required,
                ]],
        });
        if (this._valueChangesSubscription) {
            this._valueChangesSubscription.unsubscribe();
        }
        this._valueChangesSubscription = this.mainForm.valueChanges.subscribe(data => this.onValueChanged());
        this.onValueChanged(); // (re)set validation messages now
        this.hasChanged = false;
    }
    onValueChanged() {
        if (!this.mainForm) {
            return;
        }
        const form = this.mainForm;
        this.hasChanged = true;
        for (const field of Object.keys(this.formErrors)) {
            // clear previous error message (if any)
            this.formErrors[field] = '';
            const control = form.get(field);
            if (control && (control.dirty || this.showAllErrors) && !control.valid) {
                const messages = this.validationMessages[field];
                for (const key of Object.keys(control.errors)) {
                    this.formErrors[field] += messages[key] + ' ';
                }
            }
        }
    }
    selectAllAuditColumns() {
        this.allAuditColumns = !this.allAuditColumns;
        this.auditColumnTypes.forEach(c => c.value = this.allAuditColumns);
    }
    saveDatalink() {
        if (this.mainForm.valid) {
            let value = this.mainForm.value;
            this.savingDatalink = true;
            let auditColumns = this.auditColumnTypes.filter(c => c.value).map(c => c.key);
            this.hubService.createDatalinks(this.sourceTableKeys, value.name, value.datalinkType, value.targetConnectionKey, null, null, value.auditConnectionKey, this.addSourceColumns, auditColumns).then(result => {
                this.savingDatalink = false;
                if (result.length === 1) {
                    this.openDatalink(result[0].key);
                }
                else {
                    this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinks'], { relativeTo: this.route.root });
                }
            }).catch(() => {
                this.savingDatalink = false;
            });
        }
        else {
            this.showAllErrors = true;
            this.onValueChanged();
        }
    }
    cancel() {
        this.location.back();
    }
    // delay the open datalink until the hub cache is updated with the new datalink.
    openDatalink(key, iteration = 0) {
        if (iteration >= 10) {
            this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinks'], { relativeTo: this.route.root });
        }
        setTimeout(() => {
            if (this.hubCache.hub.dexihDatalinks.findIndex(c => c.key === key) >= 0) {
                this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinks', 'datalink-edit', 'edit', key], { relativeTo: this.route.root });
            }
            else {
                this.openDatalink(key, iteration++);
            }
        }, 500);
    }
    watchChanges() {
        // watch the current connection in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eSharedObjectType"].Table) {
                this.updateTables();
            }
        });
    }
}
DatalinkNewComponent.ɵfac = function DatalinkNewComponent_Factory(t) { return new (t || DatalinkNewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_common__WEBPACK_IMPORTED_MODULE_5__["Location"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"])); };
DatalinkNewComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DatalinkNewComponent, selectors: [["dexih-datalink-new-form"]], decls: 8, vars: 4, consts: [[1, "container"], ["title", "New Datalink(s)", "iconClass", "fa fa-lg fa-fw fa-exchange", 3, "showCloseButton", "padding", "close"], ["header", ""], ["subHeader", ""], [3, "formGroup", 4, "ngIf"], [4, "ngIf"], [1, "mr-1", 3, "busy", "click"], [3, "busy", "click"], [1, "label"], [1, "row"], ["class", "col alert alert-primary m-1", 4, "ngFor", "ngForOf"], [1, "col", "alert", "alert-primary", "m-1"], [3, "formGroup"], [1, "form-row"], [1, "form-group", "col-md-6"], ["label", "Datalink Name", "formControlName", "name", "placeholder", "Datalink name (leave blank for auto naming)", "iconClass", "fa fa-comment", 3, "autocapitalize", "errors", 4, "ngIf"], ["disabled", "", "label", "Datalink Name", "placeholder", "Datalink name can not be specified when creating multiple datalinks.", "iconClass", "fa fa-comment", 4, "ngIf"], ["formControlName", "datalinkType", "label", "Type", "itemKey", "key", "itemName", "description", 3, "items", "errors"], ["formControlName", "targetConnectionKey", "label", "Target Connection", "itemKey", "key", "itemName", "name", "note", "Specify the connection for the target table.", "selectNullMessage", "No target table", 3, "items", "errors", "allowNullSelect"], ["formControlName", "auditConnectionKey", "label", "Audit Connection", "itemKey", "key", "itemName", "name", "note", "Specify the connection to store execution results.", "selectNullMessage", "No datalink auditing", 3, "items", "errors", "allowNullSelect"], ["label", "Datalink Name", "formControlName", "name", "placeholder", "Datalink name (leave blank for auto naming)", "iconClass", "fa fa-comment", 3, "autocapitalize", "errors"], ["disabled", "", "label", "Datalink Name", "placeholder", "Datalink name can not be specified when creating multiple datalinks.", "iconClass", "fa fa-comment"], [1, "col", "col-11"], ["label", "Include source columns in target table", "name", "addSourceColumns", 3, "ngModel"], ["label", "Select All/None", "name", "selectAllAuditColumns", 3, "ngModel", "ngModelChange"], ["class", "form-group col-md-6", 4, "ngFor", "ngForOf"], [3, "label", "ngModel", "ngModelOptions", "ngModelChange"]], template: function DatalinkNewComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function DatalinkNewComponent_Template_d_widget_close_1_listener() { return !ctx.savingDatalink && ctx.cancel(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, DatalinkNewComponent_ng_template_2_Template, 2, 2, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, DatalinkNewComponent_ng_template_4_Template, 6, 4, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, DatalinkNewComponent_form_6_Template, 13, 11, "form", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, DatalinkNewComponent_form_7_Template, 13, 3, "form", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.sourceTableKeys);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.sourceTableKeys);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DWidgetComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_5__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonSaveComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonCancelComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_5__["NgForOf"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DFormSelectComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DFormInputComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgForm"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DFormCheckboxComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgModel"]], pipes: [_shared_utils_sort_pipe__WEBPACK_IMPORTED_MODULE_9__["SortPipe"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DatalinkNewComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dexih-datalink-new-form',
                templateUrl: './datalink-new.component.html'
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }, { type: _angular_common__WEBPACK_IMPORTED_MODULE_5__["Location"] }, { type: _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/datalink/datalink-new/index.ts":
/*!*****************************************************!*\
  !*** ./src/app/+hub/datalink/datalink-new/index.ts ***!
  \*****************************************************/
/*! exports provided: DatalinkNewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _datalink_new_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./datalink-new.component */ "./src/app/+hub/datalink/datalink-new/datalink-new.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatalinkNewComponent", function() { return _datalink_new_component__WEBPACK_IMPORTED_MODULE_0__["DatalinkNewComponent"]; });




/***/ }),

/***/ "./src/app/+hub/datalink/datalink-preview-data/datalink-preview-data.component.ts":
/*!****************************************************************************************!*\
  !*** ./src/app/+hub/datalink/datalink-preview-data/datalink-preview-data.component.ts ***!
  \****************************************************************************************/
/*! exports provided: DatalinkPreviewDataComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatalinkPreviewDataComponent", function() { return DatalinkPreviewDataComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _widgets_preview_data_preview_data_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../widgets/preview-data/preview-data.component */ "./src/app/+hub/widgets/preview-data/preview-data.component.ts");












class DatalinkPreviewDataComponent {
    constructor(hubService, authService, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.route = route;
        this.eDataObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"];
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.route.data, this.route.params).subscribe(result => {
                let data = result[0];
                let params = result[1];
                this.action = data['action'];
                this.pageTitle = data['pageTitle'];
                this.key = +params['datalinkKey'];
                this.previewUpdates = params['previewUpdates'] === 'true';
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Datalink Preview');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
}
DatalinkPreviewDataComponent.ɵfac = function DatalinkPreviewDataComponent_Factory(t) { return new (t || DatalinkPreviewDataComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"])); };
DatalinkPreviewDataComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DatalinkPreviewDataComponent, selectors: [["datalink-preview-data"]], decls: 3, vars: 4, consts: [[1, "container-fluid"], ["title", "Preview Datalink", "iconClass", "fa fa-lg fa-fw fa-exchange", 3, "showCloseButton", "close"], [3, "key", "previewUpdates", "viewSource"]], template: function DatalinkPreviewDataComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function DatalinkPreviewDataComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "preview-data", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", ctx.key)("previewUpdates", ctx.previewUpdates)("viewSource", ctx.eDataObjectType.Datalink);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], _widgets_preview_data_preview_data_component__WEBPACK_IMPORTED_MODULE_7__["PreviewDataComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DatalinkPreviewDataComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'datalink-preview-data',
                templateUrl: './datalink-preview-data.component.html'
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/datalink/datalink-preview-data/index.ts":
/*!**************************************************************!*\
  !*** ./src/app/+hub/datalink/datalink-preview-data/index.ts ***!
  \**************************************************************/
/*! exports provided: DatalinkPreviewDataComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _datalink_preview_data_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./datalink-preview-data.component */ "./src/app/+hub/datalink/datalink-preview-data/datalink-preview-data.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatalinkPreviewDataComponent", function() { return _datalink_preview_data_component__WEBPACK_IMPORTED_MODULE_0__["DatalinkPreviewDataComponent"]; });




/***/ }),

/***/ "./src/app/+hub/datalink/datalink-run/datalink-run.component.ts":
/*!**********************************************************************!*\
  !*** ./src/app/+hub/datalink/datalink-run/datalink-run.component.ts ***!
  \**********************************************************************/
/*! exports provided: DatalinkRunComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatalinkRunComponent", function() { return DatalinkRunComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _widgets_input_parameters_view_input_parameters_view_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../widgets/input-parameters-view/input-parameters-view.component */ "./src/app/+hub/widgets/input-parameters-view/input-parameters-view.component.ts");
/* harmony import */ var _shared_utils_sort_pipe__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/utils/sort.pipe */ "./src/app/shared/utils/sort.pipe.ts");















function DatalinkRunComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DatalinkRunComponent_ng_template_2_Template_d_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r7); const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r6.runDatalinks(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-cancel", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DatalinkRunComponent_ng_template_2_Template_d_button_cancel_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r7); const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r8.cancel(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function DatalinkRunComponent_ng_template_4_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const datalink_r10 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", datalink_r10.name, " ");
} }
function DatalinkRunComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "label", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Run the following datalink(s):");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, DatalinkRunComponent_ng_template_4_div_3_Template, 2, 1, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "fieldSort");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](4, 1, ctx_r3.datalinks, "name"));
} }
function DatalinkRunComponent_div_18_span_3_Template(rf, ctx) { if (rf & 1) {
    const _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "form-input", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function DatalinkRunComponent_div_18_span_3_Template_form_input_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r15); const column_r12 = ctx.$implicit; return column_r12.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const column_r12 = ctx.$implicit;
    const i_r13 = ctx.index;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", column_r12.logicalName, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("name", "column", i_r13, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("placeholder", column_r12.logicalName)("ngModel", column_r12.value);
} }
function DatalinkRunComponent_div_18_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Input Values ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, DatalinkRunComponent_div_18_span_3_Template, 5, 4, "span", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r4.inputColumns);
} }
function DatalinkRunComponent_div_19_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "label", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "Parameters:");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "input-parameters-view", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("parameters", ctx_r5.parameters);
} }
const _c0 = function () { return { standalone: true }; };
class DatalinkRunComponent {
    constructor(hubService, authService, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.route = route;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_5__["CancelToken"]();
        this.truncateTable = false;
        this.resetIncremental = false;
        this.resetValue = '';
        this.isRefreshing = false;
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable(), this.hubService.getRemoteAgentObservable()).subscribe(result => {
                let data = result[0];
                let params = result[1];
                this.hubCache = result[2];
                this.action = data['action'];
                this.pageTitle = data['pageTitle'];
                if (this.hubCache.isLoaded()) {
                    let datalinkKeys = params['datalinkKeys'];
                    this.datalinks = new Array();
                    if (datalinkKeys) {
                        this.inputColumns = [];
                        this.parameters = [];
                        let datalinkKeyArray = datalinkKeys.split('|').map(c => +c);
                        datalinkKeyArray.forEach(datalinkKey => {
                            let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === datalinkKey);
                            this.datalinks.push(datalink);
                            datalink.sourceDatalinkTable.dexihDatalinkColumns.filter(c => c.isInput).forEach(c => {
                                this.inputColumns.push({ datalinkKey: datalinkKey, datalinkName: datalink.name,
                                    name: c.name, logicalName: c.logicalName,
                                    dataType: c.dataType, rank: c.rank, value: c.defaultValue, defaultValue: c.defaultValue });
                            });
                            datalink.parameters.forEach(c => {
                                if (this.parameters.findIndex(p => p.name === c.name) < 0) {
                                    this.parameters.push(c);
                                }
                            });
                        });
                    }
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Datalink Preview');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    close() {
        this.authService.navigateUp();
    }
    runDatalinks() {
        this.hubService.runDatalinks(this.datalinks.map(c => c.key), this.truncateTable, this.resetIncremental, this.resetValue, this.inputColumns, this.parameters, this.cancelToken);
        this.authService.navigateUp();
    }
}
DatalinkRunComponent.ɵfac = function DatalinkRunComponent_Factory(t) { return new (t || DatalinkRunComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"])); };
DatalinkRunComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DatalinkRunComponent, selectors: [["datalink-run"]], decls: 20, vars: 13, consts: [[1, "container"], ["title", "Datalink Options", "iconClass", "fa fa-lg fa-fw fa-exchange", 3, "showCloseButton", "padding", "close"], ["header", ""], ["subHeader", ""], [1, "form-row"], [1, "col"], ["label", "Truncate all target tables before execution.", 3, "ngModel", "ngModelOptions", "ngModelChange"], ["label", "Reset the source incremental value, and load all source rows.", 3, "ngModel", "ngModelOptions", "ngModelChange"], ["label", "Incremental Value", "placeholder", "", "iconClass", "fa fa-list", "note", "Use a specific incremental value to start loading source rows from (leave empty for null value)", 3, "ngModel", "ngModelOptions", "ngModelChange"], ["class", "d-flex flex-wrap pt-1", 4, "ngIf"], [4, "ngIf"], ["iconClass", "fa fa-bolt", "text", "Run Now", 1, "mr-1", 3, "click"], [3, "click"], [1, "label"], [1, "d-flex", "flex-wrap"], ["class", "alert alert-primary m-1", 4, "ngFor", "ngForOf"], [1, "alert", "alert-primary", "m-1"], [1, "d-flex", "flex-wrap", "pt-1"], [1, "input-group-text"], ["class", "input-group", 4, "ngFor", "ngForOf"], [1, "input-group"], [1, "input-group-prepend"], [1, "form-control", "p-0", 3, "name", "placeholder", "ngModel", "ngModelChange"], [3, "parameters"]], template: function DatalinkRunComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function DatalinkRunComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, DatalinkRunComponent_ng_template_2_Template, 2, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, DatalinkRunComponent_ng_template_4_Template, 5, 4, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "form");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "fieldset");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "section");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "section", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "form-checkbox", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function DatalinkRunComponent_Template_form_checkbox_ngModelChange_11_listener($event) { return ctx.truncateTable = $event; });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "section", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "form-checkbox", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function DatalinkRunComponent_Template_form_checkbox_ngModelChange_14_listener($event) { return ctx.resetIncremental = $event; });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](15, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "section", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "form-input", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function DatalinkRunComponent_Template_form_input_ngModelChange_17_listener($event) { return ctx.resetValue = $event; });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](18, DatalinkRunComponent_div_18_Template, 4, 1, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](19, DatalinkRunComponent_div_19_Template, 4, 1, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.truncateTable)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](10, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.resetIncremental)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](11, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.resetValue)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](12, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.inputColumns && ctx.inputColumns.length > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.parameters && ctx.parameters.length > 0);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgForm"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DFormCheckboxComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgModel"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DFormInputComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonCancelComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgForOf"], _widgets_input_parameters_view_input_parameters_view_component__WEBPACK_IMPORTED_MODULE_9__["InputParametersViewComponent"]], pipes: [_shared_utils_sort_pipe__WEBPACK_IMPORTED_MODULE_10__["SortPipe"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DatalinkRunComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'datalink-run',
                templateUrl: './datalink-run.component.html'
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/datalink/index.ts":
/*!****************************************!*\
  !*** ./src/app/+hub/datalink/index.ts ***!
  \****************************************/
/*! exports provided: DatalinkIndexComponent, DatalinkNewComponent, DatalinkPreviewDataComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _datalink_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./datalink-index */ "./src/app/+hub/datalink/datalink-index/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatalinkIndexComponent", function() { return _datalink_index__WEBPACK_IMPORTED_MODULE_0__["DatalinkIndexComponent"]; });

/* harmony import */ var _datalink_new_datalink_new_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./datalink-new/datalink-new.component */ "./src/app/+hub/datalink/datalink-new/datalink-new.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatalinkNewComponent", function() { return _datalink_new_datalink_new_component__WEBPACK_IMPORTED_MODULE_1__["DatalinkNewComponent"]; });

/* harmony import */ var _datalink_preview_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./datalink-preview-data */ "./src/app/+hub/datalink/datalink-preview-data/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatalinkPreviewDataComponent", function() { return _datalink_preview_data__WEBPACK_IMPORTED_MODULE_2__["DatalinkPreviewDataComponent"]; });






/***/ }),

/***/ "./src/app/+hub/files/files-bulk-load/files-bulk-load.component.ts":
/*!*************************************************************************!*\
  !*** ./src/app/+hub/files/files-bulk-load/files-bulk-load.component.ts ***!
  \*************************************************************************/
/*! exports provided: FilesBulkLoadComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilesBulkLoadComponent", function() { return FilesBulkLoadComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../.. */ "./src/app/+hub/index.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _shared_utils_dropzone__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/utils/dropzone */ "./src/app/shared/utils/dropzone.ts");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




















function FilesBulkLoadComponent_section_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " There are no files configured. Create a file based connection, and add at least one file definition. ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "a", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, "New Connection");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("routerLink", "/hub/", ctx_r0.hubCache.hub.hubKey, "/connections/connection-new/Source");
} }
function FilesBulkLoadComponent_div_1_d_widget_1_form_1_section_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-select", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "a", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3, "(");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, " New )");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r6.hubCache.hub.dexihFileFormats)("enableFilter", false)("allowNullSelect", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("routerLink", "/hub/", ctx_r6.hubCache.hub.hubKey, "/fileFormats/fileFormat-new");
} }
function FilesBulkLoadComponent_div_1_d_widget_1_form_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "form-select", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "a", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, "(");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](7, " New )");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "section", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "form-select", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, FilesBulkLoadComponent_div_1_d_widget_1_form_1_section_11_Template, 6, 4, "section", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](13, "form-checkbox", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](14, "form-checkbox", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](15, "form-checkbox", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](16, "form-checkbox", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r4.bulkLoadForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r4.fileConnections);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("routerLink", "//hub/", ctx_r4.hubCache.hub.hubKey, "/connections/connection-new/Source");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r4.formatTypes);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.bulkLoadForm.controls.formatType.value == ctx_r4.eTypeCode.Text);
} }
function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_10_Template(rf, ctx) { if (rf & 1) {
    const _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_10_Template_d_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); const items_r15 = ctx.items; const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r16.uploadSelected(items_r15); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Upload");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-button-cancel", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_10_Template_d_button_cancel_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); const items_r15 = ctx.items; const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r18.cancelSelected(items_r15); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "d-button-delete", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_10_Template_d_button_delete_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); const items_r15 = ctx.items; const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r19.removeSelected(items_r15); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_12_Template(rf, ctx) { if (rf & 1) {
    const _r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-checkbox", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_12_Template_form_checkbox_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r22); const ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r21.automaticUpload = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r10.automaticUpload);
} }
const _c0 = function (a0) { return { "width": a0 }; };
function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_14_div_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const item_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c0, item_r23.progress + "%"));
} }
const _c1 = function (a0, a1, a2) { return { "fa-check": a0, "fa-exclamation-circle": a1, "fa-ban": a2 }; };
function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_14_div_0_Template, 2, 3, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "i", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const item_r23 = ctx.item;
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", item_r23.isRunning());
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction3"](3, _c1, item_r23.status === ctx_r12.eFileStatus.Complete, item_r23.status === ctx_r12.eFileStatus.Error, item_r23.status === ctx_r12.eFileStatus.Cancelled));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](item_r23.status);
} }
function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_18_Template(rf, ctx) { if (rf & 1) {
    const _r28 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_18_Template_d_button_save_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r28); const items_r26 = ctx.items; const ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r27.saveTables(items_r26); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_18_Template_d_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r28); const items_r26 = ctx.items; const ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r29.createDatalinks(items_r26); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "Create Datalinks");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "d-button-delete", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_18_Template_d_button_delete_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r28); const items_r26 = ctx.items; const ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r30.discardTables(items_r26); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_Template(rf, ctx) { if (rf & 1) {
    const _r32 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "ul", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget-section", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("dropFiles", function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_Template_div_dropFiles_2_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r32); const ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r31.filesDrop($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3, " Drop Files to Load Here ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "input", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_Template_input_change_5_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r32); const ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r33.uploadFile($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "label", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](7, "Choose files");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "d-widget-section", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "d-table", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](10, FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_10_Template, 4, 0, "ng-template", 32, 33, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](12, FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_12_Template, 2, 1, "ng-template", null, 34, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](14, FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_14_Template, 4, 7, "ng-template", 35, 36, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "d-widget-section", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "d-table", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function FilesBulkLoadComponent_div_1_d_widget_1_ul_2_Template_d_table_rowClick_17_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r32); const ctx_r34 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r34.editTable($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](18, FilesBulkLoadComponent_div_1_d_widget_1_ul_2_ng_template_18_Template, 4, 0, "ng-template", 32, 33, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showExpandButton", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("requireFiles", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showExpandButton", true)("padding", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("columns", ctx_r5.uploadColumns)("data", ctx_r5.uploadedFiles);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showExpandButton", true)("padding", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("columns", ctx_r5.tableColumns)("data", ctx_r5.tables);
} }
function FilesBulkLoadComponent_div_1_d_widget_1_Template(rf, ctx) { if (rf & 1) {
    const _r36 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-widget", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function FilesBulkLoadComponent_div_1_d_widget_1_Template_d_widget_close_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r36); const ctx_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r35.close(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, FilesBulkLoadComponent_div_1_d_widget_1_form_1_Template, 17, 5, "form", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, FilesBulkLoadComponent_div_1_d_widget_1_ul_2_Template, 20, 12, "ul", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("title", "Bulk Load: " + (ctx_r2.connection == null ? null : ctx_r2.connection.name))("showCloseButton", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.bulkLoadForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.connection);
} }
function FilesBulkLoadComponent_div_1_d_widget_2_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    const _r40 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-apply", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesBulkLoadComponent_div_1_d_widget_2_ng_template_1_Template_d_button_apply_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r40); const ctx_r39 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r39.applyChanges(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-cancel", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesBulkLoadComponent_div_1_d_widget_2_ng_template_1_Template_d_button_cancel_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r40); const ctx_r41 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r41.cancel(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function FilesBulkLoadComponent_div_1_d_widget_2_Template(rf, ctx) { if (rf & 1) {
    const _r43 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-widget", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function FilesBulkLoadComponent_div_1_d_widget_2_Template_d_widget_close_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r43); const ctx_r42 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r42.cancel(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, FilesBulkLoadComponent_div_1_d_widget_2_ng_template_1_Template, 2, 0, "ng-template", null, 52, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "router-outlet");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("title", "Edit table: " + ctx_r3.formsService.currentForm.controls.name.value)("showCloseButton", true);
} }
function FilesBulkLoadComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, FilesBulkLoadComponent_div_1_d_widget_1_Template, 3, 4, "d-widget", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, FilesBulkLoadComponent_div_1_d_widget_2_Template, 4, 2, "d-widget", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r1.currentTable);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.currentTable);
} }
class FilesBulkLoadComponent {
    constructor(authService, hubService, route, router, formsService, fb) {
        this.authService = authService;
        this.hubService = hubService;
        this.route = route;
        this.router = router;
        this.formsService = formsService;
        this.fb = fb;
        this.entityType = 'Table';
        this.canEdit = false;
        this.formatTypes = _hub_models__WEBPACK_IMPORTED_MODULE_3__["formatTypes"];
        this.eTypeCode = _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eTypeCode"];
        this.eFileStatus = _auth_auth_models__WEBPACK_IMPORTED_MODULE_1__["eFileStatus"];
        this.automaticUpload = true;
        this.uploadedFiles = [];
        this.reference = null;
        this.tables = [];
        this.currentTable = null;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_1__["CancelToken"]();
        this.pageTitle = 'Manage Files';
        this.showPage = false;
        this.showPageMessage = 'Loading...';
        this.tableColumns = [
            { name: 'logicalName', title: 'Logical Name', format: 'Md', footer: 'description' },
            { name: 'name', title: 'Table Name' },
        ];
        this.uploadColumns = [
            { name: 'file.name', title: 'File Name', format: '' },
            { name: 'file.size', title: 'Size', format: '' },
        ];
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["combineLatest"])(this.route.queryParams, this.hubService.getHubCacheObservable(true), this.hubService.getRemoteLibrariesObservable()).subscribe(result => {
                let queryParams = result[0];
                this.hubCache = result[1];
                let remoteLibraries = result[2];
                this.fileConnections = this.hubCache.hub.dexihConnections
                    .filter(c => {
                    let ref = remoteLibraries.connections.find(con => c.connectionAssemblyName === con.connectionAssemblyName
                        && c.connectionClassName === con.connectionClassName);
                    if (ref) {
                        return (ref.connectionCategory === _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eConnectionCategory"].File || c.purpose !== _shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eConnectionPurpose"].Source);
                    }
                    else {
                        return false;
                    }
                });
                let connectionKey = +queryParams['connectionKey'];
                if (!connectionKey) {
                    if (this.fileConnections.length > 0) {
                        connectionKey = this.fileConnections[0].key;
                    }
                }
                this.bulkLoadForm = this.fb.group({
                    'connectionKey': [connectionKey],
                    'formatType': [_shared_shared_models__WEBPACK_IMPORTED_MODULE_8__["eTypeCode"].Text],
                    'fileFormatKey': [],
                    'loadData': [true],
                    'includeFileName': [false],
                    'includeFileDate': [false],
                    'includeFileRowNumber': [false]
                });
                this.updateConnection(connectionKey);
                if (this._connectionKeySubscription) {
                    this._connectionKeySubscription.unsubscribe();
                }
                this._connectionKeySubscription = this.bulkLoadForm.controls.connectionKey.valueChanges.subscribe(key => {
                    this.updateConnection(key);
                });
            });
            if (this._flatFilesSubscription) {
                this._flatFilesSubscription.unsubscribe();
            }
            this._flatFilesSubscription = this.hubService.getFlatFilesObservable().subscribe(flatFileReady => {
                if (flatFileReady.reference === this.reference) {
                    if (!flatFileReady.message.success) {
                        this.hubService.addHubMessage(flatFileReady.message);
                    }
                    this.tables = flatFileReady.tables;
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Files Manage');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._flatFilesSubscription) {
            this._flatFilesSubscription.unsubscribe();
        }
        if (this._connectionKeySubscription) {
            this._connectionKeySubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    close() {
        this.authService.navigateUp();
    }
    updateConnection(connectionKey) {
        this.connection = this.hubCache.getConnection(connectionKey);
        if (!this.connection && connectionKey) {
            this.hubService.addHubErrorMessage(`The connection with the key ${connectionKey} could not be found.`);
        }
        else if (this.connection) {
            this.pageTitle = 'Load files for ' + this.connection.name;
            this.showPage = true;
        }
    }
    uploadFile(event) {
        let files = event.srcElement.files;
        this.doUpload(files);
        return false;
    }
    filesDrop(files) {
        this.doUpload(files);
    }
    doUpload(files) {
        Array.prototype.forEach.call(files, file => {
            let bulkLoad = this.bulkLoadForm.value;
            this.hubService.bulkUploadFiles(bulkLoad.connectionKey, bulkLoad.fileFormatKey, bulkLoad.formatType, bulkLoad.loadData, bulkLoad.includeFileName, bulkLoad.includeFileDate, bulkLoad.includeFileRowNumber, file.name, this.cancelToken).then(result => {
                let url = result.url;
                this.reference = result.reference;
                let fileHandler = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_1__["FileHandler"](file, url);
                this.uploadedFiles = this.uploadedFiles.concat(fileHandler);
                // this.uploadedFiles.push(fileHandler);
                if (this.automaticUpload) {
                    this.authService.upload(fileHandler).then(status => {
                        if (status.success) {
                            this.hubService.addHubSuccessMessage(file.name + ' uploaded.');
                        }
                        else {
                            this.hubService.addHubMessage(status);
                        }
                    }).catch(reason => {
                        this.hubService.addHubMessage(reason);
                    });
                }
            }).catch(reason => {
                this.hubService.addHubMessage(reason);
            });
        });
    }
    editTable(table) {
        this.currentTable = table;
        this.formsService.table(table);
        this.router.navigate(['table-edit'], { relativeTo: this.route });
    }
    applyChanges() {
        if (this.formsService.hasChanged) {
            let table = this.formsService.currentForm.value;
            Object.assign(this.currentTable, table);
        }
        this.currentTable = null;
        this.authService.navigateUp();
    }
    cancel() {
        this.currentTable = null;
        this.authService.navigateUp();
    }
    saveTables(items) {
        return __awaiter(this, void 0, void 0, function* () {
            let newTables = Object.assign([], this.tables);
            let keys = [];
            for (let i = 0; i < items.length; i++) {
                let table = items[i];
                let savedTable = yield this.hubService.saveTables([table]);
                keys.push(savedTable[0].key);
                // after table is saved, remove from unsaved list.
                let index = this.tables.findIndex(t => table.key === t.key);
                newTables.splice(index, 1);
            }
            ;
            this.tables = newTables;
            return keys;
        });
    }
    createDatalinks(items) {
        return __awaiter(this, void 0, void 0, function* () {
            let keys = yield this.saveTables(items);
            let tableKeys = keys.join('|');
            this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'tables', 'datalink-new', tableKeys, 0], { relativeTo: this.route.root });
        });
    }
    discardTables(items) {
        let newTables = Object.assign([], this.tables);
        for (let i = 0; i < items.length; i++) {
            let table = items[i];
            let index = this.tables.findIndex(t => table.key === t.key);
            newTables.splice(index, 1);
        }
        ;
        this.tables = newTables;
    }
    uploadSelected(items) {
        items.forEach(item => {
            this.authService.upload(item).then(status => {
                this.hubService.addHubMessage(status);
            }).catch(reason => {
                this.hubService.addHubMessage(reason);
            });
        });
    }
    removeSelected(items) {
        items.forEach(item => {
            let index = this.uploadedFiles.findIndex(c => c.id === item.id);
            if (index >= 0) {
                this.uploadedFiles.splice(index, 1);
            }
        });
    }
    cancelSelected(items) {
        items.forEach(item => item.cancel());
    }
    canDeactivate() {
        return new Promise((resolve) => {
            if (this.tables.length > 0) {
                this.authService.confirmDialog('Unsaved tables!', 'Table(s) have not been saved, this action will discard unsaved tables.  Do you want to discard the changes and exit?')
                    .then((confirm) => {
                    resolve(confirm);
                }).catch(() => {
                    resolve(false);
                });
            }
            else {
                resolve(true);
            }
        });
    }
    // @HostListener allows is to guard against browser refresh, close, etc.
    unloadNotification($event) {
        if (this.tables.length > 0) {
            $event.returnValue =
                'Table(s) have not been saved, this action will discard unsaved tables.  Do you want to discard the changes and exit?';
        }
    }
}
FilesBulkLoadComponent.ɵfac = function FilesBulkLoadComponent_Factory(t) { return new (t || FilesBulkLoadComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](___WEBPACK_IMPORTED_MODULE_5__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_6__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_6__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_7__["HubFormsService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_9__["FormBuilder"])); };
FilesBulkLoadComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: FilesBulkLoadComponent, selectors: [["files-bulk-load"]], hostBindings: function FilesBulkLoadComponent_HostBindings(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("beforeunload", function FilesBulkLoadComponent_beforeunload_HostBindingHandler($event) { return ctx.unloadNotification($event); }, false, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresolveWindow"]);
    } }, decls: 2, vars: 2, consts: [[4, "ngIf"], ["class", "container", 4, "ngIf"], [1, "alert", "alert-danger", "m-3"], [1, "btn", "btn-sm", "btn-primary", "text-white", 3, "routerLink", "title"], [1, "container"], ["iconClass", "fa fa-lg fa-fw fa-files-o", 3, "title", "showCloseButton", "close", 4, "ngIf"], [3, "title", "showCloseButton", "close", 4, "ngIf"], ["iconClass", "fa fa-lg fa-fw fa-files-o", 3, "title", "showCloseButton", "close"], [3, "formGroup", 4, "ngIf"], ["class", "list-group", 4, "ngIf"], [3, "formGroup"], [1, "m-3"], ["label", "Connection", "formControlName", "connectionKey", "itemKey", "key", "itemName", "name", "iconClass", "fa fa-database", "note", "The connection where the files will be uploaded to.", 3, "items"], [3, "routerLink"], [1, "fa", "fa-sticky-note-o"], [1, "form-row"], [1, "col-md-6"], ["label", "Format Type", "formControlName", "formatType", "itemKey", "key", "itemName", "name", "iconClass", "fa fa-text", "note", "The format of data.", 3, "items"], ["class", "col-md-6", 4, "ngIf"], ["label", "Create physical table and load data", "formControlName", "loadData"], ["label", "Include file name field", "formControlName", "includeFileName"], ["label", "Include file date field", "formControlName", "includeFileDate"], ["label", "Include file row field", "formControlName", "includeFileRowNumber"], ["label", "File Format", "formControlName", "fileFormatKey", "placeholder", "File Format", "itemKey", "key", "itemName", "name", "note", "Specify the file format to use, if not specified, a csv (command separated) format will be used.", "selectNullMessage", "Use default (csv) format", 3, "items", "enableFilter", "allowNullSelect"], [1, "list-group"], ["title", "Drop Files to Load", 3, "showExpandButton"], ["dropZone", "", "dropAllowedClass", "nv-file-over", 1, "well", "my-drop-zone", 3, "requireFiles", "dropFiles"], [1, "custom-file", "w-25", "float-right"], ["type", "file", "onclick", "this.value=null", 1, "custom-file-input", 3, "change"], ["for", "inputGroupFile01", 1, "custom-file-label"], ["title", "Upload Queues", 3, "showExpandButton", "padding"], [3, "enableMultiSelect", "columns", "data"], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["actions", ""], ["select", "rowStatus"], ["rowStatus", ""], ["title", "Edit and Save Tables", 3, "showExpandButton", "padding"], [3, "enableMultiSelect", "columns", "data", "rowClick"], ["iconClass", "fa fa-upload", "buttonClass", "btn-primary", 1, "mr-1", 3, "click"], [1, "mr-1", 3, "click"], ["text", "Remove", 3, "click"], [1, "d-flex", "align-items-center", "h-100"], ["label", "Automatically upload files when added to the queue.", 3, "ngModel", "ngModelChange"], ["class", "progress", "style", "margin-bottom: 0;", 4, "ngIf"], [1, "fa", 3, "ngClass"], [1, "progress", 2, "margin-bottom", "0"], ["role", "progressbar", 1, "progress-bar", 3, "ngStyle"], ["title", "Save the selected tables.", 1, "ml-1", 3, "click"], ["iconClass", "fa fa-exchange", "title", "Save the selected tables, and create datalinks to load them into a staging area.", 1, "ml-1", 3, "click"], ["title", "Discard the selected tables.", "text", "Discard", 1, "ml-1", 3, "click"], [3, "title", "showCloseButton", "close"], ["header", ""], [3, "click"], [1, "ml-1", 3, "click"]], template: function FilesBulkLoadComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, FilesBulkLoadComponent_section_0_Template, 7, 1, "section", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, FilesBulkLoadComponent_div_1_Template, 3, 2, "div", 1);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (ctx.hubCache == null ? null : ctx.hubCache.hub) && (!ctx.fileConnections || ctx.fileConnections.length === 0));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.fileConnections && ctx.fileConnections.length > 0);
    } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_10__["NgIf"], _angular_router__WEBPACK_IMPORTED_MODULE_6__["RouterLinkWithHref"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DWidgetComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DFormSelectComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DFormCheckboxComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["ɵa"], _shared_utils_dropzone__WEBPACK_IMPORTED_MODULE_12__["DropZoneDirective"], ngx_d_table__WEBPACK_IMPORTED_MODULE_13__["DTableComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DButtonCancelComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DButtonDeleteComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgStyle"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DButtonSaveComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_6__["RouterOutlet"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DButtonApplyComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FilesBulkLoadComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'files-bulk-load',
                templateUrl: 'files-bulk-load.component.html'
            }]
    }], function () { return [{ type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: ___WEBPACK_IMPORTED_MODULE_5__["HubService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_6__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_6__["Router"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_7__["HubFormsService"] }, { type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__["FormBuilder"] }]; }, { unloadNotification: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['window:beforeunload', ['$event']]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/files/files-manage/files-manage.component.ts":
/*!*******************************************************************!*\
  !*** ./src/app/+hub/files/files-manage/files-manage.component.ts ***!
  \*******************************************************************/
/*! exports provided: FilesManageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilesManageComponent", function() { return FilesManageComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _shared_utils_dropzone__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/utils/dropzone */ "./src/app/shared/utils/dropzone.ts");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");

















function FilesManageComponent_div_0_d_button_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const connection_r3 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate2"]("routerLink", "/hub/", ctx_r2.hubCache == null ? null : ctx_r2.hubCache.hub.hubKey, "/connections/tables/table-new/", connection_r3.key, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autoCompact", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"]("New Table (", connection_r3.name, ")");
} }
function FilesManageComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, " There are no files configured. Create a file based connection, and add at least one file definition. ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "d-button-new", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, FilesManageComponent_div_0_d_button_5_Template, 2, 4, "d-button", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("routerLink", "/hub/", ctx_r0.hubCache == null ? null : ctx_r0.hubCache.hub.hubKey, "/connections/connection-new/Source");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autoCompact", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r0.fileConnections);
} }
function FilesManageComponent_div_1_ng_template_2_a_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const connection_r9 = ctx.$implicit;
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate2"]("routerLink", "/hub/", ctx_r7.hubCache == null ? null : ctx_r7.hubCache.hub.hubKey, "/connections/tables/table-new/", connection_r9.key, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](connection_r9.name);
} }
const _c0 = function (a0, a1) { return { tableKey: a0, path: a1 }; };
function FilesManageComponent_div_1_ng_template_2_d_button_dropdown_2_a_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "i", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const item_r11 = ctx.$implicit;
    const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r10.path === item_r11.key);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](4, _c0, ctx_r10.tableKey, item_r11.key));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](item_r11.name);
} }
function FilesManageComponent_div_1_ng_template_2_d_button_dropdown_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-dropdown", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, FilesManageComponent_div_1_ng_template_2_d_button_dropdown_2_a_1_Template, 3, 7, "a", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("text", ctx_r8.eFlatFilePath[ctx_r8.path])("pullRight", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r8.eFlatFilePathItems);
} }
function FilesManageComponent_div_1_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-dropdown", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, FilesManageComponent_div_1_ng_template_2_a_1_Template, 2, 3, "a", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, FilesManageComponent_div_1_ng_template_2_d_button_dropdown_2_Template, 2, 3, "d-button-dropdown", 12);
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r5.fileConnections);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (ctx_r5.connectionReference == null ? null : ctx_r5.connectionReference.allowsFlatFiles) && (ctx_r5.table == null ? null : ctx_r5.table.autoManageFiles));
} }
const _c1 = function () { return { standalone: true }; };
function FilesManageComponent_div_1_ul_4_section_4_Template(rf, ctx) { if (rf & 1) {
    const _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-select", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function FilesManageComponent_div_1_ul_4_section_4_Template_form_select_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r21); const ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r20.updateStrategy = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r12.updateStrategy)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](3, _c1))("items", ctx_r12.updateStrategies);
} }
function FilesManageComponent_div_1_ul_4_ng_template_20_Template(rf, ctx) { if (rf & 1) {
    const _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesManageComponent_div_1_ul_4_ng_template_20_Template_d_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const items_r22 = ctx.items; const ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r23.uploadSelected(items_r22); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Upload");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-button-cancel", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesManageComponent_div_1_ul_4_ng_template_20_Template_d_button_cancel_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const items_r22 = ctx.items; const ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r25.cancelSelected(items_r22); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "d-button-delete", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesManageComponent_div_1_ul_4_ng_template_20_Template_d_button_delete_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); const items_r22 = ctx.items; const ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r26.removeSelected(items_r22); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function FilesManageComponent_div_1_ul_4_ng_template_22_Template(rf, ctx) { if (rf & 1) {
    const _r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-checkbox", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function FilesManageComponent_div_1_ul_4_ng_template_22_Template_form_checkbox_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r29); const ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r28.automaticUpload = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r16.automaticUpload);
} }
const _c2 = function (a0) { return { "width": a0 }; };
function FilesManageComponent_div_1_ul_4_ng_template_24_div_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const item_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c2, item_r30.progress + "%"));
} }
const _c3 = function (a0, a1, a2) { return { "fa-check": a0, "fa-exclamation-circle": a1, "fa-ban": a2 }; };
function FilesManageComponent_div_1_ul_4_ng_template_24_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, FilesManageComponent_div_1_ul_4_ng_template_24_div_0_Template, 2, 3, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "i", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const item_r30 = ctx.item;
    const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", item_r30.isRunning());
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction3"](3, _c3, item_r30.status === ctx_r18.eFileStatus.Complete, item_r30.status === ctx_r18.eFileStatus.Error, item_r30.status === ctx_r18.eFileStatus.Cancelled));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](item_r30.status);
} }
function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_3_Template(rf, ctx) { if (rf & 1) {
    const _r46 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_3_Template_a_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r46); const items_r39 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r44 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r44.moveSelected(items_r39, ctx_r44.eFlatFilePath.Incoming); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "To Incoming");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_4_Template(rf, ctx) { if (rf & 1) {
    const _r49 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_4_Template_a_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r49); const items_r39 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r47.moveSelected(items_r39, ctx_r47.eFlatFilePath.Outgoing); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "To Processed");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_5_Template(rf, ctx) { if (rf & 1) {
    const _r52 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_5_Template_a_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r52); const items_r39 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r50 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r50.moveSelected(items_r39, ctx_r50.eFlatFilePath.Processed); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "To Processed");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_6_Template(rf, ctx) { if (rf & 1) {
    const _r55 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_6_Template_a_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r55); const items_r39 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r53 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r53.moveSelected(items_r39, ctx_r53.eFlatFilePath.Rejected); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "To Rejected");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_Template(rf, ctx) { if (rf & 1) {
    const _r57 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-delete", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_Template_d_button_delete_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r57); const items_r39 = ctx.items; const ctx_r56 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r56.deleteSelected(items_r39); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-download", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_Template_d_button_download_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r57); const items_r39 = ctx.items; const ctx_r58 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r58.downloadSelected(items_r39); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-button-dropdown", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_3_Template, 2, 0, "a", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_4_Template, 2, 0, "a", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_5_Template, 2, 0, "a", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_a_6_Template, 2, 0, "a", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r34 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("pullRight", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r34.path != ctx_r34.eFlatFilePath.Incoming);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r34.path != ctx_r34.eFlatFilePath.Outgoing);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r34.path != ctx_r34.eFlatFilePath.Processed);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r34.path != ctx_r34.eFlatFilePath.Rejected);
} }
const _c4 = function (a1, a5, a7, a8) { return ["/hub", a1, "summary", "files", "manage", a5, "file-preview", a7, a8]; };
function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-button-preview", 51);
} if (rf & 2) {
    const item_r59 = ctx.item;
    const ctx_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](1, _c4, ctx_r36.hubCache == null ? null : ctx_r36.hubCache.hub.hubKey, ctx_r36.tableKey, ctx_r36.path, item_r59.fileName));
} }
function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_12_d_button_dropdown_0_a_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "i", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const item_r63 = ctx.$implicit;
    const ctx_r62 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r62.path === item_r63.key);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](4, _c0, ctx_r62.tableKey, item_r63.key));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](item_r63.name);
} }
function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_12_d_button_dropdown_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-dropdown", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_12_d_button_dropdown_0_a_1_Template, 3, 7, "a", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r61 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("text", ctx_r61.eFlatFilePath[ctx_r61.path])("pullRight", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r61.eFlatFilePathItems);
} }
function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_12_Template(rf, ctx) { if (rf & 1) {
    const _r65 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_12_d_button_dropdown_0_Template, 2, 3, "d-button-dropdown", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-refresh", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_12_Template_d_button_refresh_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r65); const ctx_r64 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r64.refreshFiles(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r38 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r38.table == null ? null : ctx_r38.table.autoManageFiles);
} }
function FilesManageComponent_div_1_ul_4_ng_template_26_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "h5");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "Files (Local directory: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "a", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, ")");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "li", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "d-table", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_8_Template, 7, 5, "ng-template", 29, 30, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](10, FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_10_Template, 1, 6, "ng-template", 46, 47, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](12, FilesManageComponent_div_1_ul_4_ng_template_26_ng_template_12_Template, 2, 1, "ng-template", null, 31, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("href", "file://///", ctx_r19.localPath, "", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r19.localPath);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("columns", ctx_r19.columns)("dataObservable", ctx_r19.tableData);
} }
function FilesManageComponent_div_1_ul_4_Template(rf, ctx) { if (rf & 1) {
    const _r67 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "ul", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "li", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "form-select", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function FilesManageComponent_div_1_ul_4_Template_form_select_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r67); const ctx_r66 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r66.tableKey = $event; })("ngModelChange", function FilesManageComponent_div_1_ul_4_Template_form_select_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r67); const ctx_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r68.updateTable($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, FilesManageComponent_div_1_ul_4_section_4_Template, 2, 4, "section", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "li", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "h5");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](7, "Drop Files to Upload");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "li", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("dropFiles", function FilesManageComponent_div_1_ul_4_Template_div_dropFiles_9_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r67); const ctx_r69 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r69.filesDrop($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](10, " Drop Files to Upload Here ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "input", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function FilesManageComponent_div_1_ul_4_Template_input_change_12_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r67); const ctx_r70 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r70.uploadFile($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "label", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](14, "Choose files");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](15, "li", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "h5");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](17, "Upload Queue");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](18, "li", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](19, "d-table", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](20, FilesManageComponent_div_1_ul_4_ng_template_20_Template, 4, 0, "ng-template", 29, 30, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](22, FilesManageComponent_div_1_ul_4_ng_template_22_Template, 2, 1, "ng-template", null, 31, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](24, FilesManageComponent_div_1_ul_4_ng_template_24_Template, 4, 7, "ng-template", 32, 33, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](26, FilesManageComponent_div_1_ul_4_ng_template_26_Template, 14, 5, "ng-template", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r6.tableKey)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](9, _c1))("items", ctx_r6.connectionTables);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !(ctx_r6.connectionReference == null ? null : ctx_r6.connectionReference.allowsFlatFiles));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("requireFiles", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("columns", ctx_r6.uploadColumns)("data", ctx_r6.uploadedFiles);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r6.connectionReference == null ? null : ctx_r6.connectionReference.allowsFlatFiles);
} }
function FilesManageComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    const _r72 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function FilesManageComponent_div_1_Template_d_widget_close_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r72); const ctx_r71 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r71.close(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, FilesManageComponent_div_1_ng_template_2_Template, 3, 2, "ng-template", null, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, FilesManageComponent_div_1_ul_4_Template, 27, 10, "ul", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("title", "Manage Files: " + (ctx_r1.table == null ? null : ctx_r1.table.name))("showCloseButton", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.table);
} }
class FilesManageComponent {
    constructor(authService, hubService, route, router) {
        this.authService = authService;
        this.hubService = hubService;
        this.route = route;
        this.router = router;
        this.entityType = 'Table';
        this.canEdit = false;
        this.updateStrategy = _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eUpdateStrategy"].Reload;
        this.updateStrategies = _hub_models__WEBPACK_IMPORTED_MODULE_5__["updateStrategies"];
        this.path = _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eFlatFilePath"].None;
        this.eFlatFilePath = _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eFlatFilePath"];
        this.eFlatFilePathItems = _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eFlatFilePathItems"].filter(c => c.key > 0);
        this.eFileStatus = _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__["eFileStatus"];
        this.automaticUpload = true;
        this.uploadedFiles = [];
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__["CancelToken"]();
        this.pageTitle = 'Manage Files';
        this.showPage = false;
        this.showPageMessage = 'Loading...';
        this.columns = [
            { name: 'fileName', title: 'File Name', format: '' },
            { name: 'length', title: 'Size', format: '' },
            { name: 'lastModified', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_4__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
        this.uploadColumns = [
            { name: 'file.name', title: 'File Name', format: '' },
            { name: 'file.size', title: 'Size', format: '' },
        ];
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.route.params, this.route.queryParams, this.hubService.getHubCacheObservable(true), this.hubService.getRemoteLibrariesObservable()).subscribe(result => {
                let params = result[0];
                let queryParams = result[1];
                this.hubCache = result[2];
                this.remoteLibraries = result[3];
                // if (this.hubCache.status !== eCacheStatus.Loaded) { return; }
                // if the connection is a file connection or not a source connection
                this.fileConnections = this.hubCache.hub.dexihConnections
                    .filter(c => {
                    let ref = this.remoteLibraries.connections.find(con => c.connectionAssemblyName === con.connectionAssemblyName
                        && c.connectionClassName === con.connectionClassName);
                    if (ref) {
                        return (ref.connectionCategory === _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eConnectionCategory"].File || c.purpose !== _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eConnectionPurpose"].Source);
                    }
                    else {
                        return false;
                    }
                });
                let connectionTables = this.hubCache.getConnectionTables();
                this.connectionTables = connectionTables.filter(c => {
                    if (c.dexihTables.length > 0) {
                        return this.fileConnections.find(fc => c.key === fc.key) == null ? false : true;
                    }
                });
                let hasChanged = false;
                this.tableKey = +queryParams['tableKey'];
                if (!this.tableKey) {
                    if (this.connectionTables.length > 0 && this.connectionTables[0].dexihTables.length > 0) {
                        this.tableKey = this.connectionTables[0].dexihTables[0].key;
                        hasChanged = true;
                    }
                }
                this.path = +queryParams['path'];
                if (!this.path) {
                    this.path = _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eFlatFilePath"].Incoming;
                    hasChanged = true;
                }
                if (hasChanged) {
                    this.router.navigate([], {
                        relativeTo: this.route,
                        queryParams: { tableKey: this.tableKey, path: this.path },
                        queryParamsHandling: 'merge',
                    });
                    return;
                }
                this.table = this.hubCache.getTable(this.tableKey);
                let connection = this.hubCache.getConnection(this.table.connectionKey);
                this.connectionReference = this.remoteLibraries.connections.find(con => connection.connectionAssemblyName === con.connectionAssemblyName
                    && connection.connectionClassName === con.connectionClassName);
                if (!this.table && this.tableKey) {
                    this.hubService.addHubErrorMessage(`The table with the key ${this.tableKey} could not be found.`);
                }
                else if (this.table) {
                    this.pageTitle = 'Manage files for ' + this.table.name;
                    this.showPage = true;
                    this.refreshFiles();
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Files Manage');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    updateTable(tableKey) {
        this.router.navigate([], {
            relativeTo: this.route,
            queryParams: { tableKey: tableKey, path: 'incoming' },
            queryParamsHandling: 'merge',
        });
    }
    refreshFiles() {
        if (this.connectionReference.allowsFlatFiles) {
            this.hubService.getFileList(this.table, this.path, this.cancelToken).then(result => {
                this._tableData.next(result);
            }).catch(reason => {
                this._tableData.next([]);
            });
        }
    }
    uploadSelected(items) {
        items.forEach(item => {
            this.authService.upload(item).then(status => {
                if (status.success) {
                    this.hubService.addHubSuccessMessage(`File ${item.file.name} uploaded successfully.`);
                    this.refreshFiles();
                }
                else {
                    this.hubService.addHubMessage(status);
                }
            }).catch(reason => {
                this.hubService.addHubMessage(reason);
            });
        });
    }
    removeSelected(items) {
        items.forEach(item => {
            let index = this.uploadedFiles.findIndex(c => c.id === item.id);
            if (index >= 0) {
                this.uploadedFiles.splice(index, 1);
            }
        });
    }
    cancelSelected(items) {
        items.forEach(item => item.cancel());
    }
    deleteSelected(items) {
        let files = items.map(c => c.fileName);
        this.hubService.deleteFiles(this.table, this.path, files, this.cancelToken).then(c => {
            if (c) {
                this.refreshFiles();
            }
        }).catch();
    }
    moveSelected(items, toPath) {
        let files = items.map(c => c.fileName);
        this.hubService.moveFiles(this.table, this.path, toPath, files, this.cancelToken).then(c => {
            if (c) {
                this.refreshFiles();
            }
        }).catch(reason => {
            this.hubService.addHubMessage(status);
        });
    }
    downloadSelected(items) {
        let files = items.map(c => c.fileName);
        this.hubService.downloadFiles(this.table, this.path, files, this.cancelToken).then(c => {
            if (c) {
                this.refreshFiles();
            }
        }).catch();
    }
    preview(item) {
        this.router.navigate(['hub', this.hubCache.hub.hubKey, 'summary', 'files', 'manage', this.tableKey, this.path, item.fileName]);
    }
    close() {
        this.authService.navigateUp();
    }
    uploadFile(event) {
        let files = event.srcElement.files;
        this.doUpload(files);
        return false;
    }
    doUpload(files) {
        Array.prototype.forEach.call(files, file => {
            this.hubService.uploadFile(this.table, this.path, this.updateStrategy, file.name, this.cancelToken).then(url => {
                let fileHandler = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__["FileHandler"](file, url);
                if (this.automaticUpload) {
                    this.authService.upload(fileHandler).then(status => {
                        if (status.success) {
                            this.hubService.addHubSuccessMessage(`File ${file.name} uploaded successfully.`);
                            this.refreshFiles();
                        }
                        else {
                            this.hubService.addHubMessage(status);
                        }
                    }).catch(reason => {
                        this.hubService.addHubMessage(reason);
                    });
                }
                this.uploadedFiles.push(fileHandler);
                this.uploadedFiles = [...this.uploadedFiles];
            }).catch(reason => {
                this.hubService.addHubMessage(reason);
            });
        });
    }
    filesDrop(files) {
        this.doUpload(files);
    }
}
FilesManageComponent.ɵfac = function FilesManageComponent_Factory(t) { return new (t || FilesManageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"])); };
FilesManageComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: FilesManageComponent, selectors: [["files-manage"]], decls: 2, vars: 2, consts: [["class", "alert alert-danger m-3", 4, "ngIf"], ["class", "container", 4, "ngIf"], [1, "alert", "alert-danger", "m-3"], ["text", "New Connection", 3, "routerLink", "autoCompact"], [3, "routerLink", "autoCompact", "title", 4, "ngFor", "ngForOf"], [3, "routerLink", "autoCompact", "title"], [1, "container"], ["iconClass", "fa fa-lg fa-fw fa-table", 3, "title", "showCloseButton", "close"], ["header", ""], ["class", "list-group", 4, "ngIf"], ["iconClass", "fa fa-file-o", "text", "New File", 1, "mr-1"], ["class", "dropdown-item", 3, "routerLink", "title", 4, "ngFor", "ngForOf"], ["iconClass", "fa fa-filter", "title", "Select the file location", 3, "text", "pullRight", 4, "ngIf"], [1, "dropdown-item", 3, "routerLink", "title"], ["iconClass", "fa fa-filter", "title", "Select the file location", 3, "text", "pullRight"], ["class", "dropdown-item", "routerLinkActive", "active", "data-toggle", "tab", "routerLink", ".", 3, "active", "queryParams", 4, "ngFor", "ngForOf"], ["routerLinkActive", "active", "data-toggle", "tab", "routerLink", ".", 1, "dropdown-item", 3, "queryParams"], [1, "fa", "fa-elipsis-h"], [1, "list-group"], [1, "list-group-item"], ["label", "Flat File", "parentName", "name", "childItems", "dexihTables", "itemKey", "key", "itemName", "logicalName", "note", "Select the flat file to manage", 3, "ngModel", "ngModelOptions", "items", "ngModelChange"], [4, "ngIf"], [1, "list-group-item", "list-group-item-info", "rounded-0"], ["dropZone", "", "dropAllowedClass", "nv-file-over", 1, "well", "my-drop-zone", 3, "requireFiles", "dropFiles"], [1, "custom-file", "w-25", "float-right"], ["type", "file", "onclick", "this.value=null", 1, "custom-file-input", 3, "change"], ["for", "inputGroupFile01", 1, "custom-file-label"], [1, "list-group-item", "p-0"], [3, "enableMultiSelect", "columns", "data"], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["actions", ""], ["select", "rowStatus"], ["rowStatus", ""], [3, "ngIf"], ["label", "Update Strategy", "itemKey", "key", "itemName", "description", "iconClass", "fa fa-database", "note", "Specify how records should be inserted/updated in the target table.", 3, "ngModel", "ngModelOptions", "items", "ngModelChange"], ["iconClass", "fa fa-upload", "buttonClass", "btn-primary", 1, "mr-1", 3, "click"], [1, "mr-1", 3, "click"], ["text", "Remove", 3, "click"], ["label", "Automatically upload files when added to the queue.", 3, "ngModel", "ngModelChange"], ["class", "progress", "style", "margin-bottom: 0;", 4, "ngIf"], [1, "fa", 3, "ngClass"], [1, "progress", 2, "margin-bottom", "0"], ["role", "progressbar", 1, "progress-bar", 3, "ngStyle"], [3, "href"], [3, "enableMultiSelect", "columns", "dataObservable"], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["iconClass", "fa fa-mail-forward", "text", "Move", 1, "mr-1", 3, "pullRight"], ["class", "dropdown-item", 3, "click", 4, "ngIf"], [1, "dropdown-item", 3, "click"], [3, "routerLink"], ["class", "mr-1", "buttonClass", "btn-primary", "iconClass", "fa fa-filter", "title", "Select the file location", 3, "text", "pullRight", 4, "ngIf"], [3, "click"], ["buttonClass", "btn-primary", "iconClass", "fa fa-filter", "title", "Select the file location", 1, "mr-1", 3, "text", "pullRight"]], template: function FilesManageComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, FilesManageComponent_div_0_Template, 6, 3, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, FilesManageComponent_div_1_Template, 5, 3, "div", 1);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.connectionTables || ctx.connectionTables.length === 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.connectionTables && ctx.connectionTables.length > 0);
    } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonNewComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterLink"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgForOf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DWidgetComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonDropDownComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterLinkWithHref"], _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterLinkActive"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DFormSelectComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgModel"], _shared_utils_dropzone__WEBPACK_IMPORTED_MODULE_11__["DropZoneDirective"], ngx_d_table__WEBPACK_IMPORTED_MODULE_12__["DTableComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonCancelComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonDeleteComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DFormCheckboxComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgStyle"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonDownloadComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonPreviewComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonRefreshComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](FilesManageComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'files-manage',
                templateUrl: './files-manage.component.html'
            }]
    }], function () { return [{ type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/files/index.ts":
/*!*************************************!*\
  !*** ./src/app/+hub/files/index.ts ***!
  \*************************************/
/*! exports provided: FilesManageComponent, FilesBulkLoadComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _files_manage_files_manage_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./files-manage/files-manage.component */ "./src/app/+hub/files/files-manage/files-manage.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FilesManageComponent", function() { return _files_manage_files_manage_component__WEBPACK_IMPORTED_MODULE_0__["FilesManageComponent"]; });

/* harmony import */ var _files_bulk_load_files_bulk_load_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./files-bulk-load/files-bulk-load.component */ "./src/app/+hub/files/files-bulk-load/files-bulk-load.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FilesBulkLoadComponent", function() { return _files_bulk_load_files_bulk_load_component__WEBPACK_IMPORTED_MODULE_1__["FilesBulkLoadComponent"]; });





/***/ }),

/***/ "./src/app/+hub/hub.base.module.ts":
/*!*****************************************!*\
  !*** ./src/app/+hub/hub.base.module.ts ***!
  \*****************************************/
/*! exports provided: HubBaseModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HubBaseModule", function() { return HubBaseModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _shared_shared_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shared/shared.module */ "./src/app/shared/shared.module.ts");
/* harmony import */ var _columnValidation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./columnValidation */ "./src/app/+hub/columnValidation/index.ts");
/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./connection */ "./src/app/+hub/connection/index.ts");
/* harmony import */ var _copy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./copy */ "./src/app/+hub/copy/index.ts");
/* harmony import */ var _datajob__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./datajob */ "./src/app/+hub/datajob/index.ts");
/* harmony import */ var _datalink__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./datalink */ "./src/app/+hub/datalink/index.ts");
/* harmony import */ var _datalink_datalink_preview_data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./datalink/datalink-preview-data */ "./src/app/+hub/datalink/datalink-preview-data/index.ts");
/* harmony import */ var _fileFormat__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./fileFormat */ "./src/app/+hub/fileFormat/index.ts");
/* harmony import */ var _files__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./files */ "./src/app/+hub/files/index.ts");
/* harmony import */ var _hub_base_routing__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./hub.base.routing */ "./src/app/+hub/hub.base.routing.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _hub_shared_module__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./hub.shared.module */ "./src/app/+hub/hub.shared.module.ts");
/* harmony import */ var _hubVariable__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./hubVariable */ "./src/app/+hub/hubVariable/index.ts");
/* harmony import */ var _item_edit_guard__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./item-edit.guard */ "./src/app/+hub/item-edit.guard.ts");
/* harmony import */ var _manage_manage_users_index_manage_users_index_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./manage/manage-users-index/manage-users-index.component */ "./src/app/+hub/manage/manage-users-index/manage-users-index.component.ts");
/* harmony import */ var _remoteAgent__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./remoteAgent */ "./src/app/+hub/remoteAgent/index.ts");
/* harmony import */ var _results__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./results */ "./src/app/+hub/results/index.ts");
/* harmony import */ var _results_results_view_results_view_module__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./results/results-view/results-view.module */ "./src/app/+hub/results/results-view/results-view.module.ts");
/* harmony import */ var _sharedData_sharedData_index_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./sharedData/sharedData-index.component */ "./src/app/+hub/sharedData/sharedData-index.component.ts");
/* harmony import */ var _table_table_index__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./table/table-index */ "./src/app/+hub/table/table-index/index.ts");
/* harmony import */ var _customFunction__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./customFunction */ "./src/app/+hub/customFunction/index.ts");
/* harmony import */ var _test__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./test */ "./src/app/+hub/test/index.ts");
/* harmony import */ var _view_view_index__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./view/view-index */ "./src/app/+hub/view/view-index/index.ts");
/* harmony import */ var _dashboard__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./dashboard */ "./src/app/+hub/dashboard/index.ts");
/* harmony import */ var _api_api_index__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./api/api-index */ "./src/app/+hub/api/api-index/index.ts");
/* harmony import */ var _api_api_edit__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./api/api-edit */ "./src/app/+hub/api/api-edit/index.ts");
/* harmony import */ var _datalink_datalink_run_datalink_run_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./datalink/datalink-run/datalink-run.component */ "./src/app/+hub/datalink/datalink-run/datalink-run.component.ts");
/* harmony import */ var _search__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./search */ "./src/app/+hub/search/index.ts");
/* harmony import */ var _datajob_datajob_run_datajob_run_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./datajob/datajob-run/datajob-run.component */ "./src/app/+hub/datajob/datajob-run/datajob-run.component.ts");
/* harmony import */ var _listOfValues_listOfValues_edit__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./listOfValues/listOfValues-edit */ "./src/app/+hub/listOfValues/listOfValues-edit/index.ts");
/* harmony import */ var _listOfValues_listOfValues_index__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./listOfValues/listOfValues-index */ "./src/app/+hub/listOfValues/listOfValues-index/index.ts");
/* harmony import */ var _tags_tags_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./tags/tags.component */ "./src/app/+hub/tags/tags.component.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");




































class HubBaseModule {
    static forRoot() {
        return {
            ngModule: HubBaseModule,
            providers: [_hub_service__WEBPACK_IMPORTED_MODULE_12__["HubService"], _item_edit_guard__WEBPACK_IMPORTED_MODULE_15__["ItemEditGuard"]]
        };
    }
}
HubBaseModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: HubBaseModule });
HubBaseModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function HubBaseModule_Factory(t) { return new (t || HubBaseModule)(); }, providers: [_item_edit_guard__WEBPACK_IMPORTED_MODULE_15__["ItemEditGuard"]], imports: [[
            _shared_shared_module__WEBPACK_IMPORTED_MODULE_2__["SharedModule"],
            _hub_base_routing__WEBPACK_IMPORTED_MODULE_11__["BaseRouting"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["ReactiveFormsModule"],
            _hub_shared_module__WEBPACK_IMPORTED_MODULE_13__["HubSharedModule"],
            _results_results_view_results_view_module__WEBPACK_IMPORTED_MODULE_19__["ResultsViewModule"],
            _search__WEBPACK_IMPORTED_MODULE_29__["SearchModule"],
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](HubBaseModule, { declarations: [_connection__WEBPACK_IMPORTED_MODULE_4__["ConnectionIndexComponent"],
        _connection__WEBPACK_IMPORTED_MODULE_4__["ConnectionEditComponent"],
        _connection__WEBPACK_IMPORTED_MODULE_4__["ConnectionImportComponent"],
        _datalink__WEBPACK_IMPORTED_MODULE_7__["DatalinkIndexComponent"],
        _datalink_datalink_preview_data__WEBPACK_IMPORTED_MODULE_8__["DatalinkPreviewDataComponent"],
        _datalink_datalink_run_datalink_run_component__WEBPACK_IMPORTED_MODULE_28__["DatalinkRunComponent"],
        _datajob_datajob_run_datajob_run_component__WEBPACK_IMPORTED_MODULE_30__["DatajobRunComponent"],
        _table_table_index__WEBPACK_IMPORTED_MODULE_21__["TableIndexComponent"],
        _datalink__WEBPACK_IMPORTED_MODULE_7__["DatalinkNewComponent"],
        _remoteAgent__WEBPACK_IMPORTED_MODULE_17__["RemoteAgentIndexComponent"],
        _remoteAgent__WEBPACK_IMPORTED_MODULE_17__["RemoteAgentEditComponent"],
        _results__WEBPACK_IMPORTED_MODULE_18__["ResultsIndexComponent"],
        _datajob__WEBPACK_IMPORTED_MODULE_6__["DatajobIndexComponent"],
        _columnValidation__WEBPACK_IMPORTED_MODULE_3__["ColumnValidationIndexComponent"], _columnValidation__WEBPACK_IMPORTED_MODULE_3__["ColumnValidationEditComponent"],
        _fileFormat__WEBPACK_IMPORTED_MODULE_9__["FileFormatIndexComponent"],
        _view_view_index__WEBPACK_IMPORTED_MODULE_24__["ViewIndexComponent"],
        _api_api_index__WEBPACK_IMPORTED_MODULE_26__["ApiIndexComponent"], _api_api_edit__WEBPACK_IMPORTED_MODULE_27__["ApiEditComponent"],
        _hubVariable__WEBPACK_IMPORTED_MODULE_14__["HubVariableEditComponent"], _hubVariable__WEBPACK_IMPORTED_MODULE_14__["HubVariableIndexComponent"],
        _copy__WEBPACK_IMPORTED_MODULE_5__["ImportComponent"], _copy__WEBPACK_IMPORTED_MODULE_5__["ExportComponent"],
        _files__WEBPACK_IMPORTED_MODULE_10__["FilesManageComponent"],
        _manage_manage_users_index_manage_users_index_component__WEBPACK_IMPORTED_MODULE_16__["ManageUsersIndexComponent"],
        _sharedData_sharedData_index_component__WEBPACK_IMPORTED_MODULE_20__["SharedDataIndexComponent"],
        _customFunction__WEBPACK_IMPORTED_MODULE_22__["CustomFunctionIndexComponent"], _customFunction__WEBPACK_IMPORTED_MODULE_22__["CustomFunctionEditComponent"], _customFunction__WEBPACK_IMPORTED_MODULE_22__["CustomFunctionParameterComponent"],
        _test__WEBPACK_IMPORTED_MODULE_23__["DatalinkTestIndexComponent"], _test__WEBPACK_IMPORTED_MODULE_23__["DatalinkTestNewComponent"],
        _dashboard__WEBPACK_IMPORTED_MODULE_25__["DashboardIndexComponent"],
        _listOfValues_listOfValues_edit__WEBPACK_IMPORTED_MODULE_31__["ListOfValuesEditComponent"], _listOfValues_listOfValues_index__WEBPACK_IMPORTED_MODULE_32__["ListOfValuesIndexComponent"],
        _tags_tags_component__WEBPACK_IMPORTED_MODULE_33__["TagsComponent"]], imports: [_shared_shared_module__WEBPACK_IMPORTED_MODULE_2__["SharedModule"], _angular_router__WEBPACK_IMPORTED_MODULE_34__["RouterModule"], _angular_forms__WEBPACK_IMPORTED_MODULE_1__["ReactiveFormsModule"],
        _hub_shared_module__WEBPACK_IMPORTED_MODULE_13__["HubSharedModule"],
        _results_results_view_results_view_module__WEBPACK_IMPORTED_MODULE_19__["ResultsViewModule"],
        _search__WEBPACK_IMPORTED_MODULE_29__["SearchModule"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](HubBaseModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                imports: [
                    _shared_shared_module__WEBPACK_IMPORTED_MODULE_2__["SharedModule"],
                    _hub_base_routing__WEBPACK_IMPORTED_MODULE_11__["BaseRouting"],
                    _angular_forms__WEBPACK_IMPORTED_MODULE_1__["ReactiveFormsModule"],
                    _hub_shared_module__WEBPACK_IMPORTED_MODULE_13__["HubSharedModule"],
                    _results_results_view_results_view_module__WEBPACK_IMPORTED_MODULE_19__["ResultsViewModule"],
                    _search__WEBPACK_IMPORTED_MODULE_29__["SearchModule"],
                ],
                declarations: [
                    _connection__WEBPACK_IMPORTED_MODULE_4__["ConnectionIndexComponent"],
                    _connection__WEBPACK_IMPORTED_MODULE_4__["ConnectionEditComponent"],
                    _connection__WEBPACK_IMPORTED_MODULE_4__["ConnectionImportComponent"],
                    _datalink__WEBPACK_IMPORTED_MODULE_7__["DatalinkIndexComponent"],
                    _datalink_datalink_preview_data__WEBPACK_IMPORTED_MODULE_8__["DatalinkPreviewDataComponent"],
                    _datalink_datalink_run_datalink_run_component__WEBPACK_IMPORTED_MODULE_28__["DatalinkRunComponent"],
                    _datajob_datajob_run_datajob_run_component__WEBPACK_IMPORTED_MODULE_30__["DatajobRunComponent"],
                    _table_table_index__WEBPACK_IMPORTED_MODULE_21__["TableIndexComponent"],
                    _datalink__WEBPACK_IMPORTED_MODULE_7__["DatalinkNewComponent"],
                    _remoteAgent__WEBPACK_IMPORTED_MODULE_17__["RemoteAgentIndexComponent"],
                    _remoteAgent__WEBPACK_IMPORTED_MODULE_17__["RemoteAgentEditComponent"],
                    _results__WEBPACK_IMPORTED_MODULE_18__["ResultsIndexComponent"],
                    _datajob__WEBPACK_IMPORTED_MODULE_6__["DatajobIndexComponent"],
                    _columnValidation__WEBPACK_IMPORTED_MODULE_3__["ColumnValidationIndexComponent"], _columnValidation__WEBPACK_IMPORTED_MODULE_3__["ColumnValidationEditComponent"],
                    _fileFormat__WEBPACK_IMPORTED_MODULE_9__["FileFormatIndexComponent"],
                    _view_view_index__WEBPACK_IMPORTED_MODULE_24__["ViewIndexComponent"],
                    _api_api_index__WEBPACK_IMPORTED_MODULE_26__["ApiIndexComponent"], _api_api_edit__WEBPACK_IMPORTED_MODULE_27__["ApiEditComponent"],
                    _hubVariable__WEBPACK_IMPORTED_MODULE_14__["HubVariableEditComponent"], _hubVariable__WEBPACK_IMPORTED_MODULE_14__["HubVariableIndexComponent"],
                    _copy__WEBPACK_IMPORTED_MODULE_5__["ImportComponent"], _copy__WEBPACK_IMPORTED_MODULE_5__["ExportComponent"],
                    _files__WEBPACK_IMPORTED_MODULE_10__["FilesManageComponent"],
                    _manage_manage_users_index_manage_users_index_component__WEBPACK_IMPORTED_MODULE_16__["ManageUsersIndexComponent"],
                    _sharedData_sharedData_index_component__WEBPACK_IMPORTED_MODULE_20__["SharedDataIndexComponent"],
                    _customFunction__WEBPACK_IMPORTED_MODULE_22__["CustomFunctionIndexComponent"], _customFunction__WEBPACK_IMPORTED_MODULE_22__["CustomFunctionEditComponent"], _customFunction__WEBPACK_IMPORTED_MODULE_22__["CustomFunctionParameterComponent"],
                    _test__WEBPACK_IMPORTED_MODULE_23__["DatalinkTestIndexComponent"], _test__WEBPACK_IMPORTED_MODULE_23__["DatalinkTestNewComponent"],
                    _dashboard__WEBPACK_IMPORTED_MODULE_25__["DashboardIndexComponent"],
                    _listOfValues_listOfValues_edit__WEBPACK_IMPORTED_MODULE_31__["ListOfValuesEditComponent"], _listOfValues_listOfValues_index__WEBPACK_IMPORTED_MODULE_32__["ListOfValuesIndexComponent"],
                    _tags_tags_component__WEBPACK_IMPORTED_MODULE_33__["TagsComponent"]
                ],
                providers: [_item_edit_guard__WEBPACK_IMPORTED_MODULE_15__["ItemEditGuard"]],
                exports: []
            }]
    }], null, null); })();


/***/ }),

/***/ "./src/app/+hub/hub.base.routing.ts":
/*!******************************************!*\
  !*** ./src/app/+hub/hub.base.routing.ts ***!
  \******************************************/
/*! exports provided: BaseRouting */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BaseRouting", function() { return BaseRouting; });
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _columnValidation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./columnValidation */ "./src/app/+hub/columnValidation/index.ts");
/* harmony import */ var _connection_connection_edit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./connection/connection-edit */ "./src/app/+hub/connection/connection-edit/index.ts");
/* harmony import */ var _connection_connection_import__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./connection/connection-import */ "./src/app/+hub/connection/connection-import/index.ts");
/* harmony import */ var _connection_connection_index__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./connection/connection-index */ "./src/app/+hub/connection/connection-index/index.ts");
/* harmony import */ var _copy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./copy */ "./src/app/+hub/copy/index.ts");
/* harmony import */ var _datajob_datajob_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./datajob/datajob-index */ "./src/app/+hub/datajob/datajob-index/index.ts");
/* harmony import */ var _datalink_datalink_index__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./datalink/datalink-index */ "./src/app/+hub/datalink/datalink-index/index.ts");
/* harmony import */ var _datalink_datalink_new__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./datalink/datalink-new */ "./src/app/+hub/datalink/datalink-new/index.ts");
/* harmony import */ var _datalink_datalink_preview_data__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./datalink/datalink-preview-data */ "./src/app/+hub/datalink/datalink-preview-data/index.ts");
/* harmony import */ var _fileFormat__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./fileFormat */ "./src/app/+hub/fileFormat/index.ts");
/* harmony import */ var _files__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./files */ "./src/app/+hub/files/index.ts");
/* harmony import */ var _hubVariable__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./hubVariable */ "./src/app/+hub/hubVariable/index.ts");
/* harmony import */ var _manage_manage_users_index_manage_users_index_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./manage/manage-users-index/manage-users-index.component */ "./src/app/+hub/manage/manage-users-index/manage-users-index.component.ts");
/* harmony import */ var _remoteAgent__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./remoteAgent */ "./src/app/+hub/remoteAgent/index.ts");
/* harmony import */ var _results__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./results */ "./src/app/+hub/results/index.ts");
/* harmony import */ var _sharedData_sharedData_index_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./sharedData/sharedData-index.component */ "./src/app/+hub/sharedData/sharedData-index.component.ts");
/* harmony import */ var _table_table_index__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./table/table-index */ "./src/app/+hub/table/table-index/index.ts");
/* harmony import */ var _table_table_preview_data__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./table/table-preview-data */ "./src/app/+hub/table/table-preview-data/index.ts");
/* harmony import */ var _customFunction__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./customFunction */ "./src/app/+hub/customFunction/index.ts");
/* harmony import */ var _item_edit_guard__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./item-edit.guard */ "./src/app/+hub/item-edit.guard.ts");
/* harmony import */ var _test__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./test */ "./src/app/+hub/test/index.ts");
/* harmony import */ var _view_view_edit__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./view/view-edit */ "./src/app/+hub/view/view-edit/index.ts");
/* harmony import */ var _view_view_index__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./view/view-index */ "./src/app/+hub/view/view-index/index.ts");
/* harmony import */ var _api_api_edit__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./api/api-edit */ "./src/app/+hub/api/api-edit/index.ts");
/* harmony import */ var _api_api_index__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./api/api-index */ "./src/app/+hub/api/api-index/index.ts");
/* harmony import */ var _datalink_datalink_run_datalink_run_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./datalink/datalink-run/datalink-run.component */ "./src/app/+hub/datalink/datalink-run/datalink-run.component.ts");
/* harmony import */ var _search__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./search */ "./src/app/+hub/search/index.ts");
/* harmony import */ var _dashboard__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./dashboard */ "./src/app/+hub/dashboard/index.ts");
/* harmony import */ var _datajob_datajob_run_datajob_run_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./datajob/datajob-run/datajob-run.component */ "./src/app/+hub/datajob/datajob-run/datajob-run.component.ts");
/* harmony import */ var _listOfValues_listOfValues_edit__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./listOfValues/listOfValues-edit */ "./src/app/+hub/listOfValues/listOfValues-edit/index.ts");
/* harmony import */ var _listOfValues_listOfValues_index__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./listOfValues/listOfValues-index */ "./src/app/+hub/listOfValues/listOfValues-index/index.ts");
/* harmony import */ var _tags_tags_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./tags/tags.component */ "./src/app/+hub/tags/tags.component.ts");

































const resultViewRoute = { path: 'result-view/:auditConnectionKey/:auditKey', children: [
        { path: '', pathMatch: 'full', component: _results__WEBPACK_IMPORTED_MODULE_15__["ResultsViewComponent"], data: { pageTitle: 'Detailed Result' } },
        { path: 'result-view/:auditConnectionKey/:auditKey', children: [
                { path: '', pathMatch: 'full', component: _results__WEBPACK_IMPORTED_MODULE_15__["ResultsViewComponent"], data: { pageTitle: 'Child Result' } },
                { path: 'result-view/:auditConnectionKey/:auditKey', children: [
                        { path: '', pathMatch: 'full', component: _results__WEBPACK_IMPORTED_MODULE_15__["ResultsViewComponent"], data: { pageTitle: 'GrandChild Result' } },
                    ]
                }
            ]
        }
    ]
};
const tableRoutes = [
    { path: 'table-edit/:tableKey', data: { pageTitle: 'Edit Table', action: 'edit' },
        loadChildren: () => Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(1)]).then(__webpack_require__.bind(null, /*! ./table/table-edit/table-edit.module */ "./src/app/+hub/table/table-edit/table-edit.module.ts")).then(m => m.TableEditModule) },
    { path: 'table-new', data: { pageTitle: 'New Table', action: 'new' },
        loadChildren: () => Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(1)]).then(__webpack_require__.bind(null, /*! ./table/table-edit/table-edit.module */ "./src/app/+hub/table/table-edit/table-edit.module.ts")).then(m => m.TableEditModule) },
    { path: 'table-new/:connectionKey', data: { pageTitle: 'New Table', action: 'new' },
        loadChildren: () => Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(1)]).then(__webpack_require__.bind(null, /*! ./table/table-edit/table-edit.module */ "./src/app/+hub/table/table-edit/table-edit.module.ts")).then(m => m.TableEditModule) },
    { path: 'datalink-new/:sourceTableKeys/:targetConnectionKey',
        component: _datalink_datalink_new__WEBPACK_IMPORTED_MODULE_8__["DatalinkNewComponent"], data: { action: 'new', pageTitle: 'New Datalink' } },
    { path: 'table-preview/:tableKey', component: _table_table_preview_data__WEBPACK_IMPORTED_MODULE_18__["TablePreviewDataComponent"], data: { pageTitle: 'Preview Table' } },
];
const datalinkRoutes = [
    { path: 'datalink-edit', loadChildren: () => Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(7)]).then(__webpack_require__.bind(null, /*! ./datalink/datalink-edit/datalink-edit.module */ "./src/app/+hub/datalink/datalink-edit/datalink-edit.module.ts")).then(m => m.DatalinkEditModule) },
    { path: 'datalink-preview/:datalinkKey/:previewUpdates', component: _datalink_datalink_preview_data__WEBPACK_IMPORTED_MODULE_9__["DatalinkPreviewDataComponent"],
        data: { pageTitle: 'Preview Datalink' } },
    { path: 'table-preview/:tableKey', component: _table_table_preview_data__WEBPACK_IMPORTED_MODULE_18__["TablePreviewDataComponent"], data: { pageTitle: 'Preview Table' } },
    { path: 'datalink-run/:datalinkKeys', component: _datalink_datalink_run_datalink_run_component__WEBPACK_IMPORTED_MODULE_26__["DatalinkRunComponent"], data: { pageTitle: 'Run Datalink' } },
    resultViewRoute
];
const tablesRoute = { path: 'tables', data: { pageTitle: 'Tables' }, children: [
        { path: '', pathMatch: 'full', component: _table_table_index__WEBPACK_IMPORTED_MODULE_17__["TableIndexComponent"], data: { pageTitle: 'Tables' } },
        { path: '', children: tableRoutes },
        { path: '', children: datalinkRoutes },
    ]
};
const connectionRoutes = [
    { path: 'connection-edit/:connectionKey', component: _connection_connection_edit__WEBPACK_IMPORTED_MODULE_2__["ConnectionEditComponent"], canDeactivate: [_item_edit_guard__WEBPACK_IMPORTED_MODULE_20__["ItemEditGuard"]],
        data: { action: 'edit', pageTitle: 'Edit Connection' } },
    { path: 'connection-import/:connectionKey', data: { pageTitle: 'Import Tables' }, children: [
            { path: '', pathMatch: 'full', component: _connection_connection_import__WEBPACK_IMPORTED_MODULE_3__["ConnectionImportComponent"], data: { pageTitle: 'Import Tables' } },
            { path: 'table-edit/:tableKey', data: { pageTitle: 'Edit Table', action: 'edit' },
                loadChildren: () => Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(1)]).then(__webpack_require__.bind(null, /*! ./table/table-edit/table-edit.module */ "./src/app/+hub/table/table-edit/table-edit.module.ts")).then(m => m.TableEditModule) },
            { path: 'datalink-new/:sourceTableKeys/:targetConnectionKey',
                component: _datalink_datalink_new__WEBPACK_IMPORTED_MODULE_8__["DatalinkNewComponent"], data: { action: 'new', pageTitle: 'New Datalink' } },
        ] },
    { path: 'connection-new/:purpose', component: _connection_connection_edit__WEBPACK_IMPORTED_MODULE_2__["ConnectionEditComponent"], data: { action: 'new', pageTitle: 'New Connection' } },
    { path: 'connection-copy/:connectionKey', component: _connection_connection_edit__WEBPACK_IMPORTED_MODULE_2__["ConnectionEditComponent"], data: { action: 'copy', pageTitle: 'New Connection' } }
];
const connectionsRoute = { path: 'connections', data: { pageTitle: 'Connections' }, children: [
        { path: '', pathMatch: 'full', component: _connection_connection_index__WEBPACK_IMPORTED_MODULE_4__["ConnectionIndexComponent"], data: { pageTitle: 'Connections' } },
        { path: '', children: connectionRoutes },
        tablesRoute
    ]
};
const agentRoutes = [
    { path: '', pathMatch: 'full', component: _remoteAgent__WEBPACK_IMPORTED_MODULE_14__["RemoteAgentIndexComponent"], data: { pageTitle: 'Remote Agents' } },
    { path: 'agent-edit/:remoteAgentKey/:remoteAgentHubKey', component: _remoteAgent__WEBPACK_IMPORTED_MODULE_14__["RemoteAgentEditComponent"], data: { pageTitle: 'Edit Agent' } }
];
const agentsRoute = { path: 'agents', data: { pageTitle: 'Remote Agents' }, children: agentRoutes
};
const resultRoutes = [
    { path: 'results', data: { pageTitle: 'Execution Results' }, children: [
            { path: '', pathMatch: 'full', component: _results__WEBPACK_IMPORTED_MODULE_15__["ResultsIndexComponent"], data: { pageTitle: 'Execution Results' } },
            resultViewRoute
        ] },
    resultViewRoute
];
const manageRoute = { path: 'manage', children: [
        { path: 'manage-users', component: _manage_manage_users_index_manage_users_index_component__WEBPACK_IMPORTED_MODULE_13__["ManageUsersIndexComponent"], data: { pageTitle: 'Manage Users' } }
    ]
};
const importRoute = { path: 'import', children: [
        { path: '', pathMatch: 'full', component: _copy__WEBPACK_IMPORTED_MODULE_5__["ImportComponent"], data: { pageTitle: 'Import Objects' } }
    ]
};
const exportRoute = { path: 'export', children: [
        { path: '', pathMatch: 'full', component: _copy__WEBPACK_IMPORTED_MODULE_5__["ExportComponent"], data: { pageTitle: 'Export Objects' } }
    ]
};
const sharedDataRoute = { path: 'sharedData', data: { pageTitle: 'Shared Data' }, children: [
        { path: '', pathMatch: 'full', component: _sharedData_sharedData_index_component__WEBPACK_IMPORTED_MODULE_16__["SharedDataIndexComponent"] },
        { path: '', children: [
                { path: 'table-preview/:tableKey', component: _table_table_preview_data__WEBPACK_IMPORTED_MODULE_18__["TablePreviewDataComponent"], data: { pageTitle: 'Preview Table' } },
                { path: 'datalink-preview/:datalinkKey', component: _datalink_datalink_preview_data__WEBPACK_IMPORTED_MODULE_9__["DatalinkPreviewDataComponent"], data: { pageTitle: 'Preview Datalink' } },
                { path: 'dashboard-preview/:dashboardKey', data: { pageTitle: 'Preview Dashboard', action: 'edit' },
                    loadChildren: () => Promise.all(/*! import() */[__webpack_require__.e("common"), __webpack_require__.e(2)]).then(__webpack_require__.bind(null, /*! ./dashboard/dashboard-edit/dashboard-edit.module */ "./src/app/+hub/dashboard/dashboard-edit/dashboard-edit.module.ts")).then(m => m.DashboardEditModule) },
                { path: 'view-preview/:viewKey', component: _view_view_edit__WEBPACK_IMPORTED_MODULE_22__["ViewEditComponent"], data: { pageTitle: 'Preview View', action: 'edit' } },
                { path: 'api-preview/:apiKey', component: _api_api_edit__WEBPACK_IMPORTED_MODULE_24__["ApiEditComponent"], data: { pageTitle: 'Preview Api', action: 'edit' } }
            ] }
    ]
};
const customFunctionRoutes = [
    { path: 'customFunction-edit/:customFunctionKey', component: _customFunction__WEBPACK_IMPORTED_MODULE_19__["CustomFunctionEditComponent"], canDeactivate: [_item_edit_guard__WEBPACK_IMPORTED_MODULE_20__["ItemEditGuard"]],
        data: { action: 'edit', pageTitle: 'Edit Custom Function' } },
    { path: 'customFunction-new', component: _customFunction__WEBPACK_IMPORTED_MODULE_19__["CustomFunctionEditComponent"], data: { action: 'new', pageTitle: 'New Custom Function' } },
];
const customFunctionRoute = { path: 'customFunctions', data: { pageTitle: 'Custom Functions' }, children: [
        { path: '', pathMatch: 'full', component: _customFunction__WEBPACK_IMPORTED_MODULE_19__["CustomFunctionIndexComponent"] },
        { path: '', children: customFunctionRoutes },
    ]
};
const columnValidationRoutes = [
    { path: 'columnValidation-edit/:validationKey', component: _columnValidation__WEBPACK_IMPORTED_MODULE_1__["ColumnValidationEditComponent"], canDeactivate: [_item_edit_guard__WEBPACK_IMPORTED_MODULE_20__["ItemEditGuard"]],
        data: { action: 'edit', pageTitle: 'Edit Validation' } },
    { path: 'columnValidation-new', component: _columnValidation__WEBPACK_IMPORTED_MODULE_1__["ColumnValidationEditComponent"], data: { action: 'new', pageTitle: 'New Validation' } },
];
const columnValidationsRoute = { path: 'columnValidations', data: { pageTitle: 'Column Validations' }, children: [
        { path: '', pathMatch: 'full', component: _columnValidation__WEBPACK_IMPORTED_MODULE_1__["ColumnValidationIndexComponent"] },
        { path: '', children: columnValidationRoutes },
    ]
};
const fileFormatRoutes = [
    { path: 'fileFormat-edit/:fileFormatKey', component: _fileFormat__WEBPACK_IMPORTED_MODULE_10__["FileFormatEditComponent"], canDeactivate: [_item_edit_guard__WEBPACK_IMPORTED_MODULE_20__["ItemEditGuard"]],
        data: { action: 'edit', pageTitle: 'Edit FileFormat' } },
    { path: 'fileFormat-new', component: _fileFormat__WEBPACK_IMPORTED_MODULE_10__["FileFormatEditComponent"], data: { action: 'new', pageTitle: 'New FileFormat' } },
];
const fileFormatsRoute = { path: 'fileFormats', data: { pageTitle: 'File Formats' }, children: [
        { path: '', pathMatch: 'full', component: _fileFormat__WEBPACK_IMPORTED_MODULE_10__["FileFormatIndexComponent"] },
        { path: '', children: fileFormatRoutes }
    ]
};
const viewRoutes = [
    { path: 'view-edit/:viewKey', component: _view_view_edit__WEBPACK_IMPORTED_MODULE_22__["ViewEditComponent"], canDeactivate: [_item_edit_guard__WEBPACK_IMPORTED_MODULE_20__["ItemEditGuard"]],
        data: { action: 'edit', pageTitle: 'Edit View' } },
    { path: 'view-new', component: _view_view_edit__WEBPACK_IMPORTED_MODULE_22__["ViewEditComponent"], data: { action: 'new', pageTitle: 'New View' } },
];
const viewRoute = { path: 'views', data: { pageTitle: 'Views' }, children: [
        { path: '', pathMatch: 'full', component: _view_view_index__WEBPACK_IMPORTED_MODULE_23__["ViewIndexComponent"] },
        { path: '', children: viewRoutes }
    ]
};
const dashboardRoutes = [
    { path: 'dashboard-edit/:dashboardKey', data: { pageTitle: 'Edit Dashboard', action: 'edit' },
        loadChildren: () => Promise.all(/*! import() */[__webpack_require__.e("common"), __webpack_require__.e(2)]).then(__webpack_require__.bind(null, /*! ./dashboard/dashboard-edit/dashboard-edit.module */ "./src/app/+hub/dashboard/dashboard-edit/dashboard-edit.module.ts")).then(m => m.DashboardEditModule) },
    { path: 'dashboard-new', data: { pageTitle: 'New Dashboard', action: 'new' },
        loadChildren: () => Promise.all(/*! import() */[__webpack_require__.e("common"), __webpack_require__.e(2)]).then(__webpack_require__.bind(null, /*! ./dashboard/dashboard-edit/dashboard-edit.module */ "./src/app/+hub/dashboard/dashboard-edit/dashboard-edit.module.ts")).then(m => m.DashboardEditModule) },
];
const dashboardRoute = { path: 'dashboards', data: { pageTitle: 'Dashboards' }, children: [
        { path: '', pathMatch: 'full', component: _dashboard__WEBPACK_IMPORTED_MODULE_28__["DashboardIndexComponent"] },
        { path: '', children: dashboardRoutes }
    ]
};
const lovRoutes = [
    { path: 'listOfValues-edit/:listOfValuesKey', component: _listOfValues_listOfValues_edit__WEBPACK_IMPORTED_MODULE_30__["ListOfValuesEditComponent"], canDeactivate: [_item_edit_guard__WEBPACK_IMPORTED_MODULE_20__["ItemEditGuard"]],
        data: { action: 'edit', pageTitle: 'Edit List Of Values' } },
    { path: 'listOfValues-new', component: _listOfValues_listOfValues_edit__WEBPACK_IMPORTED_MODULE_30__["ListOfValuesEditComponent"], data: { action: 'new', pageTitle: 'New List of Values' } },
];
const lovRoute = { path: 'listOfValues', data: { pageTitle: 'List of Values' }, children: [
        { path: '', pathMatch: 'full', component: _listOfValues_listOfValues_index__WEBPACK_IMPORTED_MODULE_31__["ListOfValuesIndexComponent"] },
        { path: '', children: lovRoutes }
    ]
};
const apiRoutes = [
    { path: 'api-edit/:apiKey', component: _api_api_edit__WEBPACK_IMPORTED_MODULE_24__["ApiEditComponent"], canDeactivate: [_item_edit_guard__WEBPACK_IMPORTED_MODULE_20__["ItemEditGuard"]],
        data: { action: 'edit', pageTitle: 'Edit Api' } },
    { path: 'api-new', component: _api_api_edit__WEBPACK_IMPORTED_MODULE_24__["ApiEditComponent"], data: { action: 'new', pageTitle: 'New Api' } },
];
const apiRoute = { path: 'apis', data: { pageTitle: 'Apis' }, children: [
        { path: '', pathMatch: 'full', component: _api_api_index__WEBPACK_IMPORTED_MODULE_25__["ApiIndexComponent"] },
        { path: '', children: apiRoutes }
    ]
};
const hubVariableRoutes = [
    { path: 'hubVariable-edit/:hubVariableKey', component: _hubVariable__WEBPACK_IMPORTED_MODULE_12__["HubVariableEditComponent"], data: { action: 'edit',
            pageTitle: 'Edit Hub Variable' } },
    { path: 'hubVariable-new', component: _hubVariable__WEBPACK_IMPORTED_MODULE_12__["HubVariableEditComponent"], data: { action: 'new', pageTitle: 'New Hub Variable' } },
];
const hubVariablesRoute = { path: 'hubVariables', data: { pageTitle: 'Hub Variables' }, children: [
        { path: '', pathMatch: 'full', component: _hubVariable__WEBPACK_IMPORTED_MODULE_12__["HubVariableIndexComponent"] },
        { path: '', children: hubVariableRoutes }
    ]
};
const tagsRoute = { path: 'tags', component: _tags_tags_component__WEBPACK_IMPORTED_MODULE_32__["TagsComponent"] };
const datalinkTestRoutes = [
    { path: 'datalinkTest-edit/:datalinkTestKey', data: { pageTitle: 'Edit Datalink Test', action: 'edit' },
        loadChildren: () => __webpack_require__.e(/*! import() */ 4).then(__webpack_require__.bind(null, /*! ./test/datalinkTest-edit/datalinkTest-edit.module */ "./src/app/+hub/test/datalinkTest-edit/datalinkTest-edit.module.ts")).then(m => m.DatalinkTestEditModule) },
    { path: 'datalinkTest-new', data: { pageTitle: 'New Datalink Test', action: 'new' },
        loadChildren: () => __webpack_require__.e(/*! import() */ 4).then(__webpack_require__.bind(null, /*! ./test/datalinkTest-edit/datalinkTest-edit.module */ "./src/app/+hub/test/datalinkTest-edit/datalinkTest-edit.module.ts")).then(m => m.DatalinkTestEditModule) },
    { path: 'datalinkTest-new/:datalinkKeys', component: _test__WEBPACK_IMPORTED_MODULE_21__["DatalinkTestNewComponent"],
        data: { pageTitle: 'New Datalink Test', action: 'new' } },
    resultViewRoute
];
const datalinkTestsRoute = { path: 'datalinkTests', data: { pageTitle: 'Datalink Tests' }, children: [
        { path: '', pathMatch: 'full', component: _test__WEBPACK_IMPORTED_MODULE_21__["DatalinkTestIndexComponent"] },
        { path: '', children: datalinkTestRoutes },
        { path: '', children: resultRoutes },
    ]
};
const filesRoutes = [
    { path: 'manage', children: [
            { path: '', component: _files__WEBPACK_IMPORTED_MODULE_11__["FilesManageComponent"], data: { action: 'edit', pageTitle: 'Manage Files' } },
            { path: ':tableKey', data: { action: 'edit', pageTitle: 'Manage Files' }, children: [
                    { path: '', component: _files__WEBPACK_IMPORTED_MODULE_11__["FilesManageComponent"], data: { action: 'edit', pageTitle: 'Manage Files' } },
                    { path: 'file-preview/:path/:fileName', component: _table_table_preview_data__WEBPACK_IMPORTED_MODULE_18__["TablePreviewDataComponent"], data: { pageTitle: 'Preview File' } }
                ] }
        ] },
    { path: 'bulk-load', children: [
            { path: '', data: { action: 'new', pageTitle: 'Bulk Load Files' },
                loadChildren: () => Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e("common"), __webpack_require__.e(5)]).then(__webpack_require__.bind(null, /*! ./files/files-bulk-load/files-bulk-load.module */ "./src/app/+hub/files/files-bulk-load/files-bulk-load.module.ts")).then(m => m.FilesBulkLoadModule) },
            { path: ':connectionKey', data: { action: 'new', pageTitle: 'Bulk Load Files' },
                loadChildren: () => Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e("common"), __webpack_require__.e(5)]).then(__webpack_require__.bind(null, /*! ./files/files-bulk-load/files-bulk-load.module */ "./src/app/+hub/files/files-bulk-load/files-bulk-load.module.ts")).then(m => m.FilesBulkLoadModule) },
        ] },
];
const filesRoute = { path: 'files', data: { pageTitle: 'Files' }, children: [
        { path: '', children: filesRoutes }
    ]
};
const datalinksRoute = { path: 'datalinks', data: { pageTitle: 'Data Links' }, children: [
        { path: '', pathMatch: 'full', data: { pageTitle: 'Data Links' }, component: _datalink_datalink_index__WEBPACK_IMPORTED_MODULE_7__["DatalinkIndexComponent"] },
        { path: '', children: datalinkRoutes },
        { path: '', children: resultRoutes },
    ]
};
// const publishedRoute: Route = { path: 'published', children: (<Routes>[
//     { path: '', redirectTo: 'All'},
//     { path: ':typeFilter', children: (<Routes> [
//         {path: '', pathMatch: 'full', component: DatalinkIndexComponent, data: { pageTitle: 'Published' }},
//     {path: '', children: (<Routes>datalinkRoutes)},
//     {path: '', children: (<Routes>resultRoutes)},
//     ])}
//     ])
// };
const datajobRoutes = [
    { path: 'datajob-edit/:datajobKey', data: { pageTitle: 'Edit Data Job', action: 'edit' },
        loadChildren: () => __webpack_require__.e(/*! import() */ 3).then(__webpack_require__.bind(null, /*! ./datajob/datajob-edit/datajob-edit.module */ "./src/app/+hub/datajob/datajob-edit/datajob-edit.module.ts")).then(m => m.DatajobEditModule) },
    { path: 'datajob-new', data: { pageTitle: 'New Data Job', action: 'new' },
        loadChildren: () => __webpack_require__.e(/*! import() */ 3).then(__webpack_require__.bind(null, /*! ./datajob/datajob-edit/datajob-edit.module */ "./src/app/+hub/datajob/datajob-edit/datajob-edit.module.ts")).then(m => m.DatajobEditModule) },
    { path: 'datajob-run/:datajobKeys', component: _datajob_datajob_run_datajob_run_component__WEBPACK_IMPORTED_MODULE_29__["DatajobRunComponent"], data: { pageTitle: 'Run datajobs' } },
];
const datajobsRoute = { path: 'datajobs', data: { pageTitle: 'Data Jobs' }, children: [
        { path: '', pathMatch: 'full', component: _datajob_datajob_index__WEBPACK_IMPORTED_MODULE_6__["DatajobIndexComponent"] },
        { path: '', children: datajobRoutes },
        { path: '', children: resultRoutes },
    ]
};
const searchRoute = { path: 'search', data: { pageTitle: 'Search' }, children: [
        { path: '', pathMatch: 'full', redirectTo: '0/' },
        // { path: '', loadChildren: './hub.base.module#HubBaseModule' },
        { path: ':searchObject/:search', pathMatch: 'full', component: _search__WEBPACK_IMPORTED_MODULE_27__["SearchComponent"], },
        { path: ':searchObject/:search', loadChildren: () => Promise.resolve(/*! import() */).then(__webpack_require__.bind(null, /*! ./hub.base.module */ "./src/app/+hub/hub.base.module.ts")).then(m => m.HubBaseModule) }
    ]
};
const routes = [
    agentsRoute,
    connectionsRoute,
    //    publishedRoute,
    datalinksRoute,
    tablesRoute,
    datajobsRoute,
    // resultsRoute,
    columnValidationsRoute,
    customFunctionRoute,
    fileFormatsRoute,
    viewRoute,
    dashboardRoute,
    lovRoute,
    apiRoute,
    hubVariablesRoute,
    manageRoute,
    importRoute,
    exportRoute,
    sharedDataRoute,
    filesRoute,
    datalinkTestsRoute,
    tagsRoute,
    searchRoute,
    { path: '', children: connectionRoutes },
    { path: '', children: datalinkRoutes },
    { path: '', children: tableRoutes },
    { path: '', children: datajobRoutes },
    { path: '', children: resultRoutes },
    { path: '', children: customFunctionRoutes },
    { path: '', children: columnValidationRoutes },
    { path: '', children: fileFormatRoutes },
    { path: '', children: viewRoutes },
    { path: '', children: dashboardRoutes },
    { path: '', children: lovRoutes },
    { path: '', children: apiRoutes },
    { path: '', children: hubVariableRoutes },
    { path: '', children: filesRoutes },
    { path: '', children: agentRoutes },
    { path: '', children: datalinkTestRoutes },
];
const BaseRouting = _angular_router__WEBPACK_IMPORTED_MODULE_0__["RouterModule"].forChild(routes);


/***/ }),

/***/ "./src/app/+hub/hubVariable/hubVariable-edit/hubVariable-edit.component.ts":
/*!*********************************************************************************!*\
  !*** ./src/app/+hub/hubVariable/hubVariable-edit/hubVariable-edit.component.ts ***!
  \*********************************************************************************/
/*! exports provided: HubVariableEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HubVariableEditComponent", function() { return HubVariableEditComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../buttons/cancel-button/cancel-button.component */ "./src/app/+hub/buttons/cancel-button/cancel-button.component.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



















function HubVariableEditComponent_ng_template_2_d_button_save_0_Template(rf, ctx) { if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function HubVariableEditComponent_ng_template_2_d_button_save_0_Template_d_button_save_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r5); const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r4.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function HubVariableEditComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, HubVariableEditComponent_ng_template_2_d_button_save_0_Template, 1, 0, "d-button-save", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "cancel-button", 6);
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r1.formsService);
} }
function HubVariableEditComponent_form_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "input", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "input", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "section", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "form-input", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "section", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "form-input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "form-checkbox", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](12, "form-checkbox", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r2.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autocapitalize", true)("errors", ctx_r2.formsService.formErrors["name"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("label", ctx_r2.formsService.currentForm.controls.isEnvironmentVariable.value ? "Environment Variable Name" : "Hub Variable Value")("type", ctx_r2.formsService.currentForm.controls.isEncrypted.value ? "password" : "text")("errors", ctx_r2.formsService.formErrors["value"]);
} }
class HubVariableEditComponent {
    constructor(hubService, authService, formsService, route, router) {
        this.hubService = hubService;
        this.authService = authService;
        this.formsService = formsService;
        this.route = route;
        this.router = router;
        this.isLoaded = false;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_8__["CancelToken"]();
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable()).subscribe(result => {
                let data = result[0];
                this.params = result[1];
                this.hubCache = result[2];
                this.pageTitle = data['pageTitle'];
                this.action = data['action'];
                if (!this.hubCache || this.hubCache.status !== _hub_models__WEBPACK_IMPORTED_MODULE_2__["eCacheStatus"].Loaded) {
                    return;
                }
                if (this.isLoaded && this.action === 'new') {
                    return;
                }
                if (this.isLoaded && this.formsService.hasChanged) {
                    this.authService.confirmDialog('Synchronization warning', 'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')
                        .then(confirm => {
                        if (confirm) {
                            this.load();
                        }
                    }).catch(reason => {
                        return;
                    });
                }
                else {
                    this.load();
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Edit Variables');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._formChangeSubscription) {
            this._formChangeSubscription.unsubscribe();
        }
        if (this._isEncryptedSubscription) {
            this._isEncryptedSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    load() {
        this.isLoaded = true;
        if (this.action === 'edit') {
            // get the hub key from the route data, and update the service.
            this.hubVariableKey = +this.params['hubVariableKey'];
            if (!this.hubVariableKey) {
                this.hubService.addHubErrorMessage('There was no variable specified to edit.');
                // this.errorMessage = 'There was no validation specified to edit.';
            }
            else {
                if (!this.hubCache.hub || !this.hubCache.hub.dexihHubVariables) {
                    this.hubService.addHubErrorMessage('The hub cache is not loaded.');
                }
                else {
                    let hubVariable = this.hubCache.hub.dexihHubVariables.find(c => c.key === this.hubVariableKey);
                    this.formsService.hubVariable(hubVariable);
                }
            }
        }
        if (this.action === 'new') {
            let hubVariable = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["DexihHubVariable"]();
            hubVariable.value = '';
            hubVariable.name = '';
            this.formsService.hubVariable(hubVariable);
            // update the url with the saved key
            this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {
                let key = form.controls.key.value;
                if (key) {
                    if (history.pushState) {
                        let newUrl = window.location.pathname.replace('/hubVariable-new', `/hubVariable-edit/${key}`);
                        this.router.navigateByUrl(newUrl);
                        this._formChangeSubscription.unsubscribe();
                    }
                }
            });
        }
        this._isEncryptedSubscription = this.formsService.currentForm.controls.isEncrypted.valueChanges.subscribe(isEncrypted => {
            if (!isEncrypted) {
                this.formsService.currentForm.controls.valueRaw.setValue('');
            }
        });
    }
    save() {
        return __awaiter(this, void 0, void 0, function* () {
            let form = this.formsService.currentForm;
            let isEncrypted = form.controls.isEncrypted.value;
            if (isEncrypted) {
                let valueRaw = form.controls.valueRaw.value;
                if (valueRaw) {
                    let value = yield this.hubService.encrypt(valueRaw, this.cancelToken);
                    form.controls.value.setValue(value);
                    form.controls.valueRaw.setValue(null);
                }
            }
            else {
                let valueRaw = form.controls.valueRaw.value;
                form.controls.value.setValue(valueRaw);
            }
            yield this.formsService.save();
        });
    }
    close() {
        this.authService.navigateUp();
    }
}
HubVariableEditComponent.ɵfac = function HubVariableEditComponent_Factory(t) { return new (t || HubVariableEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"])); };
HubVariableEditComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: HubVariableEditComponent, selectors: [["dexih-hubVariable-edit-form"]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]])], decls: 6, vars: 3, consts: [[1, "container"], ["title", "Edit Variable", "iconClass", "fa fa-lg fa-fw fa-at", 3, "showCloseButton", "padding", "close"], ["header", ""], [3, "formGroup", 4, "ngIf"], ["title", "Hub Variables", "path", "/assets/help/reference/hubVariable.md", 1, "m-3"], ["class", "mr-1", 3, "click", 4, "ngIf"], [3, "formsService"], [1, "mr-1", 3, "click"], [3, "formGroup"], ["id", "fake_user_name", "name", "fake_user[name]", "type", "text", "value", "Fake Auto-fill", 2, "position", "absolute", "top", "-5000px"], ["id", "fake_password", "type", "password", "name", "fake_password[password]", "type", "text", "value", "Fake Auto-fill", 2, "position", "absolute", "top", "-5000px"], [1, "form-row"], [1, "form-group", "col-md-6"], ["label", "Hub Variable Name", "formControlName", "name", "placeholder", "Enter the name.", "iconClass", "fa fa-list", 3, "autocapitalize", "errors"], ["formControlName", "valueRaw", "placeholder", "Enter the value.", "iconClass", "fa fa-list", "autocomplete", "off", 3, "label", "type", "errors"], ["label", "Encrypt value", "formControlName", "isEncrypted"], ["label", "Use an environment variable on the remote agent", "formControlName", "isEnvironmentVariable"]], template: function HubVariableEditComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function HubVariableEditComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, HubVariableEditComponent_ng_template_2_Template, 2, 2, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, HubVariableEditComponent_form_4_Template, 13, 6, "form", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "dexih-help", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.formsService.currentForm);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DWidgetComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgIf"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_11__["DexihHelpComponent"], _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_12__["CancelButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonSaveComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DFormInputComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DFormCheckboxComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](HubVariableEditComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dexih-hubVariable-edit-form',
                templateUrl: './hubVariable-edit.component.html',
                providers: [_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]]
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/hubVariable/hubVariable-index/hubVariable-index.component.ts":
/*!***********************************************************************************!*\
  !*** ./src/app/+hub/hubVariable/hubVariable-index/hubVariable-index.component.ts ***!
  \***********************************************************************************/
/*! exports provided: HubVariableIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HubVariableIndexComponent", function() { return HubVariableIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../buttons/tags-update-button/tags-update-button.component */ "./src/app/+hub/buttons/tags-update-button/tags-update-button.component.ts");















const _c0 = function (a1) { return ["hubVariable-edit", a1]; };
function HubVariableIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-button-edit", 9);
} if (rf & 2) {
    const hubVariable_r6 = ctx.item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](1, _c0, hubVariable_r6.key));
} }
function HubVariableIndexComponent_ng_template_5_d_button_delete_1_Template(rf, ctx) { if (rf & 1) {
    const _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-delete", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function HubVariableIndexComponent_ng_template_5_d_button_delete_1_Template_d_button_delete_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r11); const items_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r9.deleteHubVariables(items_r7); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function HubVariableIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    const _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save-local", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function HubVariableIndexComponent_ng_template_5_Template_d_button_save_local_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r13); const items_r7 = ctx.items; const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r12.export(items_r7); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, HubVariableIndexComponent_ng_template_5_d_button_delete_1_Template, 1, 0, "d-button-delete", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "tags-update-button", 12);
} if (rf & 2) {
    const items_r7 = ctx.items;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("objectType", ctx_r3.eSharedObjectType.HubVariable)("objects", items_r7);
} }
const _c1 = function () { return ["hubVariable-new"]; };
function HubVariableIndexComponent_ng_template_7_d_button_new_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-button-new", 14);
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](1, _c1));
} }
function HubVariableIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, HubVariableIndexComponent_ng_template_7_d_button_new_0_Template, 1, 2, "d-button-new", 13);
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.hubCache.canWrite);
} }
class HubVariableIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.columns = [
            { name: 'name', title: 'Name', format: '', tags: 'tags' },
            { name: 'value', title: 'Value', format: '' },
            { name: 'isEncrypted', title: 'Encrypted?', format: 'Boolean' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        try {
            // watch for any changes in the validations.
            this.watchChanges();
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.hubService.getHubCacheObservable()).subscribe(result => {
                this.hubCache = result[0];
                this.updateVariables();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Hub Variables Index');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    deleteHubVariables(variables) {
        this.hubService.deleteHubVariables(variables);
    }
    updateVariables() {
        if (this.hubCache && this.hubCache.isLoaded()) {
            let variables = this.hubCache.hub.dexihHubVariables.filter(c => c.isValid).map(c => {
                return {
                    key: c.key,
                    name: c.name,
                    description: c.description,
                    updateDate: c.updateDate,
                    value: c.isEncrypted ? '(Encrypted)' : c.value,
                    isEncrypted: c.isEncrypted,
                    tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].HubVariable, c.key)
                };
            });
            this._tableData.next(variables);
        }
        else {
            this._tableData.next(null);
        }
    }
    edit(variable) {
        this.router.navigate(['hubVariable-edit', variable.key], { relativeTo: this.route });
    }
    export(variables) {
        let vars = this.hubCache.hub.dexihHubVariables.filter(c => {
            return variables.findIndex(d => d.key === c.key) >= 0;
        });
        const cache = this.hubCache;
        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');
        hub.dexihHubVariables = vars;
        let filename = 'hub_variables.json';
        this.hubService.exportHub(hub, filename);
    }
    watchChanges() {
        // watch the current validation in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].HubVariable || hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects) {
                this.updateVariables();
            }
        });
    }
}
HubVariableIndexComponent.ɵfac = function HubVariableIndexComponent_Factory(t) { return new (t || HubVariableIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"])); };
HubVariableIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: HubVariableIndexComponent, selectors: [["hubVariable"]], decls: 10, vars: 7, consts: [[1, "container-fluid"], ["title", "Hub Variables", "iconClass", "fa fa-lg fa-fw fa-at", 3, "showCloseButton", "close"], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "tags", "rowClick"], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["actions", ""], ["title", "Hub Variables", "path", "/assets/help/reference/hubVariable.md", 1, "m-3"], ["queryParamsHandling", "", "preserveFragment", "", 1, "mr-1", 3, "routerLink"], [1, "mr-1", 3, "click"], ["class", "mr-1", 3, "click", 4, "ngIf"], [1, "mr-1", 3, "objectType", "objects"], ["class", "mr-1", 3, "routerLink", 4, "ngIf"], [1, "mr-1", 3, "routerLink"]], template: function HubVariableIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function HubVariableIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function HubVariableIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.edit($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, HubVariableIndexComponent_ng_template_3_Template, 1, 3, "ng-template", 3, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, HubVariableIndexComponent_ng_template_5_Template, 3, 3, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, HubVariableIndexComponent_ng_template_7_Template, 1, 1, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "dexih-help", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__["DexihHelpComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonEditComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_4__["RouterLink"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonSaveLocalComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_10__["TagsUpdateButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDeleteComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonNewComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](HubVariableIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'hubVariable',
                templateUrl: './hubVariable-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/hubVariable/index.ts":
/*!*******************************************!*\
  !*** ./src/app/+hub/hubVariable/index.ts ***!
  \*******************************************/
/*! exports provided: HubVariableIndexComponent, HubVariableEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _hubVariable_index_hubVariable_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hubVariable-index/hubVariable-index.component */ "./src/app/+hub/hubVariable/hubVariable-index/hubVariable-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HubVariableIndexComponent", function() { return _hubVariable_index_hubVariable_index_component__WEBPACK_IMPORTED_MODULE_0__["HubVariableIndexComponent"]; });

/* harmony import */ var _hubVariable_edit_hubVariable_edit_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./hubVariable-edit/hubVariable-edit.component */ "./src/app/+hub/hubVariable/hubVariable-edit/hubVariable-edit.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HubVariableEditComponent", function() { return _hubVariable_edit_hubVariable_edit_component__WEBPACK_IMPORTED_MODULE_1__["HubVariableEditComponent"]; });





/***/ }),

/***/ "./src/app/+hub/listOfValues/listOfValues-edit/index.ts":
/*!**************************************************************!*\
  !*** ./src/app/+hub/listOfValues/listOfValues-edit/index.ts ***!
  \**************************************************************/
/*! exports provided: ListOfValuesEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _listOfValues_edit_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./listOfValues-edit.component */ "./src/app/+hub/listOfValues/listOfValues-edit/listOfValues-edit.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ListOfValuesEditComponent", function() { return _listOfValues_edit_component__WEBPACK_IMPORTED_MODULE_0__["ListOfValuesEditComponent"]; });




/***/ }),

/***/ "./src/app/+hub/listOfValues/listOfValues-edit/listOfValues-edit.component.ts":
/*!************************************************************************************!*\
  !*** ./src/app/+hub/listOfValues/listOfValues-edit/listOfValues-edit.component.ts ***!
  \************************************************************************************/
/*! exports provided: ListOfValuesEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListOfValuesEditComponent", function() { return ListOfValuesEditComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var _hub_lineage_models__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../hub.lineage.models */ "./src/app/+hub/hub.lineage.models.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component */ "./src/app/shared/ui/dexihFormControls/dexih-invalid-form-details/dexih-invalid-form-details.component.ts");
/* harmony import */ var _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../buttons/cancel-button/cancel-button.component */ "./src/app/+hub/buttons/cancel-button/cancel-button.component.ts");
/* harmony import */ var _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../buttons/save-button/save-button.component */ "./src/app/+hub/buttons/save-button/save-button.component.ts");
/* harmony import */ var _buttons_table_edit_button_table_edit_button_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../buttons/table-edit-button/table-edit-button.component */ "./src/app/+hub/buttons/table-edit-button/table-edit-button.component.ts");
/* harmony import */ var _buttons_datalink_edit_button_datalink_edit_button_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../buttons/datalink-edit-button/datalink-edit-button.component */ "./src/app/+hub/buttons/datalink-edit-button/datalink-edit-button.component.ts");
/* harmony import */ var _shared_ui_queryBuilder_query_builder_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../shared/ui/queryBuilder/query-builder.component */ "./src/app/shared/ui/queryBuilder/query-builder.component.ts");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");

























function ListOfValuesEditComponent_div_0_ng_template_2_save_button_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "save-button", 17);
} if (rf & 2) {
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r9.formsService);
} }
function ListOfValuesEditComponent_div_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    const _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "dexih-invalid-form-details", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ListOfValuesEditComponent_div_0_ng_template_2_Template_dexih_invalid_form_details_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r11); const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r10.formsService.showErrors(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ListOfValuesEditComponent_div_0_ng_template_2_save_button_1_Template, 1, 1, "save-button", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "cancel-button", 16);
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r2.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r2.formsService);
} }
function ListOfValuesEditComponent_div_0_section_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-select", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "table-edit-button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r3.formsService.formErrors == null ? null : ctx_r3.formsService.formErrors.sourceTableKey)("items", ctx_r3.connectionTables);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", ctx_r3.formsService.currentForm.controls.sourceTableKey.value);
} }
function ListOfValuesEditComponent_div_0_section_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-select", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "datalink-edit-button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r4.formsService.formErrors == null ? null : ctx_r4.formsService.formErrors.sourceDatalinkKey)("items", ctx_r4.datalinks);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", ctx_r4.formsService.currentForm.controls.sourceDatalinkKey.value);
} }
function ListOfValuesEditComponent_div_0_div_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "section", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "form-select", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "section", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "form-select", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "section", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "form-select", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r5.tableColumns)("allowNullSelect", true)("enableFilter", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r5.tableColumns)("allowNullSelect", true)("enableFilter", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r5.tableColumns)("allowNullSelect", true)("enableFilter", false);
} }
function ListOfValuesEditComponent_div_0_div_17_form_input_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "form-input", 29);
} }
function ListOfValuesEditComponent_div_0_div_17_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "section", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "form-checkbox", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ListOfValuesEditComponent_div_0_div_17_form_input_4_Template, 1, 0, "form-input", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("border", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r6.formsService.currentForm.controls.cache.value);
} }
function ListOfValuesEditComponent_div_0_d_widget_section_18_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    const _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ListOfValuesEditComponent_div_0_d_widget_section_18_ng_template_1_Template_d_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r16.add(-1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Insert Item");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-button-delete", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ListOfValuesEditComponent_div_0_d_widget_section_18_ng_template_1_Template_d_button_delete_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r18.clear(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ListOfValuesEditComponent_div_0_d_widget_section_18_form_3_Template(rf, ctx) { if (rf & 1) {
    const _r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "form-input", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "form-input", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "form-input", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "button", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ListOfValuesEditComponent_div_0_d_widget_section_18_form_3_Template_button_click_9_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r22); const i_r20 = ctx.index; const ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r21.add(i_r20); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "i", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "button", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ListOfValuesEditComponent_div_0_d_widget_section_18_form_3_Template_button_click_11_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r22); const i_r20 = ctx.index; const ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r23.remove(i_r20); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](12, "i", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const itemForm_r19 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", itemForm_r19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("border", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("border", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("border", false);
} }
function ListOfValuesEditComponent_div_0_d_widget_section_18_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-widget-section", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ListOfValuesEditComponent_div_0_d_widget_section_18_ng_template_1_Template, 3, 0, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ListOfValuesEditComponent_div_0_d_widget_section_18_form_3_Template, 13, 4, "form", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showExpandButton", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r7.formsService.currentForm.controls.staticData["controls"]);
} }
function ListOfValuesEditComponent_div_0_ng_template_19_div_2_Template(rf, ctx) { if (rf & 1) {
    const _r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-refresh", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ListOfValuesEditComponent_div_0_ng_template_19_div_2_Template_d_button_refresh_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r27); const ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r26.refreshData(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autoCompact", false);
} }
function ListOfValuesEditComponent_div_0_ng_template_19_d_table_3_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    const _r32 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-refresh", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ListOfValuesEditComponent_div_0_ng_template_19_d_table_3_ng_template_1_Template_d_button_refresh_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r32); const ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r31.refreshData(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ListOfValuesEditComponent_div_0_ng_template_19_d_table_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-table", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ListOfValuesEditComponent_div_0_ng_template_19_d_table_3_ng_template_1_Template, 1, 0, "ng-template", null, 52, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", false)("enableSaveCsv", true)("columns", ctx_r25.columns)("data", ctx_r25.data);
} }
function ListOfValuesEditComponent_div_0_ng_template_19_Template(rf, ctx) { if (rf & 1) {
    const _r34 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-widget-section", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "query-builder", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("hasChanged", function ListOfValuesEditComponent_div_0_ng_template_19_Template_query_builder_hasChanged_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r34); const ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r33.hasChanged(); })("onRefreshData", function ListOfValuesEditComponent_div_0_ng_template_19_Template_query_builder_onRefreshData_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r34); const ctx_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r35.refreshData(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ListOfValuesEditComponent_div_0_ng_template_19_div_2_Template, 2, 1, "div", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ListOfValuesEditComponent_div_0_ng_template_19_d_table_3_Template, 3, 4, "d-table", 48);
} if (rf & 2) {
    const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showExpandButton", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("selectQuery", ctx_r8.formsService.currentForm.controls.selectQuery.value)("columns", ctx_r8.tableColumns)("parameters", null)("refreshEvent", ctx_r8.refreshDataObservable);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r8.data);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r8.data);
} }
function ListOfValuesEditComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    const _r37 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ListOfValuesEditComponent_div_0_Template_d_widget_close_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r37); const ctx_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r36.close(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ListOfValuesEditComponent_div_0_ng_template_2_Template, 3, 3, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "form", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "form-input", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "form-textarea", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "section", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](13, "form-select", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](14, ListOfValuesEditComponent_div_0_section_14_Template, 3, 3, "section", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](15, ListOfValuesEditComponent_div_0_section_15_Template, 3, 3, "section", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](16, ListOfValuesEditComponent_div_0_div_16_Template, 7, 9, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](17, ListOfValuesEditComponent_div_0_div_17_Template, 5, 2, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](18, ListOfValuesEditComponent_div_0_d_widget_section_18_Template, 4, 2, "d-widget-section", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](19, ListOfValuesEditComponent_div_0_ng_template_19_Template, 4, 7, "ng-template", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r0.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autocapitalize", false)("errors", ctx_r0.formsService.formErrors["name"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showPreview", true)("isHidden", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r0.sourceTypes)("enableFilter", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.formsService.currentForm.value.sourceType == ctx_r0.eLOVObjectType.Table);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.formsService.currentForm.value.sourceType == ctx_r0.eLOVObjectType.Datalink);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.tableColumns);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.tableColumns);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.formsService.currentForm.value.sourceType == ctx_r0.eLOVObjectType.Static);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.formsService.currentForm.value.sourceType !== ctx_r0.eLOVObjectType.Static);
} }
class ListOfValuesEditComponent {
    constructor(hubService, authService, formsService, route, router) {
        this.hubService = hubService;
        this.authService = authService;
        this.formsService = formsService;
        this.route = route;
        this.router = router;
        this.isLoaded = false;
        this.refreshDataSubject = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.refreshDataObservable = this.refreshDataSubject.asObservable();
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_8__["CancelToken"]();
        this.eLOVObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eLOVObjectType"];
        this.connectionTables = [];
        this.datalinks = [];
        this.sourceTypes = _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eLOVObjectTypeItems"].filter(c => c.key > 0);
        this.columns = [
            { name: 'key', title: 'Key' },
            { name: 'name', title: 'Name' },
            { name: 'description', title: 'Description' },
        ];
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable()).subscribe(result => {
                let data = result[0];
                this.params = result[1];
                this.hubCache = result[2];
                this.pageTitle = data['pageTitle'];
                this.action = data['action'];
                if (!this.hubCache || this.hubCache.status !== _hub_models__WEBPACK_IMPORTED_MODULE_2__["eCacheStatus"].Loaded) {
                    return;
                }
                if (this.isLoaded && this.action === 'new') {
                    return;
                }
                if (this.isLoaded && this.formsService.hasChanged) {
                    this.authService.confirmDialog('Synchronization warning', 'The hub was disconnected, meaning this edit could have been changed by another session.  Would you like to discard the current changes, and reload the latest version?')
                        .then(confirm => {
                        if (confirm) {
                            this.load();
                        }
                    }).catch(reason => {
                        return;
                    });
                }
                else {
                    this.load();
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Edit List Of Values');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._formChangeSubscription) {
            this._formChangeSubscription.unsubscribe();
        }
        if (this._sourceChangeSubscription) {
            this._sourceChangeSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    load() {
        this.isLoaded = true;
        this.connectionTables = this.hubCache.getConnectionTables();
        this.datalinks = this.hubCache.hub.dexihDatalinks;
        if (this.action === 'edit') {
            // get the hub key from the route data, and update the service.
            this.listOfValuesKey = +this.params['listOfValuesKey'];
            if (!this.listOfValuesKey) {
                this.hubService.addHubErrorMessage('There was no list of values specified to edit.');
                // this.errorMessage = 'There was no validation specified to edit.';
            }
            else {
                if (!this.hubCache.hub || !this.hubCache.hub.dexihListOfValues) {
                    this.hubService.addHubErrorMessage('The hub cache is not loaded.');
                }
                else {
                    let listOfValues = this.hubCache.hub.dexihListOfValues.find(c => c.key === this.listOfValuesKey);
                    if (!listOfValues.selectQuery) {
                        listOfValues.selectQuery = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["SelectQuery"]();
                    }
                    this.formsService.listOfValues(listOfValues);
                }
            }
        }
        if (this.action === 'new') {
            let listOfValues = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["DexihListOfValues"]();
            listOfValues.selectQuery = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["SelectQuery"]();
            this.formsService.listOfValues(listOfValues);
            // update the url with the saved key
            this._formChangeSubscription = this.formsService.getCurrentFormObservable().subscribe(form => {
                let key = form.controls.key.value;
                if (key) {
                    if (history.pushState) {
                        let newUrl = window.location.pathname.replace('/listOfValues-new', `/listOfValues-edit/${key}`);
                        this.router.navigateByUrl(newUrl);
                        this._formChangeSubscription.unsubscribe();
                    }
                }
            });
        }
        this.refreshColumns();
        let currentForm = this.formsService.currentForm;
        // if any source table/datalink changed, refresh the columns.
        this._sourceChangeSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(currentForm.controls.sourceType.valueChanges, currentForm.controls.sourceTableKey.valueChanges, currentForm.controls.sourceDatalinkKey.valueChanges).subscribe(() => {
            this.refreshColumns();
        });
    }
    refreshColumns() {
        let currentForm = this.formsService.currentForm;
        let sourceType = currentForm.controls.sourceType.value;
        switch (sourceType) {
            case _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eLOVObjectType"].Datalink:
                let datalinkKey = currentForm.controls.sourceDatalinkKey.value;
                let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === datalinkKey);
                if (datalink) {
                    // get the outputs from the last transform in the datalink
                    const ioColumns = new _hub_lineage_models__WEBPACK_IMPORTED_MODULE_9__["InputOutputColumns"]();
                    ioColumns.buildInputOutput(datalink);
                    this.tableColumns = ioColumns.getDatalinkOutputColumns(datalink);
                }
                else {
                    if (datalinkKey > 0) {
                        this.hubService.addHubErrorMessage(`The datalink with the key ${datalinkKey} could not be found.`);
                    }
                    this.tableColumns = null;
                }
                break;
            case _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eLOVObjectType"].Table:
                let tableKey = currentForm.controls.sourceTableKey.value;
                let table = this.hubCache.hub.dexihTables.find(c => c.key === tableKey);
                if (table) {
                    this.tableColumns = table.dexihTableColumns;
                }
                else {
                    if (tableKey > 0) {
                        this.hubService.addHubErrorMessage(`The table with the key ${tableKey} could not be found.`);
                    }
                    this.tableColumns = null;
                }
                break;
        }
    }
    refreshData() {
        let form = this.formsService.currentForm;
        let listOfValues = form.value;
        this.hubService.previewListOfValues(listOfValues, true, this.cancelToken).then((data) => {
            this.data = data;
            this.refreshDataSubject.next();
        }).catch((reason) => {
            this.hubService.addHubMessage(reason);
        });
    }
    hasChanged() {
    }
    add(index) {
        let currentForm = this.formsService.currentForm;
        let item = this.formsService.listOfValuesItem(new _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["ListOfValuesItem"]());
        let staticData = currentForm.controls.staticData;
        staticData.insert(index + 1, item);
    }
    remove(index) {
        let currentForm = this.formsService.currentForm;
        let staticData = currentForm.controls.staticData;
        staticData.removeAt(index);
    }
    clear() {
        let currentForm = this.formsService.currentForm;
        let staticData = currentForm.controls.staticData;
        while (staticData.controls.length > 0) {
            staticData.removeAt(0);
        }
    }
    close() {
        this.authService.navigateUp();
    }
}
ListOfValuesEditComponent.ɵfac = function ListOfValuesEditComponent_Factory(t) { return new (t || ListOfValuesEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"])); };
ListOfValuesEditComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ListOfValuesEditComponent, selectors: [["dexih-listOfValues-edit-form"]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]])], decls: 1, vars: 1, consts: [["class", "container", 4, "ngIf"], [1, "container"], ["title", "Edit List of Values", "iconClass", "fa fa-lg fa-list-alt", 3, "showCloseButton", "padding", "close"], ["header", ""], [1, "m-3", 3, "formGroup"], ["label", "List of Values", "formControlName", "name", "placeholder", "Enter the list of values name.", "iconClass", "fa fa-list", 3, "autocapitalize", "errors"], ["label", "Description", "formControlName", "description", "placeholder", "Enter the description.", 3, "showPreview", "isHidden"], [1, "form-row"], [1, "form-group", "col-md-6"], ["label", "Data Source Type", "formControlName", "sourceType", "itemKey", "key", "itemName", "name", "iconClass", "fa fa-database", "note", "Specify the source type for this view", 3, "items", "enableFilter"], ["class", "form-group col-md-6", 4, "ngIf"], ["class", "form-row", 4, "ngIf"], ["title", "Static Values", 3, "showExpandButton", 4, "ngIf"], [3, "ngIf"], [1, "mr-1", 3, "control", "click"], ["class", "mr-1", 3, "formsService", 4, "ngIf"], [3, "formsService"], [1, "mr-1", 3, "formsService"], ["label", "Source Table", "formControlName", "sourceTableKey", "parentName", "name", "childItems", "dexihTables", "itemKey", "key", "itemName", "logicalName", "note", "Select the source table", 3, "errors", "items"], [3, "key"], ["label", "Source Datalink", "formControlName", "sourceDatalinkKey", "itemKey", "key", "itemName", "name", "note", "Select the source datalink", 3, "errors", "items"], [1, "form-group", "col-md-4"], ["label", "Key Column", "formControlName", "keyColumn", "itemKey", "name", "itemName", "name", "iconClass", "fa fa-key", 3, "items", "allowNullSelect", "enableFilter"], ["label", "Name Column", "formControlName", "nameColumn", "itemKey", "name", "itemName", "name", "iconClass", "fa fa-circle-o", 3, "items", "allowNullSelect", "enableFilter"], ["label", "Description Column", "formControlName", "descriptionColumn", "itemKey", "name", "itemName", "name", "iconClass", "fa fa-comment-o", 3, "items", "allowNullSelect", "enableFilter"], [1, "form-group", "col-md-12"], [1, "d-flex", "flex-wrap", "pt-1"], ["label", "Cache Lookup", "formControlName", "cache", 1, "input-group-prepend", 3, "border"], ["type", "number", "class", "pl-1", "labelLeft", "Cache Seconds", "placeholder", "seconds", "title", "Specify the number of seconds to cache the lookup", "formControlName", "cacheSeconds", 4, "ngIf"], ["type", "number", "labelLeft", "Cache Seconds", "placeholder", "seconds", "title", "Specify the number of seconds to cache the lookup", "formControlName", "cacheSeconds", 1, "pl-1"], ["title", "Static Values", 3, "showExpandButton"], ["class", "flex-fill", 3, "formGroup", 4, "ngFor", "ngForOf"], ["iconClass", "fa fa-plus", 1, "mr-1", 3, "click"], ["text", "Clear All", 3, "click"], [1, "flex-fill", 3, "formGroup"], [1, "input-group"], [1, "form-control", "p-0"], ["formControlName", "key", "type", "text", "placeholder", "Key Value", 3, "border"], ["formControlName", "name", "type", "text", "placeholder", "Item name", 3, "border"], ["formControlName", "key", "type", "text", "placeholder", "Description", 3, "border"], [1, "input-group-append", "flex-shrink-1", "ml-1"], ["type", "button", "value", "Add", 1, "btn", "btn-light", 3, "click"], [1, "fa", "fa-plus-square-o"], ["type", "button", "value", "Remove", 1, "btn", "btn-light", 3, "click"], [1, "fa", "fa-minus-square-o"], ["title", "Query Configuration", 3, "showExpandButton"], [3, "selectQuery", "columns", "parameters", "refreshEvent", "hasChanged", "onRefreshData"], ["class", "m-3", 4, "ngIf"], [3, "enableMultiSelect", "enableSaveCsv", "columns", "data", 4, "ngIf"], [1, "m-3"], ["text", "Reload", 3, "autoCompact", "click"], [3, "enableMultiSelect", "enableSaveCsv", "columns", "data"], ["actions", ""], ["text", "Reload", 1, "mr-1", 3, "click"]], template: function ListOfValuesEditComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ListOfValuesEditComponent_div_0_Template, 20, 15, "div", 0);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.formsService.currentForm);
    } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_10__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DWidgetComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DFormInputComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DFormTextAreaComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DFormSelectComponent"], _shared_ui_dexihFormControls_dexih_invalid_form_details_dexih_invalid_form_details_component__WEBPACK_IMPORTED_MODULE_13__["DexihInvalidFormDetailsComponent"], _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_14__["CancelButtonComponent"], _buttons_save_button_save_button_component__WEBPACK_IMPORTED_MODULE_15__["SaveButtonComponent"], _buttons_table_edit_button_table_edit_button_component__WEBPACK_IMPORTED_MODULE_16__["TableEditButtonComponent"], _buttons_datalink_edit_button_datalink_edit_button_component__WEBPACK_IMPORTED_MODULE_17__["DatalinkEditButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DFormCheckboxComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["ɵa"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgForOf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DButtonDeleteComponent"], _shared_ui_queryBuilder_query_builder_component__WEBPACK_IMPORTED_MODULE_18__["QueryBuilderComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_11__["DButtonRefreshComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_19__["DTableComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ListOfValuesEditComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dexih-listOfValues-edit-form',
                templateUrl: './listOfValues-edit.component.html',
                providers: [_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]]
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/listOfValues/listOfValues-index/index.ts":
/*!***************************************************************!*\
  !*** ./src/app/+hub/listOfValues/listOfValues-index/index.ts ***!
  \***************************************************************/
/*! exports provided: ListOfValuesIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _listOfValues_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./listOfValues-index.component */ "./src/app/+hub/listOfValues/listOfValues-index/listOfValues-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ListOfValuesIndexComponent", function() { return _listOfValues_index_component__WEBPACK_IMPORTED_MODULE_0__["ListOfValuesIndexComponent"]; });




/***/ }),

/***/ "./src/app/+hub/listOfValues/listOfValues-index/listOfValues-index.component.ts":
/*!**************************************************************************************!*\
  !*** ./src/app/+hub/listOfValues/listOfValues-index/listOfValues-index.component.ts ***!
  \**************************************************************************************/
/*! exports provided: ListOfValuesIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListOfValuesIndexComponent", function() { return ListOfValuesIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../buttons/dependent-items/dependent-items-button.component */ "./src/app/+hub/buttons/dependent-items/dependent-items-button.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../buttons/tags-update-button/tags-update-button.component */ "./src/app/+hub/buttons/tags-update-button/tags-update-button.component.ts");















const _c0 = function (a1) { return ["listOfValues-edit", a1]; };
function ListOfValuesIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-button-edit", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "dependent-items-button", 9);
} if (rf & 2) {
    const item_r6 = ctx.item;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](3, _c0, item_r6.key));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", item_r6.key)("objectType", ctx_r1.eSharedObjectType.ListOfValues);
} }
function ListOfValuesIndexComponent_ng_template_5_d_button_delete_1_Template(rf, ctx) { if (rf & 1) {
    const _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-delete", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ListOfValuesIndexComponent_ng_template_5_d_button_delete_1_Template_d_button_delete_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r11); const items_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r9.delete(items_r7); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ListOfValuesIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    const _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save-local", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ListOfValuesIndexComponent_ng_template_5_Template_d_button_save_local_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r13); const items_r7 = ctx.items; const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r12.export(items_r7); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ListOfValuesIndexComponent_ng_template_5_d_button_delete_1_Template, 1, 0, "d-button-delete", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "tags-update-button", 12);
} if (rf & 2) {
    const items_r7 = ctx.items;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.hubCache.canWrite);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("objectType", ctx_r3.eSharedObjectType.ListOfValues)("objects", items_r7);
} }
const _c1 = function () { return ["listOfValues-new"]; };
function ListOfValuesIndexComponent_ng_template_7_d_button_new_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-button-new", 14);
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](1, _c1));
} }
function ListOfValuesIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ListOfValuesIndexComponent_ng_template_7_d_button_new_0_Template, 1, 2, "d-button-new", 13);
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.hubCache.canWrite);
} }
class ListOfValuesIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.columns = [
            { name: 'name', title: 'Name', format: '', tags: 'tags' },
            { name: 'sourceType', title: 'Source Type', format: 'Enum', enum: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eLOVObjectType"] },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        try {
            // watch for any changes in the validations.
            this.watchChanges();
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.hubService.getHubCacheObservable()).subscribe(result => {
                this.hubCache = result[0];
                this.update();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Hub List of Values Index');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    delete(lov) {
        this.hubService.deleteListOfValues(lov);
    }
    update() {
        if (this.hubCache && this.hubCache.isLoaded()) {
            let listOfValues = this.hubCache.hub.dexihListOfValues.filter(c => c.isValid).map(c => {
                return {
                    key: c.key,
                    name: c.name,
                    description: c.description,
                    updateDate: c.updateDate,
                    tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].ListOfValues, c.key)
                };
            });
            this._tableData.next(listOfValues);
        }
        else {
            this._tableData.next(null);
        }
    }
    edit(lov) {
        this.router.navigate(['listOfValues-edit', lov.key], { relativeTo: this.route });
    }
    export(lov) {
        const cache = this.hubCache;
        const hub = this.hubService.createHub(cache.hub.hubKey, '');
        hub.dexihListOfValues = lov;
        lov.forEach(lovItem => {
            cache.getListOfValuesCache(lovItem, hub);
        });
        let filename = 'list_of_values.json';
        this.hubService.exportHub(hub, filename);
    }
    watchChanges() {
        // watch the current validation in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].ListOfValues || hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects) {
                this.update();
            }
        });
    }
}
ListOfValuesIndexComponent.ɵfac = function ListOfValuesIndexComponent_Factory(t) { return new (t || ListOfValuesIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"])); };
ListOfValuesIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ListOfValuesIndexComponent, selectors: [["listOfValues"]], decls: 9, vars: 7, consts: [[1, "container-fluid"], ["title", "List Of Values", "iconClass", "fa fa-lg fa-fw fa-list-alt", 3, "showCloseButton", "close"], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "tags", "rowClick"], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["actions", ""], ["queryParamsHandling", "", "preserveFragment", "", 1, "mr-1", 3, "routerLink"], [1, "ml-1", 3, "key", "objectType"], [1, "mr-1", 3, "click"], ["class", "mr-1", 3, "click", 4, "ngIf"], [1, "mr-1", 3, "objectType", "objects"], ["class", "mr-1", 3, "routerLink", 4, "ngIf"], [1, "mr-1", 3, "routerLink"]], template: function ListOfValuesIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ListOfValuesIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function ListOfValuesIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.edit($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ListOfValuesIndexComponent_ng_template_3_Template, 2, 5, "ng-template", 3, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ListOfValuesIndexComponent_ng_template_5_Template, 3, 3, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ListOfValuesIndexComponent_ng_template_7_Template, 1, 1, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonEditComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_4__["RouterLink"], _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_8__["DependentItemsButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonSaveLocalComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_10__["TagsUpdateButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDeleteComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonNewComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ListOfValuesIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'listOfValues',
                templateUrl: './listOfValues-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/manage/manage-users-index/manage-users-index.component.ts":
/*!********************************************************************************!*\
  !*** ./src/app/+hub/manage/manage-users-index/manage-users-index.component.ts ***!
  \********************************************************************************/
/*! exports provided: ManageUsersIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ManageUsersIndexComponent", function() { return ManageUsersIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _shared_ui_dexihMessage_dexih_message_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/ui/dexihMessage/dexih-message.component */ "./src/app/shared/ui/dexihMessage/dexih-message.component.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
















const _c0 = ["DexihMessage"];
function ManageUsersIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ManageUsersIndexComponent_ng_template_5_Template_d_button_save_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6); const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r5.addUsers(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx_r2.emails.length == 0);
} }
function ManageUsersIndexComponent_ng_template_17_a_2_Template(rf, ctx) { if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ManageUsersIndexComponent_ng_template_17_a_2_Template_a_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r12); const permission_r9 = ctx.$implicit; const items_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r10.setPermission(permission_r9.key, items_r7); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const permission_r9 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](permission_r9.name);
} }
function ManageUsersIndexComponent_ng_template_17_Template(rf, ctx) { if (rf & 1) {
    const _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-delete", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ManageUsersIndexComponent_ng_template_17_Template_d_button_delete_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14); const items_r7 = ctx.items; const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r13.deleteUsers(items_r7); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-dropdown", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ManageUsersIndexComponent_ng_template_17_a_2_Template, 2, 1, "a", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "d-button-dropdown", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ManageUsersIndexComponent_ng_template_17_Template_a_click_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14); const items_r7 = ctx.items; const ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r15.setUserAlert(true, items_r7); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, "Receive alert emails");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ManageUsersIndexComponent_ng_template_17_Template_a_click_6_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14); const items_r7 = ctx.items; const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r16.setUserAlert(false, items_r7); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](7, "Do not receive alert emails.");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r4.ePermissionItems);
} }
class ManageUsersIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.columns = [
            { name: 'userName', title: 'User Name', format: '' },
            { name: 'firstName', title: 'First Name', format: '' },
            { name: 'lastName', title: 'Last Name', format: '' },
            { name: 'permission', title: 'Permission', enum: _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["ePermission"], format: 'Enum' },
            { name: 'receiveAlerts', title: 'Receives Alert Emails', format: 'Boolean' }
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_4__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
        this.ePermission = _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["ePermission"];
        this.ePermissionItems = _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["ePermissionItems"];
        this.permission = _shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["ePermission"].PublishReader;
        this.emails = [];
        this.sendInvites = true;
    }
    ngOnInit() {
        this.refreshUsers();
    }
    ngOnDestroy() {
    }
    refreshUsers() {
        this.hubService.getHubUsers().then(result => {
            this._tableData.next(result);
        });
    }
    setPermission(permission, users) {
        const userNames = users.map(c => c.userName);
        this.authService.confirmDialog('Confirm Permission Change', `This action will change the selected user(s) hub permission to ${_shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["ePermission"][this.permission]}.  Proceed?`).then(confirm => {
            if (confirm) {
                this.hubService.setUserPermissions(userNames, permission, false).then(result => {
                    this.dexihMessage.addSuccessMessage('The specified user(s) permission have been updated.');
                    this.refreshUsers();
                });
            }
        });
    }
    setUserAlert(alertEmail, users) {
        const userIds = users.map(c => c.id);
        this.hubService.setUserAlerts(userIds, alertEmail, false).then(result => {
            this.dexihMessage.addSuccessMessage('The specified user(s) alert email status have been updated.');
            this.refreshUsers();
        });
    }
    deleteUsers(users) {
        const emails = users.map(c => c.userName);
        this.authService.confirmDialog('Confirm Delete Users', `This action will delete the selected user(s) from using this hub.  Proceed?`).then(confirm => {
            if (confirm) {
                this.hubService.removeUsers(emails).then(result => {
                    this.dexihMessage.addSuccessMessage('The specified users have been removed from the hub.');
                    this.refreshUsers();
                });
            }
        });
    }
    addUsers() {
        if (this.emails.length > 0 && this.permission) {
            this.authService.confirmDialog('Add Users', 
            // tslint:disable-next-line:max-line-length
            `This action will added users with the specified emails to this hub with permission ${_shared_shared_models__WEBPACK_IMPORTED_MODULE_6__["ePermission"][this.permission]}.  Proceed?`).then(confirm => {
                if (confirm) {
                    this.hubService.setUserPermissions(this.emails, this.permission, this.sendInvites).then(result => {
                        this.emails = [];
                        this.dexihMessage.addSuccessMessage('The specified users have been added to the hub.');
                        this.refreshUsers();
                    });
                }
            });
        }
    }
}
ManageUsersIndexComponent.ɵfac = function ManageUsersIndexComponent_Factory(t) { return new (t || ManageUsersIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_2__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_1__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"])); };
ManageUsersIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ManageUsersIndexComponent, selectors: [["users"]], viewQuery: function ManageUsersIndexComponent_Query(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c0, true);
    } if (rf & 2) {
        var _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.dexihMessage = _t.first);
    } }, decls: 19, vars: 9, consts: [[1, "p-3"], ["DexihMessage", ""], [1, "container-fluid"], ["title", "Invite Users", "iconClass", "fa fa-lg fa-fw fa-birthday-cake", 3, "padding"], ["subHeader", ""], ["label", "Permission", "name", "permission", "itemKey", "key", "itemName", "name", "note", "Permission level to grant to emails", 3, "ngModel", "items", "enableFilter", "ngModelChange"], ["label", "Email Addresses / User names", "name", "emails", "note", "Provide a list of user names or email addresses of users to join the hub.", 3, "ngModel", "ngModelChange"], ["label", "Send invites", "name", "sendInvites", "note", "Emails which are not registered to use the integration hub will be sent an invite to join.", 3, "ngModel", "ngModelChange"], ["title", "Current Users", "iconClass", "fa fa-lg fa-fw fa-group"], [3, "enableMultiSelect", "columns", "dataObservable"], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["text", "Add User(s)", 3, "disabled", "click"], [1, "mr-1", 3, "click"], ["buttonClass", "btn-primary", "iconClass", "fa fa-lock", "text", "Set Permission"], ["class", "dropdown-item", 3, "click", 4, "ngFor", "ngForOf"], ["buttonClass", "btn-primary", "iconClass", "fa fa-bell", "text", "Set User Alert", 1, "ml-1"], [1, "dropdown-item", 3, "click"]], template: function ManageUsersIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "dexih-message", 0, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "d-widget-vertical");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "d-widget", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ManageUsersIndexComponent_ng_template_5_Template, 1, 1, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "form");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "fieldset");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "section");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "form-select", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ManageUsersIndexComponent_Template_form_select_ngModelChange_10_listener($event) { return ctx.permission = $event; });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "section");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "form-tags", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ManageUsersIndexComponent_Template_form_tags_ngModelChange_12_listener($event) { return ctx.emails = $event; });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "section");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "form-checkbox", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ManageUsersIndexComponent_Template_form_checkbox_ngModelChange_14_listener($event) { return ctx.sendInvites = $event; });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](15, "d-widget", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "d-table", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](17, ManageUsersIndexComponent_ng_template_17_Template, 8, 1, "ng-template", 10, 11, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("padding", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.permission)("items", ctx.ePermissionItems)("enableFilter", false);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.emails);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.sendInvites);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("columns", ctx.columns)("dataObservable", ctx.tableData);
    } }, directives: [_shared_ui_dexihMessage_dexih_message_component__WEBPACK_IMPORTED_MODULE_5__["DexihMessageComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DWidgetVerticalComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DWidgetComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgForm"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DFormSelectComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgModel"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DFormTagsComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DFormCheckboxComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_9__["DTableComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DButtonSaveComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DButtonDeleteComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DButtonDropDownComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgForOf"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ManageUsersIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'users',
                templateUrl: './manage-users-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_2__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_1__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] }]; }, { dexihMessage: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['DexihMessage', { static: true }]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/remoteAgent/index.ts":
/*!*******************************************!*\
  !*** ./src/app/+hub/remoteAgent/index.ts ***!
  \*******************************************/
/*! exports provided: RemoteAgentIndexComponent, RemoteAgentEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _remoteAgent_index_remoteAgent_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./remoteAgent-index/remoteAgent-index.component */ "./src/app/+hub/remoteAgent/remoteAgent-index/remoteAgent-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RemoteAgentIndexComponent", function() { return _remoteAgent_index_remoteAgent_index_component__WEBPACK_IMPORTED_MODULE_0__["RemoteAgentIndexComponent"]; });

/* harmony import */ var _remoteAgent_edit_remoteAgent_edit_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./remoteAgent-edit/remoteAgent-edit.component */ "./src/app/+hub/remoteAgent/remoteAgent-edit/remoteAgent-edit.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RemoteAgentEditComponent", function() { return _remoteAgent_edit_remoteAgent_edit_component__WEBPACK_IMPORTED_MODULE_1__["RemoteAgentEditComponent"]; });





/***/ }),

/***/ "./src/app/+hub/remoteAgent/remoteAgent-edit/remoteAgent-edit.component.ts":
/*!*********************************************************************************!*\
  !*** ./src/app/+hub/remoteAgent/remoteAgent-edit/remoteAgent-edit.component.ts ***!
  \*********************************************************************************/
/*! exports provided: RemoteAgentEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RemoteAgentEditComponent", function() { return RemoteAgentEditComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _shared_ui_dexihMessage_dexih_message_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../shared/ui/dexihMessage/dexih-message.component */ "./src/app/shared/ui/dexihMessage/dexih-message.component.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../buttons/cancel-button/cancel-button.component */ "./src/app/+hub/buttons/cancel-button/cancel-button.component.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
















const _c0 = function (a4) { return ["/hubs", "index", "agents", "edit", a4]; };
function RemoteAgentEditComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-button-edit", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-save", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RemoteAgentEditComponent_ng_template_4_Template_d_button_save_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r7.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "cancel-button", 8);
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](3, _c0, ctx_r2.remoteAgentKey));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", !ctx_r2.formsService.hasChanged);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formsService", ctx_r2.formsService);
} }
function RemoteAgentEditComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](0, " \u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0");
} }
function RemoteAgentEditComponent_div_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, " Creating a new hub -> remote agent authorization ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
const _c1 = function () { return { standalone: true }; };
function RemoteAgentEditComponent_form_10_Template(rf, ctx) { if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "form-input", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function RemoteAgentEditComponent_form_10_Template_form_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10); const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r9.name = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "form-checkbox", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "form-checkbox", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r6.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", true)("ngModel", ctx_r6.name)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](4, _c1));
} }
class RemoteAgentEditComponent {
    constructor(authService, hubService, formsService, router, route) {
        this.authService = authService;
        this.hubService = hubService;
        this.formsService = formsService;
        this.router = router;
        this.route = route;
        this.isNew = false;
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable(), this.authService.getRemoteAgentsObservable()).subscribe(result => {
                let data = result[0];
                let params = result[1];
                this.hubCache = result[2];
                this.remoteAgents = result[3];
                if (!this.hubCache.isLoaded() || !this.remoteAgents) {
                    return;
                }
                this.remoteAgentKey = +params['remoteAgentKey'];
                this.remoteAgentHubKey = +params['remoteAgentHubKey'];
                if (!this.remoteAgentKey) {
                    this.hubService.addHubErrorMessage('There was no remote agent specified to edit.');
                    // this.errorMessage = 'There was no validation specified to edit.';
                }
                else {
                    let remoteAgent = this.remoteAgents.find(c => c.remoteAgentKey === this.remoteAgentKey);
                    let activeAgent = remoteAgent['activeAgents'] &&
                        remoteAgent['activeAgents'].length > 0 ? remoteAgent['activeAgents'][0] : null;
                    this.name = activeAgent ? activeAgent.name : '';
                    this.ipAddress = activeAgent ? activeAgent.ipAddress : null;
                    this.remoteAgentHub = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === this.remoteAgentHubKey);
                    if (!this.remoteAgentHub) {
                        this.remoteAgentHub = {
                            hubKey: this.hubCache.hub.hubKey,
                            remoteAgentHubKey: 0,
                            remoteAgentKey: remoteAgent.remoteAgentKey,
                            isAuthorized: true,
                            isValid: true,
                            createDate: null,
                            isDefault: false,
                            updateDate: null
                        };
                        this.remoteAgentHub['allowExternalConnect'] = true;
                        this.remoteAgentHub['isSelected'] = false;
                        this.isNew = true;
                    }
                    this.formsService.remoteAgent(this.remoteAgentHub);
                    if (this.remoteAgentHub.remoteAgentHubKey === 0) {
                        this.formsService.hasChanged = true;
                    }
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Remote Agent Edit');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    addCurrentIp() {
        if (this.ipAddress) {
            let form = this.formsService.currentForm;
            let ipAddressesControl = form.controls.ipAddresses;
            let ipAddresses = ipAddressesControl.value;
            if (ipAddresses.findIndex(c => c === this.ipAddress) < 0) {
                ipAddresses.push(this.ipAddress);
                ipAddressesControl.setValue(ipAddresses);
            }
        }
    }
    save() {
        let form = this.formsService.currentForm;
        let remoteAgentHub = form.value;
        this.hubService.saveRemoteAgent(remoteAgentHub).then((success) => {
            if (success) {
                this.hubService.addHubSuccessMessage('The remote agent updated successfully.');
                this.authService.navigateUp();
            }
        });
    }
}
RemoteAgentEditComponent.ɵfac = function RemoteAgentEditComponent_Factory(t) { return new (t || RemoteAgentEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_5__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_4__["HubFormsService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"])); };
RemoteAgentEditComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: RemoteAgentEditComponent, selectors: [["remote-agents"]], inputs: { hubKey: "hubKey" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([_hub_forms_service__WEBPACK_IMPORTED_MODULE_4__["HubFormsService"]])], decls: 11, vars: 4, consts: [["DexihMessage", ""], [1, "container"], ["title", "Edit Hub Remote Agent", "iconClass", "fa fa-lg fa-fw fa-database", 3, "padding", "showCloseButton", "close"], ["header", ""], ["class", "alert alert-primary", 4, "ngIf"], [3, "formGroup", 4, "ngIf"], [3, "routerLink"], [1, "pl-1", 3, "disabled", "click"], [1, "pl-1", 3, "formsService"], [1, "alert", "alert-primary"], [3, "formGroup"], ["label", "Agent name", "note", "This can be changed in the agents appsettings.json config file.", "iconClass", "fa fa-comment", 3, "disabled", "ngModel", "ngModelOptions", "ngModelChange"], ["label", "Is default agent for this Hub", "formControlName", "isDefault"], ["label", "Is Authorized for this Hub.", "formControlName", "isAuthorized"]], template: function RemoteAgentEditComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "dexih-message", null, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "d-widget", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function RemoteAgentEditComponent_Template_d_widget_close_3_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, RemoteAgentEditComponent_ng_template_4_Template, 3, 5, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, " \u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, RemoteAgentEditComponent_ng_template_7_Template, 1, 0, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, RemoteAgentEditComponent_div_9_Template, 2, 0, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](10, RemoteAgentEditComponent_form_10_Template, 8, 5, "form", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("padding", true)("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.isNew);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.formsService.currentForm);
    } }, directives: [_shared_ui_dexihMessage_dexih_message_component__WEBPACK_IMPORTED_MODULE_6__["DexihMessageComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DWidgetComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DButtonEditComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterLink"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DButtonSaveComponent"], _buttons_cancel_button_cancel_button_component__WEBPACK_IMPORTED_MODULE_9__["CancelButtonComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DFormInputComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgModel"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DFormCheckboxComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["FormControlName"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](RemoteAgentEditComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'remote-agents',
                templateUrl: './remoteAgent-edit.component.html',
                providers: [_hub_forms_service__WEBPACK_IMPORTED_MODULE_4__["HubFormsService"]]
            }]
    }], function () { return [{ type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_5__["AuthService"] }, { type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_4__["HubFormsService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] }]; }, { hubKey: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/remoteAgent/remoteAgent-index/remoteAgent-index.component.ts":
/*!***********************************************************************************!*\
  !*** ./src/app/+hub/remoteAgent/remoteAgent-index/remoteAgent-index.component.ts ***!
  \***********************************************************************************/
/*! exports provided: RemoteAgentIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RemoteAgentIndexComponent", function() { return RemoteAgentIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __asyncValues = (undefined && undefined.__asyncValues) || function (o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
};












const _c0 = function () { return { statusFilter: "All" }; };
const _c1 = function () { return { statusFilter: "Ready" }; };
const _c2 = function () { return { statusFilter: "Offline" }; };
const _c3 = function () { return { statusFilter: "Unauthorized" }; };
function RemoteAgentIndexComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-dropdown", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "a", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "a", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "Ready");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "a", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, "Offline");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "a", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](8, "Unauthorized");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, "\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0");
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("text", ctx_r1.statusFilter)("pullRight", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r1.statusFilter == "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](14, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r1.statusFilter == "Ready");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](15, _c1));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r1.statusFilter == "Offline");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](16, _c2));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r1.statusFilter == "Unauthorized");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](17, _c3));
} }
function RemoteAgentIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-delete", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RemoteAgentIndexComponent_ng_template_5_Template_d_button_delete_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10); const items_r8 = ctx.items; const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r9.deleteSelected(items_r8); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RemoteAgentIndexComponent_ng_template_5_Template_d_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10); const items_r8 = ctx.items; const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r11.authorize(items_r8); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "Authorize");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "d-button", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RemoteAgentIndexComponent_ng_template_5_Template_d_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10); const items_r8 = ctx.items; const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r12.deAuthorize(items_r8); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "De-Authorize");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
const _c4 = function (a1, a2) { return ["agent-edit", a1, a2]; };
function RemoteAgentIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-button-edit", 17);
} if (rf & 2) {
    const remoteItem_r13 = ctx.item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](1, _c4, remoteItem_r13.remoteAgentKey, remoteItem_r13.remoteAgentHubKey));
} }
const _c5 = function () { return ["/hubs/index/agents/download"]; };
function RemoteAgentIndexComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-button-download", 18);
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](1, _c5));
} }
class RemoteAgentIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.columns = [
            { name: 'name', title: 'Name', format: '' },
            { name: 'connected', title: 'Connected', format: 'Boolean' },
            { name: 'isAuthorized', title: 'Authorized?', format: 'Boolean' },
            { name: 'user', title: 'User', format: '' },
            { name: 'dataPrivacyStatus', title: 'Data Privacy', format: 'Enum', enum: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataPrivacyStatus"] },
            { name: 'isEncrypted', title: 'Encrypted?', format: 'Boolean' },
            { name: 'ipAddress', title: 'Current IP Address', format: '' },
            { name: 'remoteAgentId', title: 'Id', format: '' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
            { name: 'lastLoginDateTime', title: 'Last Login', format: 'Calendar' },
            { name: 'lastLoginIpAddress', title: 'Last IP Address', format: '' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        // watch for any changes.
        this.watchChanges();
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.route.queryParams, this.hubService.getHubCacheObservable(), this.authService.getRemoteAgentsObservable(), this.hubService.getRemoteAgentObservable() // this is included to ensure refresh when active agent changes.
            ).subscribe(result => {
                let queryParams = result[0];
                this.hubCache = result[1];
                this.remoteAgents = result[2];
                if (!this.hubCache.isLoaded()) {
                    return;
                }
                this.statusFilter = queryParams['statusFilter'];
                if (!this.statusFilter) {
                    this.statusFilter = 'All';
                }
                this.updateRemoteAgents();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Remote Agent index');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    updateRemoteAgents() {
        if (!(this.hubCache && this.hubCache.hub)) {
            return;
        }
        let data = this.hubCache.hub.dexihRemoteAgentHubs.map(a => {
            let remoteAgent = this.remoteAgents ? this.remoteAgents.find(c => c.remoteAgentKey === a.remoteAgentKey) : null;
            let activeAgent = remoteAgent && remoteAgent['activeAgents'] && remoteAgent['activeAgents'].length > 0
                ? remoteAgent['activeAgents'][0] : null;
            return {
                remoteAgentHubKey: a.remoteAgentHubKey,
                connected: activeAgent !== null,
                isAuthorized: a.isAuthorized,
                name: activeAgent ? activeAgent.name : (remoteAgent ? remoteAgent.name : 'Unknown'),
                user: activeAgent ? activeAgent.user : '',
                dataPrivacyStatus: activeAgent ? activeAgent.dataPrivacyStatus : '',
                isEncrypted: activeAgent ? activeAgent.isEncrypted : '',
                ipAddress: activeAgent ? activeAgent.ipAddress : '',
                remoteAgentKey: a.remoteAgentKey,
                updateDate: a.updateDate,
                lastLoginDateTime: remoteAgent ? remoteAgent.lastLoginDateTime : '',
                lastLoginIpAddress: remoteAgent ? remoteAgent.lastLoginIpAddress : '',
                remoteAgentId: remoteAgent ? remoteAgent.remoteAgentId : ''
            };
        });
        if (this.remoteAgents) {
            this.remoteAgents.forEach(a => {
                let activeAgent = a['activeAgents'] && a['activeAgents'].length > 0 ? a['activeAgents'][0] : null;
                if (activeAgent && data.findIndex(d => d.remoteAgentKey === a.remoteAgentKey) < 0) {
                    data.push({
                        remoteAgentHubKey: 0,
                        connected: true,
                        isAuthorized: false,
                        name: activeAgent.name,
                        user: activeAgent.user,
                        dataPrivacyStatus: activeAgent.dataPrivacyStatus,
                        isEncrypted: activeAgent.isEncrypted,
                        ipAddress: activeAgent.ipAddress,
                        remoteAgentKey: a.remoteAgentKey,
                        remoteAgentId: a.remoteAgentId,
                        updateDate: '',
                    });
                }
            });
        }
        this._tableData.next(data);
    }
    watchChanges() {
        // watch the current remote hubs
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].RemoteAgent) {
                this.updateRemoteAgents();
            }
        });
    }
    authorize(remoteAgents) {
        var remoteAgents_1, remoteAgents_1_1;
        var e_1, _a;
        return __awaiter(this, void 0, void 0, function* () {
            try {
                for (remoteAgents_1 = __asyncValues(remoteAgents); remoteAgents_1_1 = yield remoteAgents_1.next(), !remoteAgents_1_1.done;) {
                    const remoteAgent = remoteAgents_1_1.value;
                    if (!remoteAgent.isAuthorized) {
                        let agentHub;
                        if (remoteAgent.remoteAgentHubKey) {
                            agentHub = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === remoteAgent.remoteAgentHubKey);
                            agentHub.isAuthorized = true;
                        }
                        else {
                            agentHub = {
                                hubKey: this.hubCache.hub.hubKey,
                                remoteAgentHubKey: 0,
                                remoteAgentKey: remoteAgent.remoteAgentKey,
                                isAuthorized: true,
                                isValid: true,
                                createDate: null,
                                isDefault: false,
                                updateDate: null
                            };
                            agentHub['allowExternalConnect'] = true;
                            agentHub['isSelected'] = false;
                        }
                        yield this.hubService.saveRemoteAgent(agentHub);
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (remoteAgents_1_1 && !remoteAgents_1_1.done && (_a = remoteAgents_1.return)) yield _a.call(remoteAgents_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            ;
        });
    }
    deAuthorize(remoteAgents) {
        remoteAgents.forEach(remoteAgent => {
            if (remoteAgent.isAuthorized) {
                if (remoteAgent.remoteAgentHubKey) {
                    let agent = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === remoteAgent.remoteAgentHubKey);
                    if (agent) {
                        agent.isAuthorized = false;
                        this.hubService.saveRemoteAgent(agent);
                    }
                }
            }
        });
    }
    deleteSelected(remoteAgents) {
        remoteAgents.forEach(remoteAgent => {
            if (remoteAgent.remoteAgentHubKey) {
                let agent = this.hubCache.hub.dexihRemoteAgentHubs.find(c => c.remoteAgentHubKey === remoteAgent.remoteAgentHubKey);
                if (agent) {
                    agent.isAuthorized = false;
                    this.hubService.deleteRemoteAgent(agent);
                }
            }
        });
    }
    edit(remoteAgent) {
        this.router.navigate(['agent-edit', remoteAgent.remoteAgentKey, remoteAgent.remoteAgentHubKey], { relativeTo: this.route });
    }
}
RemoteAgentIndexComponent.ɵfac = function RemoteAgentIndexComponent_Factory(t) { return new (t || RemoteAgentIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"])); };
RemoteAgentIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: RemoteAgentIndexComponent, selectors: [["remoteagents"]], inputs: { hubKey: "hubKey" }, decls: 11, vars: 6, consts: [[1, "container-fluid"], ["title", "Hub Remote Agents", "iconClass", "fa fa-lg fa-fw fa-wifi", 3, "showCloseButton", "close"], ["header", ""], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "rowClick"], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["actions", ""], ["buttonClass", "btn btn-sm btn-outline-secondary", "iconClass", "fa fa-filter", "title", "Filter by a status", 3, "text", "pullRight"], ["routerLink", ".", "title", "All Items", 1, "dropdown-item", 3, "queryParams"], ["routerLink", ".", "title", "Ready", 1, "dropdown-item", 3, "queryParams"], ["routerLink", ".", "title", "Offline Items", 1, "dropdown-item", 3, "queryParams"], ["routerLink", ".", "title", "Unauthorized Items", 1, "dropdown-item", 3, "queryParams"], ["title", "Delete selected remote agents", 1, "mr-1", 3, "click"], ["iconClass", "fa fa-check", "buttonClass", "btn-primary", "title", "Authorize the selected agents for this hub", 1, "mr-1", 3, "click"], ["iconClass", "fa fa-times", "buttonClass", "btn-danger", "title", "De-Authorize the selected agents", 1, "mr-1", 3, "click"], [1, "mr-1", 3, "routerLink"], ["iconClass", "fa fa-download", "text", "Download Agent", 1, "mr-1", 3, "routerLink"]], template: function RemoteAgentIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function RemoteAgentIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, RemoteAgentIndexComponent_ng_template_2_Template, 10, 18, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "d-table", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function RemoteAgentIndexComponent_Template_d_table_rowClick_4_listener($event) { return ctx.edit($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, RemoteAgentIndexComponent_ng_template_5_Template, 5, 0, "ng-template", 4, 5, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, RemoteAgentIndexComponent_ng_template_7_Template, 1, 4, "ng-template", 6, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, RemoteAgentIndexComponent_ng_template_9_Template, 1, 2, "ng-template", null, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDropDownComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterLinkWithHref"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDeleteComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonEditComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterLink"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDownloadComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](RemoteAgentIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'remoteagents',
                templateUrl: './remoteAgent-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] }]; }, { hubKey: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/results/index.ts":
/*!***************************************!*\
  !*** ./src/app/+hub/results/index.ts ***!
  \***************************************/
/*! exports provided: ResultsIndexComponent, ResultsViewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _results_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./results-index */ "./src/app/+hub/results/results-index/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ResultsIndexComponent", function() { return _results_index__WEBPACK_IMPORTED_MODULE_0__["ResultsIndexComponent"]; });

/* harmony import */ var _results_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./results-view */ "./src/app/+hub/results/results-view/index.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ResultsViewComponent", function() { return _results_view__WEBPACK_IMPORTED_MODULE_1__["ResultsViewComponent"]; });





/***/ }),

/***/ "./src/app/+hub/results/results-index/index.ts":
/*!*****************************************************!*\
  !*** ./src/app/+hub/results/results-index/index.ts ***!
  \*****************************************************/
/*! exports provided: ResultsIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _results_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./results-index.component */ "./src/app/+hub/results/results-index/results-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ResultsIndexComponent", function() { return _results_index_component__WEBPACK_IMPORTED_MODULE_0__["ResultsIndexComponent"]; });




/***/ }),

/***/ "./src/app/+hub/results/results-index/results-index.component.ts":
/*!***********************************************************************!*\
  !*** ./src/app/+hub/results/results-index/results-index.component.ts ***!
  \***********************************************************************/
/*! exports provided: ResultsIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResultsIndexComponent", function() { return ResultsIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../widgets/datalink-status/datalink-status.component */ "./src/app/+hub/widgets/datalink-status/datalink-status.component.ts");














function ResultsIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-button-refresh", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ResultsIndexComponent_ng_template_3_Template_d_button_refresh_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10); const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r9.refresh(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "input", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ResultsIndexComponent_ng_template_3_Template_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10); const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r11.rows = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "form-select", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ResultsIndexComponent_ng_template_3_Template_form_select_ngModelChange_5_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10); const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r12.auditType = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r1.rows);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r1.auditType)("border", false)("items", ctx_r1.auditTypes)("enableTextEntry", false)("allowNullSelect", true);
} }
function ResultsIndexComponent_ng_template_5_div_0_Template(rf, ctx) { if (rf & 1) {
    const _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-tags-dropdown", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ResultsIndexComponent_ng_template_5_div_0_Template_form_tags_dropdown_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r16.datalinks = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r13.datalinks)("items", ctx_r13.hubCache.hub.dexihDatalinks)("enableAddAll", true);
} }
function ResultsIndexComponent_ng_template_5_div_1_Template(rf, ctx) { if (rf & 1) {
    const _r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-tags-dropdown", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ResultsIndexComponent_ng_template_5_div_1_Template_form_tags_dropdown_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r19); const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r18.datajobs = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r14.datajobs)("items", ctx_r14.hubCache.hub.dexihDatajobs)("enableAddAll", true);
} }
function ResultsIndexComponent_ng_template_5_div_2_Template(rf, ctx) { if (rf & 1) {
    const _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form-tags-dropdown", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ResultsIndexComponent_ng_template_5_div_2_Template_form_tags_dropdown_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r21); const ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r20.datalinkTests = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r15.datalinkTests)("items", ctx_r15.hubCache.hub.dexihDatalinkTests)("enableAddAll", true);
} }
function ResultsIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ResultsIndexComponent_ng_template_5_div_0_Template, 2, 3, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ResultsIndexComponent_ng_template_5_div_1_Template, 2, 3, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ResultsIndexComponent_ng_template_5_div_2_Template, 2, 3, "div", 15);
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.auditType === "Datalink");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.auditType === "Datajob");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.auditType === "DatalinkTest");
} }
const _c0 = function (a0, a3) { return [a0, "datalink-edit", "edit", a3]; };
const _c1 = function (a1, a2) { return ["result-view", a1, a2]; };
function ResultsIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "d-button-edit", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "d-button-view", 21);
} if (rf & 2) {
    const result_r22 = ctx.item;
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](2, _c0, ctx_r5.hubPath, result_r22.referenceKey));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](5, _c1, result_r22.auditConnectionKey, result_r22.auditKey));
} }
function ResultsIndexComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "datalink-status", 22);
} if (rf & 2) {
    const result_r23 = ctx.item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("writerResult", result_r23);
} }
class ResultsIndexComponent {
    constructor(hubService, router, route) {
        this.hubService = hubService;
        this.router = router;
        this.route = route;
        this.rows = 20;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_4__["CancelToken"]();
        this.showPage = false;
        this.showPageMessage = 'Loading...';
        this.columns = [
            { name: 'auditKey', title: '#', format: '' },
            { name: 'auditType', title: 'Type', format: '' },
            { name: 'referenceName', title: 'Name', format: '' },
            { name: 'rowsTotal', title: 'Rows Total', format: '' },
            { name: 'startTime', title: 'Start Date', format: 'Calendar' },
            { name: 'startTime', title: 'Time', format: 'Time' },
            { name: 'endTime', title: 'Finished At', format: 'Time' },
            { name: 'message', title: 'Message', format: '' },
        ];
        this.auditTypes = ['Datalink', 'Datajob', 'DatalinkTest'];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
        this.datalinks = [];
        this.datajobs = [];
        this.datalinkTests = [];
        this.auditType = null;
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.route.data, this.route.params, this.route.queryParams, this.hubService.getHubCacheObservable(), this.hubService.getRemoteAgentObservable()).subscribe(result => {
                let data = result[0];
                let params = result[1];
                let queryParams = result[2];
                this.hubCache = result[3];
                let remoteAgent = result[4];
                this.showPage = false;
                this.showPageMessage = 'Waiting for an active remote agent...';
                if (this.hubCache.isLoaded() && remoteAgent) {
                    this.hubPath = this.hubCache.getHubUrl();
                    let datalinkKeysString = queryParams['datalinkKeys'];
                    let datajobKeysString = queryParams['datajobKeys'];
                    let datalinkTestsKeysString = queryParams['datalinkTestKeys'];
                    if (datalinkKeysString) {
                        this.datalinks = (datalinkKeysString + '').split(',').map(c => +c);
                        this.auditType = 'Datalink';
                    }
                    if (datajobKeysString) {
                        this.datajobs = (datajobKeysString + '').split(',').map(c => +c);
                        this.auditType = 'Datajob';
                    }
                    if (datalinkTestsKeysString) {
                        this.datalinkTests = (datalinkTestsKeysString + '').split(',').map(c => +c);
                        this.auditType = 'DatalinkTest';
                    }
                    this.refresh();
                    this.showPage = true;
                    this.showPageMessage = '';
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Results Index');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._transformWriterResultChangeSubscription) {
            this._transformWriterResultChangeSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    showResult(result) {
        this.router.navigate(['result-view', result.auditConnectionKey, result.auditKey], { relativeTo: this.route });
    }
    refresh() {
        let data = [];
        let keys;
        let connectionKeys = [];
        switch (this.auditType) {
            case 'Datalink':
                keys = this.datalinks;
                connectionKeys = this.datalinks.map(c => this.hubCache.hub.dexihDatalinks.find(d => d.key === c).auditConnectionKey);
                break;
            case 'Datajob':
                keys = this.datajobs;
                connectionKeys = this.datajobs.map(c => this.hubCache.hub.dexihDatajobs.find(d => d.key === c).auditConnectionKey);
                break;
            case 'DatalinkTest':
                keys = this.datalinkTests;
                connectionKeys = this.datalinkTests.map(c => this.hubCache.hub.dexihDatalinkTests
                    .find(d => d.key === c).auditConnectionKey);
                break;
            default:
                keys = null;
                break;
        }
        let uniqueKeys = connectionKeys.filter(function (item, i, ar) { return ar.indexOf(item) === i; });
        if (uniqueKeys.length === 0) {
            uniqueKeys = this.hubCache.hub.dexihConnections.filter(c => c.purpose === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eConnectionPurpose"].Managed).map(c => c.key);
        }
        this.hubService.getAuditResults(this.auditType, uniqueKeys, keys, true, this.rows, this.cancelToken)
            .then(results => {
            this._tableData.next(results);
            this.watchChanges();
            return;
        });
    }
    watchChanges() {
        // watch the current connection in case it is changed in another session.
        if (this._transformWriterResultChangeSubscription) {
            this._transformWriterResultChangeSubscription.unsubscribe();
        }
        this._transformWriterResultChangeSubscription =
            this.hubService.getTransformWriterResultChangeObservable().subscribe(writerResult => {
                let results = this._tableData.value;
                if (this.datalinks && this.datalinks.findIndex(c => c === writerResult.referenceKey) >= 0) {
                    let existingResult = results.find(c => c.auditKey === writerResult.auditKey);
                    if (existingResult) {
                        Object.assign(existingResult, writerResult);
                        this._tableData.next(results);
                    }
                    else {
                        this._tableData.next([writerResult].concat(results));
                    }
                }
                if (this.datajobs && this.datajobs.findIndex(c => c === writerResult.referenceKey) >= 0) {
                    let existingResult = results.find(c => c.auditKey === writerResult.auditKey);
                    if (existingResult) {
                        Object.assign(existingResult, writerResult);
                        this._tableData.next(results);
                    }
                    else {
                        this._tableData.next([writerResult].concat(results));
                    }
                }
                if (this.datalinkTests && this.datalinkTests.findIndex(c => c === writerResult.referenceKey) >= 0) {
                    let existingResult = results.find(c => c.auditKey === writerResult.auditKey);
                    if (existingResult) {
                        Object.assign(existingResult, writerResult);
                        this._tableData.next(results);
                    }
                    else {
                        this._tableData.next([writerResult].concat(results));
                    }
                }
            });
    }
}
ResultsIndexComponent.ɵfac = function ResultsIndexComponent_Factory(t) { return new (t || ResultsIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"])); };
ResultsIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ResultsIndexComponent, selectors: [["results-index"]], decls: 11, vars: 6, consts: [[1, "container-fluid"], ["title", "Execution Results", "iconClass", "fa fa-lg fa-fw fa-exchange"], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "enableSaveCsv", "rowClick"], ["actions", ""], ["tableHeader", ""], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["select", "rowStatus"], ["rowStatus", ""], [1, "d-flex", "flex-wrap"], [1, "input-group"], ["text", "Reload", 1, "input-group-prepend", 3, "click"], ["type", "number", "placeholder", "Maximum rows...", "title", "Specify the maximum rows to return", 1, "form-control", 2, "width", "100%", "max-width", "100px", 3, "ngModel", "ngModelChange"], [1, "flex-fill", "ml-1"], ["labelLeft", "Type", "selectNullMessage", "All types", 1, "form-control", "p-0", 3, "ngModel", "border", "items", "enableTextEntry", "allowNullSelect", "ngModelChange"], ["class", "d-flex flex-wrap pt-1", 4, "ngIf"], [1, "d-flex", "flex-wrap", "pt-1"], ["labelLeft", "Datalinks", "itemKey", "key", "itemName", "name", 3, "ngModel", "items", "enableAddAll", "ngModelChange"], ["labelLeft", "Datajobs", "itemKey", "key", "itemName", "name", 3, "ngModel", "items", "enableAddAll", "ngModelChange"], ["labelLeft", "DatalinkTests", "itemKey", "key", "itemName", "name", 3, "ngModel", "items", "enableAddAll", "ngModelChange"], ["text", "Edit Datalink", 1, "mr-1", 3, "routerLink"], ["queryParamsHandling", "merge", 3, "routerLink"], [3, "writerResult"]], template: function ResultsIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function ResultsIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.showResult($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ResultsIndexComponent_ng_template_3_Template, 6, 6, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ResultsIndexComponent_ng_template_5_Template, 3, 3, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ResultsIndexComponent_ng_template_7_Template, 2, 8, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, ResultsIndexComponent_ng_template_9_Template, 1, 1, "ng-template", 7, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData)("enableSaveCsv", true);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonRefreshComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NumberValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgModel"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DFormSelectComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DFormTagsDropdownComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonEditComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterLink"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonViewComponent"], _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_10__["DatalinkStatusComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ResultsIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'results-index',
                templateUrl: './results-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/results/results-view/index.ts":
/*!****************************************************!*\
  !*** ./src/app/+hub/results/results-view/index.ts ***!
  \****************************************************/
/*! exports provided: ResultsViewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _results_view_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./results-view.component */ "./src/app/+hub/results/results-view/results-view.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ResultsViewComponent", function() { return _results_view_component__WEBPACK_IMPORTED_MODULE_0__["ResultsViewComponent"]; });




/***/ }),

/***/ "./src/app/+hub/results/results-view/preview-results.component.ts":
/*!************************************************************************!*\
  !*** ./src/app/+hub/results/results-view/preview-results.component.ts ***!
  \************************************************************************/
/*! exports provided: PreviewResultsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PreviewResultsComponent", function() { return PreviewResultsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _shared_ui_queryBuilder_query_builder_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/ui/queryBuilder/query-builder.component */ "./src/app/shared/ui/queryBuilder/query-builder.component.ts");










function PreviewResultsComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-refresh", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function PreviewResultsComponent_ng_template_1_Template_d_button_refresh_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6); const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r5.refresh(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-download", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function PreviewResultsComponent_ng_template_1_Template_d_button_download_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6); const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r7.download(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function PreviewResultsComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "query-builder", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("onRefreshData", function PreviewResultsComponent_ng_template_3_Template_query_builder_onRefreshData_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9); const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r8.refresh(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("selectQuery", ctx_r3.selectQuery)("columns", ctx_r3.targetTable.dexihTableColumns)("refreshEvent", ctx_r3.refreshDataObservable);
} }
class PreviewResultsComponent {
    constructor(hubService) {
        this.hubService = hubService;
        this.selectQuery = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["SelectQuery"]();
        this.refreshDataSubject = new rxjs__WEBPACK_IMPORTED_MODULE_2__["Subject"]();
        this.refreshDataObservable = this.refreshDataSubject.asObservable();
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_3__["CancelToken"]();
    }
    ngOnInit() {
        this._hubCacheSubscription = this.hubService.getHubCacheObservable().subscribe(cache => {
            this.cache = cache;
            switch (this.auditResult.auditType) {
                case 'Table':
                    this.targetTable = this.cache.getTable(this.auditResult.referenceKey);
                    this.refresh();
                    break;
                case 'Datalink':
                case 'DatalinkStep':
                    let datalink = this.cache.hub.dexihDatalinks.find(c => c.key === this.auditResult.referenceKey);
                    if (!datalink) {
                        this.hubService.addHubErrorMessage(`The datalink with the key ${this.auditResult.referenceKey} cannot be found.`);
                        return;
                    }
                    if (datalink.dexihDatalinkTargets.length >= 1) {
                        this.targetTable = this.cache.getTable(datalink.dexihDatalinkTargets[0].tableKey);
                    }
                    else {
                        this.hubService.addHubErrorMessage(`There is no target table for this datalink.`);
                        return;
                    }
                    this.refresh();
                    break;
                case 'DatalinkTestStep':
                    let testStep = this.cache.getDatalinkTestStep(this.auditResult.referenceKey);
                    if (!testStep) {
                        this.hubService.addHubErrorMessage(`The test step with the key ${this.auditResult.referenceKey} cannot be found.`);
                        return;
                    }
                    let testDatalink = this.cache.hub.dexihDatalinks.find(c => c.key === testStep.datalinkKey);
                    if (testDatalink.dexihDatalinkTargets.length >= 1) {
                        let table = this.cache.getTable(testDatalink.dexihDatalinkTargets[0].tableKey);
                        let testTable = JSON.parse(JSON.stringify(table));
                        testTable.name = testStep.errorTableName;
                        testTable.schema = testStep.errorSchema;
                        testTable.connectionKey = testStep.errorConnectionKey;
                        for (let column of testTable.dexihTableColumns) {
                            column.deltaType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eDeltaType"].NonTrackingField;
                        }
                        let auditCol = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["DexihTableColumn"]();
                        auditCol.name = 'error_audit_key';
                        auditCol.dataType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eTypeCode"].Int64;
                        auditCol.deltaType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eDeltaType"].CreateAuditKey;
                        let opCol = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["DexihTableColumn"]();
                        opCol.name = 'error_operation';
                        opCol.dataType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eTypeCode"].CharArray;
                        opCol.maxLength = 1;
                        opCol.deltaType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eDeltaType"].DatabaseOperation;
                        let reasonCol = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["DexihTableColumn"]();
                        reasonCol.name = 'mismatch_reason';
                        reasonCol.dataType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eTypeCode"].String;
                        reasonCol.deltaType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eDeltaType"].UpdateReason;
                        testTable.dexihTableColumns.push(auditCol);
                        testTable.dexihTableColumns.push(opCol);
                        testTable.dexihTableColumns.push(reasonCol);
                        this.targetTable = testTable;
                    }
                    else {
                        this.hubService.addHubErrorMessage(`There is no target table for this datalink.`);
                        return;
                    }
                    this.refresh();
                    break;
                case 'datajob':
                    break;
            }
        });
    }
    ngOnDestroy() {
        if (this._hubCacheSubscription) {
            this._hubCacheSubscription.unsubscribe();
        }
        if (this.runningQuery) {
            this.runningQuery.cancel();
        }
        this.cancelToken.cancel();
    }
    createSelectQuery() {
        const createAuditColumn = this.targetTable.dexihTableColumns.find(c => c.deltaType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eDeltaType"].CreateAuditKey);
        const updateAuditColumn = this.targetTable.dexihTableColumns.find(c => c.deltaType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eDeltaType"].UpdateAuditKey);
        if (!createAuditColumn && !updateAuditColumn) {
            this.hubService.addHubErrorMessage(
            // tslint:disable-next-line:max-line-length
            `The table ${this.targetTable.name} does not contain a create or update audit column which is required to connect to an audit.`);
            return;
        }
        // clone the query, and add the audit filter columns
        let selectQuery = JSON.parse(JSON.stringify(this.selectQuery));
        if (createAuditColumn) {
            let filter = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["Filter"]();
            filter.column1 = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["TableColumn"]();
            Object.assign(filter.column1, createAuditColumn);
            filter.operator = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eCompare"].IsEqual;
            filter.value2 = this.auditResult.auditKey;
            filter.andOr = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eAndOr"].Or;
            filter.compareDataType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eTypeCode"].Int64;
            selectQuery.filters.push(filter);
        }
        if (updateAuditColumn) {
            let filter = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["Filter"]();
            filter.column1 = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["TableColumn"]();
            Object.assign(filter.column1, updateAuditColumn);
            filter.operator = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eCompare"].IsEqual;
            filter.value2 = this.auditResult.auditKey;
            filter.andOr = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eAndOr"].Or;
            filter.compareDataType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eTypeCode"].Int64;
            selectQuery.filters.push(filter);
        }
        selectQuery.rows = 100;
        return selectQuery;
    }
    refresh() {
        let selectQuery = this.createSelectQuery();
        let query = this.hubService.previewTableDataQuery(this.targetTable, false, selectQuery, null, null, this.cancelToken);
        query.then(result => {
            this.refreshDataSubject.next();
            this.columns = result.columns;
            this.data = result.data;
        }).catch(() => {
            // this.hubService.addHubErrorMessage(reason);
        });
        this.runningQuery = query;
    }
    download() {
        let selectQuery = this.createSelectQuery();
        let downloadObject = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["DownloadObject"]();
        downloadObject.objectKey = this.targetTable.key;
        downloadObject.objectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eDataObjectType"].Table;
        downloadObject.query = selectQuery;
        this.hubService.downloadData([downloadObject], false, _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__["eDownloadFormat"].Csv, this.cancelToken);
    }
}
PreviewResultsComponent.ɵfac = function PreviewResultsComponent_Factory(t) { return new (t || PreviewResultsComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"])); };
PreviewResultsComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: PreviewResultsComponent, selectors: [["preview-results"]], inputs: { auditResult: "auditResult" }, decls: 5, vars: 3, consts: [[3, "enableMultiSelect", "columns", "data"], ["actions", ""], ["tableHeader", ""], ["text", "Reload", 3, "click"], [1, "ml-1", 3, "click"], [3, "selectQuery", "columns", "refreshEvent", "onRefreshData"]], template: function PreviewResultsComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-table", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, PreviewResultsComponent_ng_template_1_Template, 2, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, PreviewResultsComponent_ng_template_3_Template, 1, 3, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", false)("columns", ctx.columns)("data", ctx.data);
    } }, directives: [ngx_d_table__WEBPACK_IMPORTED_MODULE_5__["DTableComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonRefreshComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDownloadComponent"], _shared_ui_queryBuilder_query_builder_component__WEBPACK_IMPORTED_MODULE_7__["QueryBuilderComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](PreviewResultsComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'preview-results',
                templateUrl: './preview-results.component.html'
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }]; }, { auditResult: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/results/results-view/profile-results.component.ts":
/*!************************************************************************!*\
  !*** ./src/app/+hub/results/results-view/profile-results.component.ts ***!
  \************************************************************************/
/*! exports provided: ProfileResultsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProfileResultsComponent", function() { return ProfileResultsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");











function ProfileResultsComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-refresh", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ProfileResultsComponent_ng_template_1_Template_d_button_refresh_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r4); const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r3.refresh(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-download", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ProfileResultsComponent_ng_template_1_Template_d_button_download_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r4); const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r5.download(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "form-checkbox", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ProfileResultsComponent_ng_template_1_Template_form_checkbox_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r4); const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r6.showDetailed = $event; })("change", function ProfileResultsComponent_ng_template_1_Template_form_checkbox_change_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r4); const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r7.refresh(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r1.showDetailed)("border", true);
} }
class ProfileResultsComponent {
    constructor(authService, hubService) {
        this.authService = authService;
        this.hubService = hubService;
        this.showDetailed = false;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_3__["CancelToken"]();
    }
    ngOnInit() {
        this.refresh();
    }
    ngOnDestroy() {
        this.cancelToken.cancel();
    }
    refresh() {
        this.hubService.previewProfileData(this.auditResult, !this.showDetailed, this.cancelToken).then(result => {
            this.columns = result.columns;
            this.data = result.data;
        }).catch(reason => {
            // this.hubService.addHubMessage(reason);
        });
    }
    download() {
        this.hubService.downloadProfileData(this.auditResult, this.cancelToken);
    }
}
ProfileResultsComponent.ɵfac = function ProfileResultsComponent_Factory(t) { return new (t || ProfileResultsComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_1__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_2__["HubService"])); };
ProfileResultsComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ProfileResultsComponent, selectors: [["profile-results"]], inputs: { auditResult: "auditResult" }, decls: 3, vars: 3, consts: [[3, "enableMultiSelect", "columns", "data"], ["actions", ""], ["text", "Reload", 3, "click"], [1, "ml-1", 3, "click"], [1, "d-flex", "flex-wrap"], [1, "flex-fill", "pl-1"], ["label", "Show Detailed Results", 3, "ngModel", "border", "ngModelChange", "change"]], template: function ProfileResultsComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-table", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ProfileResultsComponent_ng_template_1_Template, 5, 2, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", false)("columns", ctx.columns)("data", ctx.data);
    } }, directives: [ngx_d_table__WEBPACK_IMPORTED_MODULE_5__["DTableComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonRefreshComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDownloadComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DFormCheckboxComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgModel"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProfileResultsComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'profile-results',
                templateUrl: './profile-results.component.html'
            }]
    }], function () { return [{ type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_1__["AuthService"] }, { type: _hub_service__WEBPACK_IMPORTED_MODULE_2__["HubService"] }]; }, { auditResult: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/results/results-view/progress.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/+hub/results/results-view/progress.component.ts ***!
  \*****************************************************************/
/*! exports provided: ProgressComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProgressComponent", function() { return ProgressComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");



const _c0 = function (a1) { return ["progress-bar", a1]; };
const _c1 = function (a0) { return { width: a0 }; };
class ProgressComponent {
    constructor() {
        this.percent = '0%';
    }
    ngOnInit() {
        if (this.value === 0) {
            this.percent = '0%';
        }
        else if (this.total === 0) {
            this.percent = '100%';
        }
        else {
            let percent = 100 * this.value / this.total;
            if (percent < 0) {
                percent = 0;
            }
            if (percent > 100) {
                percent = 100;
            }
            this.percent = percent.toString() + '%';
        }
    }
}
ProgressComponent.ɵfac = function ProgressComponent_Factory(t) { return new (t || ProgressComponent)(); };
ProgressComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ProgressComponent, selectors: [["result-progress"]], inputs: { value: "value", total: "total", caption: "caption", color: "color" }, decls: 8, vars: 9, consts: [[1, ""], [1, "text"], [1, "float-right"], [1, "progress", 2, "width", "100%"], [3, "ngClass", "ngStyle"]], template: function ProgressComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "span", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "span", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](7, "\u00A0");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", ctx.caption, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate2"]("", ctx.value, "/", ctx.total, "");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](5, _c0, ctx.color))("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](7, _c1, ctx.percent));
    } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_1__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_1__["NgStyle"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProgressComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'result-progress',
                templateUrl: './progress.component.html'
            }]
    }], function () { return []; }, { value: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], total: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], caption: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], color: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/results/results-view/results-view.component.ts":
/*!*********************************************************************!*\
  !*** ./src/app/+hub/results/results-view/results-view.component.ts ***!
  \*********************************************************************/
/*! exports provided: ResultsViewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResultsViewComponent", function() { return ResultsViewComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _stats_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./stats.component */ "./src/app/+hub/results/results-view/stats.component.ts");
/* harmony import */ var _profile_results_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./profile-results.component */ "./src/app/+hub/results/results-view/profile-results.component.ts");
/* harmony import */ var _preview_results_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./preview-results.component */ "./src/app/+hub/results/results-view/preview-results.component.ts");















const _c0 = function () { return { view: "Profile" }; };
function ResultsViewComponent_d_widget_1_ng_template_1_li_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "a", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "i", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "span", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "Profile Data");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r6.view == "Profile");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](3, _c0));
} }
const _c1 = function () { return { view: "Preview" }; };
function ResultsViewComponent_d_widget_1_ng_template_1_li_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "a", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "i", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "span", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "Preview");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.view == "Preview");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](3, _c1));
} }
const _c2 = function () { return { view: "Stats" }; };
function ResultsViewComponent_d_widget_1_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "ul", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "li", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "a", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "i", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "span", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, "Execution Stats");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, ResultsViewComponent_d_widget_1_ng_template_1_li_6_Template, 5, 4, "li", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ResultsViewComponent_d_widget_1_ng_template_1_li_7_Template, 5, 4, "li", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r2.view == "Stats");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](5, _c2));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.auditResult.profileTableName && ((ctx_r2.auditResult == null ? null : ctx_r2.auditResult.auditType) == "DatalinkStep" || (ctx_r2.auditResult == null ? null : ctx_r2.auditResult.auditType) == "Datalink"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (ctx_r2.auditResult == null ? null : ctx_r2.auditResult.auditType) == "DatalinkStep" || (ctx_r2.auditResult == null ? null : ctx_r2.auditResult.auditType) == "Datalink" || (ctx_r2.auditResult == null ? null : ctx_r2.auditResult.auditType) == "Table" || (ctx_r2.auditResult == null ? null : ctx_r2.auditResult.auditType) == "DatalinkTestStep");
} }
function ResultsViewComponent_d_widget_1_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "stats", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("auditResult", ctx_r3.auditResult);
} }
function ResultsViewComponent_d_widget_1_div_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "profile-results", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("auditResult", ctx_r4.auditResult);
} }
function ResultsViewComponent_d_widget_1_div_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "preview-results", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("auditResult", ctx_r5.auditResult);
} }
function ResultsViewComponent_d_widget_1_Template(rf, ctx) { if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-widget", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function ResultsViewComponent_d_widget_1_Template_d_widget_close_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9); const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r8.close(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ResultsViewComponent_d_widget_1_ng_template_1_Template, 8, 6, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ResultsViewComponent_d_widget_1_div_4_Template, 2, 1, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ResultsViewComponent_d_widget_1_div_5_Template, 2, 1, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, ResultsViewComponent_d_widget_1_div_6_Template, 2, 1, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("title", ctx_r0.auditResult == null ? null : ctx_r0.auditResult.referenceName)("showCloseButton", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitch", ctx_r0.view);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", "Stats");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", "Profile");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", "Preview");
} }
class ResultsViewComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.showPage = false;
        this.showPageMessage = 'Loading...';
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_5__["CancelToken"]();
    }
    ngOnInit() {
        this.watchChanges();
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.route.data, this.route.params, this.route.queryParams, this.hubService.getHubCacheObservable(true), this.hubService.getRemoteAgentObservable(true)).subscribe(result => {
                let data = result[0];
                let params = result[1];
                let queryParams = result[2];
                this.hubCache = result[3];
                let remoteAgent = result[4];
                let auditConnectionKey = +params['auditConnectionKey'];
                let auditKey = +params['auditKey'];
                this.showPage = false;
                this.showPageMessage = 'Waiting for an active remote agent...';
                this.view = queryParams['view'];
                if (!this.view) {
                    this.view = 'Stats';
                }
                if (remoteAgent) {
                    this.showPage = true;
                    this.showPageMessage = '';
                    this.hubService.getResultDetail(auditConnectionKey, auditKey, this.cancelToken).then(r => {
                        this.auditResult = r[0];
                    });
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Results View');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._transformWriterResultChangeSubscription) {
            this._transformWriterResultChangeSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    close() {
        this.authService.navigateUp();
    }
    watchChanges() {
        // watch the current connection in case it is changed in another session.
        if (this._transformWriterResultChangeSubscription) {
            this._transformWriterResultChangeSubscription.unsubscribe();
        }
        this._transformWriterResultChangeSubscription = this.hubService.getTransformWriterResultChangeObservable()
            .subscribe(writerResult => {
            if (this.auditResult && writerResult.auditConnectionKey === this.auditResult.auditConnectionKey &&
                writerResult.auditKey === this.auditResult.auditKey) {
                this.auditResult = writerResult;
            }
        });
    }
}
ResultsViewComponent.ɵfac = function ResultsViewComponent_Factory(t) { return new (t || ResultsViewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_2__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_1__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"])); };
ResultsViewComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ResultsViewComponent, selectors: [["results-view"]], decls: 2, vars: 1, consts: [[1, "container-fluid"], ["iconClass", "fa fa-lg fa-fw fa-trophy", 3, "title", "showCloseButton", "close", 4, "ngIf"], ["iconClass", "fa fa-lg fa-fw fa-trophy", 3, "title", "showCloseButton", "close"], ["header", ""], [3, "ngSwitch"], [4, "ngSwitchCase"], [1, "nav", "nav-tabs", "card-header-tabs"], [1, "nav-item"], ["routerLink", ".", 1, "nav-link", 3, "queryParams"], [1, "fa", "fa-clock-o"], [1, "ml-1", "d-none", "d-md-inline"], ["class", "nav-item", 4, "ngIf"], [1, "fa", "fa-tachometer"], [1, "fa", "fa-table"], [3, "auditResult"]], template: function ResultsViewComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ResultsViewComponent_d_widget_1_Template, 7, 6, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult);
    } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_6__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DWidgetComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgSwitchCase"], _angular_router__WEBPACK_IMPORTED_MODULE_3__["RouterLinkWithHref"], _stats_component__WEBPACK_IMPORTED_MODULE_8__["StatsComponent"], _profile_results_component__WEBPACK_IMPORTED_MODULE_9__["ProfileResultsComponent"], _preview_results_component__WEBPACK_IMPORTED_MODULE_10__["PreviewResultsComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ResultsViewComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'results-view',
                templateUrl: './results-view.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_2__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_1__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/results/results-view/results-view.module.ts":
/*!******************************************************************!*\
  !*** ./src/app/+hub/results/results-view/results-view.module.ts ***!
  \******************************************************************/
/*! exports provided: ResultsViewModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResultsViewModule", function() { return ResultsViewModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _shared_shared_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../shared/shared.module */ "./src/app/shared/shared.module.ts");
/* harmony import */ var _results_view_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./results-view.component */ "./src/app/+hub/results/results-view/results-view.component.ts");
/* harmony import */ var _stats_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./stats.component */ "./src/app/+hub/results/results-view/stats.component.ts");
/* harmony import */ var _progress_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./progress.component */ "./src/app/+hub/results/results-view/progress.component.ts");
/* harmony import */ var _profile_results_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./profile-results.component */ "./src/app/+hub/results/results-view/profile-results.component.ts");
/* harmony import */ var _preview_results_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./preview-results.component */ "./src/app/+hub/results/results-view/preview-results.component.ts");
/* harmony import */ var _hub_shared_module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../hub.shared.module */ "./src/app/+hub/hub.shared.module.ts");









class ResultsViewModule {
}
ResultsViewModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: ResultsViewModule });
ResultsViewModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function ResultsViewModule_Factory(t) { return new (t || ResultsViewModule)(); }, providers: [], imports: [[_shared_shared_module__WEBPACK_IMPORTED_MODULE_1__["SharedModule"], _hub_shared_module__WEBPACK_IMPORTED_MODULE_7__["HubSharedModule"]]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](ResultsViewModule, { declarations: [_results_view_component__WEBPACK_IMPORTED_MODULE_2__["ResultsViewComponent"],
        _progress_component__WEBPACK_IMPORTED_MODULE_4__["ProgressComponent"],
        _stats_component__WEBPACK_IMPORTED_MODULE_3__["StatsComponent"],
        _profile_results_component__WEBPACK_IMPORTED_MODULE_5__["ProfileResultsComponent"],
        _preview_results_component__WEBPACK_IMPORTED_MODULE_6__["PreviewResultsComponent"]], imports: [_shared_shared_module__WEBPACK_IMPORTED_MODULE_1__["SharedModule"], _hub_shared_module__WEBPACK_IMPORTED_MODULE_7__["HubSharedModule"]], exports: [_results_view_component__WEBPACK_IMPORTED_MODULE_2__["ResultsViewComponent"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ResultsViewModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                imports: [_shared_shared_module__WEBPACK_IMPORTED_MODULE_1__["SharedModule"], _hub_shared_module__WEBPACK_IMPORTED_MODULE_7__["HubSharedModule"]],
                exports: [
                    _results_view_component__WEBPACK_IMPORTED_MODULE_2__["ResultsViewComponent"]
                ],
                declarations: [
                    _results_view_component__WEBPACK_IMPORTED_MODULE_2__["ResultsViewComponent"],
                    _progress_component__WEBPACK_IMPORTED_MODULE_4__["ProgressComponent"],
                    _stats_component__WEBPACK_IMPORTED_MODULE_3__["StatsComponent"],
                    _profile_results_component__WEBPACK_IMPORTED_MODULE_5__["ProfileResultsComponent"],
                    _preview_results_component__WEBPACK_IMPORTED_MODULE_6__["PreviewResultsComponent"]
                ],
                providers: [],
            }]
    }], null, null); })();


/***/ }),

/***/ "./src/app/+hub/results/results-view/stats.component.ts":
/*!**************************************************************!*\
  !*** ./src/app/+hub/results/results-view/stats.component.ts ***!
  \**************************************************************/
/*! exports provided: StatsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StatsComponent", function() { return StatsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _swimlane_ngx_charts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swimlane/ngx-charts */ "./node_modules/@swimlane/ngx-charts/__ivy_ngcc__/fesm2015/swimlane-ngx-charts.js");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../widgets/datalink-status/datalink-status.component */ "./src/app/+hub/widgets/datalink-status/datalink-status.component.ts");
/* harmony import */ var _progress_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./progress.component */ "./src/app/+hub/results/results-view/progress.component.ts");
/* harmony import */ var _shared_utils_calendar_pipe__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/utils/calendar.pipe */ "./src/app/shared/utils/calendar.pipe.ts");











function StatsComponent_li_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "h5");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "Error encountered!");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function StatsComponent_li_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "h5");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "Finished Successfully");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function StatsComponent_li_3_d_button_4_Template(rf, ctx) { if (rf & 1) {
    const _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function StatsComponent_li_3_d_button_4_Template_d_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r21); const ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r20.exceptionHidden = !ctx_r20.exceptionHidden; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Details");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function StatsComponent_li_3_pre_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "pre");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r19.auditResult.exceptionDetails);
} }
function StatsComponent_li_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, StatsComponent_li_3_d_button_4_Template, 2, 0, "d-button", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, StatsComponent_li_3_pre_6_Template, 2, 1, "pre", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", ctx_r2.auditResult.message, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.auditResult.exceptionDetails);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r2.exceptionHidden && ctx_r2.auditResult.exceptionDetails);
} }
function StatsComponent_ng_template_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Target Table");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "div", 10);
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r3.auditResult.targetTableName);
} }
function StatsComponent_ng_template_22_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Scheduled Time");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "calendar");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "div", 10);
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 1, ctx_r4.auditResult.scheduledTime));
} }
function StatsComponent_li_51_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "h5");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "Child Results");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function StatsComponent_li_52_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "span", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "datalink-status", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const result_r23 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", result_r23.auditType === "Table" ? result_r23.targetTableName : result_r23.referenceName, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("writerResult", result_r23);
} }
function StatsComponent_li_52_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, StatsComponent_li_52_div_1_Template, 5, 2, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r6.auditResult.childResults);
} }
function StatsComponent_result_progress_57_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "result-progress", 38);
} if (rf & 2) {
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r7.auditResult.rowsReadPrimary)("total", ctx_r7.auditResult.rowsReadPrimary + ctx_r7.auditResult.rowsReadReference);
} }
function StatsComponent_result_progress_58_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "result-progress", 39);
} if (rf & 2) {
    const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r8.auditResult.rowsReadReference)("total", ctx_r8.auditResult.rowsReadPrimary + ctx_r8.auditResult.rowsReadReference);
} }
function StatsComponent_result_progress_59_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "result-progress", 40);
} if (rf & 2) {
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r9.auditResult.rowsCreated)("total", ctx_r9.auditResult.rowsTotal);
} }
function StatsComponent_result_progress_60_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "result-progress", 41);
} if (rf & 2) {
    const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r10.auditResult.rowsUpdated)("total", ctx_r10.auditResult.rowsTotal);
} }
function StatsComponent_result_progress_61_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "result-progress", 42);
} if (rf & 2) {
    const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r11.auditResult.rowsDeleted)("total", ctx_r11.auditResult.rowsTotal);
} }
function StatsComponent_result_progress_62_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "result-progress", 43);
} if (rf & 2) {
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r12.auditResult.rowsRejected)("total", ctx_r12.auditResult.rowsTotal);
} }
function StatsComponent_result_progress_63_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "result-progress", 44);
} if (rf & 2) {
    const ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r13.auditResult.rowsPreserved)("total", ctx_r13.auditResult.rowsTotal);
} }
function StatsComponent_result_progress_64_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "result-progress", 45);
} if (rf & 2) {
    const ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r14.auditResult.rowsIgnored)("total", ctx_r14.auditResult.rowsTotal);
} }
function StatsComponent_result_progress_65_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "result-progress", 46);
} if (rf & 2) {
    const ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r15.auditResult.passed)("total", ctx_r15.auditResult.rowsTotal);
} }
function StatsComponent_result_progress_66_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "result-progress", 47);
} if (rf & 2) {
    const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r16.auditResult.failed)("total", ctx_r16.auditResult.rowsTotal);
} }
function StatsComponent_ng_template_72_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "number");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "div", 10);
} if (rf & 2) {
    const item_r24 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](item_r24.transformName);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"]("", item_r24.seconds == 0 ? "N/A" : _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](4, 2, item_r24.rows / item_r24.seconds, "1.2-2"), " rows/second");
} }
class StatsComponent {
    constructor(route, router) {
        this.route = route;
        this.router = router;
        this.exceptionHidden = true;
        this.fail = false;
        this.success = false;
        this.eRunStatus = _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eRunStatus"];
        this.eTriggerMethod = _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eTriggerMethod"];
    }
    ngOnInit() {
        if (this.auditResult.endTime) {
            this.runTime = ((new Date(this.auditResult.endTime)).valueOf() - (new Date(this.auditResult.startTime)).valueOf()) / 1000;
        }
        else {
            if (this.auditResult.runStatus === _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eRunStatus"].Running ||
                this.auditResult.runStatus === _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eRunStatus"].RunningErrors ||
                this.auditResult.runStatus === _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eRunStatus"].Started) {
                this.runTime = ((new Date()).valueOf() -
                    (new Date(this.auditResult.startTime)).valueOf()) / 1000;
            }
            else {
                this.runTime = null;
            }
        }
        switch (this.auditResult.runStatus) {
            case _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eRunStatus"].Abended:
            case _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eRunStatus"].Cancelled:
            case _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eRunStatus"].Failed:
            case _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eRunStatus"].FinishedErrors:
                this.fail = true;
                break;
            case _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eRunStatus"].Finished:
            case _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eRunStatus"].Passed:
                this.success = true;
        }
        this.barChartData = [
            {
                name: 'Reading',
                value: this.rowsPerSecond(this.auditResult.rowsReadPrimary + this.auditResult.rowsReadReference, this.auditResult.readTicks)
            },
            {
                name: 'Processing',
                value: this.rowsPerSecond(this.auditResult.rowsTotal, this.auditResult.processingTicks)
            },
            {
                name: 'Writing',
                value: this.rowsPerSecond(this.auditResult.rowsTotal, this.auditResult.writeTicks)
            }
        ];
    }
    numberWithCommas(x) {
        const parts = x.toString().split('.');
        parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        return parts.join('.');
    }
    rowsPerSecond(rows, ticks) {
        if (ticks === 0) {
            return 0;
        }
        return rows / (ticks / 10000000);
    }
    openResult(auditKey) {
        this.router.navigate(['..', auditKey], { relativeTo: this.route });
    }
}
StatsComponent.ɵfac = function StatsComponent_Factory(t) { return new (t || StatsComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"])); };
StatsComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: StatsComponent, selectors: [["stats"]], inputs: { auditResult: "auditResult" }, decls: 75, vars: 44, consts: [[1, "list-group"], ["class", "list-group-item list-group-item-danger", 4, "ngIf"], ["class", "list-group-item list-group-item-success", 4, "ngIf"], ["class", "list-group-item", 4, "ngIf"], [1, "list-group-item", "list-group-item-info", "rounded-0"], [1, "list-group-item"], [1, "container"], [1, "row", "rounded", "text-white", "bg-secondary"], [3, "ngIf"], [1, "col", "border", "border-white"], [1, "w-100"], ["class", "list-group-item list-group-item-info", 4, "ngIf"], ["class", "list-group-item ", 4, "ngIf"], [1, "list-group-item", "list-group-item-info"], ["caption", "Source Rows", "color", "bg-color-blueDark", 3, "value", "total", 4, "ngIf"], ["caption", "Joined Rows", "color", "bg-color-blueLight", 3, "value", "total", 4, "ngIf"], ["caption", "Created", "color", "bg-color-greenDark", 3, "value", "total", 4, "ngIf"], ["caption", "Updated", "color", "bg-color-blueDark", 3, "value", "total", 4, "ngIf"], ["caption", "Deleted", "color", "bg-color-magenta", 3, "value", "total", 4, "ngIf"], ["caption", "Rejected", "color", "bg-color-red", 3, "value", "total", 4, "ngIf"], ["caption", "Preserved", "color", "bg-color-pinkDark", 3, "value", "total", 4, "ngIf"], ["caption", "Ignored", "color", "bg-color-grayDark", 3, "value", "total", 4, "ngIf"], ["caption", "Passed", "color", "bg-color-greenDark", 3, "value", "total", 4, "ngIf"], ["caption", "Failed", "color", "bg-color-magenta", 3, "value", "total", 4, "ngIf"], ["ngFor", "", 3, "ngForOf"], [2, "display", "grid"], ["scheme", "natural", "yAxisLabel", "rows/second", "xAxisLabel", "operation", 3, "results", "gradient", "xAxis", "yAxis", "legend", "showGridLines", "showXAxisLabel", "showYAxisLabel"], [1, "list-group-item", "list-group-item-danger"], [1, "list-group-item", "list-group-item-success"], [1, "d-flex", "mb-2"], [1, "ml-auto"], [3, "click", 4, "ngIf"], [4, "ngIf"], [3, "click"], [4, "ngFor", "ngForOf"], [1, ""], [1, "text"], [3, "writerResult"], ["caption", "Source Rows", "color", "bg-color-blueDark", 3, "value", "total"], ["caption", "Joined Rows", "color", "bg-color-blueLight", 3, "value", "total"], ["caption", "Created", "color", "bg-color-greenDark", 3, "value", "total"], ["caption", "Updated", "color", "bg-color-blueDark", 3, "value", "total"], ["caption", "Deleted", "color", "bg-color-magenta", 3, "value", "total"], ["caption", "Rejected", "color", "bg-color-red", 3, "value", "total"], ["caption", "Preserved", "color", "bg-color-pinkDark", 3, "value", "total"], ["caption", "Ignored", "color", "bg-color-grayDark", 3, "value", "total"], ["caption", "Passed", "color", "bg-color-greenDark", 3, "value", "total"], ["caption", "Failed", "color", "bg-color-magenta", 3, "value", "total"]], template: function StatsComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "ul", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, StatsComponent_li_1_Template, 3, 0, "li", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, StatsComponent_li_2_Template, 3, 0, "li", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, StatsComponent_li_3_Template, 7, 3, "li", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "li", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "h5");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, "Running Time");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "li", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](10, StatsComponent_ng_template_10_Template, 5, 1, "ng-template", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12, "Run Status");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](14);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](15, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](17, "Start Date");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](18, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](19);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](20, "calendar");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](21, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](22, StatsComponent_ng_template_22_Template, 6, 3, "ng-template", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](23, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](24, "Initialized");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](25, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](26);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](27, "calendar");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](28, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](29, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](30, "Started");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](31, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](32);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](33, "calendar");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](34, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](35, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](36, "Finished");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](37, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](38);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](39, "calendar");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](40, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](41, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](42, "Run Time");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](43, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](44);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](45, "number");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](46, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](47, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](48, "Triggered By");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](49, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](50);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](51, StatsComponent_li_51_Template, 3, 0, "li", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](52, StatsComponent_li_52_Template, 2, 1, "li", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](53, "li", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](54, "h5");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](55, "Row Distribution");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](56, "li", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](57, StatsComponent_result_progress_57_Template, 1, 2, "result-progress", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](58, StatsComponent_result_progress_58_Template, 1, 2, "result-progress", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](59, StatsComponent_result_progress_59_Template, 1, 2, "result-progress", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](60, StatsComponent_result_progress_60_Template, 1, 2, "result-progress", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](61, StatsComponent_result_progress_61_Template, 1, 2, "result-progress", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](62, StatsComponent_result_progress_62_Template, 1, 2, "result-progress", 19);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](63, StatsComponent_result_progress_63_Template, 1, 2, "result-progress", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](64, StatsComponent_result_progress_64_Template, 1, 2, "result-progress", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](65, StatsComponent_result_progress_65_Template, 1, 2, "result-progress", 22);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](66, StatsComponent_result_progress_66_Template, 1, 2, "result-progress", 23);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](67, "li", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](68, "h5");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](69, "Performance Estimates (rows/second)");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](70, "li", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](71, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](72, StatsComponent_ng_template_72_Template, 6, 5, "ng-template", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](73, "div", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](74, "ngx-charts-bar-vertical", 26);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.fail);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.success);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult == null ? null : ctx.auditResult.message);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.targetTableName);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx.eRunStatus[ctx.auditResult.runStatus]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](20, 33, ctx.auditResult.initializeTime));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.scheduledTime);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](27, 35, ctx.auditResult.initializeTime));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](33, 37, ctx.auditResult.startTime));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](39, 39, ctx.auditResult.endTime));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](45, 41, ctx.runTime, "1.2-2"), " seconds");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx.eTriggerMethod[ctx.auditResult.triggerMethod]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (ctx.auditResult.childResults == null ? null : ctx.auditResult.childResults.length) > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (ctx.auditResult.childResults == null ? null : ctx.auditResult.childResults.length) > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.rowsReadPrimary > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.rowsReadReference > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.rowsCreated > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.rowsUpdated > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.rowsDeleted > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.rowsRejected > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.rowsPreserved > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.rowsIgnored > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.passed > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.auditResult.failed > 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.auditResult.performanceSummary);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("results", ctx.barChartData)("gradient", true)("xAxis", true)("yAxis", true)("legend", false)("showGridLines", true)("showXAxisLabel", true)("showYAxisLabel", true);
    } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_3__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgForOf"], _swimlane_ngx_charts__WEBPACK_IMPORTED_MODULE_4__["BarVerticalComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_5__["DButtonComponent"], _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_6__["DatalinkStatusComponent"], _progress_component__WEBPACK_IMPORTED_MODULE_7__["ProgressComponent"]], pipes: [_shared_utils_calendar_pipe__WEBPACK_IMPORTED_MODULE_8__["CalendarPipe"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["DecimalPipe"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](StatsComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'stats',
                templateUrl: './stats.component.html'
            }]
    }], function () { return [{ type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }]; }, { auditResult: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "./src/app/+hub/search/index.ts":
/*!**************************************!*\
  !*** ./src/app/+hub/search/index.ts ***!
  \**************************************/
/*! exports provided: SearchComponent, SearchModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _search_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./search.component */ "./src/app/+hub/search/search.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SearchComponent", function() { return _search_component__WEBPACK_IMPORTED_MODULE_0__["SearchComponent"]; });

/* harmony import */ var _search_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./search.module */ "./src/app/+hub/search/search.module.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SearchModule", function() { return _search_module__WEBPACK_IMPORTED_MODULE_1__["SearchModule"]; });





/***/ }),

/***/ "./src/app/+hub/search/object-type.pipe.ts":
/*!*************************************************!*\
  !*** ./src/app/+hub/search/object-type.pipe.ts ***!
  \*************************************************/
/*! exports provided: ObjectTypePipe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectTypePipe", function() { return ObjectTypePipe; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../hub.models */ "./src/app/+hub/hub.models.ts");



class ObjectTypePipe {
    transform(value) {
        return _hub_models__WEBPACK_IMPORTED_MODULE_1__["SearchObjectTypes"].find(c => c.key === value).name;
    }
}
ObjectTypePipe.ɵfac = function ObjectTypePipe_Factory(t) { return new (t || ObjectTypePipe)(); };
ObjectTypePipe.ɵpipe = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefinePipe"]({ name: "objectTypeName", type: ObjectTypePipe, pure: true });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ObjectTypePipe, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Pipe"],
        args: [{
                name: 'objectTypeName'
            }]
    }], null, null); })();


/***/ }),

/***/ "./src/app/+hub/search/search.component.ts":
/*!*************************************************!*\
  !*** ./src/app/+hub/search/search.component.ts ***!
  \*************************************************/
/*! exports provided: SearchComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchComponent", function() { return SearchComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _widgets_datajob_view_datajob_view_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../widgets/datajob-view/datajob-view.component */ "./src/app/+hub/widgets/datajob-view/datajob-view.component.ts");
/* harmony import */ var _widgets_datalink_view_datalink_view_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../widgets/datalink-view/datalink-view.component */ "./src/app/+hub/widgets/datalink-view/datalink-view.component.ts");
/* harmony import */ var _widgets_connection_view_connection_view_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../widgets/connection-view/connection-view.component */ "./src/app/+hub/widgets/connection-view/connection-view.component.ts");
/* harmony import */ var _widgets_table_view_table_view_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../widgets/table-view/table-view.component */ "./src/app/+hub/widgets/table-view/table-view.component.ts");
/* harmony import */ var _widgets_table_column_view_table_column_view_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../widgets/table-column-view/table-column-view.component */ "./src/app/+hub/widgets/table-column-view/table-column-view.component.ts");
/* harmony import */ var _widgets_columnValidation_view_columnValidation_view_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../widgets/columnValidation-view/columnValidation-view.component */ "./src/app/+hub/widgets/columnValidation-view/columnValidation-view.component.ts");
/* harmony import */ var _widgets_fileFormat_view_fileFormat_view_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../widgets/fileFormat-view/fileFormat-view.component */ "./src/app/+hub/widgets/fileFormat-view/fileFormat-view.component.ts");
/* harmony import */ var _widgets_view_view_view_view_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../widgets/view-view/view-view.component */ "./src/app/+hub/widgets/view-view/view-view.component.ts");
/* harmony import */ var _widgets_api_view_api_view_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../widgets/api-view/api-view.component */ "./src/app/+hub/widgets/api-view/api-view.component.ts");
/* harmony import */ var _widgets_dashboard_view_dashboard_view_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../widgets/dashboard-view/dashboard-view.component */ "./src/app/+hub/widgets/dashboard-view/dashboard-view.component.ts");
/* harmony import */ var _widgets_listOfValues_view_listOfValues_view_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../widgets/listOfValues-view/listOfValues-view.component */ "./src/app/+hub/widgets/listOfValues-view/listOfValues-view.component.ts");
/* harmony import */ var _widgets_datalinkTest_view_datalinkTest_view_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../widgets/datalinkTest-view/datalinkTest-view.component */ "./src/app/+hub/widgets/datalinkTest-view/datalinkTest-view.component.ts");
/* harmony import */ var _object_type_pipe__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./object-type.pipe */ "./src/app/+hub/search/object-type.pipe.ts");




























function SearchComponent_form_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "section", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "form-input", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "section", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "form-select", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r0.searchForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r0.searchObjectTypes);
} }
function SearchComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "h5");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "No search results available.");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function SearchComponent_li_7_datajob_view_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "datajob-view", 27);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("datajob", searchResult_r3.object);
} }
function SearchComponent_li_7_datalink_view_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "datalink-view", 28);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("datalink", searchResult_r3.object);
} }
function SearchComponent_li_7_connection_view_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "connection-view", 29);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("connection", searchResult_r3.object);
} }
function SearchComponent_li_7_table_view_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "table-view", 30);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("connection", searchResult_r3.objectParent)("table", searchResult_r3.object);
} }
function SearchComponent_li_7_table_column_view_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "table-column-view", 31);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("table", searchResult_r3.objectParent)("column", searchResult_r3.object);
} }
function SearchComponent_li_7_columnValidation_view_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "columnValidation-view", 32);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("columnValidation", searchResult_r3.object);
} }
function SearchComponent_li_7_fileFormat_view_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "fileFormat-view", 33);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("fileFormat", searchResult_r3.object);
} }
function SearchComponent_li_7_view_view_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "view-view", 34);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("view", searchResult_r3.object);
} }
function SearchComponent_li_7_api_view_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "api-view", 35);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("api", searchResult_r3.object);
} }
function SearchComponent_li_7_dashboard_view_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "dashboard-view", 36);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("dashboard", searchResult_r3.object);
} }
function SearchComponent_li_7_listOfValues_view_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "listOfValues-view", 37);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("listOfValues", searchResult_r3.object);
} }
function SearchComponent_li_7_datalinkTest_view_17_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "datalinkTest-view", 38);
} if (rf & 2) {
    const searchResult_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("datalinkTest", searchResult_r3.object);
} }
function SearchComponent_li_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "h5");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "objectTypeName");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, SearchComponent_li_7_datajob_view_6_Template, 1, 1, "datajob-view", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, SearchComponent_li_7_datalink_view_7_Template, 1, 1, "datalink-view", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, SearchComponent_li_7_connection_view_8_Template, 1, 1, "connection-view", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, SearchComponent_li_7_table_view_9_Template, 1, 2, "table-view", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](10, SearchComponent_li_7_table_column_view_10_Template, 1, 2, "table-column-view", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, SearchComponent_li_7_columnValidation_view_11_Template, 1, 1, "columnValidation-view", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](12, SearchComponent_li_7_fileFormat_view_12_Template, 1, 1, "fileFormat-view", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](13, SearchComponent_li_7_view_view_13_Template, 1, 1, "view-view", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](14, SearchComponent_li_7_api_view_14_Template, 1, 1, "api-view", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](15, SearchComponent_li_7_dashboard_view_15_Template, 1, 1, "dashboard-view", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](16, SearchComponent_li_7_listOfValues_view_16_Template, 1, 1, "listOfValues-view", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](17, SearchComponent_li_7_datalinkTest_view_17_Template, 1, 1, "datalinkTest-view", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const searchResult_r3 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 14, searchResult_r3.objectType));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitch", searchResult_r3.objectType);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.Datajob);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.Datalink);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.Connection);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.Table);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.TableColumn);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.ColumnValidation);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.FileFormat);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.View);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.Api);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.Dashboard);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.ListOfValues);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r2.eSearchObjectType.DatalinkTest);
} }
class SearchComponent {
    constructor(hubService, authService, route, router, fb) {
        this.hubService = hubService;
        this.authService = authService;
        this.route = route;
        this.router = router;
        this.fb = fb;
        this.searchObjectTypes = _hub_models__WEBPACK_IMPORTED_MODULE_5__["SearchObjectTypes"];
        this.eSearchObjectType = _hub_models__WEBPACK_IMPORTED_MODULE_5__["eSearchObjectType"];
        this.isFirst = false;
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_6__["combineLatest"])(this.route.params, this.hubService.getHubCacheObservable()).subscribe(result => {
                let params = result[0];
                this.hubCache = result[1];
                if (!this.isFirst) {
                    this.isFirst = false;
                    let searchObject = +params['searchObject'];
                    if (!searchObject) {
                        searchObject = 0;
                    }
                    this.searchForm = this.fb.group({
                        'searchString': [params['search'], []],
                        'searchObject': [searchObject, []],
                    });
                    this.updateSearch();
                    if (this._searchSubscription) {
                        this._searchSubscription.unsubscribe();
                    }
                    this._searchSubscription = this.searchForm.valueChanges
                        .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["debounceTime"])(500))
                        .subscribe(newValue => {
                        this.updateSearch();
                    });
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Search');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._searchSubscription) {
            this._searchSubscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    updateSearch() {
        if (!this.hubCache.isLoaded()) {
            return;
        }
        this.searchResults = this.hubCache.search(this.searchForm.value.searchString, this.searchForm.value.searchObject);
        if (history.pushState) {
            let newUrl = this.hubCache.getHubUrl() + '/search';
            let searchString = this.searchForm.value.searchString;
            let searchObject = this.searchForm.value.searchObject;
            if (searchString) {
                newUrl += '/' + searchObject + '/' + searchString;
            }
            this.router.navigateByUrl(newUrl);
        }
    }
}
SearchComponent.ɵfac = function SearchComponent_Factory(t) { return new (t || SearchComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"])); };
SearchComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: SearchComponent, selectors: [["search"]], decls: 8, vars: 5, consts: [[1, "container-fluid"], ["title", "Search Results", "iconClass", "fa fa-lg fa-fw fa-search", 3, "showCloseButton", "padding", "close"], [3, "formGroup", 4, "ngIf"], ["role", "content"], ["class", "well", 4, "ngIf"], [1, "well"], [1, "list-group"], ["class", "list-group-item", 4, "ngFor", "ngForOf"], [3, "formGroup"], [1, "form-row"], [1, "form-group", "col-md-6"], ["label", "Search Term", "formControlName", "searchString", "placeholder", "Search...", "iconClass", "fa fa-search"], ["label", "Restrict to", "formControlName", "searchObject", "itemKey", "key", "itemName", "name", 3, "items"], [1, "list-group-item"], [1, "col-xs-9", 3, "ngSwitch"], [3, "datajob", 4, "ngSwitchCase"], [3, "datalink", 4, "ngSwitchCase"], [3, "connection", 4, "ngSwitchCase"], [3, "connection", "table", 4, "ngSwitchCase"], [3, "table", "column", 4, "ngSwitchCase"], [3, "columnValidation", 4, "ngSwitchCase"], [3, "fileFormat", 4, "ngSwitchCase"], [3, "view", 4, "ngSwitchCase"], [3, "api", 4, "ngSwitchCase"], [3, "dashboard", 4, "ngSwitchCase"], [3, "listOfValues", 4, "ngSwitchCase"], [3, "datalinkTest", 4, "ngSwitchCase"], [3, "datajob"], [3, "datalink"], [3, "connection"], [3, "connection", "table"], [3, "table", "column"], [3, "columnValidation"], [3, "fileFormat"], [3, "view"], [3, "api"], [3, "dashboard"], [3, "listOfValues"], [3, "datalinkTest"]], template: function SearchComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function SearchComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, SearchComponent_form_2_Template, 7, 2, "form", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, SearchComponent_div_4_Template, 3, 0, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "ul", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, SearchComponent_li_7_Template, 18, 16, "li", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.searchForm);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.searchResults || (ctx.searchResults == null ? null : ctx.searchResults.length) == 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.searchResults);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DWidgetComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgForOf"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DFormInputComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DFormSelectComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgSwitchCase"], _widgets_datajob_view_datajob_view_component__WEBPACK_IMPORTED_MODULE_10__["DatajobViewComponent"], _widgets_datalink_view_datalink_view_component__WEBPACK_IMPORTED_MODULE_11__["DatalinkViewComponent"], _widgets_connection_view_connection_view_component__WEBPACK_IMPORTED_MODULE_12__["ConnectionViewComponent"], _widgets_table_view_table_view_component__WEBPACK_IMPORTED_MODULE_13__["TableViewComponent"], _widgets_table_column_view_table_column_view_component__WEBPACK_IMPORTED_MODULE_14__["TableColumnViewComponent"], _widgets_columnValidation_view_columnValidation_view_component__WEBPACK_IMPORTED_MODULE_15__["ColumnValidationViewComponent"], _widgets_fileFormat_view_fileFormat_view_component__WEBPACK_IMPORTED_MODULE_16__["FileFormatViewComponent"], _widgets_view_view_view_view_component__WEBPACK_IMPORTED_MODULE_17__["ViewViewComponent"], _widgets_api_view_api_view_component__WEBPACK_IMPORTED_MODULE_18__["ApiViewComponent"], _widgets_dashboard_view_dashboard_view_component__WEBPACK_IMPORTED_MODULE_19__["DashboardViewComponent"], _widgets_listOfValues_view_listOfValues_view_component__WEBPACK_IMPORTED_MODULE_20__["ListOfValuesViewComponent"], _widgets_datalinkTest_view_datalinkTest_view_component__WEBPACK_IMPORTED_MODULE_21__["DatalinkTestViewComponent"]], pipes: [_object_type_pipe__WEBPACK_IMPORTED_MODULE_22__["ObjectTypePipe"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](SearchComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'search',
                templateUrl: './search.component.html',
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }, { type: _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/search/search.module.ts":
/*!**********************************************!*\
  !*** ./src/app/+hub/search/search.module.ts ***!
  \**********************************************/
/*! exports provided: SearchModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchModule", function() { return SearchModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _shared_shared_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/shared.module */ "./src/app/shared/shared.module.ts");
/* harmony import */ var _search_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./search.component */ "./src/app/+hub/search/search.component.ts");
/* harmony import */ var _object_type_pipe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./object-type.pipe */ "./src/app/+hub/search/object-type.pipe.ts");
/* harmony import */ var _hub_shared_module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../hub.shared.module */ "./src/app/+hub/hub.shared.module.ts");







class SearchModule {
}
SearchModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: SearchModule });
SearchModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function SearchModule_Factory(t) { return new (t || SearchModule)(); }, providers: [], imports: [[
            _shared_shared_module__WEBPACK_IMPORTED_MODULE_2__["SharedModule"],
            _hub_shared_module__WEBPACK_IMPORTED_MODULE_5__["HubSharedModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["ReactiveFormsModule"]
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsetNgModuleScope"](SearchModule, { declarations: [_search_component__WEBPACK_IMPORTED_MODULE_3__["SearchComponent"], _object_type_pipe__WEBPACK_IMPORTED_MODULE_4__["ObjectTypePipe"]], imports: [_shared_shared_module__WEBPACK_IMPORTED_MODULE_2__["SharedModule"],
        _hub_shared_module__WEBPACK_IMPORTED_MODULE_5__["HubSharedModule"],
        _angular_forms__WEBPACK_IMPORTED_MODULE_1__["ReactiveFormsModule"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](SearchModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"],
        args: [{
                imports: [
                    _shared_shared_module__WEBPACK_IMPORTED_MODULE_2__["SharedModule"],
                    _hub_shared_module__WEBPACK_IMPORTED_MODULE_5__["HubSharedModule"],
                    _angular_forms__WEBPACK_IMPORTED_MODULE_1__["ReactiveFormsModule"]
                ],
                exports: [],
                declarations: [_search_component__WEBPACK_IMPORTED_MODULE_3__["SearchComponent"], _object_type_pipe__WEBPACK_IMPORTED_MODULE_4__["ObjectTypePipe"]],
                providers: [],
            }]
    }], null, null); })();


/***/ }),

/***/ "./src/app/+hub/sharedData/sharedData-index.component.ts":
/*!***************************************************************!*\
  !*** ./src/app/+hub/sharedData/sharedData-index.component.ts ***!
  \***************************************************************/
/*! exports provided: SharedDataIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SharedDataIndexComponent", function() { return SharedDataIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");














function SharedDataIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-preview", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function SharedDataIndexComponent_ng_template_3_Template_d_button_preview_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10); const item_r8 = ctx.item; const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r9.preview(item_r8); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function SharedDataIndexComponent_ng_template_5_Template(rf, ctx) { }
function SharedDataIndexComponent_ng_template_7_d_button_private_1_Template(rf, ctx) { if (rf & 1) {
    const _r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-private", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function SharedDataIndexComponent_ng_template_7_d_button_private_1_Template_d_button_private_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r16); const objects_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r14.unshareSelectedTables(objects_r12); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function SharedDataIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    const _r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-download", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function SharedDataIndexComponent_ng_template_7_Template_d_button_download_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r18); const objects_r12 = ctx.items; const ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r17.downloadData(objects_r12); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, SharedDataIndexComponent_ng_template_7_d_button_private_1_Template, 1, 0, "d-button-private", 13);
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.hubCache.canWrite);
} }
const _c0 = function () { return { typeFilter: "All" }; };
const _c1 = function () { return { typeFilter: "Datalink" }; };
const _c2 = function () { return { typeFilter: "Table" }; };
const _c3 = function () { return { typeFilter: "View" }; };
const _c4 = function () { return { typeFilter: "Dashboard" }; };
const _c5 = function () { return { typeFilter: "Api" }; };
function SharedDataIndexComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-dropdown", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "a", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "a", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "Datalinks");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, "Tables");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "a", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](8, "Views");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "a", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](10, "Dashboards");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "a", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12, "Apis");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("text", ctx_r7.typeFilter)("pullRight", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.typeFilter == "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](20, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.typeFilter == "Datalink");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](21, _c1));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.typeFilter == "Table");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](22, _c2));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.typeFilter == "View");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](23, _c3));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.typeFilter == "Dashboard");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](24, _c4));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.typeFilter == "Api");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](25, _c5));
} }
class SharedDataIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__["CancelToken"]();
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.columns = [
            { name: 'objectTypeName', title: 'Type', format: '' },
            { name: 'name', title: 'Name', format: '', tags: 'tags' },
            { name: 'description', title: 'Description', format: 'Md' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.route.data, this.route.params, this.route.queryParams, this.hubService.getHubCacheObservable()).subscribe(result => {
                let queryParams = result[2];
                this.hubCache = result[3];
                this.watchChanges();
                this.typeFilter = queryParams['typeFilter'];
                if (!this.typeFilter) {
                    this.typeFilter = 'All';
                }
                this.route.snapshot.data['pageTitle'] = this.typeFilter;
                this.updateSharedData();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Shared Data Index');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    close() {
        this.authService.navigateUp();
    }
    updateSharedData() {
        let objects = new Array();
        if (this.hubCache && this.hubCache.isLoaded()) {
            if (!this.hubCache.hub.dexihDatalinks && !this.hubCache.hub.dexihConnections) {
                this._tableData.next(new Array());
            }
            else {
                if (this.typeFilter === 'All' || this.typeFilter === 'Datalink') {
                    this.hubCache.hub.dexihDatalinks.filter(d => d.isShared).forEach(datalink => {
                        objects.push({
                            objectKey: datalink.key,
                            objectTypeName: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"][_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Datalink],
                            objectType: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Datalink,
                            name: datalink.name,
                            description: datalink.description,
                            updateDate: datalink.updateDate,
                            tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Datalink, datalink.key)
                        });
                    });
                }
                if (this.typeFilter === 'All' || this.typeFilter === 'Table') {
                    this.hubCache.hub.dexihTables.filter(c => c.isShared).forEach(table => {
                        objects.push({
                            objectKey: table.key,
                            objectTypeName: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"][_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Table],
                            objectType: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Table,
                            name: table.logicalName + ' (' + table.name + ')',
                            description: table.description,
                            updateDate: table.updateDate,
                            tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects, table.key)
                        });
                    });
                }
                if (this.typeFilter === 'All' || this.typeFilter === 'View') {
                    this.hubCache.hub.dexihViews.filter(c => c.isShared).forEach(view => {
                        objects.push({
                            objectKey: view.key,
                            objectTypeName: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"][_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].View],
                            objectType: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].View,
                            name: view.name,
                            description: view.description,
                            updateDate: view.updateDate,
                            tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].View, view.key)
                        });
                    });
                }
                if (this.typeFilter === 'All' || this.typeFilter === 'Dashboard') {
                    this.hubCache.hub.dexihDashboards.filter(c => c.isShared).forEach(dashboard => {
                        objects.push({
                            objectKey: dashboard.key,
                            objectTypeName: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"][_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Dashboard],
                            objectType: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Dashboard,
                            name: dashboard.name,
                            description: dashboard.description,
                            updateDate: dashboard.updateDate,
                            tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Dashboard, dashboard.key)
                        });
                    });
                }
                if (this.typeFilter === 'All' || this.typeFilter === 'Api') {
                    this.hubCache.hub.dexihApis.filter(c => c.isShared).forEach(api => {
                        objects.push({
                            objectKey: api.key,
                            objectTypeName: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"][_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Api],
                            objectType: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Api,
                            name: api.name,
                            description: api.description,
                            updateDate: api.updateDate,
                            tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Api, api.key)
                        });
                    });
                }
                this._tableData.next(objects);
            }
        }
    }
    downloadData(dataObjects) {
        this.hubService.downloadData(dataObjects, true, _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDownloadFormat"].Csv, this.cancelToken).then(() => {
            this.hubService.addHubSuccessMessage('The specified data is being downloaded.');
        }).catch(() => {
            //            this.hubService.addHubErrorMessage(reason);
        });
    }
    preview(dataObject) {
        if (dataObject.objectType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Table) {
            this.router.navigate(['table-preview', dataObject.objectKey], { relativeTo: this.route });
        }
        if (dataObject.objectType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Datalink) {
            this.router.navigate(['datalink-preview', dataObject.objectKey], { relativeTo: this.route });
        }
        if (dataObject.objectType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].View) {
            this.router.navigate(['view-preview', dataObject.objectKey], { relativeTo: this.route });
        }
        if (dataObject.objectType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Dashboard) {
            this.router.navigate(['dashboard-preview', dataObject.objectKey], { relativeTo: this.route });
        }
        if (dataObject.objectType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Api) {
            this.router.navigate(['api-preview', dataObject.objectKey], { relativeTo: this.route });
        }
    }
    unshareSelectedTables(dataObjects) {
        let datalinkKeys = dataObjects.filter(c => c.objectType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Datalink).map(c => c.objectKey);
        if (datalinkKeys.length > 0) {
            this.hubService.shareItems(datalinkKeys, _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Datalink, false);
        }
        let tableKeys = dataObjects.filter(c => c.objectType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Table).map(c => c.objectKey);
        if (tableKeys.length > 0) {
            this.hubService.shareItems(tableKeys, _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eDataObjectType"].Table, false);
        }
    }
    watchChanges() {
        // watch the current connection in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Datalink || hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Table) {
                this.updateSharedData();
            }
        });
    }
}
SharedDataIndexComponent.ɵfac = function SharedDataIndexComponent_Factory(t) { return new (t || SharedDataIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"])); };
SharedDataIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: SharedDataIndexComponent, selectors: [["sharedData-index"]], decls: 11, vars: 8, consts: [[1, "container-fluid"], ["title", "Shared Data", "iconClass", "fa fa-lg fa-fw fa-newspaper-o", 3, "showCloseButton", "padding", "close"], [3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "tags", "rowClick"], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["select", "rowStatus"], ["rowStatus", ""], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["select", "filter"], ["filter", ""], [3, "click"], [1, "mr-1", 3, "click"], [3, "click", 4, "ngIf"], ["buttonClass", "btn-primary mr-1", "iconClass", "fa fa-filter", "title", "Filter by a purpose", 3, "text", "pullRight"], ["routerLink", ".", "title", "All Items", 1, "dropdown-item", 3, "queryParams"], ["routerLink", ".", "title", "Datalinks", 1, "dropdown-item", 3, "queryParams"], ["routerLink", ".", "title", "Tables", 1, "dropdown-item", 3, "queryParams"], ["routerLink", ".", "title", "Views", 1, "dropdown-item", 3, "queryParams"], ["routerLink", ".", "title", "Dashboards", 1, "dropdown-item", 3, "queryParams"], ["routerLink", ".", "title", "Apis", 1, "dropdown-item", 3, "queryParams"]], template: function SharedDataIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function SharedDataIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function SharedDataIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.preview($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, SharedDataIndexComponent_ng_template_3_Template, 1, 0, "ng-template", 3, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, SharedDataIndexComponent_ng_template_5_Template, 0, 0, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, SharedDataIndexComponent_ng_template_7_Template, 2, 1, "ng-template", 7, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, SharedDataIndexComponent_ng_template_9_Template, 13, 26, "ng-template", 9, 10, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", false);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_8__["DTableComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DButtonPreviewComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DButtonDownloadComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DButtonPrivateComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DButtonDropDownComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterLinkWithHref"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](SharedDataIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'sharedData-index',
                templateUrl: './sharedData-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/table/table-index/index.ts":
/*!*************************************************!*\
  !*** ./src/app/+hub/table/table-index/index.ts ***!
  \*************************************************/
/*! exports provided: TableIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _table_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./table-index.component */ "./src/app/+hub/table/table-index/table-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TableIndexComponent", function() { return _table_index_component__WEBPACK_IMPORTED_MODULE_0__["TableIndexComponent"]; });




/***/ }),

/***/ "./src/app/+hub/table/table-index/table-index.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/+hub/table/table-index/table-index.component.ts ***!
  \*****************************************************************/
/*! exports provided: TableIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableIndexComponent", function() { return TableIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _buttons_actions_table_button_actions_table_button_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../buttons/actions-table-button/actions-table-button.component */ "./src/app/+hub/buttons/actions-table-button/actions-table-button.component.ts");
/* harmony import */ var _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../widgets/datalink-status/datalink-status.component */ "./src/app/+hub/widgets/datalink-status/datalink-status.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../buttons/tags-update-button/tags-update-button.component */ "./src/app/+hub/buttons/tags-update-button/tags-update-button.component.ts");
/* harmony import */ var _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../buttons/dependent-items/dependent-items-button.component */ "./src/app/+hub/buttons/dependent-items/dependent-items-button.component.ts");
/* harmony import */ var _shared_utils_gt_filter_pipe__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../shared/utils/gt-filter.pipe */ "./src/app/shared/utils/gt-filter.pipe.ts");
/* harmony import */ var _shared_utils_equal_filter_pipe__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../shared/utils/equal-filter.pipe */ "./src/app/shared/utils/equal-filter.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __asyncValues = (undefined && undefined.__asyncValues) || function (o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
};




















function TableIndexComponent_ng_template_2_Template(rf, ctx) { }
function TableIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "actions-table-button", 14);
} if (rf & 2) {
    const items_r12 = ctx.items;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("tables", items_r12)("refreshTables", true);
} }
function TableIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "datalink-status", 15);
} if (rf & 2) {
    const table_r13 = ctx.item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("tableKey", table_r13 == null ? null : table_r13.key);
} }
const _c0 = function (a0) { return { connectionKey: a0 }; };
function TableIndexComponent_ng_template_9_d_button_dropdown_0_a_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const connection_r18 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](2, _c0, connection_r18.key));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](connection_r18.name);
} }
function TableIndexComponent_ng_template_9_d_button_dropdown_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-dropdown", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, TableIndexComponent_ng_template_9_d_button_dropdown_0_a_1_Template, 2, 4, "a", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "equalFilter");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autoCompact", false)("text", ctx_r15.connectionName)("pullRight", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind3"](2, 4, ctx_r15.hubCache.hub.dexihConnections, "isValid", true));
} }
const _c1 = function (a0) { return { purposeFilter: a0 }; };
function TableIndexComponent_ng_template_9_a_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "a", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const purpose_r19 = ctx.$implicit;
    const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r16.purposeFilter == purpose_r19.key);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](5, _c1, purpose_r19.key))("title", purpose_r19.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](purpose_r19.name);
} }
const _c2 = function () { return { purposeFilter: "All" }; };
function TableIndexComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, TableIndexComponent_ng_template_9_d_button_dropdown_0_Template, 3, 8, "d-button-dropdown", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-dropdown", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "a", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3, "All");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, TableIndexComponent_ng_template_9_a_4_Template, 2, 7, "a", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "gtFilter");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r7.hubCache == null ? null : ctx_r7.hubCache.hub);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autoCompact", false)("text", ctx_r7.eConnectionPurpose[ctx_r7.purposeFilter])("pullRight", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r7.purposeFilter == "0");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](12, _c2));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind3"](5, 8, ctx_r7.eConnectionPurposeItems, "key", 0));
} }
function TableIndexComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "tags-update-button", 24);
} if (rf & 2) {
    const items_r20 = ctx.items;
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("objectType", ctx_r9.eSharedObjectType.Table)("objects", items_r20);
} }
function TableIndexComponent_ng_template_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "dependent-items-button", 25);
} if (rf & 2) {
    const item_r21 = ctx.item;
    const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", item_r21.key)("objectType", ctx_r11.eSharedObjectType.Table);
} }
class TableIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.eConnectionPurposeItems = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eConnectionPurposeItems"];
        this.eConnectionPurpose = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eConnectionPurpose"];
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.columns = [
            { name: 'logicalName', title: 'Logical Name', format: 'Md', footer: 'description', tags: 'tags' },
            { iconClass: 'sharedIcon', tooltip: 'sharedToolTip', width: '1%', align: 'center' },
            { name: 'tableType', title: 'Table Type', format: 'Enum', enum: _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eTableType"] },
            { name: 'connectionName', title: 'Connection', footer: 'connectionType', format: '' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_2__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["combineLatest"])(this.route.data, this.route.params, this.route.queryParams, this.hubService.getHubCacheObservable()).subscribe((result) => __awaiter(this, void 0, void 0, function* () {
                let data = result[0];
                let params = result[1];
                let queryParams = result[2];
                this.hubCache = result[3];
                if (!this.hubCache.isLoaded()) {
                    return;
                }
                this.purposeFilter = queryParams['purposeFilter'];
                if (!this.purposeFilter) {
                    this.purposeFilter = 'All';
                }
                this.connectionKey = +queryParams['connectionKey'];
                if (this.connectionKey) {
                    let connection = this.hubCache.hub.dexihConnections.find(c => c.key === this.connectionKey);
                    if (connection) {
                        this.connectionName = connection.name;
                    }
                }
                else {
                    this.connectionName = 'All';
                }
                yield this.updateTableData();
            }));
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Table Index');
        }
        // watch for any changes in the connections.
        this.watchChanges();
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    updateTableData() {
        var e_1, _a;
        return __awaiter(this, void 0, void 0, function* () {
            this.title = 'Tables ';
            this.connectionName = 'All';
            if (this.purposeFilter && this.purposeFilter !== 'All') {
                this.title += ': ' + _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eConnectionPurpose"][this.purposeFilter];
            }
            if (this.hubCache && this.hubCache.isLoaded()) {
                let tableData = [];
                try {
                    for (var _b = __asyncValues(this.hubCache.hub.dexihTables), _c; _c = yield _b.next(), !_c.done;) {
                        const table = _c.value;
                        let connection = this.hubCache.hub.dexihConnections.find(c => c.key === table.connectionKey);
                        let connectionReference = yield this.hubService.GetConnectionReference(connection);
                        if (((this.purposeFilter === 'All' || !this.purposeFilter) ||
                            (connection && connection.purpose.toString() === this.purposeFilter)) &&
                            (!this.connectionKey || table.connectionKey === this.connectionKey)) {
                            let name;
                            if (table.tableType === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eTableType"].Query) {
                                name = '(Sql Query)';
                            }
                            else {
                                if (table.schema) {
                                    name = table.schema + '.' + table.name;
                                }
                                else {
                                    name = table.name;
                                }
                            }
                            let tableName;
                            if (this.hubCache.defaultTableLogicalName(table.schema, table.name) === table.logicalName) {
                                tableName = table.logicalName;
                            }
                            else {
                                tableName = `${table.logicalName} (${table.name})`;
                            }
                            let description = '';
                            if (table.logicalName !== table.name) {
                                description = `Name: ${table.name}`;
                            }
                            if (description) {
                                description += '<br>';
                            }
                            if (table.description) {
                                description += table.description;
                            }
                            tableData.push({
                                key: table.key,
                                connectionType: connection ? _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eConnectionPurpose"][connection.purpose] : 'undefined',
                                connectionName: connection ? connection.name : 'undefined',
                                description: description,
                                tableType: table.tableType,
                                name: name,
                                logicalName: table.logicalName,
                                tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Table, table.key),
                                updateDate: table.updateDate,
                                connectionKey: connection ? connection.key : '',
                                isFile: connectionReference ? connectionReference.connectionCategory === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eConnectionCategory"].File : false,
                                sharedIcon: table.isShared ? 'fa fa-group' : 'fa fa-user-secret',
                                sharedToolTip: table.isShared ? 'Table is shared' : 'Table is private'
                            });
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) yield _a.call(_b);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
                ;
                if (this.connectionKey) {
                    let connection = this.hubCache.hub.dexihConnections.find(c => c.key === this.connectionKey);
                    if (connection) {
                        this.connectionName = connection.name;
                        this.title += ' for connection - ' + connection.name;
                    }
                }
                this._tableData.next(tableData);
            }
            else {
                this._tableData.next(null);
            }
        });
    }
    routeSibling(path) {
        this.router.navigate(['..', path]);
    }
    editTable(table) {
        this.router.navigate(['table-edit', table.key], { queryParamsHandling: 'merge', relativeTo: this.route.parent });
    }
    getConnection(connectionKey) {
        return this.hubCache.hub.dexihConnections.find(c => c.key === connectionKey);
    }
    watchChanges() {
        // watch the current connection in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].Table || hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects) {
                this.updateTableData();
            }
        });
    }
}
TableIndexComponent.ɵfac = function TableIndexComponent_Factory(t) { return new (t || TableIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"])); };
TableIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: TableIndexComponent, selectors: [["table-index"]], decls: 16, vars: 9, consts: [[1, "container-fluid"], ["iconClass", "fa fa-lg fa-fw fa-table", 3, "title", "showCloseButton", "showIf", "close"], ["header", ""], [3, "enableMultiSelect", "columns", "dataObservable", "tags", "enableStickyToolbar", "toolbarZIndex", "rowClick"], ["actions", ""], ["select", "rowStatus"], ["rowStatus", ""], ["select", "filter"], ["filter", ""], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["title", "Datalinks", "path", "/assets/help/reference/table.md", 1, "m-3"], [3, "tables", "refreshTables"], [3, "tableKey"], ["class", "mr-1", "buttonClass", "btn btn-primary", "iconClass", "fa fa-database", "title", "Filter by a connection", 3, "autoCompact", "text", "pullRight", 4, "ngIf"], ["buttonClass", "btn btn-primary", "iconClass", "fa fa-filter", "title", "Filter by a purpose", 1, "mr-1", 3, "autoCompact", "text", "pullRight"], ["routerLink", ".", "title", "All Connections", 1, "dropdown-item", 3, "queryParams"], ["class", "dropdown-item", "routerLink", ".", 3, "active", "queryParams", "title", 4, "ngFor", "ngForOf"], ["buttonClass", "btn btn-primary", "iconClass", "fa fa-database", "title", "Filter by a connection", 1, "mr-1", 3, "autoCompact", "text", "pullRight"], ["class", "dropdown-item", "routerLink", ".", 3, "queryParams", 4, "ngFor", "ngForOf"], ["routerLink", ".", 1, "dropdown-item", 3, "queryParams"], ["routerLink", ".", 1, "dropdown-item", 3, "queryParams", "title"], [1, "ml-1", 3, "objectType", "objects"], [1, "ml-1", 3, "key", "objectType"]], template: function TableIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function TableIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, TableIndexComponent_ng_template_2_Template, 0, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "d-table", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function TableIndexComponent_Template_d_table_rowClick_4_listener($event) { return ctx.editTable($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, TableIndexComponent_ng_template_5_Template, 1, 2, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, TableIndexComponent_ng_template_7_Template, 1, 1, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, TableIndexComponent_ng_template_9_Template, 6, 13, "ng-template", 7, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, TableIndexComponent_ng_template_11_Template, 1, 2, "ng-template", 9, 10, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](13, TableIndexComponent_ng_template_13_Template, 1, 2, "ng-template", 11, 12, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](15, "dexih-help", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("title", ctx.title)("showCloseButton", true)("showIf", ctx.hubCache == null ? null : ctx.hubCache.hub);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags)("enableStickyToolbar", true)("toolbarZIndex", 100);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_7__["DTableComponent"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_8__["DexihHelpComponent"], _buttons_actions_table_button_actions_table_button_component__WEBPACK_IMPORTED_MODULE_9__["ActionsTableButtonComponent"], _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_10__["DatalinkStatusComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_6__["DButtonDropDownComponent"], _angular_router__WEBPACK_IMPORTED_MODULE_3__["RouterLinkWithHref"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgForOf"], _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_12__["TagsUpdateButtonComponent"], _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_13__["DependentItemsButtonComponent"]], pipes: [_shared_utils_gt_filter_pipe__WEBPACK_IMPORTED_MODULE_14__["GtFilterPipe"], _shared_utils_equal_filter_pipe__WEBPACK_IMPORTED_MODULE_15__["EqualFilterPipe"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](TableIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'table-index',
                templateUrl: './table-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/table/table-preview-data/index.ts":
/*!********************************************************!*\
  !*** ./src/app/+hub/table/table-preview-data/index.ts ***!
  \********************************************************/
/*! exports provided: TablePreviewDataComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _table_preview_data_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./table-preview-data.component */ "./src/app/+hub/table/table-preview-data/table-preview-data.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TablePreviewDataComponent", function() { return _table_preview_data_component__WEBPACK_IMPORTED_MODULE_0__["TablePreviewDataComponent"]; });




/***/ }),

/***/ "./src/app/+hub/tags/tags.component.ts":
/*!*********************************************!*\
  !*** ./src/app/+hub/tags/tags.component.ts ***!
  \*********************************************/
/*! exports provided: TagsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TagsComponent", function() { return TagsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! .. */ "./src/app/+hub/index.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../hub.forms.service */ "./src/app/+hub/hub.forms.service.ts");
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/animations */ "./node_modules/@angular/animations/__ivy_ngcc__/fesm2015/animations.js");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");


















function TagsComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-edit", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function TagsComponent_ng_template_3_Template_d_button_edit_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r12); const item_r10 = ctx.item; const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r11.edit(item_r10); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function TagsComponent_ng_template_5_d_button_delete_1_Template(rf, ctx) { if (rf & 1) {
    const _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-delete", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function TagsComponent_ng_template_5_d_button_delete_1_Template_d_button_delete_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); const items_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().items; const ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r15.delete(items_r13); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function TagsComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    const _r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save-local", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function TagsComponent_ng_template_5_Template_d_button_save_local_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r19); const items_r13 = ctx.items; const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r18.export(items_r13); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, TagsComponent_ng_template_5_d_button_delete_1_Template, 1, 0, "d-button-delete", 13);
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.hubCache.canWrite);
} }
function TagsComponent_ng_template_7_d_button_new_0_Template(rf, ctx) { if (rf & 1) {
    const _r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-new", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function TagsComponent_ng_template_7_d_button_new_0_Template_d_button_new_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r23); const ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r22.new(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function TagsComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, TagsComponent_ng_template_7_d_button_new_0_Template, 1, 0, "d-button-new", 13);
} if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r5.hubCache.canWrite);
} }
const _c0 = function (a0) { return { "background-color": a0, "margin-bottom": "0" }; };
function TagsComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    const _r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function TagsComponent_ng_template_9_Template_div_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r26); const item_r24 = ctx.item; const ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r25.edit(item_r24); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "span", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const item_r24 = ctx.item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](2, _c0, item_r24.color));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](item_r24.name);
} }
function TagsComponent_ng_template_11_form_5_button_13_Template(rf, ctx) { if (rf & 1) {
    const _r31 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function TagsComponent_ng_template_11_form_5_button_13_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r31); const color_r29 = ctx.$implicit; const ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r30.selectColor(color_r29); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const color_r29 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-color", color_r29.color);
} }
function TagsComponent_ng_template_11_form_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "section", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "form-input", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "section", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "label", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](7, "Color");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "label", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "input", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](11, "form-input", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](13, TagsComponent_ng_template_11_form_5_button_13_Template, 1, 2, "button", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](15, "section", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](16, "form-textarea", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r27.formsService.currentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("autocapitalize", true)("errors", ctx_r27.formsService.formErrors["name"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-color", ctx_r27.formsService.currentForm.controls.color.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r27.colors);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showPreview", true)("isHidden", true);
} }
function TagsComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {
    const _r33 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "b");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3, "Add/Edit Tag");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, TagsComponent_ng_template_11_form_5_Template, 17, 8, "form", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "d-button-save", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function TagsComponent_ng_template_11_Template_d_button_save_click_7_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r33); const ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r32.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "d-button-cancel", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function TagsComponent_ng_template_11_Template_d_button_cancel_click_8_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r33); const ctx_r34 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r34.cancel(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("@slideDown", ctx_r9.state);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r9.formsService.currentForm);
} }
class TagsComponent {
    constructor(hubService, authService, router, formsService, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.formsService = formsService;
        this.route = route;
        this.state = 'hide';
        this.colors = [
            { name: 'primary', color: '#3a5f8d' },
            { name: 'secondary', color: '#89B3BF' },
            { name: 'success', color: '#479762' },
            { name: 'warning', color: '#c4872a' },
            { name: 'danger', color: '#f44336' },
            { name: 'yellow', color: 'yellow' },
            { name: 'pink', color: 'pink' },
            { name: 'purple', color: 'purple' },
            { name: 'dark', color: '#1F2624' },
        ];
        this.columns = [
            { name: 'name', title: 'Name', footer: 'description', format: 'Md' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_1__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        // watch for any changes in the validations.
        this.watchChanges();
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["combineLatest"])(this.route.queryParams, this.hubService.getHubCacheObservable()).subscribe(result => {
                let params = result[0];
                this.hubCache = result[1];
                if (params['key']) {
                    let tag = this.hubCache.hub.dexihTags.find(c => c.key === +params['key']);
                    if (tag) {
                        let editTag = this.hubCache.hub.dexihTags.find(c => c.key === tag.key);
                        this.formsService.tag(editTag);
                        this.state = 'show';
                    }
                }
                this.update();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'View Index');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    close() {
        this.authService.navigateUp();
    }
    update() {
        if (this.hubCache && this.hubCache.isLoaded()) {
            let tags;
            tags = this.hubCache.hub.dexihTags.filter(c => c.isValid);
            let tableData = tags.map(tag => {
                return {
                    key: tag.key,
                    name: tag.name,
                    description: tag.description,
                    color: tag.color,
                    updateDate: tag.updateDate,
                };
            });
            this._tableData.next(tableData);
        }
        else {
            this._tableData.next(null);
        }
    }
    new() {
        let tag = new _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["DexihTag"]();
        this.formsService.tag(tag);
        this.state = 'show';
    }
    edit(tag) {
        let editTag = this.hubCache.hub.dexihTags.find(c => c.key === tag.key);
        this.formsService.tag(editTag);
        this.state = 'show';
        if (history.pushState) {
            this.router.navigateByUrl(window.location.pathname + `?key=${tag.key}`);
        }
        document.body.scrollTop = 0; // For Safari
        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    }
    delete(tags) {
        this.hubService.deleteTags(tags);
    }
    save() {
        this.formsService.save(false).then(() => {
            this.hide();
        }).catch();
    }
    cancel() {
        this.hide();
    }
    hide() {
        this.state = 'hide';
        if (history.pushState) {
            if (window.location.search) {
                this.router.navigateByUrl(window.location.pathname);
            }
        }
    }
    selectColor(color) {
        this.formsService.currentForm.controls.color.setValue(color.color);
    }
    export(items) {
        const cache = this.hubCache;
        const hub = this.hubService.createHub(cache.hub.hubKey, '');
        items.forEach(item => { cache.cacheAddTag(item.key, hub); });
        let filename = items.length === 1 ? 'Tag - ' + items[0].name + '.json' : 'tags.json';
        this.hubService.exportHub(hub, filename);
    }
    watchChanges() {
        // watch the current validation in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_2__["eSharedObjectType"].Tags) {
                this.update();
            }
        });
    }
}
TagsComponent.ɵfac = function TagsComponent_Factory(t) { return new (t || TagsComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](___WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__["ActivatedRoute"])); };
TagsComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: TagsComponent, selectors: [["tags"]], features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]])], decls: 14, vars: 6, consts: [[1, "container-fluid"], ["title", "Tags", "iconClass", "fa fa-lg fa-fw fa-tags", 3, "showCloseButton", "close"], ["rowStatusHeading", "Color", 3, "enableMultiSelect", "enableStickyToolbar", "toolbarZIndex", "columns", "dataObservable", "rowClick"], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["actions", ""], ["select", "rowStatus"], ["rowStatus", ""], ["tableHeader", ""], ["title", "Views", "path", "/assets/help/reference/tag.md", 1, "m-3"], [1, "mr-1", 3, "click"], ["class", "mr-1", 3, "click", 4, "ngIf"], [1, "alert", "p-1", "text-center", 3, "ngStyle", "click"], [1, "blend-text", "font-weight-bold"], [1, "card", "mt-2", 2, "width", "100%"], [1, "card-header", "text-white", "bg-primary"], [1, "card-body"], [3, "formGroup", 4, "ngIf"], [1, "card-footer"], [3, "formGroup"], [1, "form-row"], [1, "form-group", "col-md-3"], ["label", "Tag Name", "formControlName", "name", "placeholder", "Enter the name.", "iconClass", "fa fa-list", 3, "autocapitalize", "errors"], [1, "form-group", "col-md-9"], [1, "mt-1"], [1, "input-group", "m-0"], [1, "btn", "mr-1", 2, "height", "38px", "width", "76px"], ["formControlName", "color", "hidden", "", "type", "color"], ["formControlName", "color", "placeholder", "color", 1, "mr-3", 2, "height", "38px", "width", "90px"], ["data-toggle", "buttons", 1, "btn-group-toggle"], ["class", "btn mr-1", "style", "height: '38px'; width: '38px'", 3, "background-color", "click", 4, "ngFor", "ngForOf"], [1, "col-md-12"], ["label", "Description", "formControlName", "description", "placeholder", "Enter the description.", 3, "showPreview", "isHidden"], [1, "btn", "mr-1", 2, "height", "38px", "width", "38px", 3, "click"]], template: function TagsComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function TagsComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function TagsComponent_Template_d_table_rowClick_2_listener($event) { return ctx.edit($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, TagsComponent_ng_template_3_Template, 1, 0, "ng-template", 3, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, TagsComponent_ng_template_5_Template, 2, 1, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, TagsComponent_ng_template_7_Template, 1, 1, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, TagsComponent_ng_template_9_Template, 3, 4, "ng-template", 8, 9, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, TagsComponent_ng_template_11_Template, 9, 2, "ng-template", null, 10, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](13, "dexih-help", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("enableStickyToolbar", true)("toolbarZIndex", 100)("columns", ctx.columns)("dataObservable", ctx.tableData);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_9__["DTableComponent"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_10__["DexihHelpComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonEditComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonSaveLocalComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonDeleteComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonNewComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgStyle"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonSaveComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DButtonCancelComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DFormInputComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["FormControlName"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["DefaultValueAccessor"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgForOf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_8__["DFormTextAreaComponent"]], encapsulation: 2, data: { animation: [
            // trigger name for attaching this animation to an element using the [@triggerName] syntax
            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["trigger"])('slideDown', [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["state"])('hide', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["style"])({ height: 0, overflow: 'hidden' })),
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["state"])('show', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["style"])({ height: '*', overflow: 'unset' })),
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["transition"])('hide <=> show', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["animate"])('200ms ease-in')),
            ])
        ] } });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](TagsComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'tags',
                templateUrl: 'tags.component.html',
                providers: [_hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"]],
                animations: [
                    // trigger name for attaching this animation to an element using the [@triggerName] syntax
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["trigger"])('slideDown', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["state"])('hide', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["style"])({ height: 0, overflow: 'hidden' })),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["state"])('show', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["style"])({ height: '*', overflow: 'unset' })),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["transition"])('hide <=> show', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_7__["animate"])('200ms ease-in')),
                    ])
                ]
            }]
    }], function () { return [{ type: ___WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_5__["Router"] }, { type: _hub_forms_service__WEBPACK_IMPORTED_MODULE_6__["HubFormsService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_5__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/test/datalinkTest-index/datalinkTest-index.component.ts":
/*!******************************************************************************!*\
  !*** ./src/app/+hub/test/datalinkTest-index/datalinkTest-index.component.ts ***!
  \******************************************************************************/
/*! exports provided: DatalinkTestIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatalinkTestIndexComponent", function() { return DatalinkTestIndexComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../+auth/auth.service */ "./src/app/+auth/auth.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
/* harmony import */ var ngx_d_table__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngx-d-table */ "./node_modules/ngx-d-table/__ivy_ngcc__/fesm2015/ngx-d-table.js");
/* harmony import */ var _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/help/dexih-help.component */ "./src/app/shared/help/dexih-help.component.ts");
/* harmony import */ var _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../buttons/dependent-items/dependent-items-button.component */ "./src/app/+hub/buttons/dependent-items/dependent-items-button.component.ts");
/* harmony import */ var _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../buttons/tags-update-button/tags-update-button.component */ "./src/app/+hub/buttons/tags-update-button/tags-update-button.component.ts");
/* harmony import */ var _buttons_actions_datalinkTest_button_actions_datalinkTest_button_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../buttons/actions-datalinkTest-button/actions-datalinkTest-button.component */ "./src/app/+hub/buttons/actions-datalinkTest-button/actions-datalinkTest-button.component.ts");
/* harmony import */ var _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../widgets/datalink-status/datalink-status.component */ "./src/app/+hub/widgets/datalink-status/datalink-status.component.ts");


















function DatalinkTestIndexComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "dependent-items-button", 11);
} if (rf & 2) {
    const item_r8 = ctx.item;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("key", item_r8.key)("objectType", ctx_r1.eSharedObjectType.DatalinkTest);
} }
function DatalinkTestIndexComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "tags-update-button", 12);
} if (rf & 2) {
    const items_r9 = ctx.items;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("objectType", ctx_r3.eSharedObjectType.DatalinkTest)("objects", items_r9);
} }
function DatalinkTestIndexComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "actions-datalinkTest-button", 13);
} if (rf & 2) {
    const items_r10 = ctx.items;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("datalinkTests", items_r10);
} }
function DatalinkTestIndexComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "datalink-status", 14);
} if (rf & 2) {
    const item_r11 = ctx.item;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("datalinkTestKey", item_r11 == null ? null : item_r11.key);
} }
class DatalinkTestIndexComponent {
    constructor(hubService, authService, router, route) {
        this.hubService = hubService;
        this.authService = authService;
        this.router = router;
        this.route = route;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_6__["CancelToken"]();
        this.eSharedObjectType = _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"];
        this.columns = [
            { name: 'name', title: 'Name', format: '', tags: 'tags' },
            { name: 'description', title: 'Description', format: '' },
            { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },
        ];
        this._tableData = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"](null);
        this.tableData = this._tableData.asObservable();
    }
    ngOnInit() {
        try {
            // watch for any changes in the validations.
            this.watchChanges();
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["combineLatest"])(this.hubService.getHubCacheObservable()).subscribe(result => {
                this.hubCache = result[0];
                this.update();
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Datalink Tests Index');
        }
    }
    ngOnDestroy() {
        if (this._hubCacheChangeSubscription) {
            this._hubCacheChangeSubscription.unsubscribe();
        }
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    close() {
        this.authService.navigateUp();
    }
    delete(items) {
        this.hubService.deleteDatalinkTests(items);
    }
    snapshot(items) {
        this.hubService.runDatalinkTestSnapshot(items, this.cancelToken);
    }
    run(items) {
        let keys = items.map(c => c.key);
        this.hubService.runDatalinkTests(keys, this.cancelToken);
    }
    update() {
        if (this.hubCache && this.hubCache.isLoaded()) {
            let items = this.hubCache.hub.dexihDatalinkTests.filter(c => c.isValid).map(c => {
                return {
                    key: c.key,
                    name: c.name,
                    description: c.description,
                    updateDate: c.updateDate,
                    tags: this.hubCache.getObjectTags(_shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].DatalinkTest, c.key)
                };
            });
            this._tableData.next(items);
        }
        else {
            this._tableData.next(null);
        }
    }
    edit(item) {
        this.router.navigate(['datalinkTest-edit', item.key], { relativeTo: this.route });
    }
    export(tests) {
        const cache = this.hubCache;
        const hub = this.hubService.createHub(this.hubCache.hub.hubKey, '');
        hub.dexihDatalinkTests = tests;
        let filename = 'datalink_tests.json';
        this.hubService.exportHub(hub, filename);
    }
    watchChanges() {
        // watch the current validation in case it is changed in another session.
        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {
            if (hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].DatalinkTest ||
                hubCacheChange.changeClass === _shared_shared_models__WEBPACK_IMPORTED_MODULE_5__["eSharedObjectType"].TagObjects) {
                this.update();
            }
        });
    }
}
DatalinkTestIndexComponent.ɵfac = function DatalinkTestIndexComponent_Factory(t) { return new (t || DatalinkTestIndexComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"])); };
DatalinkTestIndexComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DatalinkTestIndexComponent, selectors: [["datalink-test"]], decls: 12, vars: 5, consts: [[1, "container-fluid"], ["title", "Datalink Tests", "iconClass", "fa fa-lg fa-fw fa-flag-checkered", 3, "showCloseButton", "close"], [3, "enableMultiSelect", "columns", "dataObservable", "tags", "rowClick"], ["select", "selectedItemAction"], ["selectedItemAction", ""], ["select", "selectedItemsAction"], ["selectedItemsAction", ""], ["actions", ""], ["select", "rowStatus"], ["rowStatus", ""], ["title", "Datalink Test", "path", "/assets/help/reference/datalinkTest.md", 1, "m-3"], [1, "ml-1", 3, "key", "objectType"], [1, "ml-1", 3, "objectType", "objects"], [3, "datalinkTests"], [3, "datalinkTestKey"]], template: function DatalinkTestIndexComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function DatalinkTestIndexComponent_Template_d_widget_close_1_listener() { return ctx.close(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "d-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rowClick", function DatalinkTestIndexComponent_Template_d_table_rowClick_2_listener($event) { return ctx.edit($event); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, DatalinkTestIndexComponent_ng_template_3_Template, 1, 2, "ng-template", 3, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, DatalinkTestIndexComponent_ng_template_5_Template, 1, 2, "ng-template", 5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, DatalinkTestIndexComponent_ng_template_7_Template, 1, 1, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, DatalinkTestIndexComponent_ng_template_9_Template, 1, 1, "ng-template", 8, 9, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](11, "dexih-help", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("enableMultiSelect", true)("columns", ctx.columns)("dataObservable", ctx.tableData)("tags", ctx.hubCache.hub.dexihTags);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_7__["DWidgetComponent"], ngx_d_table__WEBPACK_IMPORTED_MODULE_8__["DTableComponent"], _shared_help_dexih_help_component__WEBPACK_IMPORTED_MODULE_9__["DexihHelpComponent"], _buttons_dependent_items_dependent_items_button_component__WEBPACK_IMPORTED_MODULE_10__["DependentItemsButtonComponent"], _buttons_tags_update_button_tags_update_button_component__WEBPACK_IMPORTED_MODULE_11__["TagsUpdateButtonComponent"], _buttons_actions_datalinkTest_button_actions_datalinkTest_button_component__WEBPACK_IMPORTED_MODULE_12__["ActionsDatalinkTestButtonComponent"], _widgets_datalink_status_datalink_status_component__WEBPACK_IMPORTED_MODULE_13__["DatalinkStatusComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DatalinkTestIndexComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'datalink-test',
                templateUrl: './datalinkTest-index.component.html',
                styles: []
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_1__["HubService"] }, { type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["ActivatedRoute"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/test/datalinkTest-new/datalinkTest-new.component.ts":
/*!**************************************************************************!*\
  !*** ./src/app/+hub/test/datalinkTest-new/datalinkTest-new.component.ts ***!
  \**************************************************************************/
/*! exports provided: DatalinkTestNewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatalinkTestNewComponent", function() { return DatalinkTestNewComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _hub_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hub.service */ "./src/app/+hub/hub.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _hub_models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../hub.models */ "./src/app/+hub/hub.models.ts");
/* harmony import */ var _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/shared.models */ "./src/app/shared/shared.models.ts");
/* harmony import */ var _auth_auth_models__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../+auth/auth.models */ "./src/app/+auth/auth.models.ts");
/* harmony import */ var ngx_d_components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngx-d-components */ "./node_modules/ngx-d-components/__ivy_ngcc__/fesm2015/ngx-d-components.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};















function DatalinkTestNewComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "d-button-save", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DatalinkTestNewComponent_ng_template_2_Template_d_button_save_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6); const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return !ctx_r5.saving && ctx_r5.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-button-cancel", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function DatalinkTestNewComponent_ng_template_2_Template_d_button_cancel_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6); const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return !ctx_r7.saving && ctx_r7.cancel(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("busy", ctx_r1.saving);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("busy", ctx_r1.saving);
} }
function DatalinkTestNewComponent_ng_template_4_span_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const datalink_r9 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", datalink_r9.name, " ");
} }
function DatalinkTestNewComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "label", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "Create automatic tests for the following datalink(s):");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, DatalinkTestNewComponent_ng_template_4_span_4_Template, 2, 1, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r3.sourceDatalinks);
} }
function DatalinkTestNewComponent_form_6_form_input_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "form-input", 21);
} if (rf & 2) {
    const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("errors", ctx_r10.formErrors.name);
} }
function DatalinkTestNewComponent_form_6_form_input_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "form-input", 22);
} }
function DatalinkTestNewComponent_form_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "section", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, DatalinkTestNewComponent_form_6_form_input_4_Template, 1, 1, "form-input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, DatalinkTestNewComponent_form_6_form_input_5_Template, 1, 0, "form-input", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "section", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "form-select", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "section", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "form-select", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "section", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](12, "form-select", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "fieldset");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "section");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](15, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "section", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](17, "form-checkbox", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r4.mainForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.sourceDatalinks.length == 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.sourceDatalinks.length > 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r4.hubCache.hub.dexihConnections)("errors", ctx_r4.formErrors.auditConnectionKey);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r4.managedConnections)("errors", ctx_r4.formErrors.sourceConnectionKey)("allowNullSelect", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("items", ctx_r4.managedConnections)("errors", ctx_r4.formErrors.targetConnectionKey)("allowNullSelect", true);
} }
class DatalinkTestNewComponent {
    constructor(hubService, route, router, location, fb) {
        this.hubService = hubService;
        this.route = route;
        this.router = router;
        this.location = location;
        this.fb = fb;
        this.cancelToken = new _auth_auth_models__WEBPACK_IMPORTED_MODULE_8__["CancelToken"]();
        this.hasChanged = false;
        this.showAllErrors = false;
        this.saving = false;
        this.formErrors = {
            'name': '',
            'auditConnectionKey': '',
            'sourceConnectionKey': '',
            'targetConnectionKey': '',
            'snapshotData': '',
        };
        this.validationMessages = {
            'name': {
                'required': 'Name is required.',
                'minlength': 'Name must be at least 4 characters long.',
                'maxlength': 'Name cannot be more than 50 characters long.',
            },
            'auditConnectionKey': {},
            'targetConnectionKey': {},
            'sourceConnectionKey': {},
            'snapshotData': {},
        };
    }
    ngOnInit() {
        try {
            this._subscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(this.route.data, this.route.params, this.hubService.getHubCacheObservable()).subscribe(result => {
                let data = result[0];
                let params = result[1];
                this.hubCache = result[2];
                this.managedConnections = this.hubCache.hub.dexihConnections
                    .filter(c => c.purpose === _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eConnectionPurpose"].Managed);
                if (this.hubCache.status === _hub_models__WEBPACK_IMPORTED_MODULE_6__["eCacheStatus"].Loaded) {
                    let datalinkKeys = params['datalinkKeys'];
                    this.sourceDatalinkKeys = new Array();
                    this.sourceDatalinks = new Array();
                    if (datalinkKeys && this.hubCache.hub.dexihConnections) {
                        let datalinkKeyArray = datalinkKeys.split('|');
                        this.hubCache.hub.dexihDatalinks.forEach(datalink => {
                            if (datalinkKeyArray.findIndex(t => t === datalink.key.toString()) >= 0) {
                                this.sourceDatalinkKeys.push(datalink.key);
                                this.sourceDatalinks.push(datalink);
                            }
                        });
                    }
                    let targetConnection = this.hubCache.hub.dexihConnections.find(c => c.purpose === _shared_shared_models__WEBPACK_IMPORTED_MODULE_7__["eConnectionPurpose"].Managed);
                    if (targetConnection) {
                        this.targetConnectionKey = targetConnection.key;
                    }
                    this.sourceConnectionKey = this.targetConnectionKey;
                    this.auditConnectionKey = this.targetConnectionKey;
                    this.buildForm();
                }
            });
        }
        catch (e) {
            this.hubService.addHubClientErrorMessage(e, 'Datalink New');
        }
    }
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
        if (this._valueChangesSubscription) {
            this._valueChangesSubscription.unsubscribe();
        }
        this.cancelToken.cancel();
    }
    buildForm() {
        this.mainForm = this.fb.group({
            'name': [this.name, []],
            'auditConnectionKey': [this.auditConnectionKey > 0 ? this.auditConnectionKey : null, [
                // Validators.required,
                ]],
            'targetConnectionKey': [this.targetConnectionKey > 0 ? this.targetConnectionKey : null, [
                // Validators.required,
                ]],
            'sourceConnectionKey': [this.sourceConnectionKey > 0 ? this.sourceConnectionKey : null, [
                // Validators.required,
                ]],
            'snapshotData': [true, [
                // Validators.required,
                ]],
        });
        if (this._valueChangesSubscription) {
            this._valueChangesSubscription.unsubscribe();
        }
        this._valueChangesSubscription = this.mainForm.valueChanges.subscribe(data => this.onValueChanged(data));
        this.onValueChanged(); // (re)set validation messages now
        this.hasChanged = false;
    }
    onValueChanged(data) {
        if (!this.mainForm) {
            return;
        }
        const form = this.mainForm;
        this.hasChanged = true;
        for (const field of Object.keys(this.formErrors)) {
            // clear previous error message (if any)
            this.formErrors[field] = '';
            const control = form.get(field);
            if (control && (control.dirty || this.showAllErrors) && !control.valid) {
                const messages = this.validationMessages[field];
                for (const key of Object.keys(control.errors)) {
                    this.formErrors[field] += messages[key] + ' ';
                }
            }
        }
    }
    save() {
        if (this.mainForm.valid) {
            let value = this.mainForm.value;
            this.saving = true;
            this.hubService.newDatalinkTest(this.name, this.sourceDatalinkKeys, value.auditConnectionKey, value.targetConnectionKey, value.sourceConnectionKey).then((result) => __awaiter(this, void 0, void 0, function* () {
                if (value.snapshotData) {
                    yield this.hubService.runDatalinkTestSnapshot([result], this.cancelToken);
                }
                this.router.navigate(['/hub', this.hubCache.hub.hubKey, 'datalinkTests', 'datalinkTest-edit', result.key], { relativeTo: this.route.root });
            })).catch(reason => {
                this.saving = false;
            });
        }
        else {
            this.showAllErrors = true;
            this.onValueChanged();
        }
    }
    cancel() {
        this.location.back();
    }
}
DatalinkTestNewComponent.ɵfac = function DatalinkTestNewComponent_Factory(t) { return new (t || DatalinkTestNewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_common__WEBPACK_IMPORTED_MODULE_5__["Location"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"])); };
DatalinkTestNewComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: DatalinkTestNewComponent, selectors: [["dexih-datalinkTest-new-form"]], decls: 7, vars: 3, consts: [[1, "container"], ["title", "New Datalink Test(s)", "iconClass", "fa fa-lg fa-fw fa-exchange", 3, "showCloseButton", "padding", "close"], ["header", ""], ["subHeader", ""], [3, "formGroup", 4, "ngIf"], [1, "mr-1", 3, "busy", "click"], [3, "busy", "click"], [1, "label"], [1, "list-group", "d-inline-block"], ["class", "list-group-item", 4, "ngFor", "ngForOf"], [1, "list-group-item"], [3, "formGroup"], [1, "form-row"], [1, "form-group", "col-md-6"], ["label", "Test Name", "formControlName", "name", "placeholder", "Test name (leave blank for auto naming)", "iconClass", "fa fa-comment", 3, "errors", 4, "ngIf"], ["disabled", "", "label", "Test Name", "placeholder", "Test name can not be specified when creating multiple tests.", "iconClass", "fa fa-comment", 4, "ngIf"], ["label", "Audit Connection", "formControlName", "auditConnectionKey", "itemKey", "key", "itemName", "name", "iconClass", "fa fa-database", "note", "Connection where test results are stored.", 3, "items", "errors"], ["formControlName", "sourceConnectionKey", "label", "Input Connection", "itemKey", "key", "itemName", "name", "note", "Specify the connection to use for any datalink source data.", "selectNullMessage", "No source table", 3, "items", "errors", "allowNullSelect"], ["formControlName", "targetConnectionKey", "label", "Target Connection", "itemKey", "key", "itemName", "name", "note", "Specify the connection for target data.", "selectNullMessage", "No target table", 3, "items", "errors", "allowNullSelect"], [1, "col", "col-11"], ["label", "Snapshot and copy current source/target data into the test connections.", "formControlName", "snapshotData", "name", "snapshotData"], ["label", "Test Name", "formControlName", "name", "placeholder", "Test name (leave blank for auto naming)", "iconClass", "fa fa-comment", 3, "errors"], ["disabled", "", "label", "Test Name", "placeholder", "Test name can not be specified when creating multiple tests.", "iconClass", "fa fa-comment"]], template: function DatalinkTestNewComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "d-widget", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("close", function DatalinkTestNewComponent_Template_d_widget_close_1_listener() { return !ctx.saving && ctx.cancel(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, DatalinkTestNewComponent_ng_template_2_Template, 2, 2, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, DatalinkTestNewComponent_ng_template_4_Template, 5, 1, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, DatalinkTestNewComponent_form_6_Template, 18, 11, "form", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showCloseButton", true)("padding", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.sourceDatalinkKeys);
    } }, directives: [ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DWidgetComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_5__["NgIf"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonSaveComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DButtonCancelComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_5__["NgForOf"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormGroupDirective"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DFormSelectComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControlName"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DFormCheckboxComponent"], ngx_d_components__WEBPACK_IMPORTED_MODULE_9__["DFormInputComponent"]], encapsulation: 2 });
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DatalinkTestNewComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'dexih-datalinkTest-new-form',
                templateUrl: './datalinkTest-new.component.html'
            }]
    }], function () { return [{ type: _hub_service__WEBPACK_IMPORTED_MODULE_3__["HubService"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"] }, { type: _angular_router__WEBPACK_IMPORTED_MODULE_1__["Router"] }, { type: _angular_common__WEBPACK_IMPORTED_MODULE_5__["Location"] }, { type: _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"] }]; }, null); })();


/***/ }),

/***/ "./src/app/+hub/test/index.ts":
/*!************************************!*\
  !*** ./src/app/+hub/test/index.ts ***!
  \************************************/
/*! exports provided: DatalinkTestIndexComponent, DatalinkTestNewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _datalinkTest_index_datalinkTest_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./datalinkTest-index/datalinkTest-index.component */ "./src/app/+hub/test/datalinkTest-index/datalinkTest-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatalinkTestIndexComponent", function() { return _datalinkTest_index_datalinkTest_index_component__WEBPACK_IMPORTED_MODULE_0__["DatalinkTestIndexComponent"]; });

/* harmony import */ var _datalinkTest_new_datalinkTest_new_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./datalinkTest-new/datalinkTest-new.component */ "./src/app/+hub/test/datalinkTest-new/datalinkTest-new.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatalinkTestNewComponent", function() { return _datalinkTest_new_datalinkTest_new_component__WEBPACK_IMPORTED_MODULE_1__["DatalinkTestNewComponent"]; });





/***/ }),

/***/ "./src/app/+hub/view/view-edit/index.ts":
/*!**********************************************!*\
  !*** ./src/app/+hub/view/view-edit/index.ts ***!
  \**********************************************/
/*! exports provided: ViewEditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _view_edit_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./view-edit.component */ "./src/app/+hub/view/view-edit/view-edit.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewEditComponent", function() { return _view_edit_component__WEBPACK_IMPORTED_MODULE_0__["ViewEditComponent"]; });




/***/ }),

/***/ "./src/app/+hub/view/view-index/index.ts":
/*!***********************************************!*\
  !*** ./src/app/+hub/view/view-index/index.ts ***!
  \***********************************************/
/*! exports provided: ViewIndexComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _view_index_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./view-index.component */ "./src/app/+hub/view/view-index/view-index.component.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewIndexComponent", function() { return _view_index_component__WEBPACK_IMPORTED_MODULE_0__["ViewIndexComponent"]; });




/***/ })

}]);
//# sourceMappingURL=6-es2015.js.map