{"version":3,"sources":["webpack:///src/app/+hub/datajob/datajob-edit/datajob-edit.routing.ts","webpack:///src/app/+hub/datajob/datajob-edit/step-edit/datajob-edit-step.component.ts","webpack:///src/app/+hub/datajob/datajob-edit/step-edit/datajob-edit-step.component.html","webpack:///src/app/+hub/datajob/datajob-edit/trigger-edit/dexih-form-daysofweek.component.ts","webpack:///src/app/+hub/datajob/datajob-edit/trigger-edit/dexih-form-daysofweek.component.html","webpack:///src/app/+hub/datajob/datajob-edit/steps-add/datajob-add-steps.component.ts","webpack:///src/app/+hub/datajob/datajob-edit/steps-add/datajob-add-steps.component.html","webpack:///src/app/+hub/datajob/datajob-edit/datajob-edit-guard.ts","webpack:///src/app/+hub/datajob/datajob-edit/properties/datajob-edit-properties.component.ts","webpack:///src/app/+hub/datajob/datajob-edit/properties/datajob-edit-properties.component.html","webpack:///src/app/+hub/datajob/datajob-edit/trigger-edit/datajob-edit-trigger.component.ts","webpack:///src/app/+hub/datajob/datajob-edit/trigger-edit/datajob-edit-trigger.component.html","webpack:///src/app/+hub/datajob/datajob-edit/datajob-edit.module.ts"],"names":["datajobEditRoutes","path","redirectTo","data","navigateSkip","component","pageTitle","routes","canDeactivate","children","Routing","forChild","DatajobEditStepComponent","hubService","authService","formService","route","fb","showAllErrors","stepColumns","name","title","format","tags","_stepTableData","stepTableData","asObservable","stepFormService","_subscription","params","getHubCacheObservable","getCurrentFormObservable","subscribe","result","hubCache","mainForm","isLoaded","datalinkStepKey","datajobForm","step","value","dexihDatalinkSteps","find","c","key","navigateUp","minKey","forEach","t","stepForm","datalinkStepFormGroup","startForm","updateSteps","_datalinkSubscription","controls","datalinkKey","valueChanges","updateDatalinkStepColumns","e","addHubClientErrorMessage","unsubscribe","stepData","currentForm","datalink","hub","dexihDatalinks","push","getObjectTags","Datalink","dependencies","updateDate","next","stepParameters","parameters","currentParameters","clear","parameter","currentParameter","newParameter","newFormParameter","stepColumnsForm","dexihDatalinkStepColumns","length","removeAt","inputColumns","sourceDatalinkTable","dexihDatalinkColumns","filter","isInput","col","stepColumn","defaultValue","dataType","logicalName","columnGroup","rank","maxLength","deltaType","allowDbNull","isUnicode","isValid","stepColumnForm","datalinkStepColumnFormGroup","setValue","items","datalinkDependencies","dexihDatalinkDependencies","dep","valid","newDep","oldDep","dependentDatalinkStepKey","datalinkDependencyFormGroup","hasChanged","stepsArray","index","findIndex","insert","selector","templateUrl","sharedFunctions","DexihFormDaysOfWeekComponent","_changeDetectionRef","eDayOfWeek","daysOfWeek","Array","id","Math","random","toString","substr","onChange","onTouched","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","detectChanges","$event","fn","provide","useExisting","multi","selectAllDays","selectNoDays","selectWeekend","selectWeekDays","providers","label","labelLeft","note","errors","DatajobAddStepsComponent","router","columns","_tableData","tableData","updateDatalinks","_hubCacheChangeSubscription","newDatalinks","datalinks","map","d","sourceTable","getTable","sourceTableKey","datalinkType","sourceTableName","targetTableName","dexihDatalinkTargets","target","table","tableKey","join","getHubCacheChangeObservable","hubCacheChange","changeClass","existingDatalinks","formDexihDatalinkSteps","item","exists","names","confirmDialog","then","confirm","addSelectedConfirmed","reason","newDatalinkStep","i","datajobKey","stepFormGroup","DatajobEditGuard","DatajobEditPropertiesComponent","datajobChanged","failActions","Continue","ContinueNonDependent","Abend","triggerColumns","_triggerTableData","triggerTableData","eAlertLevelItems","eAlertLevel","isFirst","queryParams","option","managedConnections","getManagedConnections","updateTriggers","steps","updateDependencies","triggerData","triggers","triggerControl","trigger","details","getTriggerDetails","sort","a","b","position","stepControl","getDependencies","inputs","getInputs","depString","column","navigate","relativeTo","parent","queryParamsHandling","triggersArray","dexihTriggers","allSteps","stepTargets","tables","getDatalinkTargetTables","sourceTables","getDatalinkSourceTables","stepTarget","indexOf","getDatalinkTable","dexihDatalinkTransforms","transform","joinDatalinkTable","joinTables","datalinkTable","sourceType","Table","sourceDatalinkKey","history","pushState","navigateByUrl","window","location","pathname","changeOption","editTrigger","stepSortChanged","editDatalinkStep","DatajobEditTriggerComponent","triggerFormService","action","triggerKey","triggerForm","originalTrigger","triggerFormGroup","DatajobEditModule","ngModule","imports","declarations","exports"],"mappings":"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","file":"3-es5.js","sourcesContent":["import { Routes, RouterModule } from '@angular/router';\nimport { DatajobEditComponent } from './datajob-edit.component';\nimport { DatajobEditPropertiesComponent } from './properties/datajob-edit-properties.component';\nimport { DatajobEditTriggerComponent } from './trigger-edit/datajob-edit-trigger.component';\nimport { DatajobEditStepComponent } from './step-edit/datajob-edit-step.component';\nimport { DatajobAddStepsComponent } from './steps-add/datajob-add-steps.component';\nimport { DatajobEditGuard} from './datajob-edit-guard';\n\nexport const datajobEditRoutes = [\n        { path: '', redirectTo: 'properties',  data: { navigateSkip: true}},\n        { path: 'properties', component: DatajobEditPropertiesComponent, data: { navigateSkip: true, pageTitle: 'Properties' } },\n        { path: 'trigger', component: DatajobEditTriggerComponent, data: { pageTitle: 'New Trigger' } },\n        { path: 'trigger/:triggerKey', component: DatajobEditTriggerComponent, data: { pageTitle: 'Edit Trigger' }  },\n        { path: 'step', component: DatajobEditStepComponent, data: { pageTitle: 'New Step' }  },\n        { path: 'step/:datalinkStepKey', component: DatajobEditStepComponent, data: { pageTitle: 'Edit Step' }  },\n        { path: 'add-steps', component: DatajobAddStepsComponent, data: { pageTitle: 'Add Multiple Steps' }  }\n];\n\nexport const routes: Routes = [\n        { path: '', component: DatajobEditComponent, canDeactivate: [DatajobEditGuard], children: datajobEditRoutes},\n];\n\n\nexport const Routing = RouterModule.forChild(routes);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { HubService } from '../../../hub.service';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { FormGroup, FormArray, FormBuilder } from '@angular/forms';\nimport { AuthService } from '../../../../+auth/auth.service';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { HubCache, DexihInputParameter } from '../../../hub.models';\nimport { InputColumn, DexihDatalinkStep, DexihDatalinkStepColumn, DexihDatalinkDependency, InputParameterBase, eSharedObjectType } from '../../../../shared/shared.models';\n\n@Component({\n    selector: 'datajob-edit-step',\n    templateUrl: './datajob-edit-step.component.html'\n})\nexport class DatajobEditStepComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n    private _datalinkSubscription: Subscription;\n\n    public hubCache: HubCache;\n\n    private datalinkStepKey: number;\n    datajobKey: number;\n\n    datajobForm: FormGroup;\n\n    stepFormService: HubFormsService;\n    showAllErrors = false;\n\n    public inputColumns: InputColumn[];\n\n    stepColumns = [\n        { name: 'name', title: 'Name', format: '', tags: 'tags' },\n        { name: 'datalink', title: 'Datalink', format: '' },\n        { name: 'dependencies', title: 'Dependencies', format: '' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _stepTableData = new BehaviorSubject<Array<any>>(null);\n    stepTableData: Observable<Array<any>> = this._stepTableData.asObservable();\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        public formService: HubFormsService,\n        private route: ActivatedRoute,\n        fb: FormBuilder) {\n        // create a separate formService instance to manage the copied form\n        this.stepFormService = new HubFormsService(fb, hubService, authService);\n    }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest([\n                this.route.data,\n                this.route.params,\n                this.hubService.getHubCacheObservable(),\n                this.formService.getCurrentFormObservable()]\n            ).subscribe(result => {\n                let params = result[1];\n                this.hubCache = result[2];\n                let mainForm = result[3];\n\n                if (!this.hubCache.isLoaded()) { return; }\n\n                this.datalinkStepKey = +params['datalinkStepKey'];\n\n                if (mainForm) {\n                    this.datajobForm = mainForm;\n                    let step: DexihDatalinkStep;\n\n                    if (this.datalinkStepKey) {\n                        step = mainForm.value.dexihDatalinkSteps\n                            .find(c => c.key === this.datalinkStepKey);\n\n                        if (!step) {\n                            this.authService.navigateUp();\n                            return;\n                        }\n                    } else {\n                        step = new DexihDatalinkStep();\n                        // if new step, then set a temporary key of -1 or lower.\n                        let minKey = -1;\n                        this.datajobForm.value.dexihDatalinkSteps.forEach(t => {\n                            if (t.key <= minKey) {\n                                minKey = t.key - 1;\n                            }\n                        });\n                        step.key = minKey;\n                        this.datalinkStepKey = minKey;\n                    }\n\n                    const stepForm = this.stepFormService.datalinkStepFormGroup(mainForm, step);\n                    this.stepFormService.startForm(stepForm);\n                    this.updateSteps();\n\n                    this._datalinkSubscription = stepForm.controls.datalinkKey.valueChanges.subscribe(datalinkKey => {\n                        this.updateDatalinkStepColumns(datalinkKey);\n                    });\n                }\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datajob Edit Step');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._datalinkSubscription) { this._datalinkSubscription.unsubscribe(); }\n    }\n\n    updateSteps() {\n        let stepData = [];\n        if (this.datajobForm.value.dexihDatalinkSteps) {\n            this.datajobForm.value.dexihDatalinkSteps.forEach(step => {\n                if (step.key !== this.stepFormService.currentForm.value.key) {\n                    let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === step.datalinkKey);\n                    stepData.push({\n                        key: step.key,\n                        name: step.name,\n                        datalink: datalink ? datalink.name : 'Not specified',\n                        tags: this.hubCache.getObjectTags(eSharedObjectType.Datalink, datalink.key),\n                        dependencies: '',\n                        updateDate: step.updateDate\n                    });\n                }\n            });\n        }\n\n        this._stepTableData.next(stepData);\n    }\n\n    updateDatalinkStepColumns(datalinkKey: number) {\n\n        let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === datalinkKey);\n        let stepForm = <FormGroup>this.stepFormService.currentForm;\n        let stepParameters = <FormArray>stepForm.controls.parameters;\n\n        let currentParameters = <DexihInputParameter[]> stepParameters.value;\n        stepParameters.clear();\n\n        datalink.parameters.forEach(parameter => {\n            let currentParameter = currentParameters.find( c => c.name === parameter.name);\n            let newParameter = new InputParameterBase();\n            if (currentParameter) {\n                newParameter.name = currentParameter.name;\n                newParameter.value = currentParameter.value;\n            } else {\n                newParameter.name = parameter.name;\n                newParameter.value = parameter.value;\n            }\n            let newFormParameter = this.formService.parameter(newParameter);\n            stepParameters.push(newFormParameter);\n        });\n\n\n\n        let stepColumnsForm = <FormArray>stepForm.controls.dexihDatalinkStepColumns;\n        let stepColumns = <DexihDatalinkStepColumn[]> stepColumnsForm.value;\n\n        while (stepColumnsForm.length !== 0) {\n            stepColumnsForm.removeAt(0)\n        }\n\n        let inputColumns = datalink.sourceDatalinkTable.dexihDatalinkColumns.filter(c => c.isInput);\n\n        inputColumns.forEach(col => {\n            let stepColumn = stepColumns.find(c => c.name === col.name);\n            if (!stepColumn) {\n                stepColumn = new DexihDatalinkStepColumn();\n                stepColumn.defaultValue = col.defaultValue;\n            }\n            stepColumn.dataType = col.dataType;\n            stepColumn.name = col.name;\n            stepColumn.logicalName = col.logicalName;\n            stepColumn.columnGroup = col.columnGroup;\n            stepColumn.rank = col.rank;\n            stepColumn.maxLength = col.maxLength;\n            stepColumn.deltaType = col.deltaType;\n            stepColumn.allowDbNull = col.allowDbNull;\n            stepColumn.isUnicode = col.isUnicode;\n            stepColumn.isValid = true;\n\n            let stepColumnForm = this.formService.datalinkStepColumnFormGroup(stepColumn);\n            stepColumnsForm.push(stepColumnForm);\n        });\n\n        if (!stepForm.controls.name.value) {\n            stepForm.controls.name.setValue(datalink.name);\n        }\n    }\n\n    dependentStepsChange(items) {\n        let datalinkDependencies = <FormArray>this.stepFormService.currentForm.controls.dexihDatalinkDependencies;\n        let minKey = -1;\n        if (datalinkDependencies) {\n            datalinkDependencies.controls.forEach(dep => {\n                if (dep.valid['key'] <= minKey) {\n                    minKey = dep['key'] - 1;\n                }\n            });\n        }\n\n        while (datalinkDependencies.length > 0) {\n            datalinkDependencies.removeAt(0);\n        }\n\n        items.forEach(newDep => {\n            let oldDep = datalinkDependencies ?\n                datalinkDependencies.controls.find(c => c.value.datalinkStepKey === newDep.datalinkStepKey)\n                : null;\n            if (oldDep) {\n                datalinkDependencies.push(oldDep);\n            } else {\n                let dep = new DexihDatalinkDependency();\n                dep.key = minKey;\n                dep.datalinkStepKey = this.datalinkStepKey;\n                dep.dependentDatalinkStepKey = newDep.key;\n                datalinkDependencies.push(this.stepFormService.datalinkDependencyFormGroup(dep));\n                minKey--;\n            }\n        });\n\n        this.stepFormService.hasChanged = true;\n    }\n\n    cancel() {\n        this.authService.navigateUp();\n    }\n\n    applyExit() {\n        const stepForm = this.stepFormService.currentForm;\n        const stepsArray = <FormArray>this.datajobForm.controls.dexihDatalinkSteps;\n\n        const index = stepsArray.controls\n            .findIndex(c => c.value.key === stepForm.value.key && c.value.isValid);\n\n        if (index < 0) {\n            stepsArray.push(stepForm);\n        } else {\n            stepsArray.removeAt(index);\n            stepsArray.insert(index, stepForm);\n        }\n\n        this.authService.navigateUp();\n    }\n}\n","<d-tabs [padding]=\"false\" title=\"Edit Job Step\">\n\t<ng-template #tabsHeader>\n\t\t<d-button-apply class=\"mr-1\" [disabled]=\"!stepFormService.hasChanged\" (click)=\"applyExit()\">\n\t\t</d-button-apply>\n\t\t<d-button-cancel (click)=\"cancel()\"></d-button-cancel>\n\t</ng-template>\n\n<d-tab *ngIf=\"stepFormService.currentForm\" title=\"Properties\" >\n\t<form [formGroup]=\"stepFormService.currentForm\">\n\t\t<fieldset>\n\t\t\t<section>\n\t\t\t\t<form-input label=\"Data Step Name\" formControlName=\"name\" placeholder=\"Enter the step name.\"\n\t\t\t\t\t[autocapitalize]=\"true\" iconClass=\"fa fa-list\" [errors]=\"stepFormService.formErrors.name\"\n\t\t\t\t\tnote=\"Enter a name for the data step, blank will use datalink name.\">\n\t\t\t\t</form-input>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<form-select label=\"Data Link\" formControlName=\"datalinkKey\" [items]=\"hubCache.hub.dexihDatalinks\"\n\t\t\t\t\titemKey=\"key\" itemName=\"name\" [errors]=\"stepFormService.formErrors.datalinkKey\"\n\t\t\t\t\ticonClass=\"fa fa-database\">\n\t\t\t\t\t<datalink-edit-button [key]=\"stepFormService.currentForm.controls.datalinkKey.value\"></datalink-edit-button>\n\t\t\t\t</form-select>\n\t\t\t</section>\n\t\t</fieldset>\n\n\t\t<div class=\"d-flex flex-wrap pt-1\"\n\t\t\t*ngIf=\"stepFormService.currentForm.controls.dexihDatalinkStepColumns.controls.length > 0\">\n\t\t\t<div>\n\t\t\t\tInput Values\n\t\t\t</div>\n\n\t\t\t<span\n\t\t\t\t*ngFor=\"let column of stepFormService.currentForm.controls.dexihDatalinkStepColumns.controls; let i = index\"\n\t\t\t\tclass=\"input-group\">\n\t\t\t\t<div class=\"input-group-prepend\">\n\t\t\t\t\t<div class=\"input-group-text\">\n\t\t\t\t\t\t{{column.value.logicalName}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<form-input class=\"form-control p-0\" [placeholder]=\"column.value.logicalName\" [autocapitalize]=\"true\"\n\t\t\t\t\t[formControl]=\"column.controls.defaultValue\"></form-input>\n\t\t\t</span>\n\t\t</div>\n\t</form>\n</d-tab>\n\n<d-tab *ngIf=\"stepFormService.currentForm\" title=\"Parameters\"  [padding]=\"false\" [padding]=\"true\">\n\t<input-parameters [showEdit]=\"true\" [parameters]=\"stepFormService.currentForm.controls.parameters\" [formsService]=\"formService\" [parentParameters]=\"formService.currentForm.controls.parameters.value\">\n\t</input-parameters>\n</d-tab>\n\n<d-tab *ngIf=\"stepFormService.currentForm\" title=\"Dependent Steps\" \n\t[padding]=\"false\">\n\t<d-table *ngIf=\"stepFormService.currentForm\" [enableMultiSelect]=\"true\" [columns]=\"stepColumns\"\n\t\t[dataObservable]=\"stepTableData\" [(selectedItems)]=\"stepFormService.currentForm.value.dexihDatalinkDependencies\"\n\t\t(onSelectedChange)=\"dependentStepsChange($event)\" keyColumn=\"key\" selectedKeyColumn=\"dependentDatalinkStepKey\" [tags]=\"this.hubCache.hub.dexihTags\">\n\t</d-table>\n</d-tab>\n</d-tabs>","import { Component, forwardRef, Input, AfterViewInit, ChangeDetectorRef } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { eDayOfWeek } from '../../../../shared/shared.models';\n\n@Component({\n    selector: 'daysofweek',\n    templateUrl: './dexih-form-daysofweek.component.html',\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => DexihFormDaysOfWeekComponent), multi: true }]\n})\nexport class DexihFormDaysOfWeekComponent implements ControlValueAccessor, AfterViewInit {\n    @Input() label: string;\n    @Input() labelLeft: string;\n    @Input() note: string;\n    @Input() errors: string;\n    @Input() value: eDayOfWeek[];\n\n    eDayOfWeek = eDayOfWeek;\n    daysOfWeek = new Array<Boolean>(7);\n    id = 'input_' + Math.random().toString(36).substr(2, 9);\n\n    onChange: any = () => { };\n    onTouched: any = () => { };\n\n    constructor(private _changeDetectionRef: ChangeDetectorRef) {\n\n    }\n\n    ngAfterViewInit()  {\n        if (this.value) {\n            this.value.forEach(value => {\n                switch (value) {\n                    case eDayOfWeek.Sunday: this.daysOfWeek[0] = true; break;\n                    case eDayOfWeek.Monday: this.daysOfWeek[1] = true; break;\n                    case eDayOfWeek.Tuesday: this.daysOfWeek[2] = true; break;\n                    case eDayOfWeek.Wednesday: this.daysOfWeek[3] = true; break;\n                    case eDayOfWeek.Thursday: this.daysOfWeek[4] = true; break;\n                    case eDayOfWeek.Friday: this.daysOfWeek[5] = true; break;\n                    case eDayOfWeek.Saturday: this.daysOfWeek[6] = true; break;\n                }\n            });\n        }\n\n        // workaround for change detection required when using Afterview Init https://github.com/angular/angular/issues/6005\n        this._changeDetectionRef.detectChanges();\n    }\n\n    hasChanged($event: any) {\n        let daysOfWeek = new Array<eDayOfWeek>();\n        if (this.daysOfWeek[0]) { daysOfWeek.push(eDayOfWeek.Sunday); }\n        if (this.daysOfWeek[1]) { daysOfWeek.push(eDayOfWeek.Monday); }\n        if (this.daysOfWeek[2]) { daysOfWeek.push(eDayOfWeek.Tuesday); }\n        if (this.daysOfWeek[3]) { daysOfWeek.push(eDayOfWeek.Wednesday); }\n        if (this.daysOfWeek[4]) { daysOfWeek.push(eDayOfWeek.Thursday); }\n        if (this.daysOfWeek[5]) { daysOfWeek.push(eDayOfWeek.Friday); }\n        if (this.daysOfWeek[6]) { daysOfWeek.push(eDayOfWeek.Saturday); }\n\n        this.value = daysOfWeek;\n\n        this.onChange(this.value);\n        this.onTouched();\n    }\n\n    registerOnChange(fn: any) {\n        this.onChange = fn;\n    }\n\n    registerOnTouched(fn: any) {\n        this.onTouched = fn;\n    }\n\n    writeValue(value: any) {\n        if (value) {\n            this.value = value;\n        }\n    }\n\n    selectWeekend() {\n      this.daysOfWeek[0] = true;\n      this.daysOfWeek[1] = false;\n      this.daysOfWeek[2] = false;\n      this.daysOfWeek[3] = false;\n      this.daysOfWeek[4] = false;\n      this.daysOfWeek[5] = false;\n      this.daysOfWeek[6] = true;\n      this.hasChanged(null);\n  }\n\n  selectWeekDays() {\n      this.daysOfWeek[0] = false;\n      this.daysOfWeek[1] = true;\n      this.daysOfWeek[2] = true;\n      this.daysOfWeek[3] = true;\n      this.daysOfWeek[4] = true;\n      this.daysOfWeek[5] = true;\n      this.daysOfWeek[6] = false;\n      this.hasChanged(null);\n  }\n\n    selectAllDays() {\n      this.daysOfWeek[0] = true;\n      this.daysOfWeek[1] = true;\n      this.daysOfWeek[2] = true;\n      this.daysOfWeek[3] = true;\n      this.daysOfWeek[4] = true;\n      this.daysOfWeek[5] = true;\n      this.daysOfWeek[6] = true;\n      this.hasChanged(null);\n  }\n\n    selectNoDays() {\n      this.daysOfWeek[0] = false;\n      this.daysOfWeek[1] = false;\n      this.daysOfWeek[2] = false;\n      this.daysOfWeek[3] = false;\n      this.daysOfWeek[4] = false;\n      this.daysOfWeek[5] = false;\n      this.daysOfWeek[6] = false;\n      this.hasChanged(null);\n    }\n}\n","<div class=\"form-group\">\n    <label [for]=\"id\" class=\"mt-1\">{{label}}\n        <div class=\"input-group\">\n            <div class=\"input-group-prepend\">\n                <a class=\"btn btn-outline-primary btn-sm\" (click)=\"selectAllDays()\">All</a>\n                <a class=\"btn btn-outline-primary btn-sm\" (click)=\"selectNoDays()\">None</a>\n                <a class=\"btn btn-outline-primary btn-sm\" (click)=\"selectWeekend()\">Weekend</a>\n            </div>\n            <div class=\"input-group-append\">\n                <a class=\"btn btn-outline-primary btn-sm\" (click)=\"selectWeekDays()\">Weekdays</a>\n            </div>\n        </div>\n        <ng-content></ng-content>\n    </label>\n\n    <div class=\"input-group\">\n        <div class=\"form-check form-check-inline\">\n            <input class=\"form-check-input\" type=\"checkbox\" [id]=\"id + '1'\" [(ngModel)]=\"daysOfWeek[0]\"\n                (ngModelChange)=\"hasChanged($event)\">\n            <label class=\"form-check-label\" [for]=\"id + '1'\">Sunday</label>\n        </div>\n        <div class=\"form-check form-check-inline\">\n            <input class=\"form-check-input\" type=\"checkbox\" [id]=\"id + '2'\" [(ngModel)]=\"daysOfWeek[1]\"\n                (ngModelChange)=\"hasChanged($event)\">\n            <label class=\"form-check-label\" [for]=\"id + '2'\">Monday</label>\n        </div>\n        <div class=\"form-check form-check-inline\">\n            <input class=\"form-check-input\" type=\"checkbox\" [id]=\"id + '3'\" [(ngModel)]=\"daysOfWeek[2]\"\n                (ngModelChange)=\"hasChanged($event)\">\n            <label class=\"form-check-label\" [for]=\"id + '3'\">Tuesday</label>\n        </div>\n        <div class=\"form-check form-check-inline\">\n            <input class=\"form-check-input\" type=\"checkbox\" [id]=\"id + '4'\" [(ngModel)]=\"daysOfWeek[3]\"\n                (ngModelChange)=\"hasChanged($event)\">\n            <label class=\"form-check-label\" [for]=\"id + '4'\">Wednesday</label>\n        </div>\n        <div class=\"form-check form-check-inline\">\n            <input class=\"form-check-input\" type=\"checkbox\" [id]=\"id + '5'\" [(ngModel)]=\"daysOfWeek[4]\"\n                (ngModelChange)=\"hasChanged($event)\">\n            <label class=\"form-check-label\" [for]=\"id + '5'\">Thursday</label>\n        </div>\n        <div class=\"form-check form-check-inline\">\n            <input class=\"form-check-input\" type=\"checkbox\" [id]=\"id + '6'\" [(ngModel)]=\"daysOfWeek[5]\"\n                (ngModelChange)=\"hasChanged($event)\">\n            <label class=\"form-check-label\" [for]=\"id + '6'\">Friday</label>\n        </div>\n        <div class=\"form-check form-check-inline\">\n            <input class=\"form-check-input\" type=\"checkbox\" [id]=\"id + '7'\" [(ngModel)]=\"daysOfWeek[6]\"\n                (ngModelChange)=\"hasChanged($event)\">\n            <label class=\"form-check-label\" [for]=\"id + '7'\">Saturday</label>\n        </div>\n\n    </div>\n    <div *ngIf=\"errors\" class=\"invalid-feedback d-block\">\n        {{ errors }}\n    </div>\n\n\n    <small *ngIf=\"note\" class=\"form-text text-muted\">\n        <markdown (click)=\"sharedFunctions.getRoute($event)\" [data]=\"note\"></markdown>\n    </small>\n</div>","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HubService } from '../../../hub.service';\nimport { Observable, BehaviorSubject, Subscription, combineLatest} from 'rxjs';\nimport { AuthService } from '../../../../+auth/auth.service';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { FormGroup, FormArray } from '@angular/forms';\nimport { HubCache } from '../../../hub.models';\nimport { DexihDatalink, eSharedObjectType, DexihDatalinkStep, eDatalinkType } from '../../../../shared/shared.models';\n\n@Component({\n    selector: 'datajob-add-steps',\n    templateUrl: './datajob-add-steps.component.html'\n})\nexport class DatajobAddStepsComponent implements OnInit, OnDestroy {\n    private _subscription: Subscription;\n    private _hubCacheChangeSubscription: Subscription;\n\n    public hubCache: HubCache;\n\n    hasChanged = false;\n\n    columns = [\n        { name: 'name', title: 'Name', format: '', tags: 'tags' },\n        { name: 'datalinkType', title: 'Datalink Type', enum: eDatalinkType, format: 'Enum' },\n        { name: 'sourceTableName', title: 'Source Table', format: '' },\n        { name: 'targetTableName', title: 'Target Table', format: '' },\n        { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    ];\n\n    private _tableData = new BehaviorSubject<Array<any>>(null);\n    tableData: Observable<Array<any>> = this._tableData.asObservable();\n\n  public mainForm: FormGroup;\n\n    constructor(\n        private hubService: HubService,\n        private authService: AuthService,\n        private formService: HubFormsService,\n        private route: ActivatedRoute,\n        private router: Router) { }\n\n    ngOnInit() {\n        try {\n            this._subscription = combineLatest([\n                this.hubService.getHubCacheObservable(),\n                this.formService.getCurrentFormObservable()]\n            ).subscribe(result => {\n                this.hubCache = result[0];\n                this.mainForm = result[1];\n\n                this.updateDatalinks();\n            });\n        } catch (e) {\n            this.hubService.addHubClientErrorMessage(e, 'Datalink Index');\n        }\n\n    }\n\n    ngOnDestroy() {\n        if (this._subscription) { this._subscription.unsubscribe(); }\n        if (this._hubCacheChangeSubscription) { this._hubCacheChangeSubscription.unsubscribe(); }\n    }\n\n    changeEvent($event) {\n        this.hasChanged = true;\n    }\n\n    private updateDatalinks() {\n        let newDatalinks: Array<DexihDatalink>;\n        if (this.hubCache) {\n            if (!this.hubCache.hub.dexihDatalinks) {\n                this._tableData.next(new Array<DexihDatalink>());\n            } else {\n                let datalinks = this.hubCache.hub.dexihDatalinks.map(d => {\n                    let sourceTable = this.hubCache.getTable(d.sourceDatalinkTable.sourceTableKey);\n                    return {\n                        key: d.key,\n                        name: d.name,\n                        datalinkType: d.datalinkType,\n                        sourceTableName: sourceTable ? sourceTable.name : 'No source table',\n                        targetTableName:  d.dexihDatalinkTargets.map(target => {\n                            let table = this.hubCache.getTable(target.tableKey);\n                            if (table) {\n                                return table.name;\n                            }\n                        }).join(', '),\n                        updateDate: d.updateDate,\n                        tags: this.hubCache.getObjectTags(eSharedObjectType.Datalink, d.key),\n                    };\n                });\n\n                this._tableData.next(datalinks);\n            }\n        }\n\n    }\n\n    watchChanges() {\n        // watch the current connection in case it is changed in another session.\n        this._hubCacheChangeSubscription = this.hubService.getHubCacheChangeObservable().subscribe(hubCacheChange => {\n            if (hubCacheChange.changeClass === eSharedObjectType.Datalink) {\n                this.updateDatalinks();\n            }\n        });\n    }\n\n    close() {\n        this.authService.navigateUp();\n    }\n\n    addSelected(items: Array<DexihDatalink>) {\n        let existingDatalinks = new Array<string>();\n        let formDexihDatalinkSteps = this.mainForm.value.dexihDatalinkSteps;\n        items.forEach(item => {\n            let exists = formDexihDatalinkSteps.find(c => c.datalinkKey === item.key);\n            if (exists) {\n                existingDatalinks.push(item.name);\n            }\n        });\n\n        if (existingDatalinks.length > 0) {\n            let names = existingDatalinks.join(', ');\n            this.authService.confirmDialog('Warning duplicate datalinks',\n            'The following datalinks already exist as steps within the job.  ' + names +\n            '.<br />Are you sure you want these datalinks added to the job').then( confirm => {\n                if (confirm) {\n                this.addSelectedConfirmed(items);\n                }\n            }).catch(reason => {});\n        } else {\n            this.addSelectedConfirmed(items);\n        }\n\n    }\n\n    addSelectedConfirmed(items: Array<DexihDatalink>) {\n        let formDexihDatalinkSteps = <Array<DexihDatalinkStep>> this.mainForm.value.dexihDatalinkSteps;\n\n        let minKey = -1;\n        formDexihDatalinkSteps.forEach(t => {\n            if (t.key <= minKey) {\n                minKey = t.key - 1;\n            }\n        });\n\n        let stepsArray = (<FormArray>this.mainForm.controls['dexihDatalinkSteps']);\n\n        items.forEach(datalink => {\n            let newDatalinkStep = new DexihDatalinkStep();\n            newDatalinkStep.name = datalink.name;\n            // ensure the name is unique by appending a count to the end.\n            let i = 0;\n            while (true) {\n                if (!formDexihDatalinkSteps.find(c => c.name === newDatalinkStep.name)) {\n                    break;\n                }\n                newDatalinkStep.name = datalink.name + '_' + i.toString();\n                i++;\n            }\n            newDatalinkStep.key = minKey;\n            newDatalinkStep.datalinkKey = datalink.key;\n            newDatalinkStep.datajobKey = this.mainForm.value.key;\n            newDatalinkStep.isValid = true;\n\n            let stepFormGroup = this.formService.datalinkStepFormGroup(this.mainForm, newDatalinkStep);\n            stepsArray.push(stepFormGroup);\n\n            minKey--;\n        });\n\n        this.authService.navigateUp();\n    }\n}\n","<d-widget-section title=\"Add Datalinks to Job\" [showExpandButton]=\"false\" [padding]=\"false\">\n\t<ng-template #sectionHeader>\n\t\t<d-button-close (click)=\"close()\"></d-button-close>\n\t</ng-template>\n\t<d-table [enableMultiSelect]=\"true\" [columns]=\"columns\" [dataObservable]=\"tableData\" [tags]=\"this.hubCache.hub.dexihTags\">\n\t\t<ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n\t\t\t<d-button (click)=\"addSelected(items)\" iconClass=\"fa fa-plus\" buttonClass=\"btn-primary\"\n\t\t\t\ttitle=\"Add selected datalinks to the job\">Add</d-button>\n\t\t</ng-template>\n\n\t</d-table>\n</d-widget-section>","import { Injectable } from '@angular/core';\nimport { CanDeactivate } from '@angular/router';\nimport { Observable} from 'rxjs';\n\nexport interface CanComponentDeactivate {\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\n}\n\n@Injectable()\nexport class DatajobEditGuard implements CanDeactivate<CanComponentDeactivate> {\n\n  canDeactivate(component: CanComponentDeactivate) {\n    return component && component.canDeactivate ? component.canDeactivate() : true;\n  }\n\n}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HubService } from '../../../hub.service';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { Subscription, Observable, BehaviorSubject, combineLatest } from 'rxjs';\nimport { FormGroup, FormArray } from '@angular/forms';\nimport { HubCache } from '../../../hub.models';\nimport {\n  DexihConnection, eFailAction, DexihDatalinkStep, DexihDatalinkDependency, DexihDatalinkStepColumn, DexihTrigger,\n  DexihDatalinkTable, eSourceType, eSharedObjectType, eAlertLevelItems, eAlertLevel\n} from '../../../../shared/shared.models';\n\n@Component({\n  selector: 'dexih-datajob-edit-form',\n  templateUrl: './datajob-edit-properties.component.html'\n})\nexport class DatajobEditPropertiesComponent implements OnInit, OnDestroy {\n  public hubCache: HubCache;\n  public datajobChanged = false;\n  public mainForm: FormGroup;\n  public managedConnections: DexihConnection[];\n\n\n  hasChangedObserve: Observable<boolean>;\n\n\n  hasChanged = false;\n  showAllErrors = false;\n\n  failActions = [\n    { key: eFailAction.Continue, name: 'Continue Execution' },\n    { key: eFailAction.ContinueNonDependent, name: 'Continue execution (non dependent datalinks only)' },\n    { key: eFailAction.Abend, name: 'Abend' },\n  ];\n\n\n  triggerColumns = [\n    { name: 'details', title: 'Details', format: 'Html' },\n    { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    { name: 'errors', title: 'Errors', format: '' },\n  ];\n\n  private _triggerTableData = new BehaviorSubject<Array<any>>(null);\n  triggerTableData: Observable<Array<any>> = this._triggerTableData.asObservable();\n\n  stepColumns = [\n    { name: 'name', title: 'Name', format: '' },\n    { name: 'datalink', title: 'Datalink', format: '', tags: 'tags' },\n    { name: 'dependencies', title: 'Dependencies', format: 'Html' },\n    { name: 'inputs', title: 'Inputs', format: 'Html' },\n    { name: 'updateDate', title: 'Last Modified', format: 'Calendar' },\n    { name: 'errors', title: 'Errors', format: '' },\n  ];\n\n  private _stepTableData = new BehaviorSubject<Array<any>>(null);\n  stepTableData: Observable<Array<any>> = this._stepTableData.asObservable();\n\n  eAlertLevelItems = eAlertLevelItems;\n  eAlertLevel = eAlertLevel;\n\n  option: number;\n\n  private _subscription: Subscription;\n\n  constructor(private hubService: HubService,\n    public formService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router) {\n  }\n\n  ngOnInit() {\n    let isFirst = true;\n\n    try {\n      this._subscription = combineLatest([\n        this.hubService.getHubCacheObservable(),\n        this.formService.getCurrentFormObservable(),\n        this.route.queryParams]\n      ).subscribe(result => {\n        this.hubCache = result[0];\n        this.mainForm = result[1];\n        let queryParams = result[2];\n\n        if (!this.hubCache.isLoaded()) { return; }\n\n        if (queryParams['option']) {\n          this.option = +queryParams['option'];\n        } else {\n          this.option = 0;\n        }\n\n        this.managedConnections = this.hubCache.getManagedConnections();\n        this.updateTriggers();\n        this.updateSteps();\n\n\n        // if this is first load of new form, then reset the dependencies.\n        if (this.mainForm.controls['key'].value <= 0 && isFirst) {\n          isFirst = false;\n          let steps = this.mainForm.controls['dexihDatalinkSteps'].value;\n          this.updateDependencies(steps);\n        }\n\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Data Job Edit Properties');\n    }\n\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n  }\n\n  updateTriggers() {\n    let triggerData = [];\n    if (this.mainForm) {\n      let triggers = (<FormArray>this.mainForm.controls['dexihTriggers']);\n      triggers.controls.forEach(triggerControl => {\n        let trigger = triggerControl.value;\n        triggerData.push({\n          key: trigger.key,\n          details: this.hubCache.getTriggerDetails(trigger),\n          updateDate: trigger.updateDate,\n          errors: triggerControl.valid ? 'No errors' : 'Errors'\n        });\n      });\n    }\n\n    this._triggerTableData.next(triggerData);\n  }\n\n  updateSteps() {\n    let stepData = [];\n    if (this.mainForm) {\n      let steps = (<FormArray>this.mainForm.controls['dexihDatalinkSteps']);\n      steps.controls.sort((a: FormGroup, b: FormGroup) => a.controls.position.value - b.controls.position.value)\n        .forEach(stepControl => {\n          let step = <DexihDatalinkStep>stepControl.value;\n          let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === step.datalinkKey);\n          stepData.push({\n            key: step.key,\n            name: step.name,\n            datalinkKey: datalink.key,\n            datalink: datalink ? datalink.name : 'Not specified',\n            tags: this.hubCache.getObjectTags(eSharedObjectType.Datalink, datalink.key),\n            dependencies: this.getDependencies(step.dexihDatalinkDependencies),\n            inputs: this.getInputs(step.dexihDatalinkStepColumns),\n            updateDate: step.updateDate,\n            errors: stepControl.valid ? 'No errors' : 'Errors'\n          });\n        });\n    }\n\n    this._stepTableData.next(stepData);\n  }\n\n  stepSortChanged(items: Array<DexihDatalinkStep>) {\n    let steps = (<FormArray>this.mainForm.controls['dexihDatalinkSteps']);\n    items.forEach((item, index) => {\n      let step = <FormGroup>steps.controls\n        .find(c => c.value.key === item.key);\n      if (step) {\n        step.controls.position.setValue(index);\n      }\n    });\n  }\n\n  getDependencies(dependencies: Array<DexihDatalinkDependency>) {\n    let depString = '';\n\n    if (dependencies) {\n      dependencies.forEach(dep => {\n        let step = this.mainForm.value.dexihDatalinkSteps.find(c => c.key === dep.dependentDatalinkStepKey);\n        if (step) {\n          depString = depString + step.name + '<br>';\n        } else {\n          depString = depString + 'Error: step not found.<br>';\n        }\n      });\n    }\n    return depString;\n\n  }\n\n  getInputs(columns: Array<DexihDatalinkStepColumn>) {\n    let depString = '';\n\n    if (columns) {\n      columns.forEach(column => {\n        depString = depString + column.name + ' = ' + column.defaultValue + '<br>';\n      });\n    }\n    return depString;\n\n  }\n\n  newTrigger() {\n    this.router.navigate(['trigger'], { relativeTo: this.route.parent, queryParamsHandling: 'preserve' });\n  }\n\n  addDatalinkSteps() {\n    this.router.navigate(['add-steps'], { relativeTo: this.route.parent, queryParamsHandling: 'preserve' });\n  }\n\n  editTrigger(trigger: DexihTrigger) {\n    this.router.navigate(['trigger', trigger.key], { relativeTo: this.route.parent, queryParamsHandling: 'preserve' });\n  }\n\n  deleteTriggers(triggers: Array<DexihTrigger>) {\n    let triggersArray = <FormArray>this.mainForm.controls.dexihTriggers;\n\n    triggers.forEach(trigger => {\n      let index = triggersArray.controls.findIndex(c => c.value.key === trigger.key);\n      triggersArray.removeAt(index);\n    });\n    this.updateTriggers();\n  }\n\n  newDatalinkStep() {\n    this.router.navigate(['step'], { relativeTo: this.route.parent, queryParamsHandling: 'preserve' });\n  }\n\n  editDatalinkStep(step: DexihDatalinkStep) {\n    this.router.navigate(['step', step.key], { relativeTo: this.route.parent, queryParamsHandling: 'preserve' });\n  }\n\n  deleteDatalinkSteps(steps: Array<DexihDatalinkStep>) {\n    let stepsArray = <FormArray>this.mainForm.controls.dexihDatalinkSteps;\n\n    steps.forEach(step => {\n      let index = stepsArray.controls.findIndex(c => c.value.key === step.key);\n      stepsArray.removeAt(index);\n    });\n    this.updateSteps();\n  }\n\n  clearDependencies(steps: Array<DexihDatalinkStep>) {\n    let stepsArray = <FormArray>this.mainForm.controls.dexihDatalinkSteps;\n    steps.forEach(step => {\n      let stepControl = <FormGroup>stepsArray.controls.find(c => c.value.key === step.key);\n      let dependencies = <FormArray>stepControl.controls['dexihDatalinkDependencies'];\n      dependencies.clear();\n    });\n\n    this.updateSteps();\n  }\n\n  updateDependencies(steps: Array<DexihDatalinkStep>) {\n    let stepsArray = <FormArray>this.mainForm.controls.dexihDatalinkSteps;\n    let allSteps = stepsArray.value;\n\n    let stepTargets: Array<{ key: number, tables: Array<number> }> = [];\n    let minKey = -1;\n\n    allSteps.forEach(step => {\n      stepTargets.push({ key: step.key, tables: this.getDatalinkTargetTables(step.datalinkKey) });\n    });\n\n    steps.forEach(step => {\n      let stepControl = <FormGroup>stepsArray.controls.find(c => c.value.key === step.key);\n      let dependencies = <FormArray>stepControl.controls['dexihDatalinkDependencies'];\n      dependencies.clear();\n\n      let sourceTables = this.getDatalinkSourceTables(step.datalinkKey);\n\n      stepTargets.forEach(stepTarget => {\n        for (let t of stepTarget.tables) {\n          if (sourceTables.indexOf(t) >= 0) {\n            let dep = new DexihDatalinkDependency();\n            dep.key = minKey;\n            dep.datalinkStepKey = step.key;\n            dep.dependentDatalinkStepKey = stepTarget.key;\n            dependencies.push(this.formService.datalinkDependencyFormGroup(dep));\n            minKey--;\n            break;\n          }\n        }\n      });\n\n    });\n\n    this.updateSteps();\n  }\n\n  getDatalinkTargetTables(datalinkKey: number): Array<number> {\n    let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === datalinkKey);\n    if (!datalink) { return []; }\n\n    return datalink.dexihDatalinkTargets.map(c => c.tableKey);\n  }\n\n  // gets any dependent source tables from the given datalink key.\n  getDatalinkSourceTables(datalinkKey: number): Array<number> {\n    let datalink = this.hubCache.hub.dexihDatalinks.find(c => c.key === datalinkKey);\n    if (!datalink) { return []; }\n\n    let tables = this.getDatalinkTable(datalink.sourceDatalinkTable);\n\n    datalink.dexihDatalinkTransforms.forEach(transform => {\n      if (transform.joinDatalinkTable) {\n        let joinTables = this.getDatalinkTable(transform.joinDatalinkTable);\n        joinTables.forEach(t => {\n          if (tables.indexOf(t) < 0) {\n            tables.push(t);\n          }\n        });\n      }\n    });\n\n    return tables;\n  }\n\n  getDatalinkTable(datalinkTable: DexihDatalinkTable): Array<number> {\n    if (!datalinkTable) {\n      return [];\n    }\n\n    switch (datalinkTable.sourceType) {\n      case eSourceType.Table: {\n        return [datalinkTable.sourceTableKey];\n      }\n      case eSourceType.Datalink: {\n        return this.getDatalinkSourceTables(datalinkTable.sourceDatalinkKey);\n      }\n    }\n\n    return [];\n  }\n\n  changeOption(index) {\n    if (history.pushState) {\n      this.router.navigateByUrl(window.location.pathname + `?option=${index}`);\n    }\n  }\n\n}\n","<d-tabs title=\"Edit job properties\" [padding]=\"false\" (selectedIndexChange)=\"changeOption($event)\" [selectedIndex]=\"option\">\n<d-tab title=\"Properties\">\n    <form *ngIf=\"mainForm\" [formGroup]=\"mainForm\">\n        <fieldset>\n            <section>\n                <form-input label=\"Data Job Name\" formControlName=\"name\" placeholder=\"Enter the job name.\"\n                    [autocapitalize]=\"true\" iconClass=\"fa fa-list\" [errors]=\"formService.formErrors.name\">\n                </form-input>\n            </section>\n\n            <section>\n                <form-textarea label=\"Description\" [showPreview]=\"true\"  [isHidden]=\"true\" formControlName=\"description\"\n                    placeholder=\"Enter the description.\" [errors]=\"formService.formErrors.description\">\n                </form-textarea>\n            </section>\n\n            <section>\n                <form-select label=\"Datalink Fail Action\" formControlName=\"failAction\" [items]=\"failActions\"\n                    itemKey=\"key\" itemName=\"name\" iconClass=\"fa fa-database\"\n                    [errors]=\"formService.formErrors.failAction\" note=\"Action to take when a datalink execution fails.\"\n                    [enableFilter]=\"false\">\n                </form-select>\n            </section>\n\n            <section>\n                <form-select label=\"Alerting Level\" formControlName=\"alertLevel\" [items]=\"eAlertLevelItems\"\n                    itemKey=\"key\" itemName=\"description\" iconClass=\"fa fa-bell\"\n                    [errors]=\"formService.formErrors.alertLevel\" note=\"When alerts should be sent.\"\n                    [enableFilter]=\"false\">\n                </form-select>\n            </section>\n\n            <section>\n                <form-select label=\"Audit Connection\" formControlName=\"auditConnectionKey\" [items]=\"managedConnections\"\n                    itemKey=\"key\" itemName=\"name\" iconClass=\"fa fa-database\"\n                    [errors]=\"formService.formErrors.auditConnectionKey\"\n                    note='Specify the connection where audit data (such as job results) should be written to.'\n                    [errors]=\"formService.formErrors.auditConnectionKey\">\n                    <connection-edit-button [key]=\"mainForm.controls.auditConnectionKey.value\"></connection-edit-button>\n                </form-select>\n            </section>\n\n            <section class=\"col col-12\">\n                <form-checkbox label=\"Trigger datajob when new files arrive\" formControlName=\"fileWatch\">\n                </form-checkbox>\n            </section>\n\n            <section class=\"col col-12\">\n                <form-checkbox label=\"Auto Start\" formControlName=\"autoStart\"\n                    note=\"Re-activate the datajob when the remote agent is restarted.\">\n                </form-checkbox>\n            </section>\n        </fieldset>\n    </form>\n</d-tab>\n\n<d-tab title=\"Parameters\" [padding]=\"true\">\n    <input-parameters *ngIf=\"mainForm\" [showEdit]=\"true\" [parameters]=\"mainForm?.controls.parameters\" [formsService]=\"formService\">\n    </input-parameters>\n</d-tab>\n\n<d-tab title=\"Triggers\" [padding]=\"false\">\n    <d-table [enableMultiSelect]=\"true\" [enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\" [enableManualSort]=\"true\" sortColumn=\"position\" [columns]=\"triggerColumns\"\n        [dataObservable]=\"triggerTableData\" (rowClick)='editTrigger($event)'>\n        <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n            <d-button-delete (click)=\"deleteTriggers(items)\"></d-button-delete>\n        </ng-template>\n\n        <ng-template #selectedItemAction select=\"selectedItemAction\" let-trigger=\"item\">\n            <d-button-edit (click)=\"editTrigger(trigger)\"></d-button-edit>\n        </ng-template>\n\n        <ng-template #actions select=\"actionsTemplate\" let-items=\"items\">\n            <d-button-new (click)=\"newTrigger()\" title=\"New Trigger\"></d-button-new>\n        </ng-template>\n\n    </d-table>\n</d-tab>\n\n<d-tab title=\"Steps\" [padding]=\"false\">\n    <d-table [enableMultiSelect]=\"true\" [enableStickyToolbar]=\"true\"  [toolbarZIndex]=\"100\" [enableManualSort]=\"true\" (onSortChanged)=\"stepSortChanged($event)\" sortColumn=\"position\" [columns]=\"stepColumns\" [tags]=\"this.hubCache.hub.dexihTags\"\n        [dataObservable]=\"stepTableData\" (rowClick)='editDatalinkStep($event)'>\n        <ng-template #selectedItemsAction select=\"selectedItemsAction\" let-items=\"items\">\n            <d-button  iconClass=\"fa fa-magic\" (click)=\"updateDependencies(items)\" text=\"AutoSet Dependencies\"></d-button>\n            <d-button class=\"ml-1\" iconClass=\"fa fa-eraser\" (click)=\"clearDependencies(items)\" text=\"Clear Dependencies\"></d-button>\n            <d-button-delete class=\"ml-1\" (click)=\"deleteDatalinkSteps(items)\"></d-button-delete>\n        </ng-template>\n\n        <ng-template #selectedItemAction select=\"selectedItemAction\" let-item=\"item\">\n            <d-button-edit class=\"mr-1\" (click)=\"editDatalinkStep(item)\"></d-button-edit>\n        </ng-template>\n\n        <ng-template #actions select=\"actionsTemplate\" let-items=\"items\">\n            <d-button-new class=\"mr-1\" (click)=\"newDatalinkStep()\" title=\"Create a new step\"></d-button-new>\n            <d-button class=\"mr-1\" (click)=\"addDatalinkSteps()\" iconClass=\"fa fa-plus-square\" buttonClass=\"btn-primary\"\n                title=\"Select multiple datalinks to add as steps\">Add</d-button>\n        </ng-template>\n    </d-table>\n</d-tab>\n</d-tabs>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable ,  Subscription, combineLatest} from 'rxjs';\nimport { Location } from '@angular/common';\nimport { FormBuilder, FormGroup, FormArray } from '@angular/forms';\nimport { AuthService } from '../../../../+auth/auth.service';\nimport { HubFormsService } from '../../../hub.forms.service';\nimport { HubService } from '../../../hub.service';\nimport { DexihTrigger } from '../../../../shared/shared.models';\n\n@Component({\n  selector: 'datajob-edit-trigger',\n  templateUrl: './datajob-edit-trigger.component.html'\n})\nexport class DatajobEditTriggerComponent implements OnInit, OnDestroy {\n  public pageTitle: string;\n  public action: string;\n\n  private _subscription: Subscription;\n\n  triggerFormService: HubFormsService;\n  triggerKey: number;\n  datajobKey: number;\n\n  originalTrigger: DexihTrigger;\n\n  mainForm: FormGroup;\n\n  constructor(\n    private authService: AuthService,\n    private hubService: HubService,\n    private formService: HubFormsService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private fb: FormBuilder) {\n\n    // create a seperate formService instance to manage the copied form\n    this.triggerFormService = new HubFormsService(fb, hubService, authService);\n  }\n\n\n  ngOnInit() {\n    try {\n      this._subscription = combineLatest([\n        this.route.data,\n        this.route.params,\n        this.formService.getCurrentFormObservable()]\n      ).subscribe(result => {\n        let data = result[0];\n        let params = result[1];\n        this.mainForm = result[2];\n\n        if (!this.mainForm) { return; }\n\n        this.pageTitle = data['pageTitle'];\n        this.action = data['action'];\n\n        this.triggerKey = +params['triggerKey'];\n\n        let triggerForm: FormGroup;\n\n        if (this.triggerKey) {\n          this.originalTrigger = this.mainForm.value.dexihTriggers.find(c => c.key === this.triggerKey);\n          if (!this.originalTrigger) {\n            this.authService.navigateUp();\n            return;\n          }\n          triggerForm = this.triggerFormService.triggerFormGroup(this.originalTrigger);\n        } else {\n          let trigger = new DexihTrigger();\n          // if new trigger, then set a temporary key of -1 or lower.\n          let minKey = -1;\n          this.mainForm.value.dexihTriggers.forEach(t => {\n            if (t.key <= minKey) {\n              minKey = t.key - 1;\n            }\n          });\n          trigger.key = minKey;\n          triggerForm = this.triggerFormService.triggerFormGroup(trigger);\n        }\n        this.triggerFormService.startForm(triggerForm);\n      });\n    } catch (e) {\n      this.hubService.addHubClientErrorMessage(e, 'Datajob Edit Trigger');\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._subscription) { this._subscription.unsubscribe(); }\n  }\n\n  cancel() {\n    this.authService.navigateUp();\n  }\n\n  applyExit() {\n    const triggerForm = this.triggerFormService.currentForm;\n    const triggersArray = <FormArray>this.mainForm.controls.dexihTriggers;\n\n    if (!this.originalTrigger) {\n      triggersArray.push(triggerForm);\n    } else {\n      const originalTrigger = triggersArray.controls.find(c => c.value.key === triggerForm.value.key);\n      originalTrigger.setValue(triggerForm.value);\n    }\n\n    this.authService.navigateUp();\n  }\n}\n\n","<d-widget-section *ngIf=\"triggerFormService.currentForm\" title=\"Edit Trigger\" [showExpandButton]=\"false\" >\n\t<ng-template #sectionHeader>\n\t\t\t<d-button-apply [disabled]=\"!triggerFormService.hasChanged\" class=\"mr-1\" (click)=\"applyExit()\"></d-button-apply>\n\t\t\t<d-button-cancel (click)=\"cancel()\"></d-button-cancel>\n\t</ng-template>\n\t<form  [formGroup]=\"triggerFormService.currentForm\">\n\t\t<fieldset>\n\t\t\t<div class=\"form-row\">\n\t\t\t\t<section class=\"form-group col-md-6\">\n\t\t\t\t\t<form-date label=\"Start Date\" formControlName=\"startDate\" [errors]=\"triggerFormService.formErrors.startDate\" note=\"This is the date that the trigger will start.  Leave blank for immediate start.\">\n\t\t\t\t\t</form-date>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t\t<div class=\"form-row\">\n\t\t\t\t<section class=\"form-group col-md-3\">\n\t\t\t\t\t<form-time label=\"Interval\" [disableNative]=\"true\" formControlName=\"intervalTime\" [errors]=\"triggerFormService.formErrors.intervalTime\"\n\t\t\t\t\t note=\"The intra-day interval which the trigger restarts.  Leave blank for once a day jobs.\">\n\t\t\t\t\t</form-time>\n\t\t\t\t</section>\n\t\t\t\t<section class=\"form-group col-md-3\">\n\t\t\t\t\t<form-input type=\"number\" label=\"Max Recurrences\" formControlName=\"maxRecurs\" placeholder=\"Enter the max recurrences\"\n\t\t\t\t\t iconClass=\"fa fa-refresh\" [errors]=\"triggerFormService.formErrors.maxRecurs\" note=\" The maximum number of times job can recur in one day.\">\n\t\t\t\t\t</form-input>\n\t\t\t\t</section>\n\t\t\t\t<section class=\"form-group col-md-3\">\n\t\t\t\t\t<form-time label=\"Start Time\" formControlName=\"startTime\" [errors]=\"triggerFormService.formErrors.startTime\" note=\"Time of the day the job will activate.\">\n\t\t\t\t\t</form-time>\n\t\t\t\t</section>\n\t\t\t\t<section class=\"form-group col-md-3\">\n\t\t\t\t\t<form-time label=\"End Time\" formControlName=\"endTime\" [errors]=\"triggerFormService.formErrors.endTime\" note=\"Time of the day the triggers will deactivate.\">\n\t\t\t\t\t</form-time>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t\t<section>\n\t\t\t\t<daysofweek label=\"Days of the week\" formControlName=\"daysOfWeek\" note=\" The days of the week the trigger is valid.\">\n\t\t\t\t</daysofweek>\n\t\t\t</section>\n\t\t\t<div class=\"form-row\">\n\n\t\t</div>\n\t\t</fieldset>\n\t</form>\n</d-widget-section>","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routing } from './datajob-edit.routing';\nimport { SharedModule } from '../../../shared/shared.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { DatajobEditComponent } from './datajob-edit.component';\nimport { DatajobEditPropertiesComponent } from './properties/datajob-edit-properties.component';\nimport { DatajobEditTriggerComponent } from './trigger-edit/datajob-edit-trigger.component';\nimport { DatajobEditStepComponent } from './step-edit/datajob-edit-step.component';\nimport { DatajobAddStepsComponent } from './steps-add/datajob-add-steps.component';\n\nimport { DexihFormDaysOfWeekComponent } from './trigger-edit/dexih-form-daysofweek.component';\nimport { HubFormsService } from '../../hub.forms.service';\nimport { DatajobEditGuard } from './datajob-edit-guard';\nimport { HubSharedModule } from '../../hub.shared.module';\n\n@NgModule({\n    imports: [\n        SharedModule,\n        CommonModule,\n        FormsModule,\n        Routing,\n        ReactiveFormsModule,\n        HubSharedModule\n    ],\n    declarations: [\n        DatajobEditComponent,\n        DatajobEditPropertiesComponent,\n        DatajobEditTriggerComponent,\n        DatajobEditStepComponent,\n        DatajobAddStepsComponent,\n        DexihFormDaysOfWeekComponent\n    ],\n    providers: [ HubFormsService, DatajobEditGuard ],\n    exports: []\n})\nexport class DatajobEditModule {\n\n    static forRoot(): ModuleWithProviders<DatajobEditModule> {\n        return {\n            ngModule: DatajobEditModule,\n            providers: [ HubFormsService ]\n        };\n    }\n}\n"]}