function _createForOfIteratorHelper(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1wre":function(e,t,a){"use strict";a.d(t,"c",(function(){return I})),a.d(t,"b",(function(){return pe})),a.d(t,"a",(function(){return Oe})),a("aCdC");var i=a("ElCs"),n=a("itXk"),r=a("Kj3r"),s=a("3WyZ"),o=a("soiQ"),c=a("fXoL"),b=a("tyNb"),u=a("3Pt+"),l=a("24Dg"),h=a("Wumg"),f=a("ofXK"),d=a("H3K+"),m=a("79jk"),v=["DexihMessage"];function p(e,t){if(1&e){var a=c.Pb();c.Ob(0,"button",18),c.Vb("click",(function(){return c.vc(a),c.Zb(2).embedLink=null})),c.Ob(1,"span",19),c.Fc(2,"\xd7"),c.Nb(),c.Nb()}}function g(e,t){if(1&e){var a=c.Pb();c.Ob(0,"dexih-widget-section",13),c.Dc(1,p,3,0,"ng-template",null,14,c.Ec),c.Ob(3,"section"),c.Ob(4,"form-textarea",15),c.Vb("ngModelChange",(function(e){return c.vc(a),c.Zb().embedLink=e})),c.Ob(5,"a",16),c.Fc(6,"(Open)"),c.Nb(),c.Nb(),c.Nb(),c.Ob(7,"section"),c.Ob(8,"form-textarea",17),c.Vb("ngModelChange",(function(e){return c.vc(a),c.Zb().embedFrame=e})),c.Nb(),c.Nb(),c.Nb()}if(2&e){var i=c.Zb();c.hc("showExpandButton",!1),c.yb(4),c.hc("showCopy",!0)("showPreview",!1)("hideToggle",!0)("disabled",!0)("ngModel",i.embedLink),c.yb(1),c.hc("href",i.embedLink,c.xc),c.yb(3),c.hc("showCopy",!0)("showPreview",!1)("hideToggle",!0)("disabled",!0)("ngModel",i.embedFrame)}}function y(e,t){if(1&e){var a=c.Pb();c.Ob(0,"dexih-button-edit",23),c.Vb("click",(function(){c.vc(a);var e=c.Zb().item;return c.Zb().edit(e)})),c.Nb()}}var w=function(e,t,a){return["preview",e,t,a]};function C(e,t){if(1&e){var a=c.Pb();c.Lb(0,"dexih-button-preview",20),c.Dc(1,y,1,0,"dexih-button-edit",21),c.Ob(2,"dexih-button",22),c.Vb("click",(function(){c.vc(a);var e=t.item;return c.Zb().embed(e)})),c.Nb()}if(2&e){var i=t.item,n=c.Zb();c.hc("routerLink",c.oc(2,w,i.hubKey,i.objectType,i.objectKey)),c.yb(1),c.hc("ngIf",(null==n.hubKeys?null:n.hubKeys.indexOf(i.hubKey))>=0)}}function x(e,t){if(1&e&&(c.Ob(0,"div",28),c.Lb(1,"form-tags-dropdown",29),c.Nb()),2&e){var a=c.Zb(2);c.yb(1),c.hc("items",a.hubs)("enableAddAll",!0)}}function k(e,t){if(1&e&&(c.Ob(0,"form",24),c.Dc(1,x,2,2,"div",25),c.Ob(2,"div",26),c.Lb(3,"form-input",27),c.Nb(),c.Nb()),2&e){var a=c.Zb();c.hc("formGroup",a.searchForm),c.yb(1),c.hc("ngIf",a.hubs)}}function O(e,t){}function D(e,t){if(1&e){var a=c.Pb();c.Ob(0,"download-button",30),c.Vb("download",(function(e){c.vc(a);var i=t.items;return c.Zb().downloadData(i,!0,e)})),c.Nb()}}var K,I=((K=function(){function e(t,a,i,n){_classCallCheck(this,e),this.authService=t,this.route=a,this.router=i,this.fb=n,this.cancelToken=new s.a,this.eDownloadFormat=o.rb,this.columns=[{name:"logicalName",title:"Details",header:"hubName",footer:"description",format:"Md",tags:"tags"},{name:"objectType",title:"Type",format:"Enum",enum:o.lb},{name:"updateDate",title:"Last Modified",format:"Calendar"}],this.dataIndex=null}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;try{this._subscription=Object(n.a)(this.route.params,this.authService.getHubsObservable()).subscribe((function(t){e.hubs=t[1],e.hubs&&(e.hubKeys=e.hubs.map((function(e){return e.hubKey}))),e.searchForm=e.fb.group({searchString:["",[]],hubKeys:[[],[]]}),e.updateSearch(),e._searchSubscription&&e._searchSubscription.unsubscribe(),e._searchSubscription=e.searchForm.valueChanges.pipe(Object(r.a)(500)).subscribe((function(){e.updateSearch()}))}))}catch(t){this.dexihMessage.addErrorMessage(t.message)}}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe(),this.cancelToken.cancel()}},{key:"updateSearch",value:function(){var e=this;this.authService.getSharedDataIndex(this.searchForm.value.searchString,this.searchForm.value.hubKeys,50,!0).then((function(t){e.dataIndex=t.filter((function(e){return e.objectType!==o.lb.DashboardItem})),e.tags=[],e.dataIndex.forEach((function(t){t.tags&&t.tags.length>0&&t.tags.forEach((function(t){e.tags.findIndex((function(e){return e.name===t.name}))<0&&e.tags.push(t)}))}))})).catch((function(t){return e.dexihMessage.addMessage(t)}))}},{key:"previewData",value:function(e){this.router.navigate(e.objectType===o.lb.Dashboard?["previewDashboard",e.hubKey,e.objectKey]:["preview",e.hubKey,e.objectType,e.objectKey],{relativeTo:this.route.parent})}},{key:"embed",value:function(e){this.embedLink=e.objectType===o.lb.Dashboard?"".concat(window.location.origin,"/public/index/previewDashboard/").concat(e.hubKey,"/").concat(e.objectType,"/").concat(e.objectKey,"?embed=true"):"".concat(window.location.origin,"/public/index/preview/").concat(e.hubKey,"/").concat(e.objectType,"/").concat(e.objectKey,"?embed=true"),this.embedFrame='<iframe width="560" height="315" src="'.concat(this.embedLink,'" frameborder="0" ></iframe>'),document.body.scrollTop=0,document.documentElement.scrollTop=0}},{key:"downloadData",value:function(e,t,a){var i=this;this.authService.downloadData(e,t,a,this.cancelToken).then((function(){i.dexihMessage.addSuccessMessage("The download task has started.")})).catch((function(e){i.dexihMessage.addMessage(e)}))}},{key:"edit",value:function(e){switch(e.objectType){case o.lb.Datalink:this.router.navigate(["hub",e.hubKey,"datalinks","datalink-edit","edit",e.objectKey]);break;case o.lb.Table:this.router.navigate(["hub",e.hubKey,"tables","table-edit",e.objectKey]);break;case o.lb.View:this.router.navigate(["hub",e.hubKey,"views","view-edit",e.objectKey]);break;case o.lb.Dashboard:this.router.navigate(["hub",e.hubKey,"dashboards","dashboard-edit",e.objectKey])}}}]),e}()).\u0275fac=function(e){return new(e||K)(c.Kb(i.a),c.Kb(b.a),c.Kb(b.e),c.Kb(u.g))},K.\u0275cmp=c.Eb({type:K,selectors:[["sharedData"]],viewQuery:function(e,t){var a;1&e&&c.Bc(v,!0),2&e&&c.rc(a=c.Wb())&&(t.dexihMessage=a.first)},decls:15,vars:8,consts:[[1,"container-fluid"],[1,"m-1"],["DexihMessage",""],["title","Shared Data","iconClass","fa fa-lg fa-fw fa-life-saver"],["title","Embedded html",3,"showExpandButton",4,"ngIf"],[3,"enableMultiSelect","enableStickyToolbar","toolbarZIndex","enableFilter","columns","data","tags","rowClick"],["select","selectedItemAction"],["selectedItemAction",""],["select","filter"],["filter",""],["actions",""],["select","selectedItemsAction"],["selectedItemsAction",""],["title","Embedded html",3,"showExpandButton"],["header",""],["label","Link","rows","1",3,"showCopy","showPreview","hideToggle","disabled","ngModel","ngModelChange"],["target","_blank",1,"ml-1",3,"href"],["label","Embedded IFrame","rows","1",3,"showCopy","showPreview","hideToggle","disabled","ngModel","ngModelChange"],["type","button","aria-label","Close",1,"close","ml-2",3,"click"],["aria-hidden","true"],[3,"routerLink"],["class","ml-1",3,"click",4,"ngIf"],["iconClass","fa fa-code","title","Get embedded version","text","Embedded",1,"ml-1",3,"click"],[1,"ml-1",3,"click"],[1,"row",3,"formGroup"],["class","col-xs-12 col-sm mr-1",4,"ngIf"],[1,"col-xs-12","col-sm","mr-1","input-expand"],["formControlName","searchString","placeholder","Search...","iconClass","fa fa-search"],[1,"col-xs-12","col-sm","mr-1"],["labelLeft","Hubs","formControlName","hubKeys","itemKey","hubKey","itemName","name",3,"items","enableAddAll"],[1,"ml-1",3,"download"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"div",1),c.Lb(2,"dexih-message",null,2),c.Nb(),c.Ob(4,"dexih-widget",3),c.Dc(5,g,9,12,"dexih-widget-section",4),c.Ob(6,"dexih-table",5),c.Vb("rowClick",(function(e){return t.previewData(e)})),c.Dc(7,C,3,6,"ng-template",6,7,c.Ec),c.Dc(9,k,4,2,"ng-template",8,9,c.Ec),c.Dc(11,O,0,0,"ng-template",null,10,c.Ec),c.Dc(13,D,1,0,"ng-template",11,12,c.Ec),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.yb(5),c.hc("ngIf",t.embedLink),c.yb(1),c.hc("enableMultiSelect",!0)("enableStickyToolbar",!0)("toolbarZIndex",100)("enableFilter",!1)("columns",t.columns)("data",t.dataIndex)("tags",t.tags))},directives:[l.a,h.P,f.t,d.a,h.T,h.H,u.s,u.v,h.q,h.f,h.j,u.I,u.t,u.l,h.D,u.j,h.G,m.a],encapsulation:2}),K),T=a("XNiG");function N(e,t){if(1&e){var a=c.Pb();c.Ob(0,"form-select",7),c.Vb("ngModelChange",(function(e){return c.vc(a),c.Zb().$implicit.value=e}))("ngModelChange",(function(){c.vc(a);var e=c.Zb().$implicit;return c.Zb(2).change(e)}))("onRefresh",(function(){c.vc(a);var e=c.Zb().$implicit;return c.Zb(2).refresh(e)})),c.Nb()}if(2&e){var i=c.Zb().$implicit,n=c.Zb(2);c.hc("labelLeft",i.name)("ngModel",i.value)("items",i.runTime.items)("enableTextEntry",!(i.listOfValuesKey>0))("textEntryItems",n.parentParams)("showRefresh",i.runTime.showRefresh)("isRefreshing",i.runTime.isRefreshing)("multiSelect",1===i.rank)}}function j(e,t){if(1&e){var a=c.Pb();c.Ob(0,"form-input",8),c.Vb("ngModelChange",(function(e){return c.vc(a),c.Zb().$implicit.value=e}))("ngModelChange",(function(){c.vc(a);var e=c.Zb().$implicit;return c.Zb(2).change(e)})),c.Nb()}if(2&e){var i=c.Zb().$implicit;c.hc("labelLeft",i.name)("ngModel",i.value)}}function M(e,t){if(1&e&&(c.Ob(0,"div",4),c.Dc(1,N,1,8,"form-select",5),c.Dc(2,j,1,2,"form-input",6),c.Nb()),2&e){var a=t.$implicit;c.yb(1),c.hc("ngIf",a.listOfValuesKey>0),c.yb(1),c.hc("ngIf",!(a.listOfValuesKey>0))}}function P(e,t){if(1&e&&(c.Ob(0,"div",2),c.Dc(1,M,3,2,"div",3),c.Nb()),2&e){var a=c.Zb();c.yb(1),c.hc("ngForOf",a.userParameters)}}function S(e,t){if(1&e){var a=c.Pb();c.Ob(0,"div",9),c.Ob(1,"a",10),c.Vb("click",(function(){return c.vc(a),c.Zb().refreshData()})),c.Fc(2,"The parameters have changed. Click to refresh."),c.Nb(),c.Nb()}}var Z,z=((Z=function(){function e(t){_classCallCheck(this,e),this.authService=t,this.onChange=new c.n,this.onRefreshData=new c.n,this.parentParams=[],this.values=[],this.cancelToken=new s.a,this.requiresRefresh=!1,this.showRefresh=!1,this.isRefreshing=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userParameters=[],this.parameters.filter((function(e){return e.isValid&&e.allowUserSelect})).forEach((function(t){t.runTime={showRefresh:t.listOfValuesKey>0,isRefreshing:!1,items:[]},t.value&&t.listOfValuesKey&&0===t.rank&&(t.runTime.items=[{key:t.value,name:t.valueDesc}]),e.userParameters.push(t)})),this._refreshSubscription=this.refreshEvent.subscribe((function(){e.requiresRefresh=!1}))}},{key:"ngOnDestroy",value:function(){this._hubSubscription&&this._hubSubscription.unsubscribe(),this._refreshSubscription&&this._refreshSubscription.unsubscribe()}},{key:"refresh",value:function(e){var t=this;e.listOfValuesKey&&(e.runTime.isRefreshing=!0,this.authService.previewListOfValues(this.hubKey,this.objectKey,this.objectType,e.name,!1,this.cancelToken).then((function(t){e.runTime.items=t,e.runTime.showRefresh=!1})).catch((function(e){t.authService.addUpdateNotification(e,!1)})).finally((function(){e.runTime.isRefreshing=!1})))}},{key:"refreshData",value:function(){this.onRefreshData.emit()}},{key:"change",value:function(e){e.listOfValuesKey>0?this.onChange.emit():this.requiresRefresh=!0}}]),e}()).\u0275fac=function(e){return new(e||Z)(c.Kb(i.a))},Z.\u0275cmp=c.Eb({type:Z,selectors:[["input-parameters-view"]],inputs:{hubKey:"hubKey",objectType:"objectType",objectKey:"objectKey",parameters:"parameters",refreshEvent:"refreshEvent"},outputs:{onChange:"onChange",onRefreshData:"onRefreshData"},decls:2,vars:2,consts:[["class","d-flex flex-wrap",4,"ngIf"],["class","alert alert-warning mt-2",4,"ngIf"],[1,"d-flex","flex-wrap"],["class","pr-1",4,"ngFor","ngForOf"],[1,"pr-1"],["itemKey","key","itemName","name","textEntryItemsTitle","Linked Parameters",3,"labelLeft","ngModel","items","enableTextEntry","textEntryItems","showRefresh","isRefreshing","multiSelect","ngModelChange","onRefresh",4,"ngIf"],[3,"labelLeft","ngModel","ngModelChange",4,"ngIf"],["itemKey","key","itemName","name","textEntryItemsTitle","Linked Parameters",3,"labelLeft","ngModel","items","enableTextEntry","textEntryItems","showRefresh","isRefreshing","multiSelect","ngModelChange","onRefresh"],[3,"labelLeft","ngModel","ngModelChange"],[1,"alert","alert-warning","mt-2"],["href","javascript:void(0)",1,"alert-link",3,"click"]],template:function(e,t){1&e&&(c.Dc(0,P,2,1,"div",0),c.Dc(1,S,3,0,"div",1)),2&e&&(c.hc("ngIf",t.parameters),c.yb(1),c.hc("ngIf",t.requiresRefresh))},directives:[f.t,f.s,h.E,u.s,u.v,h.D],encapsulation:2}),Z),E=a("PMKX"),R=a("g8Ys"),_=function(e){return{active:e}};function V(e,t){if(1&e){var a=c.Pb();c.Ob(0,"div",16),c.Ob(1,"label",17),c.Ob(2,"input",18),c.Vb("click",(function(){return c.vc(a),c.Zb(2).showChart=!1})),c.Nb(),c.Lb(3,"i",19),c.Nb(),c.Ob(4,"label",20),c.Ob(5,"input",21),c.Vb("click",(function(){return c.vc(a),c.Zb(2).showChart=!0})),c.Nb(),c.Lb(6,"i",22),c.Nb(),c.Nb()}if(2&e){var i=c.Zb(2);c.yb(1),c.hc("ngClass",c.mc(2,_,!1===i.showChart)),c.yb(3),c.hc("ngClass",c.mc(4,_,!0===i.showChart))}}function L(e,t){if(1&e){var a=c.Pb();c.Ob(0,"dexih-button",23),c.Vb("click",(function(){return c.vc(a),c.Zb(2).maximize()})),c.Nb()}}function F(e,t){if(1&e){var a=c.Pb();c.Ob(0,"dexih-button",24),c.Vb("click",(function(){return c.vc(a),c.Zb(2).minimize()})),c.Nb()}}function A(e,t){if(1&e){var a=c.Pb();c.Ob(0,"div",25),c.Ob(1,"input-parameters-view",26),c.Vb("onRefreshData",(function(){return c.vc(a),c.Zb(2).refresh()}))("onChange",(function(){return c.vc(a),c.Zb(2).parameterChange()})),c.Nb(),c.Nb()}if(2&e){var i=c.Zb(2);c.yb(1),c.hc("hubKey",i.hubKey)("objectType",i.objectType)("objectKey",i.objectKey)("parameters",i.userParameters)("refreshEvent",i.refreshDataSubject.asObservable())}}function Q(e,t){if(1&e){var a=c.Pb();c.Ob(0,"div",25),c.Ob(1,"series-animate",27),c.Vb("hasChanged",(function(){return c.vc(a),c.Zb(2).hasChanged()}))("dataChange",(function(e){return c.vc(a),c.Zb(2).data=e})),c.Nb(),c.Nb()}if(2&e){var i=c.Zb(2);c.yb(1),c.hc("showEdit",!1)("showFrame",!1)("animateConfig",i.viewConfig.animateConfig)("columns",i.columns)("baseData",i.baseData)("data",i.data)}}function U(e,t){if(1&e){var a=c.Pb();c.Ob(0,"div",4),c.Ob(1,"div",5),c.Ob(2,"div",6),c.Lb(3,"i",7),c.Nb(),c.Ob(4,"div",8),c.Ob(5,"div",9),c.Ob(6,"div"),c.Ob(7,"download-button",10),c.Vb("download",(function(e){return c.vc(a),c.Zb().downloadData(e)})),c.Nb(),c.Dc(8,V,7,6,"div",11),c.Ob(9,"dexih-button-refresh",12),c.Vb("click",(function(){return c.vc(a),c.Zb().refresh()})),c.Nb(),c.Dc(10,L,1,0,"dexih-button",13),c.Dc(11,F,1,0,"dexih-button",14),c.Nb(),c.Dc(12,A,2,5,"div",15),c.Dc(13,Q,2,6,"div",15),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&e){var i=c.Zb();c.yb(8),c.hc("ngIf",(null==i.viewConfig?null:i.viewConfig.viewType)===i.eViewType.Chart),c.yb(1),c.hc("compact",!0),c.yb(1),c.hc("ngIf",!i.isMaximized),c.yb(1),c.hc("ngIf",i.isMaximized),c.yb(1),c.hc("ngIf",i.userParameters&&i.userParameters.length>0),c.yb(1),c.hc("ngIf",i.viewConfig&&i.baseData)}}function B(e,t){1&e&&(c.Ob(0,"div",28),c.Lb(1,"div",29),c.Fc(2," \xa0 \xa0 Loading ...\n"),c.Nb())}function q(e,t){if(1&e){var a=c.Pb();c.Ob(0,"div",34),c.Ob(1,"label",17),c.Ob(2,"input",18),c.Vb("click",(function(){return c.vc(a),c.Zb(2).showChart=!1})),c.Nb(),c.Lb(3,"i",19),c.Nb(),c.Ob(4,"label",20),c.Ob(5,"input",21),c.Vb("click",(function(){return c.vc(a),c.Zb(2).showChart=!0})),c.Nb(),c.Lb(6,"i",22),c.Nb(),c.Nb()}if(2&e){var i=c.Zb(2);c.yb(1),c.hc("ngClass",c.mc(2,_,!1===i.showChart)),c.yb(3),c.hc("ngClass",c.mc(4,_,!0===i.showChart))}}function W(e,t){if(1&e){var a=c.Pb();c.Ob(0,"div",35),c.Ob(1,"input-parameters-view",26),c.Vb("onRefreshData",(function(){return c.vc(a),c.Zb(2).refresh()}))("onChange",(function(){return c.vc(a),c.Zb(2).parameterChange()})),c.Nb(),c.Nb()}if(2&e){var i=c.Zb(2);c.yb(1),c.hc("hubKey",i.hubKey)("objectType",i.objectType)("objectKey",i.objectKey)("parameters",i.userParameters)("refreshEvent",i.refreshDataSubject.asObservable())}}function H(e,t){if(1&e){var a=c.Pb();c.Ob(0,"div"),c.Ob(1,"series-animate",27),c.Vb("hasChanged",(function(){return c.vc(a),c.Zb(2).hasChanged()}))("dataChange",(function(e){return c.vc(a),c.Zb(2).data=e})),c.Nb(),c.Nb()}if(2&e){var i=c.Zb(2);c.yb(1),c.hc("showEdit",!1)("showFrame",!1)("animateConfig",i.viewConfig.animateConfig)("columns",i.columns)("baseData",i.baseData)("data",i.data)}}function $(e,t){if(1&e&&(c.Ob(0,"div",30),c.Dc(1,q,7,6,"div",31),c.Dc(2,W,2,5,"div",32),c.Dc(3,H,2,6,"div",33),c.Nb()),2&e){var a=c.Zb();c.yb(1),c.hc("ngIf",null==a.viewConfig?null:a.viewConfig.chartConfig),c.yb(1),c.hc("ngIf",a.userParameters&&a.userParameters.length>0),c.yb(1),c.hc("ngIf",a.viewConfig&&a.baseData)}}function G(e,t){}function X(e,t){}function J(e,t){if(1&e&&(c.Ob(0,"dexih-table",40),c.Dc(1,G,0,0,"ng-template",null,41,c.Ec),c.Dc(3,X,0,0,"ng-template",null,42,c.Ec),c.Nb()),2&e){var a=c.Zb(2);c.hc("enableMultiSelect",!1)("enableSaveCsv",!0)("csvFileName",a.name)("enableFilter",!1)("columns",a.columns)("data",a.data)}}function Y(e,t){if(1&e&&c.Lb(0,"chart-view",43),2&e){var a=c.Zb(2);c.hc("responsive",!0)("columns",a.columns)("data",a.data)("config",a.viewConfig.chartConfig)}}function ee(e,t){if(1&e&&(c.Ob(0,"div",36),c.Ob(1,"div",37),c.Dc(2,J,5,6,"dexih-table",38),c.Dc(3,Y,1,4,"chart-view",39),c.Nb(),c.Nb()),2&e){var a=c.Zb();c.yb(2),c.hc("ngIf",!a.showChart),c.yb(1),c.hc("ngIf",a.showChart)}}var te,ae=((te=function(){function e(t,a){_classCallCheck(this,e),this.authService=t,this.route=a,this.showToolbar=!1,this.updateQueryParameters=!0,this.isMaximized=!1,this.onMaximize=new c.n,this.refreshDataSubject=new T.a,this.name="loading...",this.selectQuery=new o.V,this.showChart=!1,this.eViewType=o.rc,this.cancelToken=new s.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;try{this._subscription=Object(n.a)(this.authService.getSharedDataObject(this.hubKey,this.objectType,this.objectKey),this.route.queryParams).subscribe((function(t){var a=t[0],i=t[1];if(null!=a){e.inputColumns=a.inputColumns,e.tableColumns=a.outputColumns,e.parameters=a.parameters,e.userParameters=e.parameters;var n=i.p;if(n){var r,s=JSON.parse(n),o=_createForOfIteratorHelper(e.userParameters);try{for(o.s();!(r=o.n()).done;){var c=r.value,b=s[c.name];void 0!==b&&(c.value=b,0===c.rank&&(c.valueDesc=b))}}catch(u){o.e(u)}finally{o.f()}}}else e.parameters=[];e.refresh()}))}catch(t){this.authService.addUpdateNotification(t,!1)}}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe(),this.cancelToken.cancel()}},{key:"close",value:function(){this.authService.navigateUp()}},{key:"parameterChange",value:function(){if(this.updateQueryParameters&&this.userParameters.length>0){var e,t={},a=_createForOfIteratorHelper(this.userParameters);try{for(a.s();!(e=a.n()).done;){var i=e.value;t[i.name]=i.value}}catch(s){a.e(s)}finally{a.f()}if("URLSearchParams"in window){var n=new URLSearchParams(window.location.search);n.set("p",JSON.stringify(t));var r=window.location.pathname+"?"+n.toString();history.pushState(null,"",r)}}this.refresh()}},{key:"refresh",value:function(){var e=this;this.authService.previewData(this.hubKey,this.objectKey,this.objectType,this.inputColumns,this.selectQuery,this.parameters,this.parentParameters,this.cancelToken).then((function(t){e.refreshDataSubject.next(),e.columns=t.columns,e.baseData=t.data,e.name=t.name,e.viewConfig=t.viewConfig,e.viewConfig||(e.data=e.baseData),e.showChart=!(!e.viewConfig||e.viewConfig.viewType!==o.rc.Chart),t.status&&e.authService.addUpdateNotification(t.status,!1)})).catch((function(t){e.authService.addUpdateNotification(t,!1),e.baseData=[],e.data=[],e.name="failed"}))}},{key:"downloadData",value:function(e){var t=this,a=new o.W;a.objectKey=this.objectKey,a.objectType=this.objectType,a.hubKey=this.hubKey,a.inputColumns=this.inputColumns,a.parameters=this.parameters,a.parentParameters=this.parentParameters,a.query=this.selectQuery,this.authService.downloadData([a],!0,e,this.cancelToken).then((function(){var e=new s.e(!0,"The download task has started.",null,null);t.authService.addUpdateNotification(e,!1)})).catch((function(e){t.authService.addUpdateNotification(e,!1)}))}},{key:"maximize",value:function(){this.isMaximized=!0,this.onMaximize.emit(!0)}},{key:"minimize",value:function(){this.isMaximized=!1,this.onMaximize.emit(!1)}}]),e}()).\u0275fac=function(e){return new(e||te)(c.Kb(i.a),c.Kb(b.a))},te.\u0275cmp=c.Eb({type:te,selectors:[["preview-data"]],inputs:{objectType:"objectType",objectKey:"objectKey",hubKey:"hubKey",parentParameters:"parentParameters",showToolbar:"showToolbar",updateQueryParameters:"updateQueryParameters",isMaximized:"isMaximized"},outputs:{onMaximize:"onMaximize"},decls:4,vars:4,consts:[["class","side-menu",4,"ngIf"],["class","m-3",4,"ngIf"],["class","d-flex",4,"ngIf"],["class","h-100 box",4,"ngIf"],[1,"side-menu"],[1,"side-menu-content"],[1,"spin-icon"],[1,"fa","fa-cog","fa-spin"],[1,"side-menu-box"],[1,"bg-light","rounded","p-1"],[3,"download"],["class","btn-group btn-group-toggle ml-1","data-toggle","buttons","title","Table",4,"ngIf"],[1,"ml-1",3,"compact","click"],["class","ml-1","buttonClass","btn btn-primary","iconClass","fa fa-window-maximize text-white","tooltip","Maximize window",3,"click",4,"ngIf"],["class","ml-1","buttonClass","btn btn-primary","iconClass","fa fa-window-minimize text-white","tooltip","Minimize window",3,"click",4,"ngIf"],["class","m-1",4,"ngIf"],["data-toggle","buttons","title","Table",1,"btn-group","btn-group-toggle","ml-1"],[1,"btn","btn-primary",3,"ngClass"],["type","radio","name","options","value","table","autocomplete","off",3,"click"],[1,"fa","fa-table"],["title","Chart",1,"btn","btn-primary",3,"ngClass"],["type","radio","name","options","value","chart","autocomplete","off",3,"click"],[1,"fa","fa-bar-chart"],["buttonClass","btn btn-primary","iconClass","fa fa-window-maximize text-white","tooltip","Maximize window",1,"ml-1",3,"click"],["buttonClass","btn btn-primary","iconClass","fa fa-window-minimize text-white","tooltip","Minimize window",1,"ml-1",3,"click"],[1,"m-1"],[3,"hubKey","objectType","objectKey","parameters","refreshEvent","onRefreshData","onChange"],[3,"showEdit","showFrame","animateConfig","columns","baseData","data","hasChanged","dataChange"],[1,"m-3"],[1,"dexih-loader"],[1,"d-flex"],["class","align-self-start btn-group btn-sm btn-group-toggle","data-toggle","buttons","title","Table",4,"ngIf"],["class","mt-1",4,"ngIf"],[4,"ngIf"],["data-toggle","buttons","title","Table",1,"align-self-start","btn-group","btn-sm","btn-group-toggle"],[1,"mt-1"],[1,"h-100","box"],[1,"box-content",2,"height","90vh"],[3,"enableMultiSelect","enableSaveCsv","csvFileName","enableFilter","columns","data",4,"ngIf"],[3,"responsive","columns","data","config",4,"ngIf"],[3,"enableMultiSelect","enableSaveCsv","csvFileName","enableFilter","columns","data"],["actions",""],["tableHeader",""],[3,"responsive","columns","data","config"]],template:function(e,t){1&e&&(c.Dc(0,U,14,6,"div",0),c.Dc(1,B,3,0,"div",1),c.Dc(2,$,4,3,"div",2),c.Dc(3,ee,4,2,"div",3)),2&e&&(c.hc("ngIf",t.showToolbar),c.yb(1),c.hc("ngIf",!t.data),c.yb(1),c.hc("ngIf",!t.showToolbar&&t.baseData),c.yb(1),c.hc("ngIf",t.data))},directives:[f.t,m.a,h.s,f.q,h.f,z,E.a,d.a,R.a],encapsulation:2}),te),ie=a("Ljk9"),ne=a("l2bN");function re(e,t){if(1&e&&(c.Ob(0,"div",5),c.Ob(1,"div",6),c.Ob(2,"b"),c.Fc(3),c.Nb(),c.Nb(),c.Nb()),2&e){var a=c.Zb();c.yb(3),c.Gc(a.item.name)}}function se(e,t){if(1&e&&(c.Ob(0,"div",5),c.Ob(1,"div",7),c.Lb(2,"ngx-md",8),c.Nb(),c.Nb()),2&e){var a=c.Zb();c.yb(2),c.hc("data",a.item.description)}}var oe,ce=((oe=function(){function e(){_classCallCheck(this,e),this.isMaximized=!1,this.onMaximize=new c.n,this.eDataObjectType=o.lb}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"maximize",value:function(e){this.onMaximize.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||oe)},oe.\u0275cmp=c.Eb({type:oe,selectors:[["preview-dashboard-item"]],inputs:{hubKey:"hubKey",item:"item",refreshData:"refreshData",isMaximized:"isMaximized",parentParameters:"parentParameters"},outputs:{onMaximize:"onMaximize"},decls:7,vars:7,consts:[[1,"box"],["class","box-header",4,"ngIf"],["DexihMessage",""],[1,"box-content"],[3,"hubKey","parentParameters","objectType","objectKey","showToolbar","onMaximize"],[1,"box-header"],[1,"p-3","bg-secondary","text-white"],[1,"m-1"],[3,"data"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Dc(1,re,4,1,"div",1),c.Dc(2,se,3,1,"div",1),c.Lb(3,"dexih-message",null,2),c.Ob(5,"div",3),c.Ob(6,"preview-data",4),c.Vb("onMaximize",(function(e){return t.maximize(e)})),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.yb(1),c.hc("ngIf",t.item.header),c.yb(1),c.hc("ngIf",t.item.description),c.yb(4),c.hc("hubKey",t.hubKey)("parentParameters",t.parentParameters)("objectType",t.eDataObjectType.DashboardItem)("objectKey",t.item.key)("showToolbar",!0))},directives:[f.t,l.a,ae,ne.a],styles:[".box[_ngcontent-%COMP%]{display:flex;flex-flow:column;height:100%}.box[_ngcontent-%COMP%]   .box-header[_ngcontent-%COMP%]{flex:0 1 auto}.box[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]{flex:1 1 auto}"]}),oe),be=["DexihMessage"];function ue(e,t){if(1&e){var a=c.Pb();c.Ob(0,"dexih-button-refresh",7),c.Vb("click",(function(){return c.vc(a),c.Zb().refresh()})),c.Nb(),c.Ob(1,"dexih-button-edit",8),c.Vb("click",(function(){return c.vc(a),c.Zb().edit()})),c.Nb()}}function le(e,t){if(1&e){var a=c.Pb();c.Ob(0,"div",9),c.Ob(1,"input-parameters-view",10),c.Vb("onRefreshData",(function(){return c.vc(a),c.Zb().refresh()}))("onChange",(function(){return c.vc(a),c.Zb().parameterChange()})),c.Nb(),c.Nb()}if(2&e){var i=c.Zb();c.yb(1),c.hc("hubKey",i.hubKey)("objectType",i.eDataObjectType.Dashboard)("objectKey",i.dashboardKey)("parameters",i.parameters)("refreshEvent",i.refreshDataSubject.asObservable())}}var he=function(e,t,a,i,n){return{x:e,y:t,cols:a,rows:i,control:n}},fe=function(e){return{maximize:e}};function de(e,t){if(1&e){var a=c.Pb();c.Ob(0,"gridster-item",14),c.Ob(1,"preview-dashboard-item",15),c.Vb("onMaximize",(function(e){c.vc(a);var i=t.index;return c.Zb(2).maximize(e,i)})),c.Nb(),c.Nb()}if(2&e){var i=t.$implicit,n=t.index,r=c.Zb(2);c.hc("item",c.qc(6,he,i.x,i.y,i.cols,i.rows,i))("ngClass",c.mc(12,fe,n===r.maximizedIndex))("hidden",r.maximizedIndex>=0&&n!==r.maximizedIndex),c.yb(1),c.hc("hubKey",r.hubKey)("item",i)("parentParameters",r.parameters)}}function me(e,t){if(1&e&&(c.Ob(0,"gridster",11,12),c.Dc(2,de,2,14,"gridster-item",13),c.Nb()),2&e){var a=c.Zb();c.hc("options",a.options),c.yb(2),c.hc("ngForOf",a.dashboard.dexihDashboardItems)}}var ve,pe=((ve=function(){function e(t,a,i){_classCallCheck(this,e),this.authService=t,this.router=a,this.route=i,this.refreshDataSubject=new T.a,this.name="loading...",this.eDataObjectType=o.lb,this.dashboard=null,this.cancelToken=new s.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;try{this._subscription=Object(n.a)(this.route.params,this.authService.getSharedDataIndex("",[],50,!1)).subscribe((function(t){var a=t[0];e.hubKey=+a.hubKey,e.dashboardKey=+a.dashboardKey,e.refresh()}))}catch(t){this.dexihMessage.addMessage(t)}}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe(),this.cancelToken.cancel()}},{key:"close",value:function(){this.authService.navigateUp()}},{key:"parameterChange",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;this.authService.getDashboard(this.hubKey,this.dashboardKey).then((function(t){e.refreshDataSubject.next(),e.setOptions(t),e.dashboard=t,e.name=t.name,e.parameters||(e.parameters=t.parameters)})).catch((function(t){e.dexihMessage.addMessage(t),e.dashboard=null}))}},{key:"setOptions",value:function(e){var t=this;this.options={gridType:ie.c.ScrollVertical,compactType:ie.a.None,margin:5,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,mobileBreakpoint:640,minCols:e.minCols,maxCols:e.maxCols,minRows:e.minRows,maxRows:e.maxRows,maxItemCols:100,minItemCols:1,maxItemRows:100,minItemRows:1,maxItemArea:2500,minItemArea:1,defaultItemCols:2,defaultItemRows:2,fixedColWidth:105,fixedRowHeight:105,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,scrollSensitivity:10,scrollSpeed:20,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{enabled:!1},resizable:{enabled:!1},swap:!1,pushItems:!0,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:ie.b.None,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,itemChangeCallback:function(e,a){t.itemResize(e,a)},itemResizeCallback:function(e,a){t.itemResize(e,a)},itemInitCallback:function(e,a){t.itemResize(e,a)}}}},{key:"maximize",value:function(e,t){this.maximizedIndex=e?t:-1}},{key:"itemResize",value:function(e,t){}},{key:"edit",value:function(){this.router.navigate(["hub",this.hubKey,"dashboards","dashboard-edit",this.dashboardKey])}}]),e}()).\u0275fac=function(e){return new(e||ve)(c.Kb(i.a),c.Kb(b.e),c.Kb(b.a))},ve.\u0275cmp=c.Eb({type:ve,selectors:[["preview-dashboard"]],viewQuery:function(e,t){var a;1&e&&c.Bc(be,!0),2&e&&c.rc(a=c.Wb())&&(t.dexihMessage=a.first)},decls:10,vars:4,consts:[[1,"container-fluid"],["DexihMessage",""],["iconClass","fa fa-lg fa-fw fa-table",3,"title","showCloseButton","close"],["header",""],["class","m-3",4,"ngIf"],[2,"height","800px"],[3,"ngIf"],["text","Reload",3,"click"],[1,"ml-1",3,"click"],[1,"m-3"],[3,"hubKey","objectType","objectKey","parameters","refreshEvent","onRefreshData","onChange"],[3,"options"],["gridster",""],[3,"item","ngClass","hidden",4,"ngFor","ngForOf"],[3,"item","ngClass","hidden"],[3,"hubKey","item","parentParameters","onMaximize"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Lb(1,"dexih-message",null,1),c.Ob(3,"dexih-widget",2),c.Vb("close",(function(){return t.close()})),c.Dc(4,ue,2,0,"ng-template",null,3,c.Ec),c.Dc(6,le,2,5,"div",4),c.Ob(7,"div"),c.Ob(8,"div",5),c.Dc(9,me,3,2,"ng-template",6),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.yb(3),c.hc("title","Preview "+t.name)("showCloseButton",!0),c.yb(3),c.hc("ngIf",t.parameters),c.yb(3),c.hc("ngIf",t.dashboard))},directives:[l.a,h.P,f.t,h.s,h.j,z,ie.d,f.s,ie.e,f.q,ce],styles:[".maximize[_ngcontent-%COMP%]{height:calc(100%)!important;width:calc(100%)!important;top:0!important;left:0!important;right:0!important;bottom:0!important;transform:translateZ(0)!important;z-index:999}"]}),ve),ge=["DexihMessage"],ye=["PreviewData"];function we(e,t){if(1&e){var a=c.Pb();c.Ob(0,"dexih-button-refresh",7),c.Vb("click",(function(){return c.vc(a),c.Zb(2).previewData.refresh()})),c.Nb(),c.Ob(1,"download-button",8),c.Vb("download",(function(e){return c.vc(a),c.Zb(2).previewData.downloadData(e)})),c.Nb(),c.Ob(2,"dexih-button-edit",9),c.Vb("click",(function(){return c.vc(a),c.Zb(2).edit()})),c.Nb()}}function Ce(e,t){if(1&e){var a=c.Pb();c.Ob(0,"div",2),c.Ob(1,"dexih-widget",3),c.Vb("close",(function(){return c.vc(a),c.Zb().close()})),c.Dc(2,we,3,0,"ng-template",null,4,c.Ec),c.Lb(4,"preview-data",5,6),c.Nb(),c.Nb()}if(2&e){var i=c.Zb();c.yb(1),c.hc("title","Preview "+i.title)("showCloseButton",!0)("padding",!1),c.yb(3),c.hc("hubKey",i.hubKey)("objectType",i.objectType)("objectKey",i.objectKey)("parameters",i.parameters)("updateQueryParameters",!0)}}function xe(e,t){if(1&e&&(c.Ob(0,"div"),c.Lb(1,"preview-data",5),c.Nb()),2&e){var a=c.Zb();c.yb(1),c.hc("hubKey",a.hubKey)("objectType",a.objectType)("objectKey",a.objectKey)("parameters",a.parameters)("updateQueryParameters",!1)}}var ke,Oe=((ke=function(){function e(t,a,i){_classCallCheck(this,e),this.authService=t,this.route=a,this.router=i,this.embed=!1,this.title=""}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;try{this._subscription=Object(n.a)(this.route.params,this.route.queryParams).subscribe((function(t){var a=t[0],i=t[1];e.hubKey=+a.hubKey,e.objectType=+a.objectType,e.objectKey=+a.objectKey,"true"===i.embed&&(e.embed=!0)}))}catch(t){this.dexihMessage.addMessage(t)}}},{key:"ngOnDestroy",value:function(){this._subscription&&this._subscription.unsubscribe()}},{key:"ngAfterContentChecked",value:function(){this.previewData&&(this.title=this.previewData.name)}},{key:"close",value:function(){this.authService.navigateUp()}},{key:"edit",value:function(){switch(this.objectType){case o.lb.Datalink:this.router.navigate(["hub",this.hubKey,"datalinks","datalink-edit","edit",this.objectKey]);break;case o.lb.Table:this.router.navigate(["hub",this.hubKey,"tables","table-edit",this.objectKey]);break;case o.lb.View:this.router.navigate(["hub",this.hubKey,"views","view-edit",this.objectKey])}}}]),e}()).\u0275fac=function(e){return new(e||ke)(c.Kb(i.a),c.Kb(b.a),c.Kb(b.e))},ke.\u0275cmp=c.Eb({type:ke,selectors:[["preview"]],viewQuery:function(e,t){var a;1&e&&(c.Bc(ge,!0),c.Kc(ye,!0)),2&e&&(c.rc(a=c.Wb())&&(t.dexihMessage=a.first),c.rc(a=c.Wb())&&(t.previewData=a.first))},decls:2,vars:2,consts:[["class","container-fluid",4,"ngIf"],[4,"ngIf"],[1,"container-fluid"],["iconClass","fa fa-lg fa-fw fa-table",3,"title","showCloseButton","padding","close"],["header",""],[3,"hubKey","objectType","objectKey","parameters","updateQueryParameters"],["PreviewData",""],["text","Reload",1,"mr-1",3,"click"],[1,"ml-1",3,"download"],[1,"ml-1",3,"click"]],template:function(e,t){1&e&&(c.Dc(0,Ce,6,8,"div",0),c.Dc(1,xe,2,5,"div",1)),2&e&&(c.hc("ngIf",!t.embed),c.yb(1),c.hc("ngIf",t.embed))},directives:[f.t,h.P,ae,h.s,m.a,h.j],encapsulation:2}),ke)}}]);